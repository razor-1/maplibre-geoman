{"version":3,"file":"maplibre-geoman.es.js","sources":["../src/assets/images/markers/default-marker.png","../src/core/constants.ts","../src/core/controls/defaults.ts","../src/assets/images/controls/change.svg","../src/assets/images/controls/circle-marker.svg","../src/assets/images/controls/circle.svg","../src/assets/images/controls/ellipse.svg","../src/assets/images/controls/drag.svg","../src/assets/images/controls/line.svg","../src/assets/images/controls/marker.svg","../src/assets/images/controls/polygon.svg","../src/assets/images/controls/rectangle.svg","../src/assets/images/controls/remove.svg","../src/assets/images/controls/rotate.svg","../src/assets/images/controls/snap-guides.svg","../src/assets/images/controls/text_marker.svg","../src/assets/images/controls2/auto-trace.svg","../src/assets/images/controls2/copy.svg","../src/assets/images/controls2/custom-shape.svg","../src/assets/images/controls2/cut.svg","../src/assets/images/controls2/difference.svg","../src/assets/images/controls2/freehand.svg","../src/assets/images/controls2/geofencing.svg","../src/assets/images/controls2/lasso.svg","../src/assets/images/controls2/line-simplification.svg","../src/assets/images/controls2/measurements.svg","../src/assets/images/controls2/mouse.svg","../src/assets/images/controls2/pin.svg","../src/assets/images/controls2/scale.svg","../src/assets/images/controls2/snap.svg","../src/assets/images/controls2/split.svg","../src/assets/images/controls2/union.svg","../src/assets/images/controls2/zoom-to-features.svg","../src/core/options/icons.ts","../src/core/options/layers/shapes/circle-marker.ts","../src/core/options/layers/shapes/control-marker.ts","../src/core/options/layers/shapes/line.ts","../src/core/options/layers/shapes/marker.ts","../src/core/options/layers/shapes/polygon.ts","../src/core/options/layers/shapes/secondary-marker.ts","../src/core/options/layers/shapes/snap-guides.ts","../src/core/features/constants.ts","../src/core/options/layers/shapes/text-marker.ts","../src/core/options/layers/variables.ts","../src/core/options/layers/style.ts","../src/assets/images/markers/default-marker.svg","../src/assets/images/markers/default-shape-marker.svg","../src/core/options/defaults/free.ts","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isSymbol.js","../node_modules/lodash-es/_arrayMap.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/_baseToString.js","../node_modules/lodash-es/_trimmedEndIndex.js","../node_modules/lodash-es/_baseTrim.js","../node_modules/lodash-es/isObject.js","../node_modules/lodash-es/toNumber.js","../node_modules/lodash-es/identity.js","../node_modules/lodash-es/isFunction.js","../node_modules/lodash-es/_coreJsData.js","../node_modules/lodash-es/_isMasked.js","../node_modules/lodash-es/_toSource.js","../node_modules/lodash-es/_baseIsNative.js","../node_modules/lodash-es/_getValue.js","../node_modules/lodash-es/_getNative.js","../node_modules/lodash-es/_WeakMap.js","../node_modules/lodash-es/_baseCreate.js","../node_modules/lodash-es/_apply.js","../node_modules/lodash-es/noop.js","../node_modules/lodash-es/_copyArray.js","../node_modules/lodash-es/_shortOut.js","../node_modules/lodash-es/constant.js","../node_modules/lodash-es/_defineProperty.js","../node_modules/lodash-es/_baseSetToString.js","../node_modules/lodash-es/_setToString.js","../node_modules/lodash-es/_arrayEach.js","../node_modules/lodash-es/_baseFindIndex.js","../node_modules/lodash-es/_baseIsNaN.js","../node_modules/lodash-es/_strictIndexOf.js","../node_modules/lodash-es/_baseIndexOf.js","../node_modules/lodash-es/_arrayIncludes.js","../node_modules/lodash-es/_isIndex.js","../node_modules/lodash-es/_baseAssignValue.js","../node_modules/lodash-es/eq.js","../node_modules/lodash-es/_assignValue.js","../node_modules/lodash-es/_copyObject.js","../node_modules/lodash-es/_overRest.js","../node_modules/lodash-es/_baseRest.js","../node_modules/lodash-es/isLength.js","../node_modules/lodash-es/isArrayLike.js","../node_modules/lodash-es/_isIterateeCall.js","../node_modules/lodash-es/_createAssigner.js","../node_modules/lodash-es/_isPrototype.js","../node_modules/lodash-es/_baseTimes.js","../node_modules/lodash-es/_baseIsArguments.js","../node_modules/lodash-es/isArguments.js","../node_modules/lodash-es/stubFalse.js","../node_modules/lodash-es/isBuffer.js","../node_modules/lodash-es/_baseIsTypedArray.js","../node_modules/lodash-es/_baseUnary.js","../node_modules/lodash-es/_nodeUtil.js","../node_modules/lodash-es/isTypedArray.js","../node_modules/lodash-es/_arrayLikeKeys.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/_nativeKeys.js","../node_modules/lodash-es/_baseKeys.js","../node_modules/lodash-es/keys.js","../node_modules/lodash-es/_nativeKeysIn.js","../node_modules/lodash-es/_baseKeysIn.js","../node_modules/lodash-es/keysIn.js","../node_modules/lodash-es/_isKey.js","../node_modules/lodash-es/_nativeCreate.js","../node_modules/lodash-es/_hashClear.js","../node_modules/lodash-es/_hashDelete.js","../node_modules/lodash-es/_hashGet.js","../node_modules/lodash-es/_hashHas.js","../node_modules/lodash-es/_hashSet.js","../node_modules/lodash-es/_Hash.js","../node_modules/lodash-es/_listCacheClear.js","../node_modules/lodash-es/_assocIndexOf.js","../node_modules/lodash-es/_listCacheDelete.js","../node_modules/lodash-es/_listCacheGet.js","../node_modules/lodash-es/_listCacheHas.js","../node_modules/lodash-es/_listCacheSet.js","../node_modules/lodash-es/_ListCache.js","../node_modules/lodash-es/_Map.js","../node_modules/lodash-es/_mapCacheClear.js","../node_modules/lodash-es/_isKeyable.js","../node_modules/lodash-es/_getMapData.js","../node_modules/lodash-es/_mapCacheDelete.js","../node_modules/lodash-es/_mapCacheGet.js","../node_modules/lodash-es/_mapCacheHas.js","../node_modules/lodash-es/_mapCacheSet.js","../node_modules/lodash-es/_MapCache.js","../node_modules/lodash-es/memoize.js","../node_modules/lodash-es/_memoizeCapped.js","../node_modules/lodash-es/_stringToPath.js","../node_modules/lodash-es/toString.js","../node_modules/lodash-es/_castPath.js","../node_modules/lodash-es/_toKey.js","../node_modules/lodash-es/_baseGet.js","../node_modules/lodash-es/get.js","../node_modules/lodash-es/_arrayPush.js","../node_modules/lodash-es/_isFlattenable.js","../node_modules/lodash-es/_baseFlatten.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/isPlainObject.js","../node_modules/lodash-es/_stackClear.js","../node_modules/lodash-es/_stackDelete.js","../node_modules/lodash-es/_stackGet.js","../node_modules/lodash-es/_stackHas.js","../node_modules/lodash-es/_stackSet.js","../node_modules/lodash-es/_Stack.js","../node_modules/lodash-es/_cloneBuffer.js","../node_modules/lodash-es/_arrayFilter.js","../node_modules/lodash-es/stubArray.js","../node_modules/lodash-es/_getSymbols.js","../node_modules/lodash-es/_baseGetAllKeys.js","../node_modules/lodash-es/_getAllKeys.js","../node_modules/lodash-es/_DataView.js","../node_modules/lodash-es/_Promise.js","../node_modules/lodash-es/_Set.js","../node_modules/lodash-es/_getTag.js","../node_modules/lodash-es/_initCloneArray.js","../node_modules/lodash-es/_Uint8Array.js","../node_modules/lodash-es/_cloneArrayBuffer.js","../node_modules/lodash-es/_cloneDataView.js","../node_modules/lodash-es/_cloneRegExp.js","../node_modules/lodash-es/_cloneSymbol.js","../node_modules/lodash-es/_cloneTypedArray.js","../node_modules/lodash-es/_initCloneByTag.js","../node_modules/lodash-es/_initCloneObject.js","../node_modules/lodash-es/_baseIsMap.js","../node_modules/lodash-es/isMap.js","../node_modules/lodash-es/_baseIsSet.js","../node_modules/lodash-es/isSet.js","../node_modules/lodash-es/_baseClone.js","../node_modules/lodash-es/cloneDeep.js","../node_modules/lodash-es/_setCacheAdd.js","../node_modules/lodash-es/_setCacheHas.js","../node_modules/lodash-es/_SetCache.js","../node_modules/lodash-es/_arraySome.js","../node_modules/lodash-es/_cacheHas.js","../node_modules/lodash-es/_equalArrays.js","../node_modules/lodash-es/_mapToArray.js","../node_modules/lodash-es/_setToArray.js","../node_modules/lodash-es/_equalByTag.js","../node_modules/lodash-es/_equalObjects.js","../node_modules/lodash-es/_baseIsEqualDeep.js","../node_modules/lodash-es/_baseIsEqual.js","../node_modules/lodash-es/_baseIsMatch.js","../node_modules/lodash-es/_isStrictComparable.js","../node_modules/lodash-es/_getMatchData.js","../node_modules/lodash-es/_matchesStrictComparable.js","../node_modules/lodash-es/_baseMatches.js","../node_modules/lodash-es/_baseHasIn.js","../node_modules/lodash-es/_hasPath.js","../node_modules/lodash-es/hasIn.js","../node_modules/lodash-es/_baseMatchesProperty.js","../node_modules/lodash-es/_baseProperty.js","../node_modules/lodash-es/_basePropertyDeep.js","../node_modules/lodash-es/property.js","../node_modules/lodash-es/_baseIteratee.js","../node_modules/lodash-es/_arrayAggregator.js","../node_modules/lodash-es/_createBaseFor.js","../node_modules/lodash-es/_baseFor.js","../node_modules/lodash-es/_baseForOwn.js","../node_modules/lodash-es/_createBaseEach.js","../node_modules/lodash-es/_baseEach.js","../node_modules/lodash-es/_baseAggregator.js","../node_modules/lodash-es/_createAggregator.js","../node_modules/lodash-es/countBy.js","../node_modules/lodash-es/now.js","../node_modules/lodash-es/debounce.js","../node_modules/lodash-es/_assignMergeValue.js","../node_modules/lodash-es/isArrayLikeObject.js","../node_modules/lodash-es/_safeGet.js","../node_modules/lodash-es/toPlainObject.js","../node_modules/lodash-es/_baseMergeDeep.js","../node_modules/lodash-es/_baseMerge.js","../node_modules/lodash-es/mergeWith.js","../node_modules/lodash-es/_arrayIncludesWith.js","../node_modules/lodash-es/_baseMap.js","../node_modules/lodash-es/_baseValues.js","../node_modules/lodash-es/values.js","../node_modules/lodash-es/_baseIntersection.js","../node_modules/lodash-es/_castArrayLikeObject.js","../node_modules/lodash-es/intersection.js","../node_modules/lodash-es/isEqual.js","../node_modules/lodash-es/keyBy.js","../node_modules/lodash-es/merge.js","../node_modules/lodash-es/_baseSet.js","../node_modules/lodash-es/_baseSortBy.js","../node_modules/lodash-es/_compareAscending.js","../node_modules/lodash-es/_compareMultiple.js","../node_modules/lodash-es/_baseOrderBy.js","../node_modules/lodash-es/set.js","../node_modules/lodash-es/sortBy.js","../node_modules/lodash-es/throttle.js","../node_modules/lodash-es/_createSet.js","../node_modules/lodash-es/_baseUniq.js","../node_modules/lodash-es/uniqWith.js","../node_modules/loglevel/lib/loglevel.js","../src/utils/collections.ts","../src/core/options/defaults/index.ts","../node_modules/esm-env/false.js","../node_modules/svelte/src/internal/shared/utils.js","../node_modules/svelte/src/internal/client/constants.js","../node_modules/svelte/src/internal/client/reactivity/equality.js","../node_modules/svelte/src/internal/shared/errors.js","../node_modules/svelte/src/internal/client/errors.js","../node_modules/svelte/src/internal/flags/index.js","../node_modules/svelte/src/constants.js","../node_modules/svelte/src/internal/client/context.js","../node_modules/svelte/src/internal/client/dom/task.js","../node_modules/svelte/src/internal/client/warnings.js","../node_modules/svelte/src/internal/client/proxy.js","../node_modules/svelte/src/internal/client/dom/operations.js","../node_modules/svelte/src/internal/client/error-handling.js","../node_modules/svelte/src/internal/client/reactivity/status.js","../node_modules/svelte/src/internal/client/reactivity/utils.js","../node_modules/svelte/src/internal/client/reactivity/batch.js","../node_modules/svelte/src/reactivity/create-subscriber.js","../node_modules/svelte/src/internal/client/dom/blocks/boundary.js","../node_modules/svelte/src/internal/client/reactivity/async.js","../node_modules/svelte/src/internal/client/reactivity/deriveds.js","../node_modules/svelte/src/internal/client/reactivity/sources.js","../node_modules/svelte/src/internal/client/dom/elements/misc.js","../node_modules/svelte/src/internal/client/dom/elements/bindings/shared.js","../node_modules/svelte/src/internal/client/runtime.js","../node_modules/svelte/src/internal/client/reactivity/effects.js","../node_modules/svelte/src/utils.js","../node_modules/svelte/src/internal/client/dom/elements/events.js","../node_modules/svelte/src/internal/client/dom/reconciler.js","../node_modules/svelte/src/internal/client/dom/template.js","../node_modules/svelte/src/internal/client/render.js","../node_modules/svelte/src/internal/client/dom/blocks/branches.js","../node_modules/svelte/src/internal/client/dom/blocks/if.js","../node_modules/svelte/src/internal/client/dom/blocks/each.js","../node_modules/svelte/src/internal/client/dom/blocks/html.js","../node_modules/svelte/src/internal/client/timing.js","../node_modules/svelte/src/internal/client/loop.js","../node_modules/svelte/src/internal/client/dom/elements/transitions.js","../node_modules/clsx/dist/clsx.mjs","../node_modules/svelte/src/internal/shared/attributes.js","../node_modules/svelte/src/internal/client/dom/elements/class.js","../node_modules/svelte/src/internal/client/dom/elements/bindings/select.js","../node_modules/svelte/src/internal/client/dom/elements/attributes.js","../node_modules/svelte/src/internal/client/dom/elements/bindings/input.js","../node_modules/svelte/src/internal/client/reactivity/store.js","../node_modules/svelte/src/index-client.js","../node_modules/svelte/src/store/utils.js","../node_modules/svelte/src/store/shared/index.js","../src/core/controls/components/controls-store.ts","../node_modules/svelte/src/version.js","../node_modules/svelte/src/internal/disclose-version.js","../src/assets/images/controls2/caret-down.svg","../src/assets/images/controls2/caret-up.svg","../src/core/controls/components/action-option.svelte","../src/core/controls/components/sub-action.svelte","../src/core/controls/components/control-menu.svelte","../node_modules/dompurify/dist/purify.es.mjs","../src/core/controls/components/action-control.svelte","../node_modules/svelte/src/transition/index.js","../src/core/controls/components/gm-controls.svelte","../src/core/map/base/control.ts","../src/utils/typing.ts","../src/core/controls/index.ts","../src/core/events/forwarder.ts","../src/utils/guards/events/control.ts","../src/utils/guards/events/index.ts","../src/core/events/bus.ts","../src/core/events/listeners/base.ts","../src/core/events/listeners/controls.ts","../src/modes/constants.ts","../src/utils/guards/geojson.ts","../src/core/features/validators.ts","../src/core/map/base/marker.ts","../node_modules/@turf/helpers/dist/esm/index.js","../node_modules/@turf/meta/dist/esm/index.js","../node_modules/@turf/bbox/dist/esm/index.js","../node_modules/@turf/invariant/dist/esm/index.js","../node_modules/@turf/destination/dist/esm/index.js","../node_modules/@turf/circle/dist/esm/index.js","../node_modules/@turf/centroid/dist/esm/index.js","../node_modules/@turf/rhumb-bearing/dist/esm/index.js","../node_modules/@turf/rhumb-distance/dist/esm/index.js","../node_modules/@turf/rhumb-destination/dist/esm/index.js","../node_modules/@turf/clone/dist/esm/index.js","../node_modules/@turf/transform-rotate/dist/esm/index.js","../src/turf/ellipse.ts","../node_modules/@turf/bearing/dist/esm/index.js","../node_modules/@turf/distance/dist/esm/index.js","../node_modules/@turf/polygon-to-line/dist/esm/index.js","../src/utils/geojson.ts","../src/core/features/feature-data.ts","../src/utils/guards/events/helper.ts","../src/modes/base-action.ts","../src/utils/guards/events/draw.ts","../src/modes/draw/base.ts","../src/modes/draw/base-circle.ts","../src/modes/draw/circle-marker.ts","../src/utils/behavior.ts","../src/types/map/index.ts","../src/utils/guards/map.ts","../src/modes/draw/circle.ts","../src/modes/helpers/base.ts","../src/utils/guards/interfaces.ts","../node_modules/@turf/line-to-polygon/dist/esm/index.js","../src/utils/draw/line-drawer.ts","../src/modes/draw/line.ts","../src/modes/draw/marker.ts","../node_modules/@turf/combine/dist/esm/index.js","../node_modules/rbush/node_modules/quickselect/index.js","../node_modules/rbush/index.js","../node_modules/@turf/area/dist/esm/index.js","../node_modules/robust-predicates/esm/util.js","../node_modules/robust-predicates/esm/orient2d.js","../node_modules/point-in-polygon-hao/dist/esm/index.js","../node_modules/@turf/boolean-point-in-polygon/dist/esm/index.js","../node_modules/@turf/unkink-polygon/dist/esm/index.js","../src/modes/draw/polygon.ts","../src/modes/draw/rectangle.ts","../src/modes/draw/text-marker.ts","../src/modes/draw/ellipse.ts","../src/modes/draw/index.ts","../src/utils/guards/events/edit.ts","../src/utils/guards/modes.ts","../src/core/events/listeners/draw.ts","../src/modes/edit/base.ts","../node_modules/@turf/center/dist/esm/index.js","../node_modules/@turf/jsts/dist/jsts.min.js","../node_modules/d3-geo/src/adder.js","../node_modules/d3-geo/src/math.js","../node_modules/d3-geo/src/noop.js","../node_modules/d3-geo/src/stream.js","../node_modules/d3-geo/src/area.js","../node_modules/d3-geo/src/cartesian.js","../node_modules/d3-geo/src/bounds.js","../node_modules/d3-geo/src/compose.js","../node_modules/d3-geo/src/rotation.js","../node_modules/d3-geo/src/circle.js","../node_modules/d3-geo/src/clip/buffer.js","../node_modules/d3-geo/src/clip/line.js","../node_modules/d3-geo/src/pointEqual.js","../node_modules/d3-geo/src/clip/polygon.js","../node_modules/d3-array/src/ascending.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-array/src/bisect.js","../node_modules/d3-array/src/merge.js","../node_modules/d3-geo/src/clip/extent.js","../node_modules/d3-geo/src/polygonContains.js","../node_modules/d3-geo/src/length.js","../node_modules/d3-geo/src/identity.js","../node_modules/d3-geo/src/path/area.js","../node_modules/d3-geo/src/path/bounds.js","../node_modules/d3-geo/src/path/measure.js","../node_modules/d3-geo/src/clip/index.js","../node_modules/d3-geo/src/clip/antimeridian.js","../node_modules/d3-geo/src/clip/circle.js","../node_modules/d3-geo/src/transform.js","../node_modules/d3-geo/src/projection/fit.js","../node_modules/d3-geo/src/projection/resample.js","../node_modules/d3-geo/src/projection/index.js","../node_modules/d3-geo/src/projection/azimuthal.js","../node_modules/d3-geo/src/projection/azimuthalEqualArea.js","../node_modules/d3-geo/src/projection/azimuthalEquidistant.js","../node_modules/d3-geo/src/projection/equirectangular.js","../node_modules/@turf/buffer/dist/esm/index.js","../node_modules/sweepline-intersections/dist/sweeplineIntersections.esm.js","../node_modules/@turf/line-intersect/dist/esm/index.js","../node_modules/@turf/boolean-clockwise/dist/esm/index.js","../node_modules/@turf/rewind/dist/esm/index.js","../tests/types.ts","../src/utils/features.ts","../src/modes/edit/base-drag.ts","../src/utils/number.ts","../src/modes/edit/change.ts","../node_modules/@turf/boolean-disjoint/dist/esm/index.js","../node_modules/@turf/boolean-intersects/dist/esm/index.js","../node_modules/bignumber.js/bignumber.mjs","../node_modules/splaytree-ts/dist/esm/index.js","../node_modules/polyclip-ts/dist/esm/index.js","../node_modules/@turf/difference/dist/esm/index.js","../node_modules/@turf/geojson-rbush/dist/esm/index.js","../node_modules/@turf/truncate/dist/esm/index.js","../node_modules/@turf/line-segment/dist/esm/index.js","../node_modules/@turf/nearest-point-on-line/dist/esm/index.js","../node_modules/@turf/line-split/dist/esm/index.js","../src/modes/edit/cut.ts","../src/modes/edit/delete.ts","../src/modes/edit/drag.ts","../src/modes/edit/rotate.ts","../src/modes/edit/index.ts","../src/core/events/listeners/edit.ts","../src/modes/helpers/shape-markers.ts","../src/modes/helpers/snapping.ts","../src/modes/helpers/zoom-to-features.ts","../src/modes/helpers/index.ts","../src/core/events/listeners/helper.ts","../src/core/events/index.ts","../src/core/features/source-update-manager.ts","../src/core/map/base/source.ts","../src/core/features/index.ts","../src/core/map/base/index.ts","../src/core/map/base/layer.ts","../src/core/map/maplibre/layer.ts","../src/core/map/maplibre/marker.ts","../src/core/map/base/popup.ts","../src/core/map/maplibre/popup.ts","../src/core/map/maplibre/source.ts","../src/core/map/maplibre/types/events.ts","../src/core/map/maplibre/guards.ts","../src/core/map/maplibre/index.ts","../src/core/map/index.ts","../src/core/options/utils.ts","../src/core/options/index.ts","../src/utils/draw/marker-pointer.ts","../src/core/options/shapes.ts","../src/utils/guards/events/features.ts","../src/types/events/mode.ts","../src/utils/guards/events/mode.ts","../src/utils/guards/index.ts","../node_modules/@turf/union/dist/esm/index.js","../src/modes/edit/base-group.ts","../src/main.ts"],"sourcesContent":["export default \"data:image/png;base64,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\"","import type { Options } from '../../vite.config.ts';\n\nlet geomanVersion: Options['GmVersion'] | null;\ntry {\n  geomanVersion = __GEOMAN_VERSION__;\n} catch {\n  geomanVersion = (process.env.VITE_GEOMAN_VERSION as Options['GmVersion']) || null;\n}\n\nexport const GM_PREFIX = 'gm' as const;\nexport const GM_SYSTEM_PREFIX = `_${GM_PREFIX}` as const;\nexport const IS_PRO = geomanVersion === 'pro';\n","import type { SystemControls } from '@/main.ts';\n\nexport const systemControls: SystemControls = {\n  draw: {\n    marker: {\n      type: 'draw',\n      eventType: 'toggle',\n      targetMode: 'marker',\n      settings: {\n        exclusive: true,\n      },\n    },\n    circle_marker: {\n      type: 'draw',\n      eventType: 'toggle',\n      targetMode: 'circle_marker',\n      settings: {\n        exclusive: true,\n      },\n    },\n    text_marker: {\n      type: 'draw',\n      eventType: 'toggle',\n      targetMode: 'text_marker',\n      settings: {\n        exclusive: true,\n      },\n    },\n    circle: {\n      type: 'draw',\n      eventType: 'toggle',\n      targetMode: 'circle',\n      settings: {\n        exclusive: true,\n      },\n    },\n    ellipse: {\n      type: 'draw',\n      eventType: 'toggle',\n      targetMode: 'ellipse',\n      settings: {\n        exclusive: true,\n      },\n    },\n    line: {\n      type: 'draw',\n      eventType: 'toggle',\n      targetMode: 'line',\n      settings: {\n        exclusive: true,\n      },\n    },\n    rectangle: {\n      type: 'draw',\n      eventType: 'toggle',\n      targetMode: 'rectangle',\n      settings: {\n        exclusive: true,\n      },\n    },\n    polygon: {\n      type: 'draw',\n      eventType: 'toggle',\n      targetMode: 'polygon',\n      settings: {\n        exclusive: true,\n      },\n    },\n    freehand: {\n      type: 'draw',\n      eventType: 'toggle',\n      targetMode: 'freehand',\n      settings: {\n        exclusive: true,\n      },\n    },\n    custom_shape: {\n      type: 'draw',\n      eventType: 'toggle',\n      targetMode: 'custom_shape',\n      settings: {\n        exclusive: true,\n      },\n    },\n  },\n  edit: {\n    drag: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'drag',\n      settings: {\n        exclusive: true,\n      },\n    },\n    change: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'change',\n      settings: {\n        exclusive: true,\n      },\n    },\n    rotate: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'rotate',\n      settings: {\n        exclusive: true,\n      },\n    },\n    scale: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'scale',\n      settings: {\n        exclusive: true,\n      },\n    },\n    copy: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'copy',\n      settings: {\n        exclusive: true,\n      },\n    },\n    cut: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'cut',\n      settings: {\n        exclusive: true,\n      },\n    },\n    split: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'split',\n      settings: {\n        exclusive: true,\n      },\n    },\n    union: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'union',\n      settings: {\n        exclusive: true,\n      },\n    },\n    difference: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'difference',\n      settings: {\n        exclusive: true,\n      },\n    },\n    line_simplification: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'line_simplification',\n      settings: {\n        exclusive: true,\n      },\n    },\n    lasso: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'lasso',\n      settings: {\n        exclusive: true,\n      },\n    },\n    delete: {\n      type: 'edit',\n      eventType: 'toggle',\n      targetMode: 'delete',\n      settings: {\n        exclusive: true,\n      },\n    },\n  },\n  helper: {\n    shape_markers: {\n      type: 'helper',\n      eventType: 'toggle',\n      targetMode: 'shape_markers',\n      settings: {\n        exclusive: false,\n        enabledBy: ['drag', 'change', 'rotate', 'scale', 'line_simplification'],\n      },\n    },\n    snapping: {\n      type: 'helper',\n      eventType: 'toggle',\n      targetMode: 'snapping',\n      settings: {\n        exclusive: false,\n      },\n    },\n    pin: {\n      type: 'helper',\n      eventType: 'toggle',\n      targetMode: 'pin',\n      settings: {\n        exclusive: false,\n      },\n    },\n    snap_guides: {\n      type: 'helper',\n      eventType: 'toggle',\n      targetMode: 'snap_guides',\n      settings: {\n        exclusive: false,\n      },\n    },\n    measurements: {\n      type: 'helper',\n      eventType: 'toggle',\n      targetMode: 'measurements',\n      settings: {\n        exclusive: false,\n      },\n    },\n    auto_trace: {\n      type: 'helper',\n      eventType: 'toggle',\n      targetMode: 'auto_trace',\n      settings: {\n        exclusive: false,\n      },\n    },\n    geofencing: {\n      type: 'helper',\n      eventType: 'toggle',\n      targetMode: 'geofencing',\n      settings: {\n        exclusive: false,\n      },\n    },\n    zoom_to_features: {\n      type: 'helper',\n      eventType: 'click',\n      targetMode: 'zoom_to_features',\n      settings: {\n        exclusive: false,\n      },\n    },\n    click_to_edit: {\n      type: 'helper',\n      eventType: 'toggle',\n      targetMode: 'click_to_edit',\n      settings: {\n        exclusive: false,\n      },\n    },\n  },\n};\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"m22.775 29.562 6.75-6.75-5.625-5.625-3.6 3.6-3.15-3.15 3.6-3.6-5.626-5.55-6.75 6.75zm25.95 26.101 6.75-6.825-5.624-5.625-3.6 3.6-3.15-3.15 3.6-3.6-5.55-5.55-6.75 6.75zm.6-46.126 5.25 5.25ZM16.7 59.039H5v-11.7l14.55-14.551L2 15.237l13.05-13.2 17.7 17.624L46.1 6.312q.676-.676 1.5-.976.826-.3 1.65-.3.826 0 1.65.3.826.3 1.5.976l5.326 5.325q.675.675.975 1.5.3.825.3 1.65t-.3 1.65q-.3.825-.975 1.5l-13.35 13.35L62 48.913l-13.125 13.05-17.551-17.55Zm-7.2-4.5h5.25l29.476-29.552-5.25-5.25L9.5 49.288Zm32.1-32.178-2.625-2.625 5.25 5.25Z\\\"/>\\n</svg>\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"none\\\" d=\\\"M0 0h24v24H0Z\\\"/>\\n    <circle cx=\\\"32\\\" cy=\\\"32\\\" r=\\\"26\\\" fill=\\\"currentColor\\\" fill-opacity=\\\".15\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"7\\\"/>\\n    <circle cx=\\\"32\\\" cy=\\\"32\\\" r=\\\"5\\\" fill=\\\"currentColor\\\"/>\\n</svg>\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"none\\\" d=\\\"M0 0h24v24H0Z\\\"/>\\n    <circle cx=\\\"32\\\" cy=\\\"32\\\" r=\\\"26\\\" fill=\\\"currentColor\\\" fill-opacity=\\\".15\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"7\\\"/>\\n    <path stroke=\\\"currentColor\\\" stroke-dasharray=\\\"3\\\" stroke-width=\\\"4\\\" d=\\\"M6 32h52M32 6v52\\\"/>\\n</svg>\"","export default \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\" standalone=\\\"no\\\"?>\\n<svg\\n   viewBox=\\\"0 0 64 64\\\"\\n   version=\\\"1.1\\\"\\n   id=\\\"svg2\\\"\\n   xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n   xmlns:svg=\\\"http://www.w3.org/2000/svg\\\">\\n  <defs\\n     id=\\\"defs2\\\" />\\n  <path\\n     fill=\\\"none\\\"\\n     d=\\\"M 0,0 H 24 V 24 H 0 Z\\\"\\n     id=\\\"path1\\\"\\n     style=\\\"display:inline\\\" />\\n  <ellipse\\n     cx=\\\"32\\\"\\n     cy=\\\"32\\\"\\n     fill=\\\"currentColor\\\"\\n     fill-opacity=\\\"0.15\\\"\\n     stroke=\\\"currentColor\\\"\\n     stroke-width=\\\"7\\\"\\n     id=\\\"circle1\\\"\\n     rx=\\\"26.787416\\\"\\n     ry=\\\"15.158148\\\" />\\n  <path\\n     stroke=\\\"currentColor\\\"\\n     stroke-dasharray=\\\"3\\\"\\n     stroke-width=\\\"4\\\"\\n     d=\\\"M 6.4966994,32 H 58 M 32,18.552705 v 30.15073\\\"\\n     id=\\\"path2\\\"\\n     style=\\\"stroke-width:3;stroke-dasharray:3;stroke-dashoffset:0\\\" />\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path\\n            fill=\\\"currentColor\\\"\\n            d=\\\"M32 61.4 19.85 49.42l3.28-3.235 6.634 6.542V34.205H10.98l6.26 6.174-3.279 3.234L2.185 32l11.852-11.686 3.28 3.234-6.336 6.247h18.783V11.273l-6.261 6.174-3.28-3.234L32 2.6l11.777 11.613-3.28 3.234-6.26-6.174v18.522h18.782l-6.26-6.174 3.279-3.234L61.815 32 50.038 43.613l-3.28-3.234 6.261-6.174H34.236v18.522l6.634-6.542 3.28 3.234z\\\"\\n    />\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <line x1=\\\"8\\\" y1=\\\"50\\\" x2=\\\"24\\\" y2=\\\"20\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"8\\\"/>\\n    <line x1=\\\"24\\\" y1=\\\"20\\\" x2=\\\"40\\\" y2=\\\"54\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"8\\\"/>\\n    <line x1=\\\"40\\\" y1=\\\"54\\\" x2=\\\"54\\\" y2=\\\"10\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"8\\\"/>\\n    <circle cx=\\\"8\\\" cy=\\\"50\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n    <circle cx=\\\"24\\\" cy=\\\"20\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n    <circle cx=\\\"40\\\" cy=\\\"54\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n    <circle cx=\\\"54\\\" cy=\\\"10\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" fill=\\\"currentColor\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path d=\\\"M32 62.81s23.107-21.898 23.107-38.512a23.107 23.107 0 0 0-46.214 0C8.893 40.912 32 62.809 32 62.809m0-26.958a11.554 11.554 0 1 1 0-23.107 11.554 11.554 0 0 1 0 23.107\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <!-- Polygon -->\\n    <polygon points=\\\"8,28 40,6 55,35 51,55 18,54\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"8\\\"/>\\n\\n    <!-- Vertex Circles -->\\n    <circle cx=\\\"9\\\" cy=\\\"28\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n    <circle cx=\\\"40\\\" cy=\\\"8\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n    <circle cx=\\\"55\\\" cy=\\\"35\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n    <circle cx=\\\"50\\\" cy=\\\"55\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n    <circle cx=\\\"18\\\" cy=\\\"54\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <!-- Rectangle -->\\n    <polygon points=\\\"10,10 54,10 54,54 10,54\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"8\\\"/>\\n\\n    <!-- Vertex Circles -->\\n    <circle cx=\\\"10\\\" cy=\\\"10\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n    <circle cx=\\\"54\\\" cy=\\\"10\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n    <circle cx=\\\"54\\\" cy=\\\"54\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n    <circle cx=\\\"10\\\" cy=\\\"54\\\" r=\\\"6\\\" fill=\\\"white\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4.5\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M39.063 42.14 22.288 28.12 7.96 44.603l11.338 9.854h9.059zm-3.498 12.317h25.941v5.465h-44.25L4.377 48.726a5.465 5.465 0 0 1-.542-7.711L34.311 5.958a5.465 5.465 0 0 1 7.712-.538l16.496 14.343a5.465 5.465 0 0 1 .541 7.709z\\\"/>\\n</svg>\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M58.709 17.724c-.3-.6-.601-.901-.902-1.502l-.3-.601c-.301-.601-.602-.902-.902-1.503l-.3-.601c-.301-.601-.602-.902-1.203-1.503l-.6-.901 8.414-9.317-13.825.3-13.824.301 1.502 13.524 1.503 13.524 9.617-10.819v.3l.3.602c.301.3.301.6.602.6l.3.602c0 .6 0 .901.3 1.202.903 2.104 1.804 4.208 2.105 6.311.6 4.208 0 8.716-1.804 12.623l-.6 1.202-.301.3-.902 1.503-.3.601c-.601.601-1.202 1.503-1.804 2.104-1.502 1.503-3.305 3.005-5.109 3.907-1.803 1.202-3.907 1.803-6.311 2.404-2.104.301-4.508.601-6.612.301-2.404-.3-4.508-.902-6.612-1.503-2.103-.901-3.907-2.104-5.71-3.606l-1.202-1.202-.601-.902-.601-.601c-.3-.3-.601-.601-.601-.902l-.902-1.202-.3-.3-.602-1.203c0-.3-.3-.3-.3-.6l-.902-1.503-.3-.601-.902-2.705q-.901-3.607-.901-7.213V27.04c0-.601 0-.901.3-1.202l.3-1.803.602-1.803c.901-2.405 2.103-4.509 3.606-6.612q2.254-3.156 5.41-5.41c.6-.3.901-1.202.3-1.803-.3-.3-.6-.601-.901-.601h-.601l-.3.3c-2.706 1.202-4.81 3.006-6.913 4.809-2.104 2.104-3.607 4.508-5.11 7.213-2.704 5.41-3.606 11.42-2.404 17.431.3 1.503.601 2.705.902 4.207l.902 2.405c.3.3.6.6.6 1.202l.602 1.202c0 .3.3.601.3.601l.902 1.503c.3.601.6.901.901 1.503l.301.6c.3.301.601.902.902 1.203l2.103 1.803c2.104 2.104 4.809 3.907 7.514 5.41q4.057 2.254 9.016 2.705c1.503.3 3.005.3 4.508.3 1.803 0 3.306 0 4.809-.3 3.005-.602 6.311-1.503 9.016-3.006l.6-.3c.602-.3.903-.601 1.504-.902l2.103-1.202c.601-.3.902-.601 1.203-.902l.6-.6a3.622 3.622 0 0 0 1.503-1.504l.3-.3c.902-.902 2.105-2.104 2.706-3.005l1.803-2.705 1.202-1.804c3.005-5.71 4.208-12.322 3.306-18.633-.601-3.306-1.503-6.612-3.005-9.317z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path stroke=\\\"currentColor\\\"\\n          stroke-width=\\\"3.8\\\"\\n          d=\\\"m2.155 32.345 42.35-29.82M18.963 60.919l42.35-29.82M31.443 2.332l29.82 42.35M2.207 19.515l29.82 42.35\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"none\\\" d=\\\"M0 0h24v24H0Z\\\"/>\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M6.962 3.385h50.076a3.577 3.577 0 0 1 3.577 3.577v50.076a3.577 3.577 0 0 1-3.577 3.577H6.962a3.577 3.577 0 0 1-3.577-3.577V6.962a3.577 3.577 0 0 1 3.577-3.577Zm3.577 7.154v42.922h42.922V10.539Zm7.154 7.154h28.614v7.153H17.693Zm0 14.307h28.614v7.154H17.693Z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M16.862 2.13 7.297 21.17a2.091 2.091 0 0 0-.193 1.288l4.107 24.166-7.618 13.15 3.619 2.096 7.997-13.804a2.091 2.091 0 0 0 .252-1.397l-4.119-24.235 9.256-18.428Zm40.876.255-1.25 2.49 2.668 1.341 1.25-2.49zm-2.593 5.16-2.68 5.337 2.668 1.341 2.682-5.338zm-4.022 8.007-2.682 5.338 2.67 1.34 2.681-5.337zm-18.67 5.83.055 6.984-11.118.087.056 7.242 11.12-.088.054 6.985 10.521-10.688zm18.927 2.817-2.945.5 1.001 5.89 2.945-.5zm1.502 8.835-2.945.5 1.001 5.89 2.945-.5zm1.502 8.834-2.945.5.74 4.355-.24.413 2.585 1.499.51-.881a1.494 1.494 0 0 0 .18-1zm-3.943 7.854-2.994 5.17 2.584 1.496 2.994-5.169zm-4.492 7.754-1.497 2.584 2.584 1.497 1.498-2.584z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M41.687.926a2.173 2.173 0 0 0-.433.045c-4.075.232-7.358 3.618-7.358 7.747 0 .084.01.164.012.246l-12.987 4.261a7.842 7.842 0 0 0-6.126-3.563 2.173 2.173 0 0 0-.424-.043 2.173 2.173 0 0 0-.435.044c-4.073.232-7.358 3.618-7.358 7.747 0 3.143 1.901 5.869 4.604 7.097L8.377 35.11a2.173 2.173 0 0 0-.028.007C4.274 35.35.99 38.736.99 42.865c0 4.277 3.514 7.791 7.791 7.791 2.497 0 4.727-1.201 6.157-3.048l12.887 6.235a7.67 7.67 0 0 0-.139 1.44c0 4.277 3.515 7.791 7.792 7.791 4.278 0 7.793-3.514 7.793-7.792a7.67 7.67 0 0 0-1.885-5.027l.508-1.05-3.263-1.579 4.505-29.969.888-.29-.368-1.122a7.78 7.78 0 0 0 2.28-1.018l.447 1.364 4.72-1.547-.774-2.359-2.522.826a7.73 7.73 0 0 0 1.672-4.793c0-4.132-3.288-7.52-7.368-7.748a2.173 2.173 0 0 0-.424-.044zm0 4.346a3.414 3.414 0 0 1 3.447 3.446 3.415 3.415 0 0 1-3.446 3.447 3.414 3.414 0 0 1-3.446-3.447 3.414 3.414 0 0 1 3.445-3.446zm20.076 3.725a1.242 1.242 0 0 0-.382.062l-1.612.528.578 1.76-.293 1.94 2.456.37.486-3.234a1.242 1.242 0 0 0-1.233-1.426Zm-4.354 1.364-4.72 1.548.775 2.36 4.719-1.548-.774-2.36zm-22.153 2.732a7.877 7.877 0 0 0 3.735 2.922l-.062.408-.397.13.26.793-4.255 28.298-3.818-1.847-1.082 2.235 3.718 1.798a7.841 7.841 0 0 0-3.543 2.147l-13.272-6.42c.02-.23.035-.458.035-.692 0-2.888-1.609-5.408-3.969-6.745l2.912-11.012c3.74-.562 6.645-3.81 6.645-7.698l-.001-.02 13.094-4.297zm-20.885.87a3.414 3.414 0 0 1 3.445 3.447 3.414 3.414 0 0 1-3.445 3.447 3.414 3.414 0 0 1-3.447-3.447 3.414 3.414 0 0 1 3.446-3.446zm45.314 1.78-.738 4.912 2.456.37.738-4.912zM36.172 17.33l-1.793.588a1.242 1.242 0 0 0-.813.862l-.788 2.978 2.401.634.615-2.325 1.15-.377-.773-2.36zm22.405 5.781-.737 4.913 2.455.368.739-4.91zm-26.432 1.048-1.27 4.802 2.401.634 1.27-4.802zm25.325 6.32-.739 4.913 2.457.368.738-4.911-2.456-.37zm-27.23.882-1.27 4.802 2.402.634 1.27-4.801zm26.124 6.486-.739 4.91 2.455.37.74-4.912-2.457-.368zm-28.027.717-1.27 4.803 2.4.634 1.27-4.802-2.401-.634zm-19.555.856a3.414 3.414 0 0 1 3.446 3.446 3.414 3.414 0 0 1-3.446 3.447 3.414 3.414 0 0 1-3.445-3.447 3.414 3.414 0 0 1 3.445-3.446zm46.473 5.795-.739 4.91 2.456.37.74-4.911zm-11.124 5.072-1.082 2.236 4.47 2.164 1.083-2.237zm-8.651 1.55a3.414 3.414 0 0 1 3.445 3.446 3.414 3.414 0 0 1-3.445 3.447 3.414 3.414 0 0 1-3.447-3.447 3.414 3.414 0 0 1 3.446-3.446zm18.669.745-.358 2.378-2.953-1.428-1.083 2.236 4.472 2.163.541-1.117 1.228.183.608-4.046-2.455-.37z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <circle cx=\\\"49.754\\\" cy=\\\"50.219\\\" r=\\\"10.098\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"5.1\\\"/>\\n    <path fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"4.491\\\"\\n          d=\\\"M44.516 26.657H17.842l6.669-11.55 6.668-11.55 6.669 11.55Z\\\"/>\\n    <path fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-miterlimit=\\\"6\\\"\\n          stroke-width=\\\"4.683\\\" d=\\\"M4.481 40.605h20.761v19.093H4.481z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path stroke=\\\"currentColor\\\" fill=\\\"currentColor\\\" stroke-width=\\\"2\\\"\\n          d=\\\"M44.095 2.247a2.285 2.285 0 0 0-.135.04L12.025 12.762a2.285 2.285 0 0 0-1.497 1.588l-7.772 29.4a2.285 2.285 0 0 0 1.213 2.641L35.397 61.6a2.285 2.285 0 0 0 2.873-.754l22.64-32.582a2.285 2.285 0 0 0 .05-2.534L46.6 3.23a2.285 2.285 0 0 0-2.504-.982ZM43.7 7.182l12.203 19.12-5.167 1.76 1.052 3.09 2.031-.693L38.07 53.122l.01-1.375-3.262-.023-.034 4.5-27.13-13.127 6.975-26.38Zm3.946 21.932-6.18 2.105 1.052 3.09 6.18-2.105zm-9.27 3.157-2.329.793a1.632 1.632 0 0 0-1.105 1.534l-.03 4.068 3.265.024.02-2.91 1.232-.419zm-3.488 9.66-.047 6.529 3.264.023.048-6.528z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"m41.478 7.967-.033 3.069c1.887.02 3.772.337 5.561.933l.97-2.913a21.337 21.337 0 0 0-6.498-1.09Zm-3.294.215a21.567 21.567 0 0 0-6.298 1.915l1.332 2.766a18.518 18.518 0 0 1 5.401-1.641zm12.836 2.155-1.402 2.73a18.497 18.497 0 0 1 4.572 3.312l2.16-2.179a21.548 21.548 0 0 0-5.331-3.863ZM22.783 13.06c-11.848 0-21.486 9.638-21.486 21.486 0 11.849 9.638 21.486 21.486 21.486a21.37 21.37 0 0 0 14.288-5.466c.003 0 .006 0 .009.002.04-.036.078-.075.117-.11l.077-.072a21.285 21.285 0 0 0 1.51-1.532 22.128 22.128 0 0 0 .867-1.025 19.557 19.557 0 0 1-.88-.095c-.196-.025-.389-.058-.582-.09-.097-.015-.194-.028-.29-.045a18.378 18.378 0 0 1-1.576-.359l-.118-.03c-7.753-2.172-13.422-9.271-13.422-17.728a18.34 18.34 0 0 1 5.867-13.478c.1-.093.199-.185.3-.276.153-.136.31-.268.467-.4.097-.08.193-.163.291-.242.255-.203.514-.402.78-.592a21.534 21.534 0 0 0-1.76-.592l-.018-.005c-.176-.05-.355-.095-.533-.141-.132-.035-.263-.073-.397-.105-.213-.051-.43-.095-.646-.14-.077-.016-.153-.035-.231-.05H26.9a21.37 21.37 0 0 0-4.118-.4Zm35.728 3.64-2.472 1.82a18.424 18.424 0 0 1 2.61 5.004l2.907-.986a21.474 21.474 0 0 0-3.045-5.839Zm3.864 9.034-3.022.534c.328 1.86.37 3.772.118 5.642l3.042.409a21.448 21.448 0 0 0-.138-6.585zm-3.496 8.943a18.539 18.539 0 0 1-2.416 5.104l2.543 1.72a21.586 21.586 0 0 0 2.815-5.952zM54.703 42a18.288 18.288 0 0 1-4.428 3.492l1.505 2.675a21.348 21.348 0 0 0 5.173-4.08zm-6.995 4.69a18.512 18.512 0 0 1-5.526 1.158l.163 3.065a21.56 21.56 0 0 0 6.444-1.35z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" fill=\\\"currentColor\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path d=\\\"M44.698 2.661a1.644 1.644 0 0 1 2.328 0l9.866 9.866a1.644 1.644 0 0 1 0 2.329L24.004 47.744a1.644 1.644 0 0 1-.552.362L7.008 54.683a1.644 1.644 0 0 1-2.138-2.138l6.578-16.444a1.644 1.644 0 0 1 .362-.552zm-3.089 7.742 7.542 7.541 4.252-4.252-7.541-7.541zm5.216 9.866-7.54-7.54-21.378 21.376v.964h1.644a1.644 1.644 0 0 1 1.645 1.644v1.645h1.644a1.644 1.644 0 0 1 1.645 1.644v1.644h.963zM14.724 37.29l-.35.348L9.35 50.204l12.566-5.025.349-.35a1.644 1.644 0 0 1-1.07-1.538v-1.645h-1.644a1.644 1.644 0 0 1-1.644-1.644v-1.644h-1.644a1.644 1.644 0 0 1-1.54-1.07\\\"/>\\n    <path stroke=\\\"currentColor\\\" stroke-width=\\\"5.107\\\"\\n          d=\\\"M6.298 59.53c3.44-1.692 6.88-3.384 10.558-4.319s7.594-1.111 11.719-.298c4.125.814 8.459 2.617 13.483 2.655 5.023.038 10.737-1.689 16.45-3.415\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M31.226 17.87c-4.69 0-8.532 3.832-8.532 8.508 0 1.812.58 3.495 1.558 4.88l5.932 10.255c.831 1.085 1.383.879 2.074-.058l6.543-11.135c.132-.24.236-.493.327-.753a8.396 8.396 0 0 0 .628-3.19c0-4.675-3.841-8.506-8.53-8.506zm0 3.987a4.5 4.5 0 0 1 4.532 4.52 4.5 4.5 0 0 1-4.532 4.521 4.5 4.5 0 0 1-4.534-4.52 4.5 4.5 0 0 1 4.533-4.52z\\\"/>\\n    <path fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\" stroke-miterlimit=\\\"6\\\"\\n          stroke-width=\\\"5\\\" d=\\\"M8.97 53.509 4.423 19.145 35.698 4.199l23.88 25.127L43.06 59.801Z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <ellipse cx=\\\"4.907\\\" cy=\\\"-32.051\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-dasharray=\\\"13.7543, 6.87718\\\"\\n             stroke-width=\\\"5.489\\\" rx=\\\"20.4\\\" ry=\\\"13.713\\\" transform=\\\"matrix(-.71127 .70292 -.86047 -.5095 0 0)\\\"/>\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M34.597 25.275a1.934 1.934 0 0 0-2.04 2.165l2.922 31.37c.188 1.523 1.989 2.235 3.165 1.249l6.169-5.004 2.765 4.79c1.59 2.756 4.115 3.431 6.87 1.841 2.756-1.59 3.433-4.114 1.841-6.87l-2.755-4.773 7.31-2.803c1.443-.525 1.728-2.44.503-3.365L35.64 25.66a1.93 1.93 0 0 0-1.042-.383z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M1.947 25.554c-2.176 3.77-.867 8.656 2.903 10.832 2.126 1.229 4.607 1.346 6.757.539l8.252 12.152a7.79 7.79 0 0 0-.701 1.005c-2.176 3.77-.867 8.656 2.903 10.833 3.77 2.177 8.655.867 10.832-2.903 2.1-3.64.93-8.294-2.543-10.572a2.211 2.211 0 0 0-.36-.26 2.211 2.211 0 0 0-.404-.181 7.955 7.955 0 0 0-6.086-.432l-8.348-12.292c.19-.252.369-.512.53-.79 1.457-2.526 1.339-5.537-.03-7.907l8.202-8.256c3.494 1.335 7.562.025 9.575-3.229l13.899 2.913c.266 2.435 1.634 4.721 3.899 6.03 3.77 2.176 8.655.866 10.832-2.904 2.101-3.64.93-8.294-2.543-10.572a2.211 2.211 0 0 0-.36-.26 2.211 2.211 0 0 0-.403-.181c-3.71-1.87-8.328-.556-10.429 3.083-.084.147-.155.297-.228.446l-13.5-2.83c-.053-2.55-1.329-5.023-3.58-6.499a2.211 2.211 0 0 0-.358-.259 2.211 2.211 0 0 0-.405-.181c-3.708-1.87-8.326-.556-10.428 3.083-1.61 2.79-1.307 6.19.486 8.652l-7.84 7.892a2.211 2.211 0 0 0-.094-.036c-3.71-1.87-8.328-.556-10.429 3.084zm3.83 2.211a3.473 3.473 0 0 1 4.79-1.282 3.472 3.472 0 0 1 1.284 4.789 3.473 3.473 0 0 1-4.79 1.284 3.475 3.475 0 0 1-1.283-4.79ZM23.656 8.173a3.474 3.474 0 0 1 4.79-1.283 3.472 3.472 0 0 1 1.283 4.79 3.473 3.473 0 0 1-4.789 1.284 3.475 3.475 0 0 1-1.284-4.791zm-.666 44.12a3.474 3.474 0 0 1 4.79-1.283 3.472 3.472 0 0 1 1.283 4.79 3.473 3.473 0 0 1-4.79 1.284 3.475 3.475 0 0 1-1.283-4.791zm29.166-37.88a3.474 3.474 0 0 1 4.79-1.283 3.472 3.472 0 0 1 1.283 4.79 3.473 3.473 0 0 1-4.79 1.284 3.475 3.475 0 0 1-1.283-4.791z\\\"/>\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M12.9 13.516c-.63.177-.685.37-.88.95l-1.069 3.18 2.995 1.006.844-2.506 2.074-.882-1.236-2.908zm19.209 5.25 4.378 4.554 2.277-2.19-4.379-4.554zm8.132 3.106 1.441 2.812 5.623-2.882-1.441-2.812zM5.448 46.082l3.144.304.608-6.29-3.145-.303zm4.623 3.728 5.762 2.592 1.297-2.88-5.762-2.593z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M1.717 38.645a2.675 2.668 79.7 0 0-.307 3.769L16.754 60.55a2.675 2.668 79.7 0 0 3.76.312l41.769-35.508a2.675 2.668 79.7 0 0 .307-3.769L47.246 3.45a2.675 2.668 79.7 0 0-3.76-.312zm5.486 2.352 37.702-32.05 11.892 14.056-2.717 2.31-4.458-5.269-2.033 1.729 4.457 5.269-3.11 2.643-4.457-5.268-2.034 1.728 4.458 5.27-3.106 2.64-4.458-5.27-2.033 1.73 4.457 5.268-3.11 2.644-6.194-7.32-2.033 1.728 6.193 7.32-3.11 2.645-4.457-5.269-2.034 1.729 4.458 5.268-3.106 2.64-4.458-5.268-2.033 1.73 4.457 5.268-3.11 2.643-4.457-5.268-2.034 1.729 4.458 5.268-2.098 1.783z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" fill=\\\"currentColor\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path d=\\\"M7.839 34.833c-7.104-9.763-5.332-23.33 4.2-30.266C21.572-2.369 35.03.123 42.13 9.882L56.166 29.17c7.098 9.755 5.329 23.325-4.204 30.262-9.533 6.936-22.989 4.444-30.09-5.315L7.841 34.836Zm5.063-25.476c-6.079 5.766-7.006 15.598-1.634 22.98l.778 1.07 12.002-8.732zm3.43-2.495L27.476 22.18l12.002-8.733-.781-1.073c-5.37-7.38-15.01-9.522-22.367-5.512m25.643 10.014L14.54 36.836l10.762 14.79c5.818 7.997 16.653 9.842 24.163 4.378 7.51-5.465 9.088-16.342 3.267-24.342z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M42.012 2.106a4.092 4.092 0 0 0-5.741.735 4.092 4.092 0 0 0 .572 5.607L23.964 23.45a8.185 8.185 0 0 0-10.458 2.142l5.18 4.005 5.454 4.218L7.87 59.22a1.124 7.304 37.712 0 0 1.54 1.19l20.494-22.138 5.454 4.217 5.18 4.005a8.185 8.185 0 0 0-.558-10.66l11.277-16.24a4.092 4.092 0 0 0 5.572-.858 4.092 4.092 0 0 0-.735-5.74z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <g fill=\\\"currentColor\\\" stroke=\\\"currentColor\\\">\\n        <path d=\\\"m37.62 5.028-.337.284-4.039 4.068 3.547 3.523L39.875 9.8l2.846.596 1.025-4.893-4.176-.877Zm9.995 6.393 9.787 2.053 1.026-4.895-9.787-2.05zm14.68 3.078 9.787 2.05 1.025-4.892-9.787-2.053zm-39.623 5.522 3.547 3.523 7.049-7.094-3.547-3.523zm-10.57 10.642 3.546 3.524 7.047-7.094-3.547-3.524zM1.529 41.306l3.55 3.523 7.046-7.096-3.547-3.523Zm70.977 4.027 3.91 3.115 3.44-4.387-1.118-6.55zM.947 48.319l5.617 8.274 4.137-2.809-5.617-8.273Zm62.211 8.744 3.91 3.116 6.233-7.82-3.91-3.116zM9.373 60.73l5.62 8.272 4.134-2.809-5.617-8.271zm44.438 8.067 3.91 3.115 6.232-7.82-3.91-3.117zM17.8 73.138l5.617 8.273 4.137-2.808-5.617-8.274zm26.662 7.388 3.91 3.116 6.232-7.82-3.91-3.116zm-18.236 5.022 5.617 8.273 4.136-2.81-5.617-8.272zm8.888 6.709 3.91 3.117 6.233-7.822-3.91-3.115z\\\"\\n              stroke-width=\\\"3\\\"\\n              transform=\\\"translate(2.517 1.586) scale(.60827)\\\"/>\\n        <path d=\\\"M22.672 20.02a3.5 3.5 0 0 0-2.506 1.034L-.514 41.872a3.5 3.5 0 0 0-.412 4.434L18 74.176a3.5 3.5 0 0 0 5.633.216l33.494-42.038a3.5 3.5 0 0 0-2.018-5.605l-31.742-6.654a3.5 3.5 0 0 0-.695-.074zm1.121 7.317 24.32 5.098-26.992 33.877L6.484 44.759Z\\\"\\n              stroke-width=\\\"3\\\"\\n              transform=\\\"translate(2.517 1.586) scale(.60827)\\\"/>\\n        <path d=\\\"m78.734 7.668 2.61 11.396-18.145 4.154 2.705 11.816L84.05 30.88l2.609 11.396L100 21.011Z\\\"\\n              stroke-width=\\\"3\\\"\\n              transform=\\\"translate(1.586 1.586) scale(.60827)\\\"/>\\n    </g>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\" fill-rule=\\\"evenodd\\\"\\n          d=\\\"M19.435 3.417c-4.478 0-8.96 1.693-12.343 5.076-6.766 6.766-6.766 17.913 0 24.679h.006c2.754 2.749 5.563 5.561 8.357 8.357 1.857 1.859 3.696 3.696 5.553 5.553l.949.949 1.892 1.898 9.496-9.49-1.898-1.898-6.502-6.502c-2.796-2.797-5.6-5.606-8.363-8.362-1.65-1.653-1.652-4.042 0-5.694 1.653-1.653 4.047-1.653 5.7 0l8.357 8.362 6.502 6.502 1.898 1.893 9.49-9.49-1.893-1.893-6.507-6.502-8.357-8.362c-3.384-3.383-7.86-5.076-12.337-5.076Zm0 2.68c3.789 0 7.577 1.432 10.439 4.294l8.357 8.362-5.694 5.694-8.357-8.362a6.7 6.7 0 0 0-9.496 0 6.697 6.697 0 0 0 0 9.49c2.76 2.755 5.566 5.564 8.363 8.362l-5.694 5.694c-2.795-2.796-5.601-5.607-8.357-8.357H8.99c-5.724-5.724-5.724-15.16 0-20.883 2.861-2.862 6.655-4.294 10.444-4.294ZM57.709 29.03a4.266 4.266 0 0 0-4.268 4.268c0 1.594.881 2.973 2.176 3.707-.714 4.997-1.424 10.107-2.176 15.037-.934 0-1.792.309-2.495.818l-7.115-5.07a4.25 4.25 0 0 0 .115-.965 4.27 4.27 0 1 0-4.268 4.268 4.23 4.23 0 0 0 2.732-1.012l6.973 4.965a4.22 4.22 0 0 0-.215 1.269 4.27 4.27 0 0 0 4.273 4.268 4.266 4.266 0 0 0 4.268-4.268 4.247 4.247 0 0 0-1.657-3.356l2.208-15.446c2.095-.273 3.722-2.045 3.722-4.215a4.27 4.27 0 0 0-4.273-4.268z\\\"\\n    />\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <g fill=\\\"currentColor\\\">\\n        <path d=\\\"m4.879 2.684-2.832 2.8L7.65 11.15l2.832-2.801Zm8.403 8.495-2.832 2.802 5.603 5.662 2.831-2.802zm8.404 8.494-2.832 2.8 5.602 5.664 2.832-2.802z\\\"\\n        />\\n        <path d=\\\"M27.814 7.408a3.576 3.576 0 0 0-1.161-.176 3.2 3.2 0 0 0-.878.138l7.963 26.068L7.18 27.3c-.543 2.352 1.67 6.055 4.962 6.816l23.054 5.297 2.326 6.42c-2.27-.175-4.279 1.912-4.908 3.805-.535 1.698-.512 3.656.085 5.61.597 1.954 1.671 3.59 3.064 4.7 1.393 1.11 3.238 1.71 5.023 1.164 8.064-3.039 2.135-15.793.467-20.58 5.917 1.023 18.77 5.88 20.578-1.979.42-1.819-.306-3.616-1.509-4.929-1.203-1.313-2.909-2.27-4.9-2.73-1.99-.46-3.866-.547-5.602.303-1.737.849-3.768 2.642-3.468 4.73a6.17 6.17 0 0 0 .012.43l-6.563-1.794-6.88-22.632c-.702-2.297-3.445-3.99-5.108-4.523Zm26.824 26.88c1.36.315 2.472.99 3.116 1.692.644.703.795 1.307.684 1.79-.112.482-.511.956-1.399 1.305-.887.348-2.182.467-3.542.152-1.361-.314-2.472-.99-3.116-1.693-.644-.703-.797-1.304-.686-1.787.112-.482.513-.956 1.4-1.305a5.198 5.198 0 0 1 1.594-.327 6.98 6.98 0 0 1 1.949.173zM37.846 49.174c.333.069.71.25 1.13.585.746.594 1.497 1.654 1.905 2.99.408 1.335.379 2.635.092 3.545-.287.91-.731 1.34-1.205 1.484-.473.145-1.085.036-1.831-.558-.746-.594-1.496-1.655-1.904-2.99-.407-1.336-.378-2.637-.092-3.546.287-.91.732-1.342 1.206-1.486.118-.036.245-.057.38-.058.102 0 .207.011.319.034z\\\"\\n        />\\n    </g>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M41.233 7.917c-5.5 0-10.519 2.077-14.328 5.482a21.443 21.443 0 0 0-4.138-.404c-11.88 0-21.544 9.664-21.544 21.544s9.664 21.544 21.544 21.544c5.5 0 10.519-2.077 14.328-5.482 1.34.263 2.722.404 4.138.404 11.88 0 21.544-9.664 21.544-21.544S53.113 7.917 41.233 7.917zm-9.969 6.791a21.61 21.61 0 0 1 5.598 3.499l-2.01 2.33a18.557 18.557 0 0 0-4.8-2.999Zm-7.927 2.765 2.557 1.714a18.558 18.558 0 0 0-2.396 5.128l-2.955-.86a21.614 21.614 0 0 1 2.794-5.982zm15.86 3.08a21.413 21.413 0 0 1 3.46 5.628l-2.839 1.188a18.357 18.357 0 0 0-2.963-4.817zm-19.334 6.142 3.053.399a18.348 18.348 0 0 0 .144 5.654l-3.027.552a21.407 21.407 0 0 1-.17-6.605Zm23.834 2.63a21.81 21.81 0 0 1 .548 3.263c.1 1.1.115 2.207.044 3.31l-3.07-.195c.12-1.888-.056-3.8-.511-5.64zm-19.918 6.172a18.37 18.37 0 0 0 2.64 5.003l-2.466 1.84a21.427 21.427 0 0 1-3.083-5.84Zm17.042 3.016 3.004.666a21.486 21.486 0 0 1-2.404 6.15l-2.66-1.547a18.434 18.434 0 0 0 2.06-5.27zm-12.535 4.124a18.554 18.554 0 0 0 4.6 3.302l-1.392 2.744a21.611 21.611 0 0 1-5.363-3.85Z\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path fill=\\\"currentColor\\\"\\n          d=\\\"M1.585 1.585V13.75h5.17v1.52H8.58v-1.52h5.17V1.585Zm3.041 3.041h6.083v6.083H4.626Zm9.429 2.13V8.58h3.65V6.755Zm5.475 0V8.58h3.65V6.755Zm5.474 0V8.58h3.65V6.755Zm5.475 0V8.58h3.65V6.755Zm5.475 0V8.58h3.65V6.755Zm5.475 0v1.597a1.521 1.521 0 0 0-.325.152l-15.686 9.758a1.52 1.52 0 0 0-.199 2.437l23.512 20.553a1.52 1.52 0 0 0 2.477-.78l4.212-17.037v.352h1.825v-3.65H55.42v1.524a1.52 1.52 0 0 0-.222-.296L43.002 8.741a1.521 1.521 0 0 0-.182-.16h2.259V6.754Zm5.475 0V8.58h3.65V6.755Zm5.474 0V8.58h3.65V6.755Zm3.042 2.432v3.65h1.825v-3.65Zm-13.752 2.549 10.757 11.137-3.57 14.446-20.087-17.559Zm13.752 2.926v3.65h1.825v-3.65ZM6.755 17.096v3.65H8.58v-3.65zm0 5.475v3.65h1.628a1.52 1.52 0 0 0 1.02.909l12.683 3.406 7.905 12.694c.168.27.417.481.712.602l13.39 4.576a1.52 1.52 0 0 0 1.157-2.814l-12.936-4.389L24.35 28.42a1.52 1.52 0 0 0-.896-.664L10.19 24.193a1.52 1.52 0 0 0-1.61.557v-2.178zm48.665 3.042v3.65h1.825v-3.65ZM6.755 28.046v3.65H8.58v-3.65zm48.665 3.042v3.65h1.825v-3.65ZM6.755 33.52v3.65H8.58v-3.65zm48.665 3.041v3.65h1.825v-3.65ZM6.755 38.996v3.65H8.58v-3.65zm48.665 3.041v3.65h1.825v-3.65zm-35.382.913c-3.454 0-6.287 2.833-6.287 6.287 0 3.076 2.248 5.654 5.179 6.183h-1.225v1.825h3.65V55.42h-.206c2.712-.5 4.777-2.796 5.055-5.59l.002-.002a1.52 1.52 0 0 0 0-1.18c-.314-3.168-2.922-5.698-6.168-5.698zM6.755 44.47v3.65H8.58v-3.65zm13.283 1.521a3.223 3.223 0 0 1 3.246 3.246 3.223 3.223 0 0 1-3.246 3.246 3.223 3.223 0 0 1-3.246-3.246 3.223 3.223 0 0 1 3.246-3.246zm35.382 1.52v2.738h-5.17v12.166h12.165V50.25h-5.17v-2.737ZM6.755 49.946v3.65H8.58v-3.65zm46.536 3.346h6.083v6.083H53.29ZM6.755 55.42v1.825h3.65V55.42H7.668Zm5.475 0v1.825h3.65V55.42zm10.95 0v1.825h3.65V55.42zm5.474 0v1.825h3.65V55.42zm5.475 0v1.825h3.65V55.42zm5.475 0v1.825h3.65V55.42zm5.475 0v1.825h3.65V55.42z\\\"/>\\n</svg>\\n\"","import change from '@/assets/images/controls/change.svg';\nimport circleMarker from '@/assets/images/controls/circle-marker.svg';\nimport circle from '@/assets/images/controls/circle.svg';\nimport ellipse from '@/assets/images/controls/ellipse.svg';\nimport drag from '@/assets/images/controls/drag.svg';\nimport line from '@/assets/images/controls/line.svg';\n\nimport marker from '@/assets/images/controls/marker.svg';\nimport polygon from '@/assets/images/controls/polygon.svg';\nimport rectangle from '@/assets/images/controls/rectangle.svg';\nimport remove from '@/assets/images/controls/remove.svg';\nimport rotate from '@/assets/images/controls/rotate.svg';\nimport snapGuides from '@/assets/images/controls/snap-guides.svg';\nimport textMarker from '@/assets/images/controls/text_marker.svg';\nimport autoTrace from '@/assets/images/controls2/auto-trace.svg';\nimport copy from '@/assets/images/controls2/copy.svg';\nimport customShape from '@/assets/images/controls2/custom-shape.svg';\nimport cut from '@/assets/images/controls2/cut.svg';\nimport difference from '@/assets/images/controls2/difference.svg';\nimport freehand from '@/assets/images/controls2/freehand.svg';\nimport geoFencing from '@/assets/images/controls2/geofencing.svg';\nimport lasso from '@/assets/images/controls2/lasso.svg';\nimport lineSimplification from '@/assets/images/controls2/line-simplification.svg';\nimport measurements from '@/assets/images/controls2/measurements.svg';\nimport mouse from '@/assets/images/controls2/mouse.svg';\nimport pin from '@/assets/images/controls2/pin.svg';\nimport scale from '@/assets/images/controls2/scale.svg';\nimport snapping from '@/assets/images/controls2/snap.svg';\nimport split from '@/assets/images/controls2/split.svg';\nimport union from '@/assets/images/controls2/union.svg';\nimport zoomToFeatures from '@/assets/images/controls2/zoom-to-features.svg';\n\nimport type { DrawModeName, EditModeName, HelperModeName } from '@/main.ts';\n\ntype ModeOptionName = DrawModeName | EditModeName | HelperModeName;\ntype ControlIcons = Record<ModeOptionName, string | null>;\n\n// FontGis Icons\n// https://viglino.github.io/font-gis/?fg=earth\n\nexport const controlIcons: ControlIcons = {\n  marker,\n  circle,\n  ellipse,\n  circle_marker: circleMarker,\n  text_marker: textMarker,\n  line,\n  rectangle,\n  polygon,\n  freehand,\n  custom_shape: customShape,\n  drag,\n  change,\n  rotate,\n  scale,\n  copy,\n  cut,\n  split,\n  delete: remove,\n  union,\n  difference,\n  line_simplification: lineSimplification,\n  lasso,\n  shape_markers: null,\n  snapping,\n  pin,\n  snap_guides: snapGuides,\n  measurements,\n  auto_trace: autoTrace,\n  geofencing: geoFencing,\n  zoom_to_features: zoomToFeatures,\n  click_to_edit: mouse,\n};\n","import type { PartialLayerStyle, StyleVariables } from '@/main.ts';\n\nexport const getCircleMarkerStyles = (styleVariables: StyleVariables): Array<PartialLayerStyle> => {\n  return [\n    {\n      type: 'circle',\n      paint: {\n        'circle-radius': styleVariables.circleMarkerRadius,\n        'circle-color': styleVariables.fillColor,\n        'circle-opacity': styleVariables.fillOpacity,\n        'circle-stroke-color': styleVariables.lineColor,\n        'circle-stroke-width': styleVariables.lineWidth,\n        'circle-stroke-opacity': styleVariables.lineOpacity,\n      },\n    },\n  ];\n};\n","import type { PartialLayerStyle, StyleVariables } from '@/main.ts';\n\nexport const getControlMarkerStyles = (\n  styleVariables: StyleVariables,\n): Array<PartialLayerStyle> => {\n  return [\n    {\n      type: 'circle',\n      paint: {\n        'circle-radius': 7,\n        'circle-color': '#ffffff',\n        'circle-opacity': 1,\n        'circle-stroke-color': styleVariables.lineColor,\n        'circle-stroke-width': 2,\n        'circle-stroke-opacity': 1,\n      },\n    },\n  ];\n};\n","import type { PartialLayerStyle, StyleVariables } from '@/main.ts';\n\nexport const getLineStyles = (styleVariables: StyleVariables): Array<PartialLayerStyle> => {\n  return [\n    {\n      type: 'line',\n      paint: {\n        'line-color': styleVariables.lineColor,\n        'line-opacity': styleVariables.lineOpacity,\n        'line-width': styleVariables.lineWidth,\n      },\n    },\n  ];\n};\n","import type { PartialLayerStyle } from '@/main.ts';\n\nexport const getMarkerStyles = (): Array<PartialLayerStyle> => {\n  return [\n    {\n      type: 'symbol',\n      layout: {\n        'icon-image': 'default-marker',\n        'icon-size': 0.18,\n        'icon-allow-overlap': true,\n        'icon-anchor': 'bottom',\n      },\n    },\n  ];\n};\n","import type { PartialLayerStyle, StyleVariables } from '@/main.ts';\n\nexport const getPolygonStyles = (styleVariables: StyleVariables): Array<PartialLayerStyle> => {\n  return [\n    {\n      type: 'fill',\n      paint: {\n        'fill-color': styleVariables.fillColor,\n        'fill-opacity': styleVariables.fillOpacity,\n      },\n    },\n    {\n      type: 'line',\n      paint: {\n        'line-color': styleVariables.lineColor,\n        'line-opacity': styleVariables.lineOpacity,\n        'line-width': styleVariables.lineWidth,\n      },\n    },\n  ];\n};\n","import type { PartialLayerStyle, StyleVariables } from '@/main.ts';\n\nexport const getSecondaryControlMarkerStyles = (\n  styleVariables: StyleVariables,\n): Array<PartialLayerStyle> => {\n  return [\n    {\n      type: 'circle',\n      paint: {\n        'circle-radius': 6,\n        'circle-color': '#ffffff',\n        'circle-opacity': 0.6,\n        'circle-stroke-color': styleVariables.lineColor,\n        'circle-stroke-width': 2,\n        'circle-stroke-opacity': 1,\n      },\n    },\n  ];\n};\n","import type { PartialLayerStyle } from '@/main.ts';\n\nexport const getSnapGuideStyles = (): Array<PartialLayerStyle> => {\n  return [\n    {\n      type: 'line',\n      paint: {\n        'line-color': '#00979f',\n        'line-width': 1.8,\n        'line-dasharray': [2, 1],\n      },\n    },\n  ];\n};\n","import { GM_PREFIX, IS_PRO } from '@/core/constants.ts';\n\nexport const FEATURE_PROPERTY_PREFIX = `__${GM_PREFIX}_` as const;\nexport const FEATURE_ID_PROPERTY = `${FEATURE_PROPERTY_PREFIX}id` as const;\nexport const LOAD_TIMEOUT = 60000;\n\nexport const SOURCES: { [key: string]: string } = {\n  // order matters here, layers order will be aligned according to these items\n  ...(IS_PRO && { standby: `${GM_PREFIX}_standby` }), // available only in the pro version\n  main: `${GM_PREFIX}_main`,\n  temporary: `${GM_PREFIX}_temporary`,\n} as const;\n","import type { PartialLayerStyle } from '@/main.ts';\nimport { FEATURE_PROPERTY_PREFIX } from '@/core/features/constants.ts';\n\nexport const getTextMarkerStyles = (): Array<PartialLayerStyle> => {\n  return [\n    {\n      type: 'symbol',\n      layout: {\n        'text-field': ['get', `${FEATURE_PROPERTY_PREFIX}text`],\n        'text-justify': 'center',\n      },\n      paint: {\n        'text-color': 'black',\n        'text-halo-color': '#fff',\n        'text-halo-width': 2,\n      },\n    },\n  ];\n};\n","import type { SourceStyles } from '@/main.ts';\nimport { IS_PRO } from '@/core/constants.ts';\nimport { SOURCES } from '@/core/features/constants.ts';\n\nexport const defaultRegularStyle = {\n  lineColor: '#278cda',\n  lineOpacity: 0.8,\n  lineWidth: 3,\n  fillColor: '#4fb3ff',\n  fillOpacity: 0.4,\n  circleMarkerRadius: 10,\n};\n\nexport const defaultTmpStyle = {\n  ...defaultRegularStyle,\n  lineColor: '#ff5600',\n};\n\nexport const sourceStyles: SourceStyles = {\n  [SOURCES.main]: {\n    lineColor: '#278cda',\n    lineOpacity: 0.8,\n    lineWidth: 3,\n    fillColor: '#4fb3ff',\n    fillOpacity: 0.4,\n    circleMarkerRadius: 10,\n  },\n  [SOURCES.temporary]: {\n    lineColor: '#ff5600',\n    lineOpacity: 0.8,\n    lineWidth: 3,\n    fillColor: '#4fb3ff',\n    fillOpacity: 0.4,\n    circleMarkerRadius: 10,\n  },\n  ...(IS_PRO && {\n    [SOURCES.standby]: {\n      lineColor: '#787878',\n      lineOpacity: 0.8,\n      lineWidth: 3,\n      fillColor: '#a5a5a5',\n      fillOpacity: 0.4,\n      circleMarkerRadius: 10,\n    },\n  }),\n};\n","import { getCircleMarkerStyles } from '@/core/options/layers/shapes/circle-marker.ts';\nimport { getControlMarkerStyles } from '@/core/options/layers/shapes/control-marker.ts';\nimport { getLineStyles } from '@/core/options/layers/shapes/line.ts';\nimport { getMarkerStyles } from '@/core/options/layers/shapes/marker.ts';\nimport { getPolygonStyles } from '@/core/options/layers/shapes/polygon.ts';\nimport { getSecondaryControlMarkerStyles } from '@/core/options/layers/shapes/secondary-marker.ts';\nimport { getSnapGuideStyles } from '@/core/options/layers/shapes/snap-guides.ts';\nimport { getTextMarkerStyles } from '@/core/options/layers/shapes/text-marker.ts';\nimport { sourceStyles } from '@/core/options/layers/variables.ts';\nimport { type FeatureShape, type LayerStyle, SOURCES } from '@/main.ts';\n\nimport { IS_PRO } from '@/core/constants.ts';\n\nconst styles: { [key in FeatureShape]: LayerStyle } = {\n  // order matters here, layers order will be aligned according to these items\n  polygon: {\n    [SOURCES.main]: getPolygonStyles(sourceStyles[SOURCES.main]),\n    [SOURCES.temporary]: getPolygonStyles(sourceStyles[SOURCES.temporary]),\n    ...(IS_PRO && { [SOURCES.standby]: getPolygonStyles(sourceStyles[SOURCES.standby]) }),\n  },\n  ellipse: {\n    [SOURCES.main]: getPolygonStyles(sourceStyles[SOURCES.main]),\n    [SOURCES.temporary]: getPolygonStyles(sourceStyles[SOURCES.temporary]),\n    ...(IS_PRO && { [SOURCES.standby]: getPolygonStyles(sourceStyles[SOURCES.standby]) }),\n  },\n  rectangle: {\n    [SOURCES.main]: getPolygonStyles(sourceStyles[SOURCES.main]),\n    [SOURCES.temporary]: getPolygonStyles(sourceStyles[SOURCES.temporary]),\n    ...(IS_PRO && { [SOURCES.standby]: getPolygonStyles(sourceStyles[SOURCES.standby]) }),\n  },\n  circle: {\n    [SOURCES.main]: getPolygonStyles(sourceStyles[SOURCES.main]),\n    [SOURCES.temporary]: getPolygonStyles(sourceStyles[SOURCES.temporary]),\n    ...(IS_PRO && { [SOURCES.standby]: getPolygonStyles(sourceStyles[SOURCES.standby]) }),\n  },\n  circle_marker: {\n    [SOURCES.main]: getCircleMarkerStyles(sourceStyles[SOURCES.main]),\n    [SOURCES.temporary]: getCircleMarkerStyles(sourceStyles[SOURCES.temporary]),\n    ...(IS_PRO && { [SOURCES.standby]: getCircleMarkerStyles(sourceStyles[SOURCES.standby]) }),\n  },\n  line: {\n    [SOURCES.main]: getLineStyles(sourceStyles[SOURCES.main]),\n    [SOURCES.temporary]: getLineStyles(sourceStyles[SOURCES.temporary]),\n    ...(IS_PRO && { [SOURCES.standby]: getLineStyles(sourceStyles[SOURCES.standby]) }),\n  },\n  marker: {\n    [SOURCES.temporary]: getMarkerStyles(),\n    [SOURCES.main]: getMarkerStyles(),\n    ...(IS_PRO && { [SOURCES.standby]: getMarkerStyles() }),\n  },\n  text_marker: {\n    [SOURCES.main]: getTextMarkerStyles(),\n    [SOURCES.temporary]: getTextMarkerStyles(),\n    ...(IS_PRO && { [SOURCES.standby]: getTextMarkerStyles() }),\n  },\n  dom_marker: {\n    // not a geojson source, layers aren't required\n    [SOURCES.main]: [],\n    [SOURCES.temporary]: [],\n    ...(IS_PRO && { [SOURCES.standby]: [] }),\n  },\n  center_marker: {\n    [SOURCES.main]: getControlMarkerStyles(sourceStyles[SOURCES.main]),\n    [SOURCES.temporary]: getControlMarkerStyles(sourceStyles[SOURCES.temporary]),\n    ...(IS_PRO && { [SOURCES.standby]: getControlMarkerStyles(sourceStyles[SOURCES.standby]) }),\n  },\n  vertex_marker: {\n    [SOURCES.main]: getControlMarkerStyles(sourceStyles[SOURCES.main]),\n    [SOURCES.temporary]: getControlMarkerStyles(sourceStyles[SOURCES.temporary]),\n    ...(IS_PRO && { [SOURCES.standby]: getControlMarkerStyles(sourceStyles[SOURCES.standby]) }),\n  },\n  edge_marker: {\n    [SOURCES.main]: getSecondaryControlMarkerStyles(sourceStyles[SOURCES.main]),\n    [SOURCES.temporary]: getSecondaryControlMarkerStyles(sourceStyles[SOURCES.temporary]),\n    ...(IS_PRO && {\n      [SOURCES.standby]: getSecondaryControlMarkerStyles(sourceStyles[SOURCES.standby]),\n    }),\n  },\n  snap_guide: {\n    // todo: check which sources can't display snap guides (and other shapes) and remove layers\n    [SOURCES.main]: getSnapGuideStyles(),\n    [SOURCES.temporary]: getSnapGuideStyles(),\n    ...(IS_PRO && { [SOURCES.standby]: getSnapGuideStyles() }),\n  },\n};\n\nexport default styles;\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"16\\\" height=\\\"16\\\" fill=\\\"#0A95F0\\\" class=\\\"bi bi-geo-alt-fill\\\"\\n     viewBox=\\\"0 0 16 16\\\">\\n    <path d=\\\"M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"21\\\" height=\\\"21\\\">\\n    <circle cx=\\\"10.5\\\" cy=\\\"10.5\\\" r=\\\"9.213\\\" fill=\\\"#fff\\\" stroke=\\\"#278cda\\\" stroke-width=\\\"2.303\\\"/>\\n</svg>\\n\"","import { controlIcons } from '@/core/options/icons.ts';\nimport defaultLayerStyles from '@/core/options/layers/style.ts';\nimport type { GmOptionsData } from '@/main.ts';\nimport defaultMarker from '@/assets/images/markers/default-marker.svg';\nimport defaultShapeMarker from '@/assets/images/markers/default-shape-marker.svg';\n\nexport const defaultOptions: GmOptionsData = {\n  settings: {\n    throttlingDelay: 10,\n    awaitDataUpdatesOnEvents: true,\n    useDefaultLayers: true,\n    controlsPosition: 'top-left',\n    controlsUiEnabledByDefault: true,\n    controlsCollapsible: false,\n    controlsStyles: {\n      controlGroupClass: 'maplibregl-ctrl maplibregl-ctrl-group',\n      controlContainerClass: 'gm-control-container',\n      controlButtonClass: 'gm-control-button',\n    },\n    idGenerator: null,\n    markerIcons: {\n      default: defaultMarker,\n      control: defaultShapeMarker,\n    },\n  },\n  layerStyles: defaultLayerStyles,\n  controls: {\n    draw: {\n      marker: {\n        title: 'Marker',\n        icon: controlIcons.marker,\n        uiEnabled: true,\n        active: false,\n      },\n      circle_marker: {\n        title: 'Circle Marker',\n        icon: controlIcons.circle_marker,\n        uiEnabled: true,\n        active: false,\n      },\n      text_marker: {\n        title: 'Text Marker',\n        icon: controlIcons.text_marker,\n        uiEnabled: true,\n        active: false,\n      },\n      circle: {\n        title: 'Circle',\n        icon: controlIcons.circle,\n        uiEnabled: true,\n        active: false,\n      },\n      ellipse: {\n        title: 'Ellipse',\n        icon: controlIcons.ellipse,\n        uiEnabled: true,\n        active: false,\n      },\n      line: {\n        title: 'Line',\n        icon: controlIcons.line,\n        uiEnabled: true,\n        active: false,\n      },\n      rectangle: {\n        title: 'Rectangle',\n        icon: controlIcons.rectangle,\n        uiEnabled: true,\n        active: false,\n      },\n      polygon: {\n        title: 'Polygon',\n        icon: controlIcons.polygon,\n        uiEnabled: true,\n        active: false,\n      },\n    },\n    edit: {\n      drag: {\n        title: 'Drag',\n        icon: controlIcons.drag,\n        uiEnabled: true,\n        active: false,\n      },\n      change: {\n        title: 'Change',\n        icon: controlIcons.change,\n        uiEnabled: true,\n        active: false,\n      },\n      rotate: {\n        title: 'Rotate',\n        icon: controlIcons.rotate,\n        uiEnabled: true,\n        active: false,\n      },\n\n      cut: {\n        title: 'Cut',\n        icon: controlIcons.cut,\n        uiEnabled: true,\n        active: false,\n      },\n\n      delete: {\n        title: 'Delete',\n        icon: controlIcons.delete,\n        uiEnabled: true,\n        active: false,\n      },\n    },\n    helper: {\n      shape_markers: {\n        title: 'Shape markers',\n        icon: null,\n        uiEnabled: false,\n        active: false,\n      },\n      snapping: {\n        title: 'Snapping',\n        icon: controlIcons.snapping,\n        uiEnabled: true,\n        active: false,\n      },\n\n      zoom_to_features: {\n        title: 'Zoom to features',\n        icon: controlIcons.zoom_to_features,\n        uiEnabled: true,\n        active: false,\n      },\n    },\n  },\n};\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nexport default noop;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nexport default baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default strictIndexOf;\n","import baseFindIndex from './_baseFindIndex.js';\nimport baseIsNaN from './_baseIsNaN.js';\nimport strictIndexOf from './_strictIndexOf.js';\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nexport default baseIndexOf;\n","import baseIndexOf from './_baseIndexOf.js';\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nexport default arrayIncludes;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nexport default isKey;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n","import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import isArray from './isArray.js';\nimport isKey from './_isKey.js';\nimport stringToPath from './_stringToPath.js';\nimport toString from './toString.js';\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nexport default castPath;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n","import castPath from './_castPath.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nexport default baseGet;\n","import baseGet from './_baseGet.js';\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nexport default get;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import Symbol from './_Symbol.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nexport default isFlattenable;\n","import arrayPush from './_arrayPush.js';\nimport isFlattenable from './_isFlattenable.js';\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nexport default baseFlatten;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import Stack from './_Stack.js';\nimport baseIsEqual from './_baseIsEqual.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nexport default baseIsMatch;\n","import isObject from './isObject.js';\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nexport default isStrictComparable;\n","import isStrictComparable from './_isStrictComparable.js';\nimport keys from './keys.js';\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nexport default getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nexport default matchesStrictComparable;\n","import baseIsMatch from './_baseIsMatch.js';\nimport getMatchData from './_getMatchData.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nexport default baseMatches;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nexport default baseHasIn;\n","import castPath from './_castPath.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isIndex from './_isIndex.js';\nimport isLength from './isLength.js';\nimport toKey from './_toKey.js';\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nexport default hasPath;\n","import baseHasIn from './_baseHasIn.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nexport default hasIn;\n","import baseIsEqual from './_baseIsEqual.js';\nimport get from './get.js';\nimport hasIn from './hasIn.js';\nimport isKey from './_isKey.js';\nimport isStrictComparable from './_isStrictComparable.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\nimport toKey from './_toKey.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nexport default baseMatchesProperty;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default baseProperty;\n","import baseGet from './_baseGet.js';\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nexport default basePropertyDeep;\n","import baseProperty from './_baseProperty.js';\nimport basePropertyDeep from './_basePropertyDeep.js';\nimport isKey from './_isKey.js';\nimport toKey from './_toKey.js';\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nexport default property;\n","import baseMatches from './_baseMatches.js';\nimport baseMatchesProperty from './_baseMatchesProperty.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\nimport property from './property.js';\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nexport default baseIteratee;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nexport default arrayAggregator;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","import baseFor from './_baseFor.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nexport default baseForOwn;\n","import isArrayLike from './isArrayLike.js';\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nexport default createBaseEach;\n","import baseForOwn from './_baseForOwn.js';\nimport createBaseEach from './_createBaseEach.js';\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nexport default baseEach;\n","import baseEach from './_baseEach.js';\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nexport default baseAggregator;\n","import arrayAggregator from './_arrayAggregator.js';\nimport baseAggregator from './_baseAggregator.js';\nimport baseIteratee from './_baseIteratee.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nexport default createAggregator;\n","import baseAssignValue from './_baseAssignValue.js';\nimport createAggregator from './_createAggregator.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The corresponding value of\n * each key is the number of times the key was returned by `iteratee`. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.countBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': 1, '6': 2 }\n *\n * // The `_.property` iteratee shorthand.\n * _.countBy(['one', 'two', 'three'], 'length');\n * // => { '3': 2, '5': 1 }\n */\nvar countBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    ++result[key];\n  } else {\n    baseAssignValue(result, key, 1);\n  }\n});\n\nexport default countBy;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nexport default mergeWith;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arrayIncludesWith;\n","import baseEach from './_baseEach.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nexport default baseMap;\n","import arrayMap from './_arrayMap.js';\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nexport default baseValues;\n","import baseValues from './_baseValues.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nexport default values;\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport arrayMap from './_arrayMap.js';\nimport baseUnary from './_baseUnary.js';\nimport cacheHas from './_cacheHas.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * The base implementation of methods like `_.intersection`, without support\n * for iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of shared values.\n */\nfunction baseIntersection(arrays, iteratee, comparator) {\n  var includes = comparator ? arrayIncludesWith : arrayIncludes,\n      length = arrays[0].length,\n      othLength = arrays.length,\n      othIndex = othLength,\n      caches = Array(othLength),\n      maxLength = Infinity,\n      result = [];\n\n  while (othIndex--) {\n    var array = arrays[othIndex];\n    if (othIndex && iteratee) {\n      array = arrayMap(array, baseUnary(iteratee));\n    }\n    maxLength = nativeMin(array.length, maxLength);\n    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n      ? new SetCache(othIndex && array)\n      : undefined;\n  }\n  array = arrays[0];\n\n  var index = -1,\n      seen = caches[0];\n\n  outer:\n  while (++index < length && result.length < maxLength) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (!(seen\n          ? cacheHas(seen, computed)\n          : includes(result, computed, comparator)\n        )) {\n      othIndex = othLength;\n      while (--othIndex) {\n        var cache = caches[othIndex];\n        if (!(cache\n              ? cacheHas(cache, computed)\n              : includes(arrays[othIndex], computed, comparator))\n            ) {\n          continue outer;\n        }\n      }\n      if (seen) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseIntersection;\n","import isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Casts `value` to an empty array if it's not an array like object.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array|Object} Returns the cast array-like object.\n */\nfunction castArrayLikeObject(value) {\n  return isArrayLikeObject(value) ? value : [];\n}\n\nexport default castArrayLikeObject;\n","import arrayMap from './_arrayMap.js';\nimport baseIntersection from './_baseIntersection.js';\nimport baseRest from './_baseRest.js';\nimport castArrayLikeObject from './_castArrayLikeObject.js';\n\n/**\n * Creates an array of unique values that are included in all given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of intersecting values.\n * @example\n *\n * _.intersection([2, 1], [2, 3]);\n * // => [2]\n */\nvar intersection = baseRest(function(arrays) {\n  var mapped = arrayMap(arrays, castArrayLikeObject);\n  return (mapped.length && mapped[0] === arrays[0])\n    ? baseIntersection(mapped)\n    : [];\n});\n\nexport default intersection;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","import baseAssignValue from './_baseAssignValue.js';\nimport createAggregator from './_createAggregator.js';\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The corresponding value of\n * each key is the last element responsible for generating the key. The\n * iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * var array = [\n *   { 'dir': 'left', 'code': 97 },\n *   { 'dir': 'right', 'code': 100 }\n * ];\n *\n * _.keyBy(array, function(o) {\n *   return String.fromCharCode(o.code);\n * });\n * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n *\n * _.keyBy(array, 'dir');\n * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n */\nvar keyBy = createAggregator(function(result, value, key) {\n  baseAssignValue(result, key, value);\n});\n\nexport default keyBy;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","import assignValue from './_assignValue.js';\nimport castPath from './_castPath.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nexport default baseSet;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nexport default baseSortBy;\n","import isSymbol from './isSymbol.js';\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nexport default compareAscending;\n","import compareAscending from './_compareAscending.js';\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nexport default compareMultiple;\n","import arrayMap from './_arrayMap.js';\nimport baseGet from './_baseGet.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseMap from './_baseMap.js';\nimport baseSortBy from './_baseSortBy.js';\nimport baseUnary from './_baseUnary.js';\nimport compareMultiple from './_compareMultiple.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nexport default baseOrderBy;\n","import baseSet from './_baseSet.js';\n\n/**\n * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n * it's created. Arrays are created for missing index properties while objects\n * are created for all other missing properties. Use `_.setWith` to customize\n * `path` creation.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.set(object, 'a[0].b.c', 4);\n * console.log(object.a[0].b.c);\n * // => 4\n *\n * _.set(object, ['x', '0', 'y', 'z'], 5);\n * console.log(object.x[0].y.z);\n * // => 5\n */\nfunction set(object, path, value) {\n  return object == null ? object : baseSet(object, path, value);\n}\n\nexport default set;\n","import baseFlatten from './_baseFlatten.js';\nimport baseOrderBy from './_baseOrderBy.js';\nimport baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nexport default sortBy;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","import Set from './_Set.js';\nimport noop from './noop.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nexport default createSet;\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport cacheHas from './_cacheHas.js';\nimport createSet from './_createSet.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseUniq;\n","import baseUniq from './_baseUniq.js';\n\n/**\n * This method is like `_.uniq` except that it accepts `comparator` which\n * is invoked to compare elements of `array`. The order of result values is\n * determined by the order they occur in the array.The comparator is invoked\n * with two arguments: (arrVal, othVal).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n *\n * _.uniqWith(objects, _.isEqual);\n * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n */\nfunction uniqWith(array, comparator) {\n  comparator = typeof comparator == 'function' ? comparator : undefined;\n  return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n}\n\nexport default uniqWith;\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    var _loggersByName = {};\n    var defaultLogger = null;\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods() {\n        /*jshint validthis:true */\n        var level = this.getLevel();\n\n        // Replace the actual methods.\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, this.name);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n\n        // Return any important warnings.\n        if (typeof console === undefinedType && level < this.levels.SILENT) {\n            return \"No console available for logging\";\n        }\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, _level, _loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, factory) {\n      // Private instance variables.\n      var self = this;\n      /**\n       * The level inherited from a parent logger (or a global default). We\n       * cache this here rather than delegating to the parent so that it stays\n       * in sync with the actual logging methods that we have installed (the\n       * parent could change levels but we might not have rebuilt the loggers\n       * in this child yet).\n       * @type {number}\n       */\n      var inheritedLevel;\n      /**\n       * The default level for this logger, if any. If set, this overrides\n       * `inheritedLevel`.\n       * @type {number|null}\n       */\n      var defaultLevel;\n      /**\n       * A user-specific level for this logger. If set, this overrides\n       * `defaultLevel`.\n       * @type {number|null}\n       */\n      var userLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var cookieName = encodeURIComponent(storageKey);\n                  var location = cookie.indexOf(cookieName + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(\n                          cookie.slice(location + cookieName.length + 1)\n                      )[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      function normalizeLevel(input) {\n          var level = input;\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              return level;\n          } else {\n              throw new TypeError(\"log.setLevel() called with invalid level: \" + input);\n          }\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          if (userLevel != null) {\n            return userLevel;\n          } else if (defaultLevel != null) {\n            return defaultLevel;\n          } else {\n            return inheritedLevel;\n          }\n      };\n\n      self.setLevel = function (level, persist) {\n          userLevel = normalizeLevel(level);\n          if (persist !== false) {  // defaults to true\n              persistLevelIfPossible(userLevel);\n          }\n\n          // NOTE: in v2, this should call rebuild(), which updates children.\n          return replaceLoggingMethods.call(self);\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = normalizeLevel(level);\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          userLevel = null;\n          clearPersistedLevel();\n          replaceLoggingMethods.call(self);\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      self.rebuild = function () {\n          if (defaultLogger !== self) {\n              inheritedLevel = normalizeLevel(defaultLogger.getLevel());\n          }\n          replaceLoggingMethods.call(self);\n\n          if (defaultLogger === self) {\n              for (var childName in _loggersByName) {\n                _loggersByName[childName].rebuild();\n              }\n          }\n      };\n\n      // Initialize all the internal levels.\n      inheritedLevel = normalizeLevel(\n          defaultLogger ? defaultLogger.getLevel() : \"WARN\"\n      );\n      var initialLevel = getPersistedLevel();\n      if (initialLevel != null) {\n          userLevel = normalizeLevel(initialLevel);\n      }\n      replaceLoggingMethods.call(self);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    defaultLogger = new Logger();\n\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n            throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n            logger = _loggersByName[name] = new Logger(\n                name,\n                defaultLogger.methodFactory\n            );\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","import { isPlainObject } from 'lodash-es';\nimport log from 'loglevel';\n\nexport const findInCollection = <T>(\n  collection: Map<unknown, T> | Set<T> | Array<T>,\n  callback: (item: T) => boolean,\n): T | null => {\n  let targetItem: T | null = null;\n\n  try {\n    collection.forEach((item: T) => {\n      if (callback(item)) {\n        targetItem = item;\n        throw new Error('found');\n      }\n    });\n  } catch {\n    // no action required\n  }\n\n  return targetItem;\n};\n\ntype Path = ReadonlyArray<string | number>;\n\nexport function forEachDeep(\n  item: unknown,\n  iteratee: (value: unknown, path: Path) => void,\n  path: Path = [],\n): void {\n  iteratee(item, path);\n\n  if (Array.isArray(item)) {\n    item.forEach((value, index) => forEachDeep(value, iteratee, [...path, index]));\n  } else if (isPlainObject(item)) {\n    Object.entries(item as Record<string, unknown>).forEach(([key, value]) =>\n      forEachDeep(value, iteratee, [...path, key]),\n    );\n  } else if (item !== null && typeof item === 'object') {\n    log.warn(`forEachDeep: unknown collection type (${item}), path \"${path.join('.')}\"`);\n  }\n}\n","import { defaultOptions } from '@/core/options/defaults/free.ts';\nimport type { GmOptionsData, ModeName } from '@/types/index.ts';\nimport { cloneDeep, set } from 'lodash-es';\nimport { forEachDeep } from '@/utils/collections.ts';\n\nexport const trackDefaultUiEnabledState = (options: GmOptionsData) => {\n  const EXCLUDED_ACTIONS: ReadonlyArray<ModeName> = ['shape_markers'];\n  const defaultUiEnabled = options.settings.controlsUiEnabledByDefault;\n\n  forEachDeep(options, (_, path) => {\n    const modeName = path.at(2) as ModeName;\n\n    if (path.length === 4 && path.at(-1) === 'uiEnabled') {\n      if (EXCLUDED_ACTIONS.includes(modeName)) {\n        return;\n      }\n      set(options, path, defaultUiEnabled);\n    }\n  });\n};\n\nexport const getDefaultOptions = (): GmOptionsData => {\n  return cloneDeep(defaultOptions);\n};\n","export default false;\n","// Store the references to globals in case someone tries to monkey patch these, causing the below\n// to de-opt (this occurs often when using popular extensions).\nexport var is_array = Array.isArray;\nexport var index_of = Array.prototype.indexOf;\nexport var array_from = Array.from;\nexport var object_keys = Object.keys;\nexport var define_property = Object.defineProperty;\nexport var get_descriptor = Object.getOwnPropertyDescriptor;\nexport var get_descriptors = Object.getOwnPropertyDescriptors;\nexport var object_prototype = Object.prototype;\nexport var array_prototype = Array.prototype;\nexport var get_prototype_of = Object.getPrototypeOf;\nexport var is_extensible = Object.isExtensible;\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\nexport const noop = () => {};\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n\n/**\n * @template [T=any]\n * @param {any} value\n * @returns {value is PromiseLike<T>}\n */\nexport function is_promise(value) {\n\treturn typeof value?.then === 'function';\n}\n\n/** @param {Function} fn */\nexport function run(fn) {\n\treturn fn();\n}\n\n/** @param {Array<() => void>} arr */\nexport function run_all(arr) {\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tarr[i]();\n\t}\n}\n\n/**\n * TODO replace with Promise.withResolvers once supported widely enough\n * @template [T=void]\n */\nexport function deferred() {\n\t/** @type {(value: T) => void} */\n\tvar resolve;\n\n\t/** @type {(reason: any) => void} */\n\tvar reject;\n\n\t/** @type {Promise<T>} */\n\tvar promise = new Promise((res, rej) => {\n\t\tresolve = res;\n\t\treject = rej;\n\t});\n\n\t// @ts-expect-error\n\treturn { promise, resolve, reject };\n}\n\n/**\n * @template V\n * @param {V} value\n * @param {V | (() => V)} fallback\n * @param {boolean} [lazy]\n * @returns {V}\n */\nexport function fallback(value, fallback, lazy = false) {\n\treturn value === undefined\n\t\t? lazy\n\t\t\t? /** @type {() => V} */ (fallback)()\n\t\t\t: /** @type {V} */ (fallback)\n\t\t: value;\n}\n\n/**\n * When encountering a situation like `let [a, b, c] = $derived(blah())`,\n * we need to stash an intermediate value that `a`, `b`, and `c` derive\n * from, in case it's an iterable\n * @template T\n * @param {ArrayLike<T> | Iterable<T>} value\n * @param {number} [n]\n * @returns {Array<T>}\n */\nexport function to_array(value, n) {\n\t// return arrays unchanged\n\tif (Array.isArray(value)) {\n\t\treturn value;\n\t}\n\n\t// if value is not iterable, or `n` is unspecified (indicates a rest\n\t// element, which means we're not concerned about unbounded iterables)\n\t// convert to an array with `Array.from`\n\tif (n === undefined || !(Symbol.iterator in value)) {\n\t\treturn Array.from(value);\n\t}\n\n\t// otherwise, populate an array with `n` values\n\n\t/** @type {T[]} */\n\tconst array = [];\n\n\tfor (const element of value) {\n\t\tarray.push(element);\n\t\tif (array.length === n) break;\n\t}\n\n\treturn array;\n}\n","// General flags\nexport const DERIVED = 1 << 1;\nexport const EFFECT = 1 << 2;\nexport const RENDER_EFFECT = 1 << 3;\n/**\n * An effect that does not destroy its child effects when it reruns.\n * Runs as part of render effects, i.e. not eagerly as part of tree traversal or effect flushing.\n */\nexport const MANAGED_EFFECT = 1 << 24;\n/**\n * An effect that does not destroy its child effects when it reruns (like MANAGED_EFFECT).\n * Runs eagerly as part of tree traversal or effect flushing.\n */\nexport const BLOCK_EFFECT = 1 << 4;\nexport const BRANCH_EFFECT = 1 << 5;\nexport const ROOT_EFFECT = 1 << 6;\nexport const BOUNDARY_EFFECT = 1 << 7;\n/**\n * Indicates that a reaction is connected to an effect root  either it is an effect,\n * or it is a derived that is depended on by at least one effect. If a derived has\n * no dependents, we can disconnect it from the graph, allowing it to either be\n * GC'd or reconnected later if an effect comes to depend on it again\n */\nexport const CONNECTED = 1 << 9;\nexport const CLEAN = 1 << 10;\nexport const DIRTY = 1 << 11;\nexport const MAYBE_DIRTY = 1 << 12;\nexport const INERT = 1 << 13;\nexport const DESTROYED = 1 << 14;\n\n// Flags exclusive to effects\n/** Set once an effect that should run synchronously has run */\nexport const EFFECT_RAN = 1 << 15;\n/**\n * 'Transparent' effects do not create a transition boundary.\n * This is on a block effect 99% of the time but may also be on a branch effect if its parent block effect was pruned\n */\nexport const EFFECT_TRANSPARENT = 1 << 16;\nexport const EAGER_EFFECT = 1 << 17;\nexport const HEAD_EFFECT = 1 << 18;\nexport const EFFECT_PRESERVED = 1 << 19;\nexport const USER_EFFECT = 1 << 20;\nexport const EFFECT_OFFSCREEN = 1 << 25;\n\n// Flags exclusive to deriveds\n/**\n * Tells that we marked this derived and its reactions as visited during the \"mark as (maybe) dirty\"-phase.\n * Will be lifted during execution of the derived and during checking its dirty state (both are necessary\n * because a derived might be checked but not executed).\n */\nexport const WAS_MARKED = 1 << 15;\n\n// Flags used for async\nexport const REACTION_IS_UPDATING = 1 << 21;\nexport const ASYNC = 1 << 22;\n\nexport const ERROR_VALUE = 1 << 23;\n\nexport const STATE_SYMBOL = Symbol('$state');\nexport const LEGACY_PROPS = Symbol('legacy props');\nexport const LOADING_ATTR_SYMBOL = Symbol('');\nexport const PROXY_PATH_SYMBOL = Symbol('proxy path');\n\n/** allow users to ignore aborted signal errors if `reason.name === 'StaleReactionError` */\nexport const STALE_REACTION = new (class StaleReactionError extends Error {\n\tname = 'StaleReactionError';\n\tmessage = 'The reaction that called `getAbortSignal()` was re-run or destroyed';\n})();\n\nexport const ELEMENT_NODE = 1;\nexport const TEXT_NODE = 3;\nexport const COMMENT_NODE = 8;\nexport const DOCUMENT_FRAGMENT_NODE = 11;\n","/** @import { Equals } from '#client' */\n\n/** @type {Equals} */\nexport function equals(value) {\n\treturn value === this.v;\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function safe_not_equal(a, b) {\n\treturn a != a\n\t\t? b == b\n\t\t: a !== b || (a !== null && typeof a === 'object') || typeof a === 'function';\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function not_equal(a, b) {\n\treturn a !== b;\n}\n\n/** @type {Equals} */\nexport function safe_equals(value) {\n\treturn !safe_not_equal(value, this.v);\n}\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\n/**\n * Cannot use `%name%(...)` unless the `experimental.async` compiler option is `true`\n * @param {string} name\n * @returns {never}\n */\nexport function experimental_async_required(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`experimental_async_required\\nCannot use \\`${name}(...)\\` unless the \\`experimental.async\\` compiler option is \\`true\\`\\nhttps://svelte.dev/e/experimental_async_required`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/experimental_async_required`);\n\t}\n}\n\n/**\n * Cannot use `{@render children(...)}` if the parent component uses `let:` directives. Consider using a named snippet instead\n * @returns {never}\n */\nexport function invalid_default_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_default_snippet\\nCannot use \\`{@render children(...)}\\` if the parent component uses \\`let:\\` directives. Consider using a named snippet instead\\nhttps://svelte.dev/e/invalid_default_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_default_snippet`);\n\t}\n}\n\n/**\n * A snippet function was passed invalid arguments. Snippets should only be instantiated via `{@render ...}`\n * @returns {never}\n */\nexport function invalid_snippet_arguments() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet_arguments\\nA snippet function was passed invalid arguments. Snippets should only be instantiated via \\`{@render ...}\\`\\nhttps://svelte.dev/e/invalid_snippet_arguments`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet_arguments`);\n\t}\n}\n\n/**\n * `%name%(...)` can only be used during component initialisation\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_outside_component(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_outside_component\\n\\`${name}(...)\\` can only be used during component initialisation\\nhttps://svelte.dev/e/lifecycle_outside_component`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_outside_component`);\n\t}\n}\n\n/**\n * Context was not set in a parent component\n * @returns {never}\n */\nexport function missing_context() {\n\tif (DEV) {\n\t\tconst error = new Error(`missing_context\\nContext was not set in a parent component\\nhttps://svelte.dev/e/missing_context`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/missing_context`);\n\t}\n}\n\n/**\n * Attempted to render a snippet without a `{@render}` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change `{snippet}` to `{@render snippet()}`.\n * @returns {never}\n */\nexport function snippet_without_render_tag() {\n\tif (DEV) {\n\t\tconst error = new Error(`snippet_without_render_tag\\nAttempted to render a snippet without a \\`{@render}\\` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change \\`{snippet}\\` to \\`{@render snippet()}\\`.\\nhttps://svelte.dev/e/snippet_without_render_tag`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/snippet_without_render_tag`);\n\t}\n}\n\n/**\n * `%name%` is not a store with a `subscribe` method\n * @param {string} name\n * @returns {never}\n */\nexport function store_invalid_shape(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`store_invalid_shape\\n\\`${name}\\` is not a store with a \\`subscribe\\` method\\nhttps://svelte.dev/e/store_invalid_shape`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/store_invalid_shape`);\n\t}\n}\n\n/**\n * The `this` prop on `<svelte:element>` must be a string, if defined\n * @returns {never}\n */\nexport function svelte_element_invalid_this_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_element_invalid_this_value\\nThe \\`this\\` prop on \\`<svelte:element>\\` must be a string, if defined\\nhttps://svelte.dev/e/svelte_element_invalid_this_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_element_invalid_this_value`);\n\t}\n}","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nexport *  from '../shared/errors.js';\n\n/**\n * Cannot create a `$derived(...)` with an `await` expression outside of an effect tree\n * @returns {never}\n */\nexport function async_derived_orphan() {\n\tif (DEV) {\n\t\tconst error = new Error(`async_derived_orphan\\nCannot create a \\`$derived(...)\\` with an \\`await\\` expression outside of an effect tree\\nhttps://svelte.dev/e/async_derived_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/async_derived_orphan`);\n\t}\n}\n\n/**\n * Using `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\n * @returns {never}\n */\nexport function bind_invalid_checkbox_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_checkbox_value\\nUsing \\`bind:value\\` together with a checkbox input is not allowed. Use \\`bind:checked\\` instead\\nhttps://svelte.dev/e/bind_invalid_checkbox_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_checkbox_value`);\n\t}\n}\n\n/**\n * Component %component% has an export named `%key%` that a consumer component is trying to access using `bind:%key%`, which is disallowed. Instead, use `bind:this` (e.g. `<%name% bind:this={component} />`) and then access the property on the bound component instance (e.g. `component.%key%`)\n * @param {string} component\n * @param {string} key\n * @param {string} name\n * @returns {never}\n */\nexport function bind_invalid_export(component, key, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_export\\nComponent ${component} has an export named \\`${key}\\` that a consumer component is trying to access using \\`bind:${key}\\`, which is disallowed. Instead, use \\`bind:this\\` (e.g. \\`<${name} bind:this={component} />\\`) and then access the property on the bound component instance (e.g. \\`component.${key}\\`)\\nhttps://svelte.dev/e/bind_invalid_export`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_export`);\n\t}\n}\n\n/**\n * A component is attempting to bind to a non-bindable property `%key%` belonging to %component% (i.e. `<%name% bind:%key%={...}>`). To mark a property as bindable: `let { %key% = $bindable() } = $props()`\n * @param {string} key\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function bind_not_bindable(key, component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_not_bindable\\nA component is attempting to bind to a non-bindable property \\`${key}\\` belonging to ${component} (i.e. \\`<${name} bind:${key}={...}>\\`). To mark a property as bindable: \\`let { ${key} = $bindable() } = $props()\\`\\nhttps://svelte.dev/e/bind_not_bindable`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_not_bindable`);\n\t}\n}\n\n/**\n * Calling `%method%` on a component instance (of %component%) is no longer valid in Svelte 5\n * @param {string} method\n * @param {string} component\n * @returns {never}\n */\nexport function component_api_changed(method, component) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_changed\\nCalling \\`${method}\\` on a component instance (of ${component}) is no longer valid in Svelte 5\\nhttps://svelte.dev/e/component_api_changed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_changed`);\n\t}\n}\n\n/**\n * Attempted to instantiate %component% with `new %name%`, which is no longer valid in Svelte 5. If this component is not under your control, set the `compatibility.componentApi` compiler option to `4` to keep it working.\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function component_api_invalid_new(component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_invalid_new\\nAttempted to instantiate ${component} with \\`new ${name}\\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \\`compatibility.componentApi\\` compiler option to \\`4\\` to keep it working.\\nhttps://svelte.dev/e/component_api_invalid_new`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_invalid_new`);\n\t}\n}\n\n/**\n * A derived value cannot reference itself recursively\n * @returns {never}\n */\nexport function derived_references_self() {\n\tif (DEV) {\n\t\tconst error = new Error(`derived_references_self\\nA derived value cannot reference itself recursively\\nhttps://svelte.dev/e/derived_references_self`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/derived_references_self`);\n\t}\n}\n\n/**\n * Keyed each block has duplicate key `%value%` at indexes %a% and %b%\n * @param {string} a\n * @param {string} b\n * @param {string | undefined | null} [value]\n * @returns {never}\n */\nexport function each_key_duplicate(a, b, value) {\n\tif (DEV) {\n\t\tconst error = new Error(`each_key_duplicate\\n${value\n\t\t\t? `Keyed each block has duplicate key \\`${value}\\` at indexes ${a} and ${b}`\n\t\t\t: `Keyed each block has duplicate key at indexes ${a} and ${b}`}\\nhttps://svelte.dev/e/each_key_duplicate`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/each_key_duplicate`);\n\t}\n}\n\n/**\n * `%rune%` cannot be used inside an effect cleanup function\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_in_teardown(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_teardown\\n\\`${rune}\\` cannot be used inside an effect cleanup function\\nhttps://svelte.dev/e/effect_in_teardown`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_teardown`);\n\t}\n}\n\n/**\n * Effect cannot be created inside a `$derived` value that was not itself created inside an effect\n * @returns {never}\n */\nexport function effect_in_unowned_derived() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_unowned_derived\\nEffect cannot be created inside a \\`$derived\\` value that was not itself created inside an effect\\nhttps://svelte.dev/e/effect_in_unowned_derived`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_unowned_derived`);\n\t}\n}\n\n/**\n * `%rune%` can only be used inside an effect (e.g. during component initialisation)\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_orphan(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_orphan\\n\\`${rune}\\` can only be used inside an effect (e.g. during component initialisation)\\nhttps://svelte.dev/e/effect_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_orphan`);\n\t}\n}\n\n/**\n * `$effect.pending()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function effect_pending_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_pending_outside_reaction\\n\\`$effect.pending()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/effect_pending_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_pending_outside_reaction`);\n\t}\n}\n\n/**\n * Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\n * @returns {never}\n */\nexport function effect_update_depth_exceeded() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_update_depth_exceeded\\nMaximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\\nhttps://svelte.dev/e/effect_update_depth_exceeded`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_update_depth_exceeded`);\n\t}\n}\n\n/**\n * Cannot use `flushSync` inside an effect\n * @returns {never}\n */\nexport function flush_sync_in_effect() {\n\tif (DEV) {\n\t\tconst error = new Error(`flush_sync_in_effect\\nCannot use \\`flushSync\\` inside an effect\\nhttps://svelte.dev/e/flush_sync_in_effect`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/flush_sync_in_effect`);\n\t}\n}\n\n/**\n * Cannot commit a fork that was already discarded\n * @returns {never}\n */\nexport function fork_discarded() {\n\tif (DEV) {\n\t\tconst error = new Error(`fork_discarded\\nCannot commit a fork that was already discarded\\nhttps://svelte.dev/e/fork_discarded`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/fork_discarded`);\n\t}\n}\n\n/**\n * Cannot create a fork inside an effect or when state changes are pending\n * @returns {never}\n */\nexport function fork_timing() {\n\tif (DEV) {\n\t\tconst error = new Error(`fork_timing\\nCannot create a fork inside an effect or when state changes are pending\\nhttps://svelte.dev/e/fork_timing`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/fork_timing`);\n\t}\n}\n\n/**\n * `getAbortSignal()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function get_abort_signal_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`get_abort_signal_outside_reaction\\n\\`getAbortSignal()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/get_abort_signal_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/get_abort_signal_outside_reaction`);\n\t}\n}\n\n/**\n * Expected to find a hydratable with key `%key%` during hydration, but did not.\n * @param {string} key\n * @returns {never}\n */\nexport function hydratable_missing_but_required(key) {\n\tif (DEV) {\n\t\tconst error = new Error(`hydratable_missing_but_required\\nExpected to find a hydratable with key \\`${key}\\` during hydration, but did not.\\nhttps://svelte.dev/e/hydratable_missing_but_required`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/hydratable_missing_but_required`);\n\t}\n}\n\n/**\n * Failed to hydrate the application\n * @returns {never}\n */\nexport function hydration_failed() {\n\tif (DEV) {\n\t\tconst error = new Error(`hydration_failed\\nFailed to hydrate the application\\nhttps://svelte.dev/e/hydration_failed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/hydration_failed`);\n\t}\n}\n\n/**\n * Could not `{@render}` snippet due to the expression being `null` or `undefined`. Consider using optional chaining `{@render snippet?.()}`\n * @returns {never}\n */\nexport function invalid_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet\\nCould not \\`{@render}\\` snippet due to the expression being \\`null\\` or \\`undefined\\`. Consider using optional chaining \\`{@render snippet?.()}\\`\\nhttps://svelte.dev/e/invalid_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet`);\n\t}\n}\n\n/**\n * `%name%(...)` cannot be used in runes mode\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_legacy_only(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_legacy_only\\n\\`${name}(...)\\` cannot be used in runes mode\\nhttps://svelte.dev/e/lifecycle_legacy_only`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_legacy_only`);\n\t}\n}\n\n/**\n * Cannot do `bind:%key%={undefined}` when `%key%` has a fallback value\n * @param {string} key\n * @returns {never}\n */\nexport function props_invalid_value(key) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_invalid_value\\nCannot do \\`bind:${key}={undefined}\\` when \\`${key}\\` has a fallback value\\nhttps://svelte.dev/e/props_invalid_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_invalid_value`);\n\t}\n}\n\n/**\n * Rest element properties of `$props()` such as `%property%` are readonly\n * @param {string} property\n * @returns {never}\n */\nexport function props_rest_readonly(property) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_rest_readonly\\nRest element properties of \\`$props()\\` such as \\`${property}\\` are readonly\\nhttps://svelte.dev/e/props_rest_readonly`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_rest_readonly`);\n\t}\n}\n\n/**\n * The `%rune%` rune is only available inside `.svelte` and `.svelte.js/ts` files\n * @param {string} rune\n * @returns {never}\n */\nexport function rune_outside_svelte(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`rune_outside_svelte\\nThe \\`${rune}\\` rune is only available inside \\`.svelte\\` and \\`.svelte.js/ts\\` files\\nhttps://svelte.dev/e/rune_outside_svelte`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/rune_outside_svelte`);\n\t}\n}\n\n/**\n * `setContext` must be called when a component first initializes, not in a subsequent effect or after an `await` expression\n * @returns {never}\n */\nexport function set_context_after_init() {\n\tif (DEV) {\n\t\tconst error = new Error(`set_context_after_init\\n\\`setContext\\` must be called when a component first initializes, not in a subsequent effect or after an \\`await\\` expression\\nhttps://svelte.dev/e/set_context_after_init`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/set_context_after_init`);\n\t}\n}\n\n/**\n * Property descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\n * @returns {never}\n */\nexport function state_descriptors_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_descriptors_fixed\\nProperty descriptors defined on \\`$state\\` objects must contain \\`value\\` and always be \\`enumerable\\`, \\`configurable\\` and \\`writable\\`.\\nhttps://svelte.dev/e/state_descriptors_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_descriptors_fixed`);\n\t}\n}\n\n/**\n * Cannot set prototype of `$state` object\n * @returns {never}\n */\nexport function state_prototype_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_prototype_fixed\\nCannot set prototype of \\`$state\\` object\\nhttps://svelte.dev/e/state_prototype_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_prototype_fixed`);\n\t}\n}\n\n/**\n * Updating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\n * @returns {never}\n */\nexport function state_unsafe_mutation() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_unsafe_mutation\\nUpdating state inside \\`$derived(...)\\`, \\`$inspect(...)\\` or a template expression is forbidden. If the value should not be reactive, declare it without \\`$state\\`\\nhttps://svelte.dev/e/state_unsafe_mutation`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_unsafe_mutation`);\n\t}\n}\n\n/**\n * A `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\n * @returns {never}\n */\nexport function svelte_boundary_reset_onerror() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_boundary_reset_onerror\\nA \\`<svelte:boundary>\\` \\`reset\\` function cannot be called while an error is still being handled\\nhttps://svelte.dev/e/svelte_boundary_reset_onerror`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_boundary_reset_onerror`);\n\t}\n}","/** True if experimental.async=true */\nexport let async_mode_flag = false;\n/** True if we're not certain that we only have Svelte 5 code in the compilation */\nexport let legacy_mode_flag = false;\n/** True if $inspect.trace is used */\nexport let tracing_mode_flag = false;\n\nexport function enable_async_mode_flag() {\n\tasync_mode_flag = true;\n}\n\n/** ONLY USE THIS DURING TESTING */\nexport function disable_async_mode_flag() {\n\tasync_mode_flag = false;\n}\n\nexport function enable_legacy_mode_flag() {\n\tlegacy_mode_flag = true;\n}\n\nexport function enable_tracing_mode_flag() {\n\ttracing_mode_flag = true;\n}\n","export const EACH_ITEM_REACTIVE = 1;\nexport const EACH_INDEX_REACTIVE = 1 << 1;\n/** See EachBlock interface metadata.is_controlled for an explanation what this is */\nexport const EACH_IS_CONTROLLED = 1 << 2;\nexport const EACH_IS_ANIMATED = 1 << 3;\nexport const EACH_ITEM_IMMUTABLE = 1 << 4;\n\nexport const PROPS_IS_IMMUTABLE = 1;\nexport const PROPS_IS_RUNES = 1 << 1;\nexport const PROPS_IS_UPDATED = 1 << 2;\nexport const PROPS_IS_BINDABLE = 1 << 3;\nexport const PROPS_IS_LAZY_INITIAL = 1 << 4;\n\nexport const TRANSITION_IN = 1;\nexport const TRANSITION_OUT = 1 << 1;\nexport const TRANSITION_GLOBAL = 1 << 2;\n\nexport const TEMPLATE_FRAGMENT = 1;\nexport const TEMPLATE_USE_IMPORT_NODE = 1 << 1;\nexport const TEMPLATE_USE_SVG = 1 << 2;\nexport const TEMPLATE_USE_MATHML = 1 << 3;\n\nexport const HYDRATION_START = '[';\n/** used to indicate that an `{:else}...` block was rendered */\nexport const HYDRATION_START_ELSE = '[!';\nexport const HYDRATION_END = ']';\nexport const HYDRATION_ERROR = {};\n\nexport const ELEMENT_IS_NAMESPACED = 1;\nexport const ELEMENT_PRESERVE_ATTRIBUTE_CASE = 1 << 1;\nexport const ELEMENT_IS_INPUT = 1 << 2;\n\nexport const UNINITIALIZED = Symbol();\n\n// Dev-time component properties\nexport const FILENAME = Symbol('filename');\nexport const HMR = Symbol('hmr');\n\nexport const NAMESPACE_HTML = 'http://www.w3.org/1999/xhtml';\nexport const NAMESPACE_SVG = 'http://www.w3.org/2000/svg';\nexport const NAMESPACE_MATHML = 'http://www.w3.org/1998/Math/MathML';\n\n// we use a list of ignorable runtime warnings because not every runtime warning\n// can be ignored and we want to keep the validation for svelte-ignore in place\nexport const IGNORABLE_RUNTIME_WARNINGS = /** @type {const} */ ([\n\t'await_waterfall',\n\t'await_reactivity_loss',\n\t'state_snapshot_uncloneable',\n\t'binding_property_non_reactive',\n\t'hydration_attribute_changed',\n\t'hydration_html_changed',\n\t'ownership_invalid_binding',\n\t'ownership_invalid_mutation'\n]);\n\n/**\n * Whitespace inside one of these elements will not result in\n * a whitespace node being created in any circumstances. (This\n * list is almost certainly very incomplete)\n * TODO this is currently unused\n */\nexport const ELEMENTS_WITHOUT_TEXT = ['audio', 'datalist', 'dl', 'optgroup', 'select', 'video'];\n\nexport const ATTACHMENT_KEY = '@attach';\n","/** @import { ComponentContext, DevStackEntry, Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport * as e from './errors.js';\nimport { active_effect, active_reaction } from './runtime.js';\nimport { create_user_effect } from './reactivity/effects.js';\nimport { async_mode_flag, legacy_mode_flag } from '../flags/index.js';\nimport { FILENAME } from '../../constants.js';\nimport { BRANCH_EFFECT, EFFECT_RAN } from './constants.js';\n\n/** @type {ComponentContext | null} */\nexport let component_context = null;\n\n/** @param {ComponentContext | null} context */\nexport function set_component_context(context) {\n\tcomponent_context = context;\n}\n\n/** @type {DevStackEntry | null} */\nexport let dev_stack = null;\n\n/** @param {DevStackEntry | null} stack */\nexport function set_dev_stack(stack) {\n\tdev_stack = stack;\n}\n\n/**\n * Execute a callback with a new dev stack entry\n * @param {() => any} callback - Function to execute\n * @param {DevStackEntry['type']} type - Type of block/component\n * @param {any} component - Component function\n * @param {number} line - Line number\n * @param {number} column - Column number\n * @param {Record<string, any>} [additional] - Any additional properties to add to the dev stack entry\n * @returns {any}\n */\nexport function add_svelte_meta(callback, type, component, line, column, additional) {\n\tconst parent = dev_stack;\n\n\tdev_stack = {\n\t\ttype,\n\t\tfile: component[FILENAME],\n\t\tline,\n\t\tcolumn,\n\t\tparent,\n\t\t...additional\n\t};\n\n\ttry {\n\t\treturn callback();\n\t} finally {\n\t\tdev_stack = parent;\n\t}\n}\n\n/**\n * The current component function. Different from current component context:\n * ```html\n * <!-- App.svelte -->\n * <Foo>\n *   <Bar /> <!-- context == Foo.svelte, function == App.svelte -->\n * </Foo>\n * ```\n * @type {ComponentContext['function']}\n */\nexport let dev_current_component_function = null;\n\n/** @param {ComponentContext['function']} fn */\nexport function set_dev_current_component_function(fn) {\n\tdev_current_component_function = fn;\n}\n\n/**\n * Returns a `[get, set]` pair of functions for working with context in a type-safe way.\n *\n * `get` will throw an error if no parent component called `set`.\n *\n * @template T\n * @returns {[() => T, (context: T) => T]}\n * @since 5.40.0\n */\nexport function createContext() {\n\tconst key = {};\n\n\treturn [\n\t\t() => {\n\t\t\tif (!hasContext(key)) {\n\t\t\t\te.missing_context();\n\t\t\t}\n\n\t\t\treturn getContext(key);\n\t\t},\n\t\t(context) => setContext(key, context)\n\t];\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\tconst context_map = get_or_init_context_map('getContext');\n\tconst result = /** @type {T} */ (context_map.get(key));\n\treturn result;\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tconst context_map = get_or_init_context_map('setContext');\n\n\tif (async_mode_flag) {\n\t\tvar flags = /** @type {Effect} */ (active_effect).f;\n\t\tvar valid =\n\t\t\t!active_reaction &&\n\t\t\t(flags & BRANCH_EFFECT) !== 0 &&\n\t\t\t// pop() runs synchronously, so this indicates we're setting context after an await\n\t\t\t!(/** @type {ComponentContext} */ (component_context).i);\n\n\t\tif (!valid) {\n\t\t\te.set_context_after_init();\n\t\t}\n\t}\n\n\tcontext_map.set(key, context);\n\treturn context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\tconst context_map = get_or_init_context_map('hasContext');\n\treturn context_map.has(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\tconst context_map = get_or_init_context_map('getAllContexts');\n\treturn /** @type {T} */ (context_map);\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @param {any} runes\n * @param {Function} [fn]\n * @returns {void}\n */\nexport function push(props, runes = false, fn) {\n\tcomponent_context = {\n\t\tp: component_context,\n\t\ti: false,\n\t\tc: null,\n\t\te: null,\n\t\ts: props,\n\t\tx: null,\n\t\tl: legacy_mode_flag && !runes ? { s: null, u: null, $: [] } : null\n\t};\n\n\tif (DEV) {\n\t\t// component function\n\t\tcomponent_context.function = fn;\n\t\tdev_current_component_function = fn;\n\t}\n}\n\n/**\n * @template {Record<string, any>} T\n * @param {T} [component]\n * @returns {T}\n */\nexport function pop(component) {\n\tvar context = /** @type {ComponentContext} */ (component_context);\n\tvar effects = context.e;\n\n\tif (effects !== null) {\n\t\tcontext.e = null;\n\n\t\tfor (var fn of effects) {\n\t\t\tcreate_user_effect(fn);\n\t\t}\n\t}\n\n\tif (component !== undefined) {\n\t\tcontext.x = component;\n\t}\n\n\tcontext.i = true;\n\n\tcomponent_context = context.p;\n\n\tif (DEV) {\n\t\tdev_current_component_function = component_context?.function ?? null;\n\t}\n\n\treturn component ?? /** @type {T} */ ({});\n}\n\n/** @returns {boolean} */\nexport function is_runes() {\n\treturn !legacy_mode_flag || (component_context !== null && component_context.l === null);\n}\n\n/**\n * @param {string} name\n * @returns {Map<unknown, unknown>}\n */\nfunction get_or_init_context_map(name) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component(name);\n\t}\n\n\treturn (component_context.c ??= new Map(get_parent_context(component_context) || undefined));\n}\n\n/**\n * @param {ComponentContext} component_context\n * @returns {Map<unknown, unknown> | null}\n */\nfunction get_parent_context(component_context) {\n\tlet parent = component_context.p;\n\twhile (parent !== null) {\n\t\tconst context_map = parent.c;\n\t\tif (context_map !== null) {\n\t\t\treturn context_map;\n\t\t}\n\t\tparent = parent.p;\n\t}\n\treturn null;\n}\n","import { run_all } from '../../shared/utils.js';\nimport { is_flushing_sync } from '../reactivity/batch.js';\n\n/** @type {Array<() => void>} */\nlet micro_tasks = [];\n\nfunction run_micro_tasks() {\n\tvar tasks = micro_tasks;\n\tmicro_tasks = [];\n\trun_all(tasks);\n}\n\n/**\n * @param {() => void} fn\n */\nexport function queue_micro_task(fn) {\n\tif (micro_tasks.length === 0 && !is_flushing_sync) {\n\t\tvar tasks = micro_tasks;\n\t\tqueueMicrotask(() => {\n\t\t\t// If this is false, a flushSync happened in the meantime. Do _not_ run new scheduled microtasks in that case\n\t\t\t// as the ordering of microtasks would be broken at that point - consider this case:\n\t\t\t// - queue_micro_task schedules microtask A to flush task X\n\t\t\t// - synchronously after, flushSync runs, processing task X\n\t\t\t// - synchronously after, some other microtask B is scheduled, but not through queue_micro_task but for example a Promise.resolve() in user code\n\t\t\t// - synchronously after, queue_micro_task schedules microtask C to flush task Y\n\t\t\t// - one tick later, microtask A now resolves, flushing task Y before microtask B, which is incorrect\n\t\t\t// This if check prevents that race condition (that realistically will only happen in tests)\n\t\t\tif (tasks === micro_tasks) run_micro_tasks();\n\t\t});\n\t}\n\n\tmicro_tasks.push(fn);\n}\n\n/**\n * Synchronously run any queued tasks.\n */\nexport function flush_tasks() {\n\twhile (micro_tasks.length > 0) {\n\t\trun_micro_tasks();\n\t}\n}\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nvar bold = 'font-weight: bold';\nvar normal = 'font-weight: normal';\n\n/**\n * Assignment to `%property%` property (%location%) will evaluate to the right-hand side, not the value of `%property%` following the assignment. This may result in unexpected behaviour.\n * @param {string} property\n * @param {string} location\n */\nexport function assignment_value_stale(property, location) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] assignment_value_stale\\n%cAssignment to \\`${property}\\` property (${location}) will evaluate to the right-hand side, not the value of \\`${property}\\` following the assignment. This may result in unexpected behaviour.\\nhttps://svelte.dev/e/assignment_value_stale`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/assignment_value_stale`);\n\t}\n}\n\n/**\n * Detected reactivity loss when reading `%name%`. This happens when state is read in an async function after an earlier `await`\n * @param {string} name\n */\nexport function await_reactivity_loss(name) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] await_reactivity_loss\\n%cDetected reactivity loss when reading \\`${name}\\`. This happens when state is read in an async function after an earlier \\`await\\`\\nhttps://svelte.dev/e/await_reactivity_loss`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/await_reactivity_loss`);\n\t}\n}\n\n/**\n * An async derived, `%name%` (%location%) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app\n * @param {string} name\n * @param {string} location\n */\nexport function await_waterfall(name, location) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] await_waterfall\\n%cAn async derived, \\`${name}\\` (${location}) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app\\nhttps://svelte.dev/e/await_waterfall`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/await_waterfall`);\n\t}\n}\n\n/**\n * `%binding%` (%location%) is binding to a non-reactive property\n * @param {string} binding\n * @param {string | undefined | null} [location]\n */\nexport function binding_property_non_reactive(binding, location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] binding_property_non_reactive\\n%c${location\n\t\t\t\t? `\\`${binding}\\` (${location}) is binding to a non-reactive property`\n\t\t\t\t: `\\`${binding}\\` is binding to a non-reactive property`}\\nhttps://svelte.dev/e/binding_property_non_reactive`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/binding_property_non_reactive`);\n\t}\n}\n\n/**\n * Your `console.%method%` contained `$state` proxies. Consider using `$inspect(...)` or `$state.snapshot(...)` instead\n * @param {string} method\n */\nexport function console_log_state(method) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] console_log_state\\n%cYour \\`console.${method}\\` contained \\`$state\\` proxies. Consider using \\`$inspect(...)\\` or \\`$state.snapshot(...)\\` instead\\nhttps://svelte.dev/e/console_log_state`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/console_log_state`);\n\t}\n}\n\n/**\n * %handler% should be a function. Did you mean to %suggestion%?\n * @param {string} handler\n * @param {string} suggestion\n */\nexport function event_handler_invalid(handler, suggestion) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] event_handler_invalid\\n%c${handler} should be a function. Did you mean to ${suggestion}?\\nhttps://svelte.dev/e/event_handler_invalid`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/event_handler_invalid`);\n\t}\n}\n\n/**\n * Expected to find a hydratable with key `%key%` during hydration, but did not.\n * @param {string} key\n */\nexport function hydratable_missing_but_expected(key) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] hydratable_missing_but_expected\\n%cExpected to find a hydratable with key \\`${key}\\` during hydration, but did not.\\nhttps://svelte.dev/e/hydratable_missing_but_expected`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydratable_missing_but_expected`);\n\t}\n}\n\n/**\n * The `%attribute%` attribute on `%html%` changed its value between server and client renders. The client value, `%value%`, will be ignored in favour of the server value\n * @param {string} attribute\n * @param {string} html\n * @param {string} value\n */\nexport function hydration_attribute_changed(attribute, html, value) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] hydration_attribute_changed\\n%cThe \\`${attribute}\\` attribute on \\`${html}\\` changed its value between server and client renders. The client value, \\`${value}\\`, will be ignored in favour of the server value\\nhttps://svelte.dev/e/hydration_attribute_changed`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_attribute_changed`);\n\t}\n}\n\n/**\n * The value of an `{@html ...}` block %location% changed between server and client renders. The client value will be ignored in favour of the server value\n * @param {string | undefined | null} [location]\n */\nexport function hydration_html_changed(location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] hydration_html_changed\\n%c${location\n\t\t\t\t? `The value of an \\`{@html ...}\\` block ${location} changed between server and client renders. The client value will be ignored in favour of the server value`\n\t\t\t\t: 'The value of an `{@html ...}` block changed between server and client renders. The client value will be ignored in favour of the server value'}\\nhttps://svelte.dev/e/hydration_html_changed`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_html_changed`);\n\t}\n}\n\n/**\n * Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near %location%\n * @param {string | undefined | null} [location]\n */\nexport function hydration_mismatch(location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] hydration_mismatch\\n%c${location\n\t\t\t\t? `Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${location}`\n\t\t\t\t: 'Hydration failed because the initial UI does not match what was rendered on the server'}\\nhttps://svelte.dev/e/hydration_mismatch`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_mismatch`);\n\t}\n}\n\n/**\n * The `render` function passed to `createRawSnippet` should return HTML for a single element\n */\nexport function invalid_raw_snippet_render() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] invalid_raw_snippet_render\\n%cThe \\`render\\` function passed to \\`createRawSnippet\\` should return HTML for a single element\\nhttps://svelte.dev/e/invalid_raw_snippet_render`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/invalid_raw_snippet_render`);\n\t}\n}\n\n/**\n * Detected a migrated `$:` reactive block in `%filename%` that both accesses and updates the same reactive value. This may cause recursive updates when converted to an `$effect`.\n * @param {string} filename\n */\nexport function legacy_recursive_reactive_block(filename) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] legacy_recursive_reactive_block\\n%cDetected a migrated \\`$:\\` reactive block in \\`${filename}\\` that both accesses and updates the same reactive value. This may cause recursive updates when converted to an \\`$effect\\`.\\nhttps://svelte.dev/e/legacy_recursive_reactive_block`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/legacy_recursive_reactive_block`);\n\t}\n}\n\n/**\n * Tried to unmount a component that was not mounted\n */\nexport function lifecycle_double_unmount() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] lifecycle_double_unmount\\n%cTried to unmount a component that was not mounted\\nhttps://svelte.dev/e/lifecycle_double_unmount`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/lifecycle_double_unmount`);\n\t}\n}\n\n/**\n * %parent% passed property `%prop%` to %child% with `bind:`, but its parent component %owner% did not declare `%prop%` as a binding. Consider creating a binding between %owner% and %parent% (e.g. `bind:%prop%={...}` instead of `%prop%={...}`)\n * @param {string} parent\n * @param {string} prop\n * @param {string} child\n * @param {string} owner\n */\nexport function ownership_invalid_binding(parent, prop, child, owner) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] ownership_invalid_binding\\n%c${parent} passed property \\`${prop}\\` to ${child} with \\`bind:\\`, but its parent component ${owner} did not declare \\`${prop}\\` as a binding. Consider creating a binding between ${owner} and ${parent} (e.g. \\`bind:${prop}={...}\\` instead of \\`${prop}={...}\\`)\\nhttps://svelte.dev/e/ownership_invalid_binding`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/ownership_invalid_binding`);\n\t}\n}\n\n/**\n * Mutating unbound props (`%name%`, at %location%) is strongly discouraged. Consider using `bind:%prop%={...}` in %parent% (or using a callback) instead\n * @param {string} name\n * @param {string} location\n * @param {string} prop\n * @param {string} parent\n */\nexport function ownership_invalid_mutation(name, location, prop, parent) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] ownership_invalid_mutation\\n%cMutating unbound props (\\`${name}\\`, at ${location}) is strongly discouraged. Consider using \\`bind:${prop}={...}\\` in ${parent} (or using a callback) instead\\nhttps://svelte.dev/e/ownership_invalid_mutation`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/ownership_invalid_mutation`);\n\t}\n}\n\n/**\n * The `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\n */\nexport function select_multiple_invalid_value() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] select_multiple_invalid_value\\n%cThe \\`value\\` property of a \\`<select multiple>\\` element should be an array, but it received a non-array value. The selection will be kept as is.\\nhttps://svelte.dev/e/select_multiple_invalid_value`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/select_multiple_invalid_value`);\n\t}\n}\n\n/**\n * Reactive `$state(...)` proxies and the values they proxy have different identities. Because of this, comparisons with `%operator%` will produce unexpected results\n * @param {string} operator\n */\nexport function state_proxy_equality_mismatch(operator) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] state_proxy_equality_mismatch\\n%cReactive \\`$state(...)\\` proxies and the values they proxy have different identities. Because of this, comparisons with \\`${operator}\\` will produce unexpected results\\nhttps://svelte.dev/e/state_proxy_equality_mismatch`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_proxy_equality_mismatch`);\n\t}\n}\n\n/**\n * Tried to unmount a state proxy, rather than a component\n */\nexport function state_proxy_unmount() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] state_proxy_unmount\\n%cTried to unmount a state proxy, rather than a component\\nhttps://svelte.dev/e/state_proxy_unmount`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_proxy_unmount`);\n\t}\n}\n\n/**\n * A `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\n */\nexport function svelte_boundary_reset_noop() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] svelte_boundary_reset_noop\\n%cA \\`<svelte:boundary>\\` \\`reset\\` function only resets the boundary the first time it is called\\nhttps://svelte.dev/e/svelte_boundary_reset_noop`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/svelte_boundary_reset_noop`);\n\t}\n}\n\n/**\n * The `slide` transition does not work correctly for elements with `display: %value%`\n * @param {string} value\n */\nexport function transition_slide_display(value) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] transition_slide_display\\n%cThe \\`slide\\` transition does not work correctly for elements with \\`display: ${value}\\`\\nhttps://svelte.dev/e/transition_slide_display`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/transition_slide_display`);\n\t}\n}","/** @import { Source } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tget,\n\tactive_effect,\n\tupdate_version,\n\tactive_reaction,\n\tset_update_version,\n\tset_active_reaction\n} from './runtime.js';\nimport {\n\tarray_prototype,\n\tget_descriptor,\n\tget_prototype_of,\n\tis_array,\n\tobject_prototype\n} from '../shared/utils.js';\nimport {\n\tstate as source,\n\tset,\n\tincrement,\n\tflush_eager_effects,\n\tset_eager_effects_deferred\n} from './reactivity/sources.js';\nimport { PROXY_PATH_SYMBOL, STATE_SYMBOL } from '#client/constants';\nimport { UNINITIALIZED } from '../../constants.js';\nimport * as e from './errors.js';\nimport { tag } from './dev/tracing.js';\nimport { get_error } from '../shared/dev.js';\nimport { tracing_mode_flag } from '../flags/index.js';\n\n// TODO move all regexes into shared module?\nconst regex_is_valid_identifier = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\n\n/**\n * @template T\n * @param {T} value\n * @returns {T}\n */\nexport function proxy(value) {\n\t// if non-proxyable, or is already a proxy, return `value`\n\tif (typeof value !== 'object' || value === null || STATE_SYMBOL in value) {\n\t\treturn value;\n\t}\n\n\tconst prototype = get_prototype_of(value);\n\n\tif (prototype !== object_prototype && prototype !== array_prototype) {\n\t\treturn value;\n\t}\n\n\t/** @type {Map<any, Source<any>>} */\n\tvar sources = new Map();\n\tvar is_proxied_array = is_array(value);\n\tvar version = source(0);\n\n\tvar stack = DEV && tracing_mode_flag ? get_error('created at') : null;\n\tvar parent_version = update_version;\n\n\t/**\n\t * Executes the proxy in the context of the reaction it was originally created in, if any\n\t * @template T\n\t * @param {() => T} fn\n\t */\n\tvar with_parent = (fn) => {\n\t\tif (update_version === parent_version) {\n\t\t\treturn fn();\n\t\t}\n\n\t\t// child source is being created after the initial proxy \n\t\t// prevent it from being associated with the current reaction\n\t\tvar reaction = active_reaction;\n\t\tvar version = update_version;\n\n\t\tset_active_reaction(null);\n\t\tset_update_version(parent_version);\n\n\t\tvar result = fn();\n\n\t\tset_active_reaction(reaction);\n\t\tset_update_version(version);\n\n\t\treturn result;\n\t};\n\n\tif (is_proxied_array) {\n\t\t// We need to create the length source eagerly to ensure that\n\t\t// mutations to the array are properly synced with our proxy\n\t\tsources.set('length', source(/** @type {any[]} */ (value).length, stack));\n\t\tif (DEV) {\n\t\t\tvalue = /** @type {any} */ (inspectable_array(/** @type {any[]} */ (value)));\n\t\t}\n\t}\n\n\t/** Used in dev for $inspect.trace() */\n\tvar path = '';\n\tlet updating = false;\n\t/** @param {string} new_path */\n\tfunction update_path(new_path) {\n\t\tif (updating) return;\n\t\tupdating = true;\n\t\tpath = new_path;\n\n\t\ttag(version, `${path} version`);\n\n\t\t// rename all child sources and child proxies\n\t\tfor (const [prop, source] of sources) {\n\t\t\ttag(source, get_label(path, prop));\n\t\t}\n\t\tupdating = false;\n\t}\n\n\treturn new Proxy(/** @type {any} */ (value), {\n\t\tdefineProperty(_, prop, descriptor) {\n\t\t\tif (\n\t\t\t\t!('value' in descriptor) ||\n\t\t\t\tdescriptor.configurable === false ||\n\t\t\t\tdescriptor.enumerable === false ||\n\t\t\t\tdescriptor.writable === false\n\t\t\t) {\n\t\t\t\t// we disallow non-basic descriptors, because unless they are applied to the\n\t\t\t\t// target object  which we avoid, so that state can be forked  we will run\n\t\t\t\t// afoul of the various invariants\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/getOwnPropertyDescriptor#invariants\n\t\t\t\te.state_descriptors_fixed();\n\t\t\t}\n\t\t\tvar s = sources.get(prop);\n\t\t\tif (s === undefined) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar s = source(descriptor.value, stack);\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tif (DEV && typeof prop === 'string') {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tset(s, descriptor.value, true);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tdeleteProperty(target, prop) {\n\t\t\tvar s = sources.get(prop);\n\n\t\t\tif (s === undefined) {\n\t\t\t\tif (prop in target) {\n\t\t\t\t\tconst s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tincrement(version);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tset(s, UNINITIALIZED);\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tget(target, prop, receiver) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (DEV && prop === PROXY_PATH_SYMBOL) {\n\t\t\t\treturn update_path;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar exists = prop in target;\n\n\t\t\t// create a source, but only if it's an own property and not a prototype property\n\t\t\tif (s === undefined && (!exists || get_descriptor(target, prop)?.writable)) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar p = proxy(exists ? target[prop] : UNINITIALIZED);\n\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\n\t\t\t\tsources.set(prop, s);\n\t\t\t}\n\n\t\t\tif (s !== undefined) {\n\t\t\t\tvar v = get(s);\n\t\t\t\treturn v === UNINITIALIZED ? undefined : v;\n\t\t\t}\n\n\t\t\treturn Reflect.get(target, prop, receiver);\n\t\t},\n\n\t\tgetOwnPropertyDescriptor(target, prop) {\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\tif (descriptor && 'value' in descriptor) {\n\t\t\t\tvar s = sources.get(prop);\n\t\t\t\tif (s) descriptor.value = get(s);\n\t\t\t} else if (descriptor === undefined) {\n\t\t\t\tvar source = sources.get(prop);\n\t\t\t\tvar value = source?.v;\n\n\t\t\t\tif (source !== undefined && value !== UNINITIALIZED) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\twritable: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn descriptor;\n\t\t},\n\n\t\thas(target, prop) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = (s !== undefined && s.v !== UNINITIALIZED) || Reflect.has(target, prop);\n\n\t\t\tif (\n\t\t\t\ts !== undefined ||\n\t\t\t\t(active_effect !== null && (!has || get_descriptor(target, prop)?.writable))\n\t\t\t) {\n\t\t\t\tif (s === undefined) {\n\t\t\t\t\ts = with_parent(() => {\n\t\t\t\t\t\tvar p = has ? proxy(target[prop]) : UNINITIALIZED;\n\t\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn s;\n\t\t\t\t\t});\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\n\t\t\t\tvar value = get(s);\n\t\t\t\tif (value === UNINITIALIZED) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn has;\n\t\t},\n\n\t\tset(target, prop, value, receiver) {\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = prop in target;\n\n\t\t\t// variable.length = value -> clear all signals with index >= value\n\t\t\tif (is_proxied_array && prop === 'length') {\n\t\t\t\tfor (var i = value; i < /** @type {Source<number>} */ (s).v; i += 1) {\n\t\t\t\t\tvar other_s = sources.get(i + '');\n\t\t\t\t\tif (other_s !== undefined) {\n\t\t\t\t\t\tset(other_s, UNINITIALIZED);\n\t\t\t\t\t} else if (i in target) {\n\t\t\t\t\t\t// If the item exists in the original, we need to create an uninitialized source,\n\t\t\t\t\t\t// else a later read of the property would result in a source being created with\n\t\t\t\t\t\t// the value of the original item at that index.\n\t\t\t\t\t\tother_s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\t\tsources.set(i + '', other_s);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(other_s, get_label(path, i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we haven't yet created a source for this property, we need to ensure\n\t\t\t// we do so otherwise if we read it later, then the write won't be tracked and\n\t\t\t// the heuristics of effects will be different vs if we had read the proxied\n\t\t\t// object property before writing to that property.\n\t\t\tif (s === undefined) {\n\t\t\t\tif (!has || get_descriptor(target, prop)?.writable) {\n\t\t\t\t\ts = with_parent(() => source(undefined, stack));\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\tset(s, proxy(value));\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thas = s.v !== UNINITIALIZED;\n\n\t\t\t\tvar p = with_parent(() => proxy(value));\n\t\t\t\tset(s, p);\n\t\t\t}\n\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\t// Set the new value before updating any signals so that any listeners get the new value\n\t\t\tif (descriptor?.set) {\n\t\t\t\tdescriptor.set.call(receiver, value);\n\t\t\t}\n\n\t\t\tif (!has) {\n\t\t\t\t// If we have mutated an array directly, we might need to\n\t\t\t\t// signal that length has also changed. Do it before updating metadata\n\t\t\t\t// to ensure that iterating over the array as a result of a metadata update\n\t\t\t\t// will not cause the length to be out of sync.\n\t\t\t\tif (is_proxied_array && typeof prop === 'string') {\n\t\t\t\t\tvar ls = /** @type {Source<number>} */ (sources.get('length'));\n\t\t\t\t\tvar n = Number(prop);\n\n\t\t\t\t\tif (Number.isInteger(n) && n >= ls.v) {\n\t\t\t\t\t\tset(ls, n + 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\townKeys(target) {\n\t\t\tget(version);\n\n\t\t\tvar own_keys = Reflect.ownKeys(target).filter((key) => {\n\t\t\t\tvar source = sources.get(key);\n\t\t\t\treturn source === undefined || source.v !== UNINITIALIZED;\n\t\t\t});\n\n\t\t\tfor (var [key, source] of sources) {\n\t\t\t\tif (source.v !== UNINITIALIZED && !(key in target)) {\n\t\t\t\t\town_keys.push(key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn own_keys;\n\t\t},\n\n\t\tsetPrototypeOf() {\n\t\t\te.state_prototype_fixed();\n\t\t}\n\t});\n}\n\n/**\n * @param {string} path\n * @param {string | symbol} prop\n */\nfunction get_label(path, prop) {\n\tif (typeof prop === 'symbol') return `${path}[Symbol(${prop.description ?? ''})]`;\n\tif (regex_is_valid_identifier.test(prop)) return `${path}.${prop}`;\n\treturn /^\\d+$/.test(prop) ? `${path}[${prop}]` : `${path}['${prop}']`;\n}\n\n/**\n * @param {any} value\n */\nexport function get_proxied_value(value) {\n\ttry {\n\t\tif (value !== null && typeof value === 'object' && STATE_SYMBOL in value) {\n\t\t\treturn value[STATE_SYMBOL];\n\t\t}\n\t} catch {\n\t\t// the above if check can throw an error if the value in question\n\t\t// is the contentWindow of an iframe on another domain, in which\n\t\t// case we want to just return the value (because it's definitely\n\t\t// not a proxied value) so we don't break any JavaScript interacting\n\t\t// with that iframe (such as various payment companies client side\n\t\t// JavaScript libraries interacting with their iframes on the same\n\t\t// domain)\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {any} a\n * @param {any} b\n */\nexport function is(a, b) {\n\treturn Object.is(get_proxied_value(a), get_proxied_value(b));\n}\n\nconst ARRAY_MUTATING_METHODS = new Set([\n\t'copyWithin',\n\t'fill',\n\t'pop',\n\t'push',\n\t'reverse',\n\t'shift',\n\t'sort',\n\t'splice',\n\t'unshift'\n]);\n\n/**\n * Wrap array mutating methods so $inspect is triggered only once and\n * to prevent logging an array in intermediate state (e.g. with an empty slot)\n * @param {any[]} array\n */\nfunction inspectable_array(array) {\n\treturn new Proxy(array, {\n\t\tget(target, prop, receiver) {\n\t\t\tvar value = Reflect.get(target, prop, receiver);\n\t\t\tif (!ARRAY_MUTATING_METHODS.has(/** @type {string} */ (prop))) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @this {any[]}\n\t\t\t * @param {any[]} args\n\t\t\t */\n\t\t\treturn function (...args) {\n\t\t\t\tset_eager_effects_deferred();\n\t\t\t\tvar result = value.apply(this, args);\n\t\t\t\tflush_eager_effects();\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}\n\t});\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport { DEV } from 'esm-env';\nimport { init_array_prototype_warnings } from '../dev/equality.js';\nimport { get_descriptor, is_extensible } from '../../shared/utils.js';\nimport { active_effect } from '../runtime.js';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { TEXT_NODE, EFFECT_RAN } from '#client/constants';\nimport { eager_block_effects } from '../reactivity/batch.js';\n\n// export these for reference in the compiled code, making global name deduplication unnecessary\n/** @type {Window} */\nexport var $window;\n\n/** @type {Document} */\nexport var $document;\n\n/** @type {boolean} */\nexport var is_firefox;\n\n/** @type {() => Node | null} */\nvar first_child_getter;\n/** @type {() => Node | null} */\nvar next_sibling_getter;\n\n/**\n * Initialize these lazily to avoid issues when using the runtime in a server context\n * where these globals are not available while avoiding a separate server entry point\n */\nexport function init_operations() {\n\tif ($window !== undefined) {\n\t\treturn;\n\t}\n\n\t$window = window;\n\t$document = document;\n\tis_firefox = /Firefox/.test(navigator.userAgent);\n\n\tvar element_prototype = Element.prototype;\n\tvar node_prototype = Node.prototype;\n\tvar text_prototype = Text.prototype;\n\n\t// @ts-ignore\n\tfirst_child_getter = get_descriptor(node_prototype, 'firstChild').get;\n\t// @ts-ignore\n\tnext_sibling_getter = get_descriptor(node_prototype, 'nextSibling').get;\n\n\tif (is_extensible(element_prototype)) {\n\t\t// the following assignments improve perf of lookups on DOM nodes\n\t\t// @ts-expect-error\n\t\telement_prototype.__click = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__className = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__attributes = null;\n\t\t// @ts-expect-error\n\t\telement_prototype.__style = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__e = undefined;\n\t}\n\n\tif (is_extensible(text_prototype)) {\n\t\t// @ts-expect-error\n\t\ttext_prototype.__t = undefined;\n\t}\n\n\tif (DEV) {\n\t\t// @ts-expect-error\n\t\telement_prototype.__svelte_meta = null;\n\n\t\tinit_array_prototype_warnings();\n\t}\n}\n\n/**\n * @param {string} value\n * @returns {Text}\n */\nexport function create_text(value = '') {\n\treturn document.createTextNode(value);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_first_child(node) {\n\treturn /** @type {TemplateNode | null} */ (first_child_getter.call(node));\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_next_sibling(node) {\n\treturn /** @type {TemplateNode | null} */ (next_sibling_getter.call(node));\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @template {Node} N\n * @param {N} node\n * @param {boolean} is_text\n * @returns {TemplateNode | null}\n */\nexport function child(node, is_text) {\n\tif (!hydrating) {\n\t\treturn get_first_child(node);\n\t}\n\n\tvar child = get_first_child(hydrate_node);\n\n\t// Child can be null if we have an element with a single child, like `<p>{text}</p>`, where `text` is empty\n\tif (child === null) {\n\t\tchild = hydrate_node.appendChild(create_text());\n\t} else if (is_text && child.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\t\tchild?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(child);\n\treturn child;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {TemplateNode} node\n * @param {boolean} [is_text]\n * @returns {TemplateNode | null}\n */\nexport function first_child(node, is_text = false) {\n\tif (!hydrating) {\n\t\tvar first = get_first_child(node);\n\n\t\t// TODO prevent user comments with the empty string when preserveComments is true\n\t\tif (first instanceof Comment && first.data === '') return get_next_sibling(first);\n\n\t\treturn first;\n\t}\n\n\t// if an {expression} is empty during SSR, there might be no\n\t// text node to hydrate  we must therefore create one\n\tif (is_text && hydrate_node?.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\n\t\thydrate_node?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\treturn hydrate_node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {TemplateNode} node\n * @param {number} count\n * @param {boolean} is_text\n * @returns {TemplateNode | null}\n */\nexport function sibling(node, count = 1, is_text = false) {\n\tlet next_sibling = hydrating ? hydrate_node : node;\n\tvar last_sibling;\n\n\twhile (count--) {\n\t\tlast_sibling = next_sibling;\n\t\tnext_sibling = /** @type {TemplateNode} */ (get_next_sibling(next_sibling));\n\t}\n\n\tif (!hydrating) {\n\t\treturn next_sibling;\n\t}\n\n\t// if a sibling {expression} is empty during SSR, there might be no\n\t// text node to hydrate  we must therefore create one\n\tif (is_text && next_sibling?.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\t\t// If the next sibling is `null` and we're handling text then it's because\n\t\t// the SSR content was empty for the text, so we need to generate a new text\n\t\t// node and insert it after the last sibling\n\t\tif (next_sibling === null) {\n\t\t\tlast_sibling?.after(text);\n\t\t} else {\n\t\t\tnext_sibling.before(text);\n\t\t}\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tset_hydrate_node(next_sibling);\n\treturn next_sibling;\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {void}\n */\nexport function clear_text_content(node) {\n\tnode.textContent = '';\n}\n\n/**\n * Returns `true` if we're updating the current block, for example `condition` in\n * an `{#if condition}` block just changed. In this case, the branch should be\n * appended (or removed) at the same time as other updates within the\n * current `<svelte:boundary>`\n */\nexport function should_defer_append() {\n\tif (!async_mode_flag) return false;\n\tif (eager_block_effects !== null) return false;\n\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\treturn (flags & EFFECT_RAN) !== 0;\n}\n\n/**\n *\n * @param {string} tag\n * @param {string} [namespace]\n * @param {string} [is]\n * @returns\n */\nexport function create_element(tag, namespace, is) {\n\tlet options = is ? { is } : undefined;\n\tif (namespace) {\n\t\treturn document.createElementNS(namespace, tag, options);\n\t}\n\treturn document.createElement(tag, options);\n}\n\nexport function create_fragment() {\n\treturn document.createDocumentFragment();\n}\n\n/**\n * @param {string} data\n * @returns\n */\nexport function create_comment(data = '') {\n\treturn document.createComment(data);\n}\n\n/**\n * @param {Element} element\n * @param {string} key\n * @param {string} value\n * @returns\n */\nexport function set_attribute(element, key, value = '') {\n\tif (key.startsWith('xlink:')) {\n\t\telement.setAttributeNS('http://www.w3.org/1999/xlink', key, value);\n\t\treturn;\n\t}\n\treturn element.setAttribute(key, value);\n}\n","/** @import { Derived, Effect } from '#client' */\n/** @import { Boundary } from './dom/blocks/boundary.js' */\nimport { DEV } from 'esm-env';\nimport { FILENAME } from '../../constants.js';\nimport { is_firefox } from './dom/operations.js';\nimport { ERROR_VALUE, BOUNDARY_EFFECT, EFFECT_RAN } from './constants.js';\nimport { define_property, get_descriptor } from '../shared/utils.js';\nimport { active_effect, active_reaction } from './runtime.js';\n\nconst adjustments = new WeakMap();\n\n/**\n * @param {unknown} error\n */\nexport function handle_error(error) {\n\tvar effect = active_effect;\n\n\t// for unowned deriveds, don't throw until we read the value\n\tif (effect === null) {\n\t\t/** @type {Derived} */ (active_reaction).f |= ERROR_VALUE;\n\t\treturn error;\n\t}\n\n\tif (DEV && error instanceof Error && !adjustments.has(error)) {\n\t\tadjustments.set(error, get_adjustments(error, effect));\n\t}\n\n\tif ((effect.f & EFFECT_RAN) === 0) {\n\t\t// if the error occurred while creating this subtree, we let it\n\t\t// bubble up until it hits a boundary that can handle it\n\t\tif ((effect.f & BOUNDARY_EFFECT) === 0) {\n\t\t\tif (DEV && !effect.parent && error instanceof Error) {\n\t\t\t\tapply_adjustments(error);\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t}\n\n\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t} else {\n\t\t// otherwise we bubble up the effect tree ourselves\n\t\tinvoke_error_boundary(error, effect);\n\t}\n}\n\n/**\n * @param {unknown} error\n * @param {Effect | null} effect\n */\nexport function invoke_error_boundary(error, effect) {\n\twhile (effect !== null) {\n\t\tif ((effect.f & BOUNDARY_EFFECT) !== 0) {\n\t\t\ttry {\n\t\t\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t\t\t\treturn;\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\n\t\teffect = effect.parent;\n\t}\n\n\tif (DEV && error instanceof Error) {\n\t\tapply_adjustments(error);\n\t}\n\n\tthrow error;\n}\n\n/**\n * Add useful information to the error message/stack in development\n * @param {Error} error\n * @param {Effect} effect\n */\nfunction get_adjustments(error, effect) {\n\tconst message_descriptor = get_descriptor(error, 'message');\n\n\t// if the message was already changed and it's not configurable we can't change it\n\t// or it will throw a different error swallowing the original error\n\tif (message_descriptor && !message_descriptor.configurable) return;\n\n\tvar indent = is_firefox ? '  ' : '\\t';\n\tvar component_stack = `\\n${indent}in ${effect.fn?.name || '<unknown>'}`;\n\tvar context = effect.ctx;\n\n\twhile (context !== null) {\n\t\tcomponent_stack += `\\n${indent}in ${context.function?.[FILENAME].split('/').pop()}`;\n\t\tcontext = context.p;\n\t}\n\n\treturn {\n\t\tmessage: error.message + `\\n${component_stack}\\n`,\n\t\tstack: error.stack\n\t\t\t?.split('\\n')\n\t\t\t.filter((line) => !line.includes('svelte/src/internal'))\n\t\t\t.join('\\n')\n\t};\n}\n\n/**\n * @param {Error} error\n */\nfunction apply_adjustments(error) {\n\tconst adjusted = adjustments.get(error);\n\n\tif (adjusted) {\n\t\tdefine_property(error, 'message', {\n\t\t\tvalue: adjusted.message\n\t\t});\n\n\t\tdefine_property(error, 'stack', {\n\t\t\tvalue: adjusted.stack\n\t\t});\n\t}\n}\n","/** @import { Derived, Signal } from '#client' */\nimport { CLEAN, CONNECTED, DIRTY, MAYBE_DIRTY } from '#client/constants';\n\nconst STATUS_MASK = ~(DIRTY | MAYBE_DIRTY | CLEAN);\n\n/**\n * @param {Signal} signal\n * @param {number} status\n */\nexport function set_signal_status(signal, status) {\n\tsignal.f = (signal.f & STATUS_MASK) | status;\n}\n\n/**\n * Set a derived's status to CLEAN or MAYBE_DIRTY based on its connection state.\n * @param {Derived} derived\n */\nexport function update_derived_status(derived) {\n\t// Only mark as MAYBE_DIRTY if disconnected and has dependencies.\n\tif ((derived.f & CONNECTED) !== 0 || derived.deps === null) {\n\t\tset_signal_status(derived, CLEAN);\n\t} else {\n\t\tset_signal_status(derived, MAYBE_DIRTY);\n\t}\n}\n","/** @import { Derived, Effect, Value } from '#client' */\nimport { CLEAN, DERIVED, DIRTY, MAYBE_DIRTY, WAS_MARKED } from '#client/constants';\nimport { set_signal_status } from './status.js';\n\n/**\n * @param {Value[] | null} deps\n */\nfunction clear_marked(deps) {\n\tif (deps === null) return;\n\n\tfor (const dep of deps) {\n\t\tif ((dep.f & DERIVED) === 0 || (dep.f & WAS_MARKED) === 0) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdep.f ^= WAS_MARKED;\n\n\t\tclear_marked(/** @type {Derived} */ (dep).deps);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {Set<Effect>} dirty_effects\n * @param {Set<Effect>} maybe_dirty_effects\n */\nexport function defer_effect(effect, dirty_effects, maybe_dirty_effects) {\n\tif ((effect.f & DIRTY) !== 0) {\n\t\tdirty_effects.add(effect);\n\t} else if ((effect.f & MAYBE_DIRTY) !== 0) {\n\t\tmaybe_dirty_effects.add(effect);\n\t}\n\n\t// Since we're not executing these effects now, we need to clear any WAS_MARKED flags\n\t// so that other batches can correctly reach these effects during their own traversal\n\tclear_marked(effect.deps);\n\n\t// mark as clean so they get scheduled if they depend on pending async state\n\tset_signal_status(effect, CLEAN);\n}\n","/** @import { Fork } from 'svelte' */\n/** @import { Derived, Effect, Reaction, Source, Value } from '#client' */\n/** @import { Boundary } from '../dom/blocks/boundary' */\nimport {\n\tBLOCK_EFFECT,\n\tBRANCH_EFFECT,\n\tCLEAN,\n\tDESTROYED,\n\tDIRTY,\n\tEFFECT,\n\tASYNC,\n\tINERT,\n\tRENDER_EFFECT,\n\tROOT_EFFECT,\n\tMAYBE_DIRTY,\n\tDERIVED,\n\tBOUNDARY_EFFECT,\n\tEAGER_EFFECT,\n\tHEAD_EFFECT,\n\tERROR_VALUE,\n\tMANAGED_EFFECT\n} from '#client/constants';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { deferred, define_property } from '../../shared/utils.js';\nimport {\n\tactive_effect,\n\tget,\n\tincrement_write_version,\n\tis_dirty,\n\tis_updating_effect,\n\tset_is_updating_effect,\n\tupdate_effect\n} from '../runtime.js';\nimport * as e from '../errors.js';\nimport { flush_tasks, queue_micro_task } from '../dom/task.js';\nimport { DEV } from 'esm-env';\nimport { invoke_error_boundary } from '../error-handling.js';\nimport { flush_eager_effects, old_values, set_eager_effects, source, update } from './sources.js';\nimport { eager_effect, unlink_effect } from './effects.js';\nimport { defer_effect } from './utils.js';\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { set_signal_status } from './status.js';\n\n/** @type {Set<Batch>} */\nconst batches = new Set();\n\n/** @type {Batch | null} */\nexport let current_batch = null;\n\n/**\n * This is needed to avoid overwriting inputs in non-async mode\n * TODO 6.0 remove this, as non-async mode will go away\n * @type {Batch | null}\n */\nexport let previous_batch = null;\n\n/**\n * When time travelling (i.e. working in one batch, while other batches\n * still have ongoing work), we ignore the real values of affected\n * signals in favour of their values within the batch\n * @type {Map<Value, any> | null}\n */\nexport let batch_values = null;\n\n// TODO this should really be a property of `batch`\n/** @type {Effect[]} */\nlet queued_root_effects = [];\n\n/** @type {Effect | null} */\nlet last_scheduled_effect = null;\n\nlet is_flushing = false;\nexport let is_flushing_sync = false;\n\nexport class Batch {\n\tcommitted = false;\n\n\t/**\n\t * The current values of any sources that are updated in this batch\n\t * They keys of this map are identical to `this.#previous`\n\t * @type {Map<Source, any>}\n\t */\n\tcurrent = new Map();\n\n\t/**\n\t * The values of any sources that are updated in this batch _before_ those updates took place.\n\t * They keys of this map are identical to `this.#current`\n\t * @type {Map<Source, any>}\n\t */\n\tprevious = new Map();\n\n\t/**\n\t * When the batch is committed (and the DOM is updated), we need to remove old branches\n\t * and append new ones by calling the functions added inside (if/each/key/etc) blocks\n\t * @type {Set<() => void>}\n\t */\n\t#commit_callbacks = new Set();\n\n\t/**\n\t * If a fork is discarded, we need to destroy any effects that are no longer needed\n\t * @type {Set<(batch: Batch) => void>}\n\t */\n\t#discard_callbacks = new Set();\n\n\t/**\n\t * The number of async effects that are currently in flight\n\t */\n\t#pending = 0;\n\n\t/**\n\t * The number of async effects that are currently in flight, _not_ inside a pending boundary\n\t */\n\t#blocking_pending = 0;\n\n\t/**\n\t * A deferred that resolves when the batch is committed, used with `settled()`\n\t * TODO replace with Promise.withResolvers once supported widely enough\n\t * @type {{ promise: Promise<void>, resolve: (value?: any) => void, reject: (reason: unknown) => void } | null}\n\t */\n\t#deferred = null;\n\n\t/**\n\t * Deferred effects (which run after async work has completed) that are DIRTY\n\t * @type {Set<Effect>}\n\t */\n\t#dirty_effects = new Set();\n\n\t/**\n\t * Deferred effects that are MAYBE_DIRTY\n\t * @type {Set<Effect>}\n\t */\n\t#maybe_dirty_effects = new Set();\n\n\t/**\n\t * A set of branches that still exist, but will be destroyed when this batch\n\t * is committed  we skip over these during `process`\n\t * @type {Set<Effect>}\n\t */\n\tskipped_effects = new Set();\n\n\tis_fork = false;\n\n\tis_deferred() {\n\t\treturn this.is_fork || this.#blocking_pending > 0;\n\t}\n\n\t/**\n\t *\n\t * @param {Effect[]} root_effects\n\t */\n\tprocess(root_effects) {\n\t\tqueued_root_effects = [];\n\n\t\tprevious_batch = null;\n\n\t\tthis.apply();\n\n\t\t/** @type {Effect[]} */\n\t\tvar effects = [];\n\n\t\t/** @type {Effect[]} */\n\t\tvar render_effects = [];\n\n\t\tfor (const root of root_effects) {\n\t\t\tthis.#traverse_effect_tree(root, effects, render_effects);\n\t\t\t// Note: #traverse_effect_tree runs block effects eagerly, which can schedule effects,\n\t\t\t// which means queued_root_effects now may be filled again.\n\n\t\t\t// Helpful for debugging reactivity loss that has to do with branches being skipped:\n\t\t\t// log_inconsistent_branches(root);\n\t\t}\n\n\t\tif (!this.is_fork) {\n\t\t\tthis.#resolve();\n\t\t}\n\n\t\tif (this.is_deferred()) {\n\t\t\tthis.#defer_effects(render_effects);\n\t\t\tthis.#defer_effects(effects);\n\t\t} else {\n\t\t\t// If sources are written to, then work needs to happen in a separate batch, else prior sources would be mixed with\n\t\t\t// newly updated sources, which could lead to infinite loops when effects run over and over again.\n\t\t\tprevious_batch = this;\n\t\t\tcurrent_batch = null;\n\n\t\t\tflush_queued_effects(render_effects);\n\t\t\tflush_queued_effects(effects);\n\n\t\t\tprevious_batch = null;\n\n\t\t\tthis.#deferred?.resolve();\n\t\t}\n\n\t\tbatch_values = null;\n\t}\n\n\t/**\n\t * Traverse the effect tree, executing effects or stashing\n\t * them for later execution as appropriate\n\t * @param {Effect} root\n\t * @param {Effect[]} effects\n\t * @param {Effect[]} render_effects\n\t */\n\t#traverse_effect_tree(root, effects, render_effects) {\n\t\troot.f ^= CLEAN;\n\n\t\tvar effect = root.first;\n\n\t\t/** @type {Effect | null} */\n\t\tvar pending_boundary = null;\n\n\t\twhile (effect !== null) {\n\t\t\tvar flags = effect.f;\n\t\t\tvar is_branch = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) !== 0;\n\t\t\tvar is_skippable_branch = is_branch && (flags & CLEAN) !== 0;\n\n\t\t\tvar skip = is_skippable_branch || (flags & INERT) !== 0 || this.skipped_effects.has(effect);\n\n\t\t\t// Inside a `<svelte:boundary>` with a pending snippet,\n\t\t\t// all effects are deferred until the boundary resolves\n\t\t\t// (except block/async effects, which run immediately)\n\t\t\tif (\n\t\t\t\tasync_mode_flag &&\n\t\t\t\tpending_boundary === null &&\n\t\t\t\t(flags & BOUNDARY_EFFECT) !== 0 &&\n\t\t\t\teffect.b?.is_pending\n\t\t\t) {\n\t\t\t\tpending_boundary = effect;\n\t\t\t}\n\n\t\t\tif (!skip && effect.fn !== null) {\n\t\t\t\tif (is_branch) {\n\t\t\t\t\teffect.f ^= CLEAN;\n\t\t\t\t} else if (\n\t\t\t\t\tpending_boundary !== null &&\n\t\t\t\t\t(flags & (EFFECT | RENDER_EFFECT | MANAGED_EFFECT)) !== 0\n\t\t\t\t) {\n\t\t\t\t\t/** @type {Boundary} */ (pending_boundary.b).defer_effect(effect);\n\t\t\t\t} else if ((flags & EFFECT) !== 0) {\n\t\t\t\t\teffects.push(effect);\n\t\t\t\t} else if (async_mode_flag && (flags & (RENDER_EFFECT | MANAGED_EFFECT)) !== 0) {\n\t\t\t\t\trender_effects.push(effect);\n\t\t\t\t} else if (is_dirty(effect)) {\n\t\t\t\t\tif ((flags & BLOCK_EFFECT) !== 0) this.#dirty_effects.add(effect);\n\t\t\t\t\tupdate_effect(effect);\n\t\t\t\t}\n\n\t\t\t\tvar child = effect.first;\n\n\t\t\t\tif (child !== null) {\n\t\t\t\t\teffect = child;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar parent = effect.parent;\n\t\t\teffect = effect.next;\n\n\t\t\twhile (effect === null && parent !== null) {\n\t\t\t\tif (parent === pending_boundary) {\n\t\t\t\t\tpending_boundary = null;\n\t\t\t\t}\n\n\t\t\t\teffect = parent.next;\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Effect[]} effects\n\t */\n\t#defer_effects(effects) {\n\t\tfor (var i = 0; i < effects.length; i += 1) {\n\t\t\tdefer_effect(effects[i], this.#dirty_effects, this.#maybe_dirty_effects);\n\t\t}\n\t}\n\n\t/**\n\t * Associate a change to a given source with the current\n\t * batch, noting its previous and current values\n\t * @param {Source} source\n\t * @param {any} value\n\t */\n\tcapture(source, value) {\n\t\tif (value !== UNINITIALIZED && !this.previous.has(source)) {\n\t\t\tthis.previous.set(source, value);\n\t\t}\n\n\t\t// Don't save errors in `batch_values`, or they won't be thrown in `runtime.js#get`\n\t\tif ((source.f & ERROR_VALUE) === 0) {\n\t\t\tthis.current.set(source, source.v);\n\t\t\tbatch_values?.set(source, source.v);\n\t\t}\n\t}\n\n\tactivate() {\n\t\tcurrent_batch = this;\n\t\tthis.apply();\n\t}\n\n\tdeactivate() {\n\t\t// If we're not the current batch, don't deactivate,\n\t\t// else we could create zombie batches that are never flushed\n\t\tif (current_batch !== this) return;\n\n\t\tcurrent_batch = null;\n\t\tbatch_values = null;\n\t}\n\n\tflush() {\n\t\tthis.activate();\n\n\t\tif (queued_root_effects.length > 0) {\n\t\t\tflush_effects();\n\n\t\t\tif (current_batch !== null && current_batch !== this) {\n\t\t\t\t// this can happen if a new batch was created during `flush_effects()`\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (this.#pending === 0) {\n\t\t\tthis.process([]); // TODO this feels awkward\n\t\t}\n\n\t\tthis.deactivate();\n\t}\n\n\tdiscard() {\n\t\tfor (const fn of this.#discard_callbacks) fn(this);\n\t\tthis.#discard_callbacks.clear();\n\t}\n\n\t#resolve() {\n\t\tif (this.#blocking_pending === 0) {\n\t\t\t// append/remove branches\n\t\t\tfor (const fn of this.#commit_callbacks) fn();\n\t\t\tthis.#commit_callbacks.clear();\n\t\t}\n\n\t\tif (this.#pending === 0) {\n\t\t\tthis.#commit();\n\t\t}\n\t}\n\n\t#commit() {\n\t\t// If there are other pending batches, they now need to be 'rebased' \n\t\t// in other words, we re-run block/async effects with the newly\n\t\t// committed state, unless the batch in question has a more\n\t\t// recent value for a given source\n\t\tif (batches.size > 1) {\n\t\t\tthis.previous.clear();\n\n\t\t\tvar previous_batch_values = batch_values;\n\t\t\tvar is_earlier = true;\n\n\t\t\tfor (const batch of batches) {\n\t\t\t\tif (batch === this) {\n\t\t\t\t\tis_earlier = false;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t/** @type {Source[]} */\n\t\t\t\tconst sources = [];\n\n\t\t\t\tfor (const [source, value] of this.current) {\n\t\t\t\t\tif (batch.current.has(source)) {\n\t\t\t\t\t\tif (is_earlier && value !== batch.current.get(source)) {\n\t\t\t\t\t\t\t// bring the value up to date\n\t\t\t\t\t\t\tbatch.current.set(source, value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// same value or later batch has more recent value,\n\t\t\t\t\t\t\t// no need to re-run these effects\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsources.push(source);\n\t\t\t\t}\n\n\t\t\t\tif (sources.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Re-run async/block effects that depend on distinct values changed in both batches\n\t\t\t\tconst others = [...batch.current.keys()].filter((s) => !this.current.has(s));\n\t\t\t\tif (others.length > 0) {\n\t\t\t\t\t// Avoid running queued root effects on the wrong branch\n\t\t\t\t\tvar prev_queued_root_effects = queued_root_effects;\n\t\t\t\t\tqueued_root_effects = [];\n\n\t\t\t\t\t/** @type {Set<Value>} */\n\t\t\t\t\tconst marked = new Set();\n\t\t\t\t\t/** @type {Map<Reaction, boolean>} */\n\t\t\t\t\tconst checked = new Map();\n\t\t\t\t\tfor (const source of sources) {\n\t\t\t\t\t\tmark_effects(source, others, marked, checked);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (queued_root_effects.length > 0) {\n\t\t\t\t\t\tcurrent_batch = batch;\n\t\t\t\t\t\tbatch.apply();\n\n\t\t\t\t\t\tfor (const root of queued_root_effects) {\n\t\t\t\t\t\t\tbatch.#traverse_effect_tree(root, [], []);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// TODO do we need to do anything with the dummy effect arrays?\n\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\n\t\t\t\t\tqueued_root_effects = prev_queued_root_effects;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent_batch = null;\n\t\t\tbatch_values = previous_batch_values;\n\t\t}\n\n\t\tthis.committed = true;\n\t\tbatches.delete(this);\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tincrement(blocking) {\n\t\tthis.#pending += 1;\n\t\tif (blocking) this.#blocking_pending += 1;\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tdecrement(blocking) {\n\t\tthis.#pending -= 1;\n\t\tif (blocking) this.#blocking_pending -= 1;\n\n\t\tthis.revive();\n\t}\n\n\trevive() {\n\t\tfor (const e of this.#dirty_effects) {\n\t\t\tthis.#maybe_dirty_effects.delete(e);\n\t\t\tset_signal_status(e, DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tfor (const e of this.#maybe_dirty_effects) {\n\t\t\tset_signal_status(e, MAYBE_DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tthis.flush();\n\t}\n\n\t/** @param {() => void} fn */\n\toncommit(fn) {\n\t\tthis.#commit_callbacks.add(fn);\n\t}\n\n\t/** @param {(batch: Batch) => void} fn */\n\tondiscard(fn) {\n\t\tthis.#discard_callbacks.add(fn);\n\t}\n\n\tsettled() {\n\t\treturn (this.#deferred ??= deferred()).promise;\n\t}\n\n\tstatic ensure() {\n\t\tif (current_batch === null) {\n\t\t\tconst batch = (current_batch = new Batch());\n\t\t\tbatches.add(current_batch);\n\n\t\t\tif (!is_flushing_sync) {\n\t\t\t\tBatch.enqueue(() => {\n\t\t\t\t\tif (current_batch !== batch) {\n\t\t\t\t\t\t// a flushSync happened in the meantime\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbatch.flush();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn current_batch;\n\t}\n\n\t/** @param {() => void} task */\n\tstatic enqueue(task) {\n\t\tqueue_micro_task(task);\n\t}\n\n\tapply() {\n\t\tif (!async_mode_flag || (!this.is_fork && batches.size === 1)) return;\n\n\t\t// if there are multiple batches, we are 'time travelling' \n\t\t// we need to override values with the ones in this batch...\n\t\tbatch_values = new Map(this.current);\n\n\t\t// ...and undo changes belonging to other batches\n\t\tfor (const batch of batches) {\n\t\t\tif (batch === this) continue;\n\n\t\t\tfor (const [source, previous] of batch.previous) {\n\t\t\t\tif (!batch_values.has(source)) {\n\t\t\t\t\tbatch_values.set(source, previous);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Synchronously flush any pending updates.\n * Returns void if no callback is provided, otherwise returns the result of calling the callback.\n * @template [T=void]\n * @param {(() => T) | undefined} [fn]\n * @returns {T}\n */\nexport function flushSync(fn) {\n\tvar was_flushing_sync = is_flushing_sync;\n\tis_flushing_sync = true;\n\n\ttry {\n\t\tvar result;\n\n\t\tif (fn) {\n\t\t\tif (current_batch !== null) {\n\t\t\t\tflush_effects();\n\t\t\t}\n\n\t\t\tresult = fn();\n\t\t}\n\n\t\twhile (true) {\n\t\t\tflush_tasks();\n\n\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\tcurrent_batch?.flush();\n\n\t\t\t\t// we need to check again, in case we just updated an `$effect.pending()`\n\t\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\t\t// this would be reset in `flush_effects()` but since we are early returning here,\n\t\t\t\t\t// we need to reset it here as well in case the first time there's 0 queued root effects\n\t\t\t\t\tlast_scheduled_effect = null;\n\n\t\t\t\t\treturn /** @type {T} */ (result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tflush_effects();\n\t\t}\n\t} finally {\n\t\tis_flushing_sync = was_flushing_sync;\n\t}\n}\n\nfunction flush_effects() {\n\tvar was_updating_effect = is_updating_effect;\n\tis_flushing = true;\n\n\tvar source_stacks = DEV ? new Set() : null;\n\n\ttry {\n\t\tvar flush_count = 0;\n\t\tset_is_updating_effect(true);\n\n\t\twhile (queued_root_effects.length > 0) {\n\t\t\tvar batch = Batch.ensure();\n\n\t\t\tif (flush_count++ > 1000) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tvar updates = new Map();\n\n\t\t\t\t\tfor (const source of batch.current.keys()) {\n\t\t\t\t\t\tfor (const [stack, update] of source.updated ?? []) {\n\t\t\t\t\t\t\tvar entry = updates.get(stack);\n\n\t\t\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\t\t\tentry = { error: update.error, count: 0 };\n\t\t\t\t\t\t\t\tupdates.set(stack, entry);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tentry.count += update.count;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const update of updates.values()) {\n\t\t\t\t\t\tif (update.error) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.error(update.error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tinfinite_loop_guard();\n\t\t\t}\n\n\t\t\tbatch.process(queued_root_effects);\n\t\t\told_values.clear();\n\n\t\t\tif (DEV) {\n\t\t\t\tfor (const source of batch.current.keys()) {\n\t\t\t\t\t/** @type {Set<Source>} */ (source_stacks).add(source);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tis_flushing = false;\n\t\tset_is_updating_effect(was_updating_effect);\n\n\t\tlast_scheduled_effect = null;\n\n\t\tif (DEV) {\n\t\t\tfor (const source of /** @type {Set<Source>} */ (source_stacks)) {\n\t\t\t\tsource.updated = null;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction infinite_loop_guard() {\n\ttry {\n\t\te.effect_update_depth_exceeded();\n\t} catch (error) {\n\t\tif (DEV) {\n\t\t\t// stack contains no useful information, replace it\n\t\t\tdefine_property(error, 'stack', { value: '' });\n\t\t}\n\n\t\t// Best effort: invoke the boundary nearest the most recent\n\t\t// effect and hope that it's relevant to the infinite loop\n\t\tinvoke_error_boundary(error, last_scheduled_effect);\n\t}\n}\n\n/** @type {Set<Effect> | null} */\nexport let eager_block_effects = null;\n\n/**\n * @param {Array<Effect>} effects\n * @returns {void}\n */\nfunction flush_queued_effects(effects) {\n\tvar length = effects.length;\n\tif (length === 0) return;\n\n\tvar i = 0;\n\n\twhile (i < length) {\n\t\tvar effect = effects[i++];\n\n\t\tif ((effect.f & (DESTROYED | INERT)) === 0 && is_dirty(effect)) {\n\t\t\teager_block_effects = new Set();\n\n\t\t\tupdate_effect(effect);\n\n\t\t\t// Effects with no dependencies or teardown do not get added to the effect tree.\n\t\t\t// Deferred effects (e.g. `$effect(...)`) _are_ added to the tree because we\n\t\t\t// don't know if we need to keep them until they are executed. Doing the check\n\t\t\t// here (rather than in `update_effect`) allows us to skip the work for\n\t\t\t// immediate effects.\n\t\t\tif (effect.deps === null && effect.first === null && effect.nodes === null) {\n\t\t\t\t// if there's no teardown or abort controller we completely unlink\n\t\t\t\t// the effect from the graph\n\t\t\t\tif (effect.teardown === null && effect.ac === null) {\n\t\t\t\t\t// remove this effect from the graph\n\t\t\t\t\tunlink_effect(effect);\n\t\t\t\t} else {\n\t\t\t\t\t// keep the effect in the graph, but free up some memory\n\t\t\t\t\teffect.fn = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If update_effect() has a flushSync() in it, we may have flushed another flush_queued_effects(),\n\t\t\t// which already handled this logic and did set eager_block_effects to null.\n\t\t\tif (eager_block_effects?.size > 0) {\n\t\t\t\told_values.clear();\n\n\t\t\t\tfor (const e of eager_block_effects) {\n\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\n\t\t\t\t\t// Run effects in order from ancestor to descendant, else we could run into nullpointers\n\t\t\t\t\t/** @type {Effect[]} */\n\t\t\t\t\tconst ordered_effects = [e];\n\t\t\t\t\tlet ancestor = e.parent;\n\t\t\t\t\twhile (ancestor !== null) {\n\t\t\t\t\t\tif (eager_block_effects.has(ancestor)) {\n\t\t\t\t\t\t\teager_block_effects.delete(ancestor);\n\t\t\t\t\t\t\tordered_effects.push(ancestor);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tancestor = ancestor.parent;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let j = ordered_effects.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tconst e = ordered_effects[j];\n\t\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\t\t\t\t\t\tupdate_effect(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\teager_block_effects.clear();\n\t\t\t}\n\t\t}\n\t}\n\n\teager_block_effects = null;\n}\n\n/**\n * This is similar to `mark_reactions`, but it only marks async/block effects\n * depending on `value` and at least one of the other `sources`, so that\n * these effects can re-run after another batch has been committed\n * @param {Value} value\n * @param {Source[]} sources\n * @param {Set<Value>} marked\n * @param {Map<Reaction, boolean>} checked\n */\nfunction mark_effects(value, sources, marked, checked) {\n\tif (marked.has(value)) return;\n\tmarked.add(value);\n\n\tif (value.reactions !== null) {\n\t\tfor (const reaction of value.reactions) {\n\t\t\tconst flags = reaction.f;\n\n\t\t\tif ((flags & DERIVED) !== 0) {\n\t\t\t\tmark_effects(/** @type {Derived} */ (reaction), sources, marked, checked);\n\t\t\t} else if (\n\t\t\t\t(flags & (ASYNC | BLOCK_EFFECT)) !== 0 &&\n\t\t\t\t(flags & DIRTY) === 0 &&\n\t\t\t\tdepends_on(reaction, sources, checked)\n\t\t\t) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * When committing a fork, we need to trigger eager effects so that\n * any `$state.eager(...)` expressions update immediately. This\n * function allows us to discover them\n * @param {Value} value\n * @param {Set<Effect>} effects\n */\nfunction mark_eager_effects(value, effects) {\n\tif (value.reactions === null) return;\n\n\tfor (const reaction of value.reactions) {\n\t\tconst flags = reaction.f;\n\n\t\tif ((flags & DERIVED) !== 0) {\n\t\t\tmark_eager_effects(/** @type {Derived} */ (reaction), effects);\n\t\t} else if ((flags & EAGER_EFFECT) !== 0) {\n\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\teffects.add(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n\n/**\n * @param {Reaction} reaction\n * @param {Source[]} sources\n * @param {Map<Reaction, boolean>} checked\n */\nfunction depends_on(reaction, sources, checked) {\n\tconst depends = checked.get(reaction);\n\tif (depends !== undefined) return depends;\n\n\tif (reaction.deps !== null) {\n\t\tfor (const dep of reaction.deps) {\n\t\t\tif (sources.includes(dep)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ((dep.f & DERIVED) !== 0 && depends_on(/** @type {Derived} */ (dep), sources, checked)) {\n\t\t\t\tchecked.set(/** @type {Derived} */ (dep), true);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tchecked.set(reaction, false);\n\n\treturn false;\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function schedule_effect(signal) {\n\tvar effect = (last_scheduled_effect = signal);\n\n\twhile (effect.parent !== null) {\n\t\teffect = effect.parent;\n\t\tvar flags = effect.f;\n\n\t\t// if the effect is being scheduled because a parent (each/await/etc) block\n\t\t// updated an internal source, bail out or we'll cause a second flush\n\t\tif (\n\t\t\tis_flushing &&\n\t\t\teffect === active_effect &&\n\t\t\t(flags & BLOCK_EFFECT) !== 0 &&\n\t\t\t(flags & HEAD_EFFECT) === 0\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((flags & (ROOT_EFFECT | BRANCH_EFFECT)) !== 0) {\n\t\t\tif ((flags & CLEAN) === 0) return;\n\t\t\teffect.f ^= CLEAN;\n\t\t}\n\t}\n\n\tqueued_root_effects.push(effect);\n}\n\n/** @type {Source<number>[]} */\nlet eager_versions = [];\n\nfunction eager_flush() {\n\ttry {\n\t\tflushSync(() => {\n\t\t\tfor (const version of eager_versions) {\n\t\t\t\tupdate(version);\n\t\t\t}\n\t\t});\n\t} finally {\n\t\teager_versions = [];\n\t}\n}\n\n/**\n * Implementation of `$state.eager(fn())`\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function eager(fn) {\n\tvar version = source(0);\n\tvar initial = true;\n\tvar value = /** @type {T} */ (undefined);\n\n\tget(version);\n\n\teager_effect(() => {\n\t\tif (initial) {\n\t\t\t// the first time this runs, we create an eager effect\n\t\t\t// that will run eagerly whenever the expression changes\n\t\t\tvar previous_batch_values = batch_values;\n\n\t\t\ttry {\n\t\t\t\tbatch_values = null;\n\t\t\t\tvalue = fn();\n\t\t\t} finally {\n\t\t\t\tbatch_values = previous_batch_values;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// the second time this effect runs, it's to schedule a\n\t\t// `version` update. since this will recreate the effect,\n\t\t// we don't need to evaluate the expression here\n\t\tif (eager_versions.length === 0) {\n\t\t\tqueue_micro_task(eager_flush);\n\t\t}\n\n\t\teager_versions.push(version);\n\t});\n\n\tinitial = false;\n\n\treturn value;\n}\n\n/**\n * Creates a 'fork', in which state changes are evaluated but not applied to the DOM.\n * This is useful for speculatively loading data (for example) when you suspect that\n * the user is about to take some action.\n *\n * Frameworks like SvelteKit can use this to preload data when the user touches or\n * hovers over a link, making any subsequent navigation feel instantaneous.\n *\n * The `fn` parameter is a synchronous function that modifies some state. The\n * state changes will be reverted after the fork is initialised, then reapplied\n * if and when the fork is eventually committed.\n *\n * When it becomes clear that a fork will _not_ be committed (e.g. because the\n * user navigated elsewhere), it must be discarded to avoid leaking memory.\n *\n * @param {() => void} fn\n * @returns {Fork}\n * @since 5.42\n */\nexport function fork(fn) {\n\tif (!async_mode_flag) {\n\t\te.experimental_async_required('fork');\n\t}\n\n\tif (current_batch !== null) {\n\t\te.fork_timing();\n\t}\n\n\tvar batch = Batch.ensure();\n\tbatch.is_fork = true;\n\tbatch_values = new Map();\n\n\tvar committed = false;\n\tvar settled = batch.settled();\n\n\tflushSync(fn);\n\n\t// revert state changes\n\tfor (var [source, value] of batch.previous) {\n\t\tsource.v = value;\n\t}\n\n\t// make writable deriveds dirty, so they recalculate correctly\n\tfor (source of batch.current.keys()) {\n\t\tif ((source.f & DERIVED) !== 0) {\n\t\t\tset_signal_status(source, DIRTY);\n\t\t}\n\t}\n\n\treturn {\n\t\tcommit: async () => {\n\t\t\tif (committed) {\n\t\t\t\tawait settled;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!batches.has(batch)) {\n\t\t\t\te.fork_discarded();\n\t\t\t}\n\n\t\t\tcommitted = true;\n\n\t\t\tbatch.is_fork = false;\n\n\t\t\t// apply changes and update write versions so deriveds see the change\n\t\t\tfor (var [source, value] of batch.current) {\n\t\t\t\tsource.v = value;\n\t\t\t\tsource.wv = increment_write_version();\n\t\t\t}\n\n\t\t\t// trigger any `$state.eager(...)` expressions with the new state.\n\t\t\t// eager effects don't get scheduled like other effects, so we\n\t\t\t// can't just encounter them during traversal, we need to\n\t\t\t// proactively flush them\n\t\t\t// TODO maybe there's a better implementation?\n\t\t\tflushSync(() => {\n\t\t\t\t/** @type {Set<Effect>} */\n\t\t\t\tvar eager_effects = new Set();\n\n\t\t\t\tfor (var source of batch.current.keys()) {\n\t\t\t\t\tmark_eager_effects(source, eager_effects);\n\t\t\t\t}\n\n\t\t\t\tset_eager_effects(eager_effects);\n\t\t\t\tflush_eager_effects();\n\t\t\t});\n\n\t\t\tbatch.revive();\n\t\t\tawait settled;\n\t\t},\n\t\tdiscard: () => {\n\t\t\tif (!committed && batches.has(batch)) {\n\t\t\t\tbatches.delete(batch);\n\t\t\t\tbatch.discard();\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Forcibly remove all current batches, to prevent cross-talk between tests\n */\nexport function clear() {\n\tbatches.clear();\n}\n","import { get, tick, untrack } from '../internal/client/runtime.js';\nimport { effect_tracking, render_effect } from '../internal/client/reactivity/effects.js';\nimport { source, increment } from '../internal/client/reactivity/sources.js';\nimport { tag } from '../internal/client/dev/tracing.js';\nimport { DEV } from 'esm-env';\nimport { queue_micro_task } from '../internal/client/dom/task.js';\n\n/**\n * Returns a `subscribe` function that integrates external event-based systems with Svelte's reactivity.\n * It's particularly useful for integrating with web APIs like `MediaQuery`, `IntersectionObserver`, or `WebSocket`.\n *\n * If `subscribe` is called inside an effect (including indirectly, for example inside a getter),\n * the `start` callback will be called with an `update` function. Whenever `update` is called, the effect re-runs.\n *\n * If `start` returns a cleanup function, it will be called when the effect is destroyed.\n *\n * If `subscribe` is called in multiple effects, `start` will only be called once as long as the effects\n * are active, and the returned teardown function will only be called when all effects are destroyed.\n *\n * It's best understood with an example. Here's an implementation of [`MediaQuery`](https://svelte.dev/docs/svelte/svelte-reactivity#MediaQuery):\n *\n * ```js\n * import { createSubscriber } from 'svelte/reactivity';\n * import { on } from 'svelte/events';\n *\n * export class MediaQuery {\n * \t#query;\n * \t#subscribe;\n *\n * \tconstructor(query) {\n * \t\tthis.#query = window.matchMedia(`(${query})`);\n *\n * \t\tthis.#subscribe = createSubscriber((update) => {\n * \t\t\t// when the `change` event occurs, re-run any effects that read `this.current`\n * \t\t\tconst off = on(this.#query, 'change', update);\n *\n * \t\t\t// stop listening when all the effects are destroyed\n * \t\t\treturn () => off();\n * \t\t});\n * \t}\n *\n * \tget current() {\n * \t\t// This makes the getter reactive, if read in an effect\n * \t\tthis.#subscribe();\n *\n * \t\t// Return the current state of the query, whether or not we're in an effect\n * \t\treturn this.#query.matches;\n * \t}\n * }\n * ```\n * @param {(update: () => void) => (() => void) | void} start\n * @since 5.7.0\n */\nexport function createSubscriber(start) {\n\tlet subscribers = 0;\n\tlet version = source(0);\n\t/** @type {(() => void) | void} */\n\tlet stop;\n\n\tif (DEV) {\n\t\ttag(version, 'createSubscriber version');\n\t}\n\n\treturn () => {\n\t\tif (effect_tracking()) {\n\t\t\tget(version);\n\n\t\t\trender_effect(() => {\n\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\tstop = untrack(() => start(() => increment(version)));\n\t\t\t\t}\n\n\t\t\t\tsubscribers += 1;\n\n\t\t\t\treturn () => {\n\t\t\t\t\tqueue_micro_task(() => {\n\t\t\t\t\t\t// Only count down after a microtask, else we would reach 0 before our own render effect reruns,\n\t\t\t\t\t\t// but reach 1 again when the tick callback of the prior teardown runs. That would mean we\n\t\t\t\t\t\t// re-subcribe unnecessarily and create a memory leak because the old subscription is never cleaned up.\n\t\t\t\t\t\tsubscribers -= 1;\n\n\t\t\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\t\t\tstop?.();\n\t\t\t\t\t\t\tstop = undefined;\n\t\t\t\t\t\t\t// Increment the version to ensure any dependent deriveds are marked dirty when the subscription is picked up again later.\n\t\t\t\t\t\t\t// If we didn't do this then the comparison of write versions would determine that the derived has a later version than\n\t\t\t\t\t\t\t// the subscriber, and it would not be re-run.\n\t\t\t\t\t\t\tincrement(version);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n}\n","/** @import { Effect, Source, TemplateNode, } from '#client' */\nimport {\n\tBOUNDARY_EFFECT,\n\tCOMMENT_NODE,\n\tDIRTY,\n\tEFFECT_PRESERVED,\n\tEFFECT_TRANSPARENT,\n\tMAYBE_DIRTY\n} from '#client/constants';\nimport { HYDRATION_START_ELSE } from '../../../../constants.js';\nimport { component_context, set_component_context } from '../../context.js';\nimport { handle_error, invoke_error_boundary } from '../../error-handling.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\tmove_effect,\n\tpause_effect\n} from '../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tget,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tnext,\n\tskip_nodes,\n\tset_hydrate_node\n} from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport * as e from '../../errors.js';\nimport * as w from '../../warnings.js';\nimport { DEV } from 'esm-env';\nimport { Batch, schedule_effect } from '../../reactivity/batch.js';\nimport { internal_set, source } from '../../reactivity/sources.js';\nimport { tag } from '../../dev/tracing.js';\nimport { createSubscriber } from '../../../../reactivity/create-subscriber.js';\nimport { create_text } from '../operations.js';\nimport { defer_effect } from '../../reactivity/utils.js';\nimport { set_signal_status } from '../../reactivity/status.js';\n\n/**\n * @typedef {{\n * \t onerror?: (error: unknown, reset: () => void) => void;\n *   failed?: (anchor: Node, error: () => unknown, reset: () => () => void) => void;\n *   pending?: (anchor: Node) => void;\n * }} BoundaryProps\n */\n\nvar flags = EFFECT_TRANSPARENT | EFFECT_PRESERVED | BOUNDARY_EFFECT;\n\n/**\n * @param {TemplateNode} node\n * @param {BoundaryProps} props\n * @param {((anchor: Node) => void)} children\n * @returns {void}\n */\nexport function boundary(node, props, children) {\n\tnew Boundary(node, props, children);\n}\n\nexport class Boundary {\n\t/** @type {Boundary | null} */\n\tparent;\n\n\tis_pending = false;\n\n\t/** @type {TemplateNode} */\n\t#anchor;\n\n\t/** @type {TemplateNode | null} */\n\t#hydrate_open = hydrating ? hydrate_node : null;\n\n\t/** @type {BoundaryProps} */\n\t#props;\n\n\t/** @type {((anchor: Node) => void)} */\n\t#children;\n\n\t/** @type {Effect} */\n\t#effect;\n\n\t/** @type {Effect | null} */\n\t#main_effect = null;\n\n\t/** @type {Effect | null} */\n\t#pending_effect = null;\n\n\t/** @type {Effect | null} */\n\t#failed_effect = null;\n\n\t/** @type {DocumentFragment | null} */\n\t#offscreen_fragment = null;\n\n\t/** @type {TemplateNode | null} */\n\t#pending_anchor = null;\n\n\t#local_pending_count = 0;\n\t#pending_count = 0;\n\n\t#is_creating_fallback = false;\n\n\t/** @type {Set<Effect>} */\n\t#dirty_effects = new Set();\n\n\t/** @type {Set<Effect>} */\n\t#maybe_dirty_effects = new Set();\n\n\t/**\n\t * A source containing the number of pending async deriveds/expressions.\n\t * Only created if `$effect.pending()` is used inside the boundary,\n\t * otherwise updating the source results in needless `Batch.ensure()`\n\t * calls followed by no-op flushes\n\t * @type {Source<number> | null}\n\t */\n\t#effect_pending = null;\n\n\t#effect_pending_subscriber = createSubscriber(() => {\n\t\tthis.#effect_pending = source(this.#local_pending_count);\n\n\t\tif (DEV) {\n\t\t\ttag(this.#effect_pending, '$effect.pending()');\n\t\t}\n\n\t\treturn () => {\n\t\t\tthis.#effect_pending = null;\n\t\t};\n\t});\n\n\t/**\n\t * @param {TemplateNode} node\n\t * @param {BoundaryProps} props\n\t * @param {((anchor: Node) => void)} children\n\t */\n\tconstructor(node, props, children) {\n\t\tthis.#anchor = node;\n\t\tthis.#props = props;\n\t\tthis.#children = children;\n\n\t\tthis.parent = /** @type {Effect} */ (active_effect).b;\n\n\t\tthis.is_pending = !!this.#props.pending;\n\n\t\tthis.#effect = block(() => {\n\t\t\t/** @type {Effect} */ (active_effect).b = this;\n\n\t\t\tif (hydrating) {\n\t\t\t\tconst comment = this.#hydrate_open;\n\t\t\t\thydrate_next();\n\n\t\t\t\tconst server_rendered_pending =\n\t\t\t\t\t/** @type {Comment} */ (comment).nodeType === COMMENT_NODE &&\n\t\t\t\t\t/** @type {Comment} */ (comment).data === HYDRATION_START_ELSE;\n\n\t\t\t\tif (server_rendered_pending) {\n\t\t\t\t\tthis.#hydrate_pending_content();\n\t\t\t\t} else {\n\t\t\t\t\tthis.#hydrate_resolved_content();\n\n\t\t\t\t\tif (this.#pending_count === 0) {\n\t\t\t\t\t\tthis.is_pending = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar anchor = this.#get_anchor();\n\n\t\t\t\ttry {\n\t\t\t\t\tthis.#main_effect = branch(() => children(anchor));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.error(error);\n\t\t\t\t}\n\n\t\t\t\tif (this.#pending_count > 0) {\n\t\t\t\t\tthis.#show_pending_snippet();\n\t\t\t\t} else {\n\t\t\t\t\tthis.is_pending = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn () => {\n\t\t\t\tthis.#pending_anchor?.remove();\n\t\t\t};\n\t\t}, flags);\n\n\t\tif (hydrating) {\n\t\t\tthis.#anchor = hydrate_node;\n\t\t}\n\t}\n\n\t#hydrate_resolved_content() {\n\t\ttry {\n\t\t\tthis.#main_effect = branch(() => this.#children(this.#anchor));\n\t\t} catch (error) {\n\t\t\tthis.error(error);\n\t\t}\n\t}\n\n\t#hydrate_pending_content() {\n\t\tconst pending = this.#props.pending;\n\t\tif (!pending) {\n\t\t\treturn;\n\t\t}\n\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\n\t\tBatch.enqueue(() => {\n\t\t\tvar anchor = this.#get_anchor();\n\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tBatch.ensure();\n\t\t\t\treturn branch(() => this.#children(anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tpause_effect(/** @type {Effect} */ (this.#pending_effect), () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\n\t\t\t\tthis.is_pending = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t#get_anchor() {\n\t\tvar anchor = this.#anchor;\n\n\t\tif (this.is_pending) {\n\t\t\tthis.#pending_anchor = create_text();\n\t\t\tthis.#anchor.before(this.#pending_anchor);\n\n\t\t\tanchor = this.#pending_anchor;\n\t\t}\n\n\t\treturn anchor;\n\t}\n\n\t/**\n\t * Defer an effect inside a pending boundary until the boundary resolves\n\t * @param {Effect} effect\n\t */\n\tdefer_effect(effect) {\n\t\tdefer_effect(effect, this.#dirty_effects, this.#maybe_dirty_effects);\n\t}\n\n\t/**\n\t * Returns `false` if the effect exists inside a boundary whose pending snippet is shown\n\t * @returns {boolean}\n\t */\n\tis_rendered() {\n\t\treturn !this.is_pending && (!this.parent || this.parent.is_rendered());\n\t}\n\n\thas_pending_snippet() {\n\t\treturn !!this.#props.pending;\n\t}\n\n\t/**\n\t * @param {() => Effect | null} fn\n\t */\n\t#run(fn) {\n\t\tvar previous_effect = active_effect;\n\t\tvar previous_reaction = active_reaction;\n\t\tvar previous_ctx = component_context;\n\n\t\tset_active_effect(this.#effect);\n\t\tset_active_reaction(this.#effect);\n\t\tset_component_context(this.#effect.ctx);\n\n\t\ttry {\n\t\t\treturn fn();\n\t\t} catch (e) {\n\t\t\thandle_error(e);\n\t\t\treturn null;\n\t\t} finally {\n\t\t\tset_active_effect(previous_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t\tset_component_context(previous_ctx);\n\t\t}\n\t}\n\n\t#show_pending_snippet() {\n\t\tconst pending = /** @type {(anchor: Node) => void} */ (this.#props.pending);\n\n\t\tif (this.#main_effect !== null) {\n\t\t\tthis.#offscreen_fragment = document.createDocumentFragment();\n\t\t\tthis.#offscreen_fragment.append(/** @type {TemplateNode} */ (this.#pending_anchor));\n\t\t\tmove_effect(this.#main_effect, this.#offscreen_fragment);\n\t\t}\n\n\t\tif (this.#pending_effect === null) {\n\t\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\t\t}\n\t}\n\n\t/**\n\t * Updates the pending count associated with the currently visible pending snippet,\n\t * if any, such that we can replace the snippet with content once work is done\n\t * @param {1 | -1} d\n\t */\n\t#update_pending_count(d) {\n\t\tif (!this.has_pending_snippet()) {\n\t\t\tif (this.parent) {\n\t\t\t\tthis.parent.#update_pending_count(d);\n\t\t\t}\n\n\t\t\t// if there's no parent, we're in a scope with no pending snippet\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#pending_count += d;\n\n\t\tif (this.#pending_count === 0) {\n\t\t\tthis.is_pending = false;\n\n\t\t\t// any effects that were encountered and deferred during traversal\n\t\t\t// should be rescheduled  after the next traversal (which will happen\n\t\t\t// immediately, due to the same update that brought us here)\n\t\t\t// the effects will be flushed\n\t\t\tfor (const e of this.#dirty_effects) {\n\t\t\t\tset_signal_status(e, DIRTY);\n\t\t\t\tschedule_effect(e);\n\t\t\t}\n\n\t\t\tfor (const e of this.#maybe_dirty_effects) {\n\t\t\t\tset_signal_status(e, MAYBE_DIRTY);\n\t\t\t\tschedule_effect(e);\n\t\t\t}\n\n\t\t\tthis.#dirty_effects.clear();\n\t\t\tthis.#maybe_dirty_effects.clear();\n\n\t\t\tif (this.#pending_effect) {\n\t\t\t\tpause_effect(this.#pending_effect, () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.#offscreen_fragment) {\n\t\t\t\tthis.#anchor.before(this.#offscreen_fragment);\n\t\t\t\tthis.#offscreen_fragment = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Update the source that powers `$effect.pending()` inside this boundary,\n\t * and controls when the current `pending` snippet (if any) is removed.\n\t * Do not call from inside the class\n\t * @param {1 | -1} d\n\t */\n\tupdate_pending_count(d) {\n\t\tthis.#update_pending_count(d);\n\n\t\tthis.#local_pending_count += d;\n\n\t\tif (this.#effect_pending) {\n\t\t\tinternal_set(this.#effect_pending, this.#local_pending_count);\n\t\t}\n\t}\n\n\tget_effect_pending() {\n\t\tthis.#effect_pending_subscriber();\n\t\treturn get(/** @type {Source<number>} */ (this.#effect_pending));\n\t}\n\n\t/** @param {unknown} error */\n\terror(error) {\n\t\tvar onerror = this.#props.onerror;\n\t\tlet failed = this.#props.failed;\n\n\t\t// If we have nothing to capture the error, or if we hit an error while\n\t\t// rendering the fallback, re-throw for another boundary to handle\n\t\tif (this.#is_creating_fallback || (!onerror && !failed)) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (this.#main_effect) {\n\t\t\tdestroy_effect(this.#main_effect);\n\t\t\tthis.#main_effect = null;\n\t\t}\n\n\t\tif (this.#pending_effect) {\n\t\t\tdestroy_effect(this.#pending_effect);\n\t\t\tthis.#pending_effect = null;\n\t\t}\n\n\t\tif (this.#failed_effect) {\n\t\t\tdestroy_effect(this.#failed_effect);\n\t\t\tthis.#failed_effect = null;\n\t\t}\n\n\t\tif (hydrating) {\n\t\t\tset_hydrate_node(/** @type {TemplateNode} */ (this.#hydrate_open));\n\t\t\tnext();\n\t\t\tset_hydrate_node(skip_nodes());\n\t\t}\n\n\t\tvar did_reset = false;\n\t\tvar calling_on_error = false;\n\n\t\tconst reset = () => {\n\t\t\tif (did_reset) {\n\t\t\t\tw.svelte_boundary_reset_noop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdid_reset = true;\n\n\t\t\tif (calling_on_error) {\n\t\t\t\te.svelte_boundary_reset_onerror();\n\t\t\t}\n\n\t\t\t// If the failure happened while flushing effects, current_batch can be null\n\t\t\tBatch.ensure();\n\n\t\t\tthis.#local_pending_count = 0;\n\n\t\t\tif (this.#failed_effect !== null) {\n\t\t\t\tpause_effect(this.#failed_effect, () => {\n\t\t\t\t\tthis.#failed_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// we intentionally do not try to find the nearest pending boundary. If this boundary has one, we'll render it on reset\n\t\t\t// but it would be really weird to show the parent's boundary on a child reset.\n\t\t\tthis.is_pending = this.has_pending_snippet();\n\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\treturn branch(() => this.#children(this.#anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tthis.is_pending = false;\n\t\t\t}\n\t\t};\n\n\t\tvar previous_reaction = active_reaction;\n\n\t\ttry {\n\t\t\tset_active_reaction(null);\n\t\t\tcalling_on_error = true;\n\t\t\tonerror?.(error, reset);\n\t\t\tcalling_on_error = false;\n\t\t} catch (error) {\n\t\t\tinvoke_error_boundary(error, this.#effect && this.#effect.parent);\n\t\t} finally {\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\n\t\tif (failed) {\n\t\t\tqueue_micro_task(() => {\n\t\t\t\tthis.#failed_effect = this.#run(() => {\n\t\t\t\t\tBatch.ensure();\n\t\t\t\t\tthis.#is_creating_fallback = true;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn branch(() => {\n\t\t\t\t\t\t\tfailed(\n\t\t\t\t\t\t\t\tthis.#anchor,\n\t\t\t\t\t\t\t\t() => error,\n\t\t\t\t\t\t\t\t() => reset\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tinvoke_error_boundary(error, /** @type {Effect} */ (this.#effect.parent));\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function get_boundary() {\n\treturn /** @type {Boundary} */ (/** @type {Effect} */ (active_effect).b);\n}\n\nexport function pending() {\n\tif (active_effect === null) {\n\t\te.effect_pending_outside_reaction();\n\t}\n\n\tvar boundary = active_effect.b;\n\n\tif (boundary === null) {\n\t\treturn 0; // TODO eventually we will need this to be global\n\t}\n\n\treturn boundary.get_effect_pending();\n}\n","/** @import { Effect, TemplateNode, Value } from '#client' */\nimport { DESTROYED, STALE_REACTION } from '#client/constants';\nimport { DEV } from 'esm-env';\nimport {\n\tcomponent_context,\n\tdev_stack,\n\tis_runes,\n\tset_component_context,\n\tset_dev_stack\n} from '../context.js';\nimport { get_boundary } from '../dom/blocks/boundary.js';\nimport { invoke_error_boundary } from '../error-handling.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../runtime.js';\nimport { Batch, current_batch } from './batch.js';\nimport {\n\tasync_derived,\n\tcurrent_async_effect,\n\tderived,\n\tderived_safe_equal,\n\tset_from_async_derived\n} from './deriveds.js';\nimport { aborted } from './effects.js';\n\n/**\n * @param {Array<Promise<void>>} blockers\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {(values: Value[]) => any} fn\n */\nexport function flatten(blockers, sync, async, fn) {\n\tconst d = is_runes() ? derived : derived_safe_equal;\n\n\tif (async.length === 0 && blockers.length === 0) {\n\t\tfn(sync.map(d));\n\t\treturn;\n\t}\n\n\tvar batch = current_batch;\n\tvar parent = /** @type {Effect} */ (active_effect);\n\n\tvar restore = capture();\n\n\tfunction run() {\n\t\tPromise.all(async.map((expression) => async_derived(expression)))\n\t\t\t.then((result) => {\n\t\t\t\trestore();\n\n\t\t\t\ttry {\n\t\t\t\t\tfn([...sync.map(d), ...result]);\n\t\t\t\t} catch (error) {\n\t\t\t\t\t// ignore errors in blocks that have already been destroyed\n\t\t\t\t\tif ((parent.f & DESTROYED) === 0) {\n\t\t\t\t\t\tinvoke_error_boundary(error, parent);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbatch?.deactivate();\n\t\t\t\tunset_context();\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tinvoke_error_boundary(error, parent);\n\t\t\t});\n\t}\n\n\tif (blockers.length > 0) {\n\t\tPromise.all(blockers).then(() => {\n\t\t\trestore();\n\n\t\t\ttry {\n\t\t\t\treturn run();\n\t\t\t} finally {\n\t\t\t\tbatch?.deactivate();\n\t\t\t\tunset_context();\n\t\t\t}\n\t\t});\n\t} else {\n\t\trun();\n\t}\n}\n\n/**\n * @param {Array<Promise<void>>} blockers\n * @param {(values: Value[]) => any} fn\n */\nexport function run_after_blockers(blockers, fn) {\n\tflatten(blockers, [], [], fn);\n}\n\n/**\n * Captures the current effect context so that we can restore it after\n * some asynchronous work has happened (so that e.g. `await a + b`\n * causes `b` to be registered as a dependency).\n */\nexport function capture() {\n\tvar previous_effect = active_effect;\n\tvar previous_reaction = active_reaction;\n\tvar previous_component_context = component_context;\n\tvar previous_batch = current_batch;\n\n\tif (DEV) {\n\t\tvar previous_dev_stack = dev_stack;\n\t}\n\n\treturn function restore(activate_batch = true) {\n\t\tset_active_effect(previous_effect);\n\t\tset_active_reaction(previous_reaction);\n\t\tset_component_context(previous_component_context);\n\t\tif (activate_batch) previous_batch?.activate();\n\n\t\tif (DEV) {\n\t\t\tset_from_async_derived(null);\n\t\t\tset_dev_stack(previous_dev_stack);\n\t\t}\n\t};\n}\n\n/**\n * Wraps an `await` expression in such a way that the effect context that was\n * active before the expression evaluated can be reapplied afterwards \n * `await a + b` becomes `(await $.save(a))() + b`\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function save(promise) {\n\tvar restore = capture();\n\tvar value = await promise;\n\n\treturn () => {\n\t\trestore();\n\t\treturn value;\n\t};\n}\n\n/**\n * Reset `current_async_effect` after the `promise` resolves, so\n * that we can emit `await_reactivity_loss` warnings\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function track_reactivity_loss(promise) {\n\tvar previous_async_effect = current_async_effect;\n\tvar value = await promise;\n\n\treturn () => {\n\t\tset_from_async_derived(previous_async_effect);\n\t\treturn value;\n\t};\n}\n\n/**\n * Used in `for await` loops in DEV, so\n * that we can emit `await_reactivity_loss` warnings\n * after each `async_iterator` result resolves and\n * after the `async_iterator` return resolves (if it runs)\n * @template T\n * @template TReturn\n * @param {Iterable<T> | AsyncIterable<T>} iterable\n * @returns {AsyncGenerator<T, TReturn | undefined>}\n */\nexport async function* for_await_track_reactivity_loss(iterable) {\n\t// This is based on the algorithms described in ECMA-262:\n\t// ForIn/OfBodyEvaluation\n\t// https://tc39.es/ecma262/multipage/ecmascript-language-statements-and-declarations.html#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset\n\t// AsyncIteratorClose\n\t// https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose\n\n\t/** @type {AsyncIterator<T, TReturn>} */\n\t// @ts-ignore\n\tconst iterator = iterable[Symbol.asyncIterator]?.() ?? iterable[Symbol.iterator]?.();\n\n\tif (iterator === undefined) {\n\t\tthrow new TypeError('value is not async iterable');\n\t}\n\n\t/** Whether the completion of the iterator was \"normal\", meaning it wasn't ended via `break` or a similar method */\n\tlet normal_completion = false;\n\ttry {\n\t\twhile (true) {\n\t\t\tconst { done, value } = (await track_reactivity_loss(iterator.next()))();\n\t\t\tif (done) {\n\t\t\t\tnormal_completion = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tyield value;\n\t\t}\n\t} finally {\n\t\t// If the iterator had a normal completion and `return` is defined on the iterator, call it and return the value\n\t\tif (normal_completion && iterator.return !== undefined) {\n\t\t\t// eslint-disable-next-line no-unsafe-finally\n\t\t\treturn /** @type {TReturn} */ ((await track_reactivity_loss(iterator.return()))().value);\n\t\t}\n\t}\n}\n\nexport function unset_context() {\n\tset_active_effect(null);\n\tset_active_reaction(null);\n\tset_component_context(null);\n\n\tif (DEV) {\n\t\tset_from_async_derived(null);\n\t\tset_dev_stack(null);\n\t}\n}\n\n/**\n * @param {Array<() => void | Promise<void>>} thunks\n */\nexport function run(thunks) {\n\tconst restore = capture();\n\n\tvar boundary = get_boundary();\n\tvar batch = /** @type {Batch} */ (current_batch);\n\tvar blocking = boundary.is_rendered();\n\n\tboundary.update_pending_count(1);\n\tbatch.increment(blocking);\n\n\tvar active = /** @type {Effect} */ (active_effect);\n\n\t/** @type {null | { error: any }} */\n\tvar errored = null;\n\n\t/** @param {any} error */\n\tconst handle_error = (error) => {\n\t\terrored = { error }; // wrap in object in case a promise rejects with a falsy value\n\n\t\tif (!aborted(active)) {\n\t\t\tinvoke_error_boundary(error, active);\n\t\t}\n\t};\n\n\tvar promise = Promise.resolve(thunks[0]()).catch(handle_error);\n\n\tvar promises = [promise];\n\n\tfor (const fn of thunks.slice(1)) {\n\t\tpromise = promise\n\t\t\t.then(() => {\n\t\t\t\tif (errored) {\n\t\t\t\t\tthrow errored.error;\n\t\t\t\t}\n\n\t\t\t\tif (aborted(active)) {\n\t\t\t\t\tthrow STALE_REACTION;\n\t\t\t\t}\n\n\t\t\t\trestore();\n\t\t\t\treturn fn();\n\t\t\t})\n\t\t\t.catch(handle_error)\n\t\t\t.finally(() => {\n\t\t\t\tunset_context();\n\t\t\t\tcurrent_batch?.deactivate();\n\t\t\t});\n\n\t\tpromises.push(promise);\n\t}\n\n\tpromise\n\t\t// wait one more tick, so that template effects are\n\t\t// guaranteed to run before `$effect(...)`\n\t\t.then(() => Promise.resolve())\n\t\t.finally(() => {\n\t\t\tboundary.update_pending_count(-1);\n\t\t\tbatch.decrement(blocking);\n\t\t});\n\n\treturn promises;\n}\n","/** @import { Derived, Effect, Source } from '#client' */\n/** @import { Batch } from './batch.js'; */\nimport { DEV } from 'esm-env';\nimport {\n\tERROR_VALUE,\n\tDERIVED,\n\tDIRTY,\n\tEFFECT_PRESERVED,\n\tSTALE_REACTION,\n\tASYNC,\n\tWAS_MARKED,\n\tDESTROYED,\n\tCLEAN\n} from '#client/constants';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tupdate_reaction,\n\tincrement_write_version,\n\tset_active_effect,\n\tpush_reaction_value,\n\tis_destroying_effect\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport * as e from '../errors.js';\nimport * as w from '../warnings.js';\nimport { async_effect, destroy_effect, effect_tracking, teardown } from './effects.js';\nimport { eager_effects, internal_set, set_eager_effects, source } from './sources.js';\nimport { get_error } from '../../shared/dev.js';\nimport { async_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { Boundary } from '../dom/blocks/boundary.js';\nimport { component_context } from '../context.js';\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { batch_values, current_batch } from './batch.js';\nimport { unset_context } from './async.js';\nimport { deferred } from '../../shared/utils.js';\nimport { set_signal_status, update_derived_status } from './status.js';\n\n/** @type {Effect | null} */\nexport let current_async_effect = null;\n\n/** @param {Effect | null} v */\nexport function set_from_async_derived(v) {\n\tcurrent_async_effect = v;\n}\n\nexport const recent_async_deriveds = new Set();\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived(fn) {\n\tvar flags = DERIVED | DIRTY;\n\tvar parent_derived =\n\t\tactive_reaction !== null && (active_reaction.f & DERIVED) !== 0\n\t\t\t? /** @type {Derived} */ (active_reaction)\n\t\t\t: null;\n\n\tif (active_effect !== null) {\n\t\t// Since deriveds are evaluated lazily, any effects created inside them are\n\t\t// created too late to ensure that the parent effect is added to the tree\n\t\tactive_effect.f |= EFFECT_PRESERVED;\n\t}\n\n\t/** @type {Derived<V>} */\n\tconst signal = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\teffects: null,\n\t\tequals,\n\t\tf: flags,\n\t\tfn,\n\t\treactions: null,\n\t\trv: 0,\n\t\tv: /** @type {V} */ (UNINITIALIZED),\n\t\twv: 0,\n\t\tparent: parent_derived ?? active_effect,\n\t\tac: null\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = get_error('created at');\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {() => V | Promise<V>} fn\n * @param {string} [label]\n * @param {string} [location] If provided, print a warning if the value is not read immediately after update\n * @returns {Promise<Source<V>>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function async_derived(fn, label, location) {\n\tlet parent = /** @type {Effect | null} */ (active_effect);\n\n\tif (parent === null) {\n\t\te.async_derived_orphan();\n\t}\n\n\tvar boundary = /** @type {Boundary} */ (parent.b);\n\n\tvar promise = /** @type {Promise<V>} */ (/** @type {unknown} */ (undefined));\n\tvar signal = source(/** @type {V} */ (UNINITIALIZED));\n\n\tif (DEV) signal.label = label;\n\n\t// only suspend in async deriveds created on initialisation\n\tvar should_suspend = !active_reaction;\n\n\t/** @type {Map<Batch, ReturnType<typeof deferred<V>>>} */\n\tvar deferreds = new Map();\n\n\tasync_effect(() => {\n\t\tif (DEV) current_async_effect = active_effect;\n\n\t\t/** @type {ReturnType<typeof deferred<V>>} */\n\t\tvar d = deferred();\n\t\tpromise = d.promise;\n\n\t\ttry {\n\t\t\t// If this code is changed at some point, make sure to still access the then property\n\t\t\t// of fn() to read any signals it might access, so that we track them as dependencies.\n\t\t\t// We call `unset_context` to undo any `save` calls that happen inside `fn()`\n\t\t\tPromise.resolve(fn())\n\t\t\t\t.then(d.resolve, d.reject)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (batch === current_batch && batch.committed) {\n\t\t\t\t\t\t// if the batch was rejected as stale, we need to cleanup\n\t\t\t\t\t\t// after any `$.save(...)` calls inside `fn()`\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\n\t\t\t\t\tunset_context();\n\t\t\t\t});\n\t\t} catch (error) {\n\t\t\td.reject(error);\n\t\t\tunset_context();\n\t\t}\n\n\t\tif (DEV) current_async_effect = null;\n\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\tif (should_suspend) {\n\t\t\tvar blocking = boundary.is_rendered();\n\n\t\t\tboundary.update_pending_count(1);\n\t\t\tbatch.increment(blocking);\n\n\t\t\tdeferreds.get(batch)?.reject(STALE_REACTION);\n\t\t\tdeferreds.delete(batch); // delete to ensure correct order in Map iteration below\n\t\t\tdeferreds.set(batch, d);\n\t\t}\n\n\t\t/**\n\t\t * @param {any} value\n\t\t * @param {unknown} error\n\t\t */\n\t\tconst handler = (value, error = undefined) => {\n\t\t\tcurrent_async_effect = null;\n\n\t\t\tbatch.activate();\n\n\t\t\tif (error) {\n\t\t\t\tif (error !== STALE_REACTION) {\n\t\t\t\t\tsignal.f |= ERROR_VALUE;\n\n\t\t\t\t\t// @ts-expect-error the error is the wrong type, but we don't care\n\t\t\t\t\tinternal_set(signal, error);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\t\t\t\tsignal.f ^= ERROR_VALUE;\n\t\t\t\t}\n\n\t\t\t\tinternal_set(signal, value);\n\n\t\t\t\t// All prior async derived runs are now stale\n\t\t\t\tfor (const [b, d] of deferreds) {\n\t\t\t\t\tdeferreds.delete(b);\n\t\t\t\t\tif (b === batch) break;\n\t\t\t\t\td.reject(STALE_REACTION);\n\t\t\t\t}\n\n\t\t\t\tif (DEV && location !== undefined) {\n\t\t\t\t\trecent_async_deriveds.add(signal);\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (recent_async_deriveds.has(signal)) {\n\t\t\t\t\t\t\tw.await_waterfall(/** @type {string} */ (signal.label), location);\n\t\t\t\t\t\t\trecent_async_deriveds.delete(signal);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (should_suspend) {\n\t\t\t\tboundary.update_pending_count(-1);\n\t\t\t\tbatch.decrement(blocking);\n\t\t\t}\n\t\t};\n\n\t\td.promise.then(handler, (e) => handler(null, e || 'unknown'));\n\t});\n\n\tteardown(() => {\n\t\tfor (const d of deferreds.values()) {\n\t\t\td.reject(STALE_REACTION);\n\t\t}\n\t});\n\n\tif (DEV) {\n\t\t// add a flag that lets this be printed as a derived\n\t\t// when using `$inspect.trace()`\n\t\tsignal.f |= ASYNC;\n\t}\n\n\treturn new Promise((fulfil) => {\n\t\t/** @param {Promise<V>} p */\n\t\tfunction next(p) {\n\t\t\tfunction go() {\n\t\t\t\tif (p === promise) {\n\t\t\t\t\tfulfil(signal);\n\t\t\t\t} else {\n\t\t\t\t\t// if the effect re-runs before the initial promise\n\t\t\t\t\t// resolves, delay resolution until we have a value\n\t\t\t\t\tnext(promise);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.then(go, go);\n\t\t}\n\n\t\tnext(promise);\n\t});\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function user_derived(fn) {\n\tconst d = derived(fn);\n\n\tif (!async_mode_flag) push_reaction_value(d);\n\n\treturn d;\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived_safe_equal(fn) {\n\tconst signal = derived(fn);\n\tsignal.equals = safe_equals;\n\treturn signal;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function destroy_derived_effects(derived) {\n\tvar effects = derived.effects;\n\n\tif (effects !== null) {\n\t\tderived.effects = null;\n\n\t\tfor (var i = 0; i < effects.length; i += 1) {\n\t\t\tdestroy_effect(/** @type {Effect} */ (effects[i]));\n\t\t}\n\t}\n}\n\n/**\n * The currently updating deriveds, used to detect infinite recursion\n * in dev mode and provide a nicer error than 'too much recursion'\n * @type {Derived[]}\n */\nlet stack = [];\n\n/**\n * @param {Derived} derived\n * @returns {Effect | null}\n */\nfunction get_derived_parent_effect(derived) {\n\tvar parent = derived.parent;\n\twhile (parent !== null) {\n\t\tif ((parent.f & DERIVED) === 0) {\n\t\t\t// The original parent effect might've been destroyed but the derived\n\t\t\t// is used elsewhere now - do not return the destroyed effect in that case\n\t\t\treturn (parent.f & DESTROYED) === 0 ? /** @type {Effect} */ (parent) : null;\n\t\t}\n\t\tparent = parent.parent;\n\t}\n\treturn null;\n}\n\n/**\n * @template T\n * @param {Derived} derived\n * @returns {T}\n */\nexport function execute_derived(derived) {\n\tvar value;\n\tvar prev_active_effect = active_effect;\n\n\tset_active_effect(get_derived_parent_effect(derived));\n\n\tif (DEV) {\n\t\tlet prev_eager_effects = eager_effects;\n\t\tset_eager_effects(new Set());\n\t\ttry {\n\t\t\tif (stack.includes(derived)) {\n\t\t\t\te.derived_references_self();\n\t\t\t}\n\n\t\t\tstack.push(derived);\n\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t\tset_eager_effects(prev_eager_effects);\n\t\t\tstack.pop();\n\t\t}\n\t} else {\n\t\ttry {\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t}\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function update_derived(derived) {\n\tvar value = execute_derived(derived);\n\n\tif (!derived.equals(value)) {\n\t\tderived.wv = increment_write_version();\n\n\t\t// in a fork, we don't update the underlying value, just `batch_values`.\n\t\t// the underlying value will be updated when the fork is committed.\n\t\t// otherwise, the next time we get here after a 'real world' state\n\t\t// change, `derived.equals` may incorrectly return `true`\n\t\tif (!current_batch?.is_fork || derived.deps === null) {\n\t\t\tderived.v = value;\n\n\t\t\t// deriveds without dependencies should never be recomputed\n\t\t\tif (derived.deps === null) {\n\t\t\t\tset_signal_status(derived, CLEAN);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t// don't mark derived clean if we're reading it inside a\n\t// cleanup function, or it will cache a stale value\n\tif (is_destroying_effect) {\n\t\treturn;\n\t}\n\n\t// During time traveling we don't want to reset the status so that\n\t// traversal of the graph in the other batches still happens\n\tif (batch_values !== null) {\n\t\t// only cache the value if we're in a tracking context, otherwise we won't\n\t\t// clear the cache in `mark_reactions` when dependencies are updated\n\t\tif (effect_tracking() || current_batch?.is_fork) {\n\t\t\tbatch_values.set(derived, value);\n\t\t}\n\t} else {\n\t\tupdate_derived_status(derived);\n\t}\n}\n","/** @import { Derived, Effect, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tuntracked_writes,\n\tget,\n\tset_untracked_writes,\n\tuntrack,\n\tincrement_write_version,\n\tupdate_effect,\n\tcurrent_sources,\n\tis_dirty,\n\tuntracking,\n\tis_destroying_effect,\n\tpush_reaction_value,\n\tset_is_updating_effect,\n\tis_updating_effect\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport {\n\tCLEAN,\n\tDERIVED,\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tEAGER_EFFECT,\n\tMAYBE_DIRTY,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tASYNC,\n\tWAS_MARKED,\n\tCONNECTED\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { legacy_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { tag_proxy } from '../dev/tracing.js';\nimport { get_error } from '../../shared/dev.js';\nimport { component_context, is_runes } from '../context.js';\nimport { Batch, batch_values, eager_block_effects, schedule_effect } from './batch.js';\nimport { proxy } from '../proxy.js';\nimport { execute_derived } from './deriveds.js';\nimport { set_signal_status, update_derived_status } from './status.js';\n\n/** @type {Set<any>} */\nexport let eager_effects = new Set();\n\n/** @type {Map<Source, any>} */\nexport const old_values = new Map();\n\n/**\n * @param {Set<any>} v\n */\nexport function set_eager_effects(v) {\n\teager_effects = v;\n}\n\nlet eager_effects_deferred = false;\n\nexport function set_eager_effects_deferred() {\n\teager_effects_deferred = true;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n * @returns {Source<V>}\n */\n// TODO rename this to `state` throughout the codebase\nexport function source(v, stack) {\n\t/** @type {Value} */\n\tvar signal = {\n\t\tf: 0, // TODO ideally we could skip this altogether, but it causes type errors\n\t\tv,\n\t\treactions: null,\n\t\tequals,\n\t\trv: 0,\n\t\twv: 0\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = stack ?? get_error('created at');\n\t\tsignal.updated = null;\n\t\tsignal.set_during_effect = false;\n\t\tsignal.trace = null;\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function state(v, stack) {\n\tconst s = source(v, stack);\n\n\tpush_reaction_value(s);\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {V} initial_value\n * @param {boolean} [immutable]\n * @returns {Source<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function mutable_source(initial_value, immutable = false, trackable = true) {\n\tconst s = source(initial_value);\n\tif (!immutable) {\n\t\ts.equals = safe_equals;\n\t}\n\n\t// bind the signal to the component context, in case we need to\n\t// track updates to trigger beforeUpdate/afterUpdate callbacks\n\tif (legacy_mode_flag && trackable && component_context !== null && component_context.l !== null) {\n\t\t(component_context.l.s ??= []).push(s);\n\t}\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {Value<V>} source\n * @param {V} value\n */\nexport function mutate(source, value) {\n\tset(\n\t\tsource,\n\t\tuntrack(() => get(source))\n\t);\n\treturn value;\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @param {boolean} [should_proxy]\n * @returns {V}\n */\nexport function set(source, value, should_proxy = false) {\n\tif (\n\t\tactive_reaction !== null &&\n\t\t// since we are untracking the function inside `$inspect.with` we need to add this check\n\t\t// to ensure we error if state is set inside an inspect effect\n\t\t(!untracking || (active_reaction.f & EAGER_EFFECT) !== 0) &&\n\t\tis_runes() &&\n\t\t(active_reaction.f & (DERIVED | BLOCK_EFFECT | ASYNC | EAGER_EFFECT)) !== 0 &&\n\t\t!current_sources?.includes(source)\n\t) {\n\t\te.state_unsafe_mutation();\n\t}\n\n\tlet new_value = should_proxy ? proxy(value) : value;\n\n\tif (DEV) {\n\t\ttag_proxy(new_value, /** @type {string} */ (source.label));\n\t}\n\n\treturn internal_set(source, new_value);\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @returns {V}\n */\nexport function internal_set(source, value) {\n\tif (!source.equals(value)) {\n\t\tvar old_value = source.v;\n\n\t\tif (is_destroying_effect) {\n\t\t\told_values.set(source, value);\n\t\t} else {\n\t\t\told_values.set(source, old_value);\n\t\t}\n\n\t\tsource.v = value;\n\n\t\tvar batch = Batch.ensure();\n\t\tbatch.capture(source, old_value);\n\n\t\tif (DEV) {\n\t\t\tif (tracing_mode_flag || active_effect !== null) {\n\t\t\t\tsource.updated ??= new Map();\n\n\t\t\t\t// For performance reasons, when not using $inspect.trace, we only start collecting stack traces\n\t\t\t\t// after the same source has been updated more than 5 times in the same flush cycle.\n\t\t\t\tconst count = (source.updated.get('')?.count ?? 0) + 1;\n\t\t\t\tsource.updated.set('', { error: /** @type {any} */ (null), count });\n\n\t\t\t\tif (tracing_mode_flag || count > 5) {\n\t\t\t\t\tconst error = get_error('updated at');\n\n\t\t\t\t\tif (error !== null) {\n\t\t\t\t\t\tlet entry = source.updated.get(error.stack);\n\n\t\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\t\tentry = { error, count: 0 };\n\t\t\t\t\t\t\tsource.updated.set(error.stack, entry);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tentry.count++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (active_effect !== null) {\n\t\t\t\tsource.set_during_effect = true;\n\t\t\t}\n\t\t}\n\n\t\tif ((source.f & DERIVED) !== 0) {\n\t\t\tconst derived = /** @type {Derived} */ (source);\n\n\t\t\t// if we are assigning to a dirty derived we set it to clean/maybe dirty but we also eagerly execute it to track the dependencies\n\t\t\tif ((source.f & DIRTY) !== 0) {\n\t\t\t\texecute_derived(derived);\n\t\t\t}\n\n\t\t\tupdate_derived_status(derived);\n\t\t}\n\n\t\tsource.wv = increment_write_version();\n\n\t\t// For debugging, in case you want to know which reactions are being scheduled:\n\t\t// log_reactions(source);\n\t\tmark_reactions(source, DIRTY);\n\n\t\t// It's possible that the current reaction might not have up-to-date dependencies\n\t\t// whilst it's actively running. So in the case of ensuring it registers the reaction\n\t\t// properly for itself, we need to ensure the current effect actually gets\n\t\t// scheduled. i.e: `$effect(() => x++)`\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tactive_effect !== null &&\n\t\t\t(active_effect.f & CLEAN) !== 0 &&\n\t\t\t(active_effect.f & (BRANCH_EFFECT | ROOT_EFFECT)) === 0\n\t\t) {\n\t\t\tif (untracked_writes === null) {\n\t\t\t\tset_untracked_writes([source]);\n\t\t\t} else {\n\t\t\t\tuntracked_writes.push(source);\n\t\t\t}\n\t\t}\n\n\t\tif (!batch.is_fork && eager_effects.size > 0 && !eager_effects_deferred) {\n\t\t\tflush_eager_effects();\n\t\t}\n\t}\n\n\treturn value;\n}\n\nexport function flush_eager_effects() {\n\teager_effects_deferred = false;\n\tvar prev_is_updating_effect = is_updating_effect;\n\tset_is_updating_effect(true);\n\n\tconst inspects = Array.from(eager_effects);\n\n\ttry {\n\t\tfor (const effect of inspects) {\n\t\t\t// Mark clean inspect-effects as maybe dirty and then check their dirtiness\n\t\t\t// instead of just updating the effects - this way we avoid overfiring.\n\t\t\tif ((effect.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t\t}\n\n\t\t\tif (is_dirty(effect)) {\n\t\t\t\tupdate_effect(effect);\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tset_is_updating_effect(prev_is_updating_effect);\n\t}\n\n\teager_effects.clear();\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update(source, d = 1) {\n\tvar value = get(source);\n\tvar result = d === 1 ? value++ : value--;\n\n\tset(source, value);\n\n\t// @ts-expect-error\n\treturn result;\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update_pre(source, d = 1) {\n\tvar value = get(source);\n\n\t// @ts-expect-error\n\treturn set(source, d === 1 ? ++value : --value);\n}\n\n/**\n * Silently (without using `get`) increment a source\n * @param {Source<number>} source\n */\nexport function increment(source) {\n\tset(source, source.v + 1);\n}\n\n/**\n * @param {Value} signal\n * @param {number} status should be DIRTY or MAYBE_DIRTY\n * @returns {void}\n */\nfunction mark_reactions(signal, status) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tvar runes = is_runes();\n\tvar length = reactions.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tvar reaction = reactions[i];\n\t\tvar flags = reaction.f;\n\n\t\t// In legacy mode, skip the current effect to prevent infinite loops\n\t\tif (!runes && reaction === active_effect) continue;\n\n\t\t// Inspect effects need to run immediately, so that the stack trace makes sense\n\t\tif (DEV && (flags & EAGER_EFFECT) !== 0) {\n\t\t\teager_effects.add(reaction);\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar not_dirty = (flags & DIRTY) === 0;\n\n\t\t// don't set a DIRTY reaction to MAYBE_DIRTY\n\t\tif (not_dirty) {\n\t\t\tset_signal_status(reaction, status);\n\t\t}\n\n\t\tif ((flags & DERIVED) !== 0) {\n\t\t\tvar derived = /** @type {Derived} */ (reaction);\n\n\t\t\tbatch_values?.delete(derived);\n\n\t\t\tif ((flags & WAS_MARKED) === 0) {\n\t\t\t\t// Only connected deriveds can be reliably unmarked right away\n\t\t\t\tif (flags & CONNECTED) {\n\t\t\t\t\treaction.f |= WAS_MARKED;\n\t\t\t\t}\n\n\t\t\t\tmark_reactions(derived, MAYBE_DIRTY);\n\t\t\t}\n\t\t} else if (not_dirty) {\n\t\t\tif ((flags & BLOCK_EFFECT) !== 0 && eager_block_effects !== null) {\n\t\t\t\teager_block_effects.add(/** @type {Effect} */ (reaction));\n\t\t\t}\n\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n","import { hydrating } from '../hydration.js';\nimport { clear_text_content, get_first_child } from '../operations.js';\nimport { queue_micro_task } from '../task.js';\n\n/**\n * @param {HTMLElement} dom\n * @param {boolean} value\n * @returns {void}\n */\nexport function autofocus(dom, value) {\n\tif (value) {\n\t\tconst body = document.body;\n\t\tdom.autofocus = true;\n\n\t\tqueue_micro_task(() => {\n\t\t\tif (document.activeElement === body) {\n\t\t\t\tdom.focus();\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * The child of a textarea actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLTextAreaElement} dom\n * @returns {void}\n */\nexport function remove_textarea_child(dom) {\n\tif (hydrating && get_first_child(dom) !== null) {\n\t\tclear_text_content(dom);\n\t}\n}\n\nlet listening_to_form_reset = false;\n\nexport function add_form_reset_listener() {\n\tif (!listening_to_form_reset) {\n\t\tlistening_to_form_reset = true;\n\t\tdocument.addEventListener(\n\t\t\t'reset',\n\t\t\t(evt) => {\n\t\t\t\t// Needs to happen one tick later or else the dom properties of the form\n\t\t\t\t// elements have not updated to their reset values yet\n\t\t\t\tPromise.resolve().then(() => {\n\t\t\t\t\tif (!evt.defaultPrevented) {\n\t\t\t\t\t\tfor (const e of /**@type {HTMLFormElement} */ (evt.target).elements) {\n\t\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\t\te.__on_r?.();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// In the capture phase to guarantee we get noticed of it (no possibility of stopPropagation)\n\t\t\t{ capture: true }\n\t\t);\n\t}\n}\n","import { teardown } from '../../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../../runtime.js';\nimport { add_form_reset_listener } from '../misc.js';\n\n/**\n * Fires the handler once immediately (unless corresponding arg is set to `false`),\n * then listens to the given events until the render effect context is destroyed\n * @param {EventTarget} target\n * @param {Array<string>} events\n * @param {(event?: Event) => void} handler\n * @param {any} call_handler_immediately\n */\nexport function listen(target, events, handler, call_handler_immediately = true) {\n\tif (call_handler_immediately) {\n\t\thandler();\n\t}\n\n\tfor (var name of events) {\n\t\ttarget.addEventListener(name, handler);\n\t}\n\n\tteardown(() => {\n\t\tfor (var name of events) {\n\t\t\ttarget.removeEventListener(name, handler);\n\t\t}\n\t});\n}\n\n/**\n * @template T\n * @param {() => T} fn\n */\nexport function without_reactive_context(fn) {\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * Listen to the given event, and then instantiate a global form reset listener if not already done,\n * to notify all bindings when the form is reset\n * @param {HTMLElement} element\n * @param {string} event\n * @param {(is_reset?: true) => void} handler\n * @param {(is_reset?: true) => void} [on_reset]\n */\nexport function listen_to_event_and_reset_event(element, event, handler, on_reset = handler) {\n\telement.addEventListener(event, () => without_reactive_context(handler));\n\t// @ts-expect-error\n\tconst prev = element.__on_r;\n\tif (prev) {\n\t\t// special case for checkbox that can have multiple binds (group & checked)\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => {\n\t\t\tprev();\n\t\t\ton_reset(true);\n\t\t};\n\t} else {\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => on_reset(true);\n\t}\n\n\tadd_form_reset_listener();\n}\n","/** @import { Derived, Effect, Reaction, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport { get_descriptors, get_prototype_of, index_of } from '../shared/utils.js';\nimport {\n\tdestroy_block_effect_children,\n\tdestroy_effect_children,\n\teffect_tracking,\n\texecute_effect_teardown\n} from './reactivity/effects.js';\nimport {\n\tDIRTY,\n\tMAYBE_DIRTY,\n\tCLEAN,\n\tDERIVED,\n\tDESTROYED,\n\tBRANCH_EFFECT,\n\tSTATE_SYMBOL,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tCONNECTED,\n\tREACTION_IS_UPDATING,\n\tSTALE_REACTION,\n\tERROR_VALUE,\n\tWAS_MARKED,\n\tMANAGED_EFFECT\n} from './constants.js';\nimport { old_values } from './reactivity/sources.js';\nimport {\n\tdestroy_derived_effects,\n\texecute_derived,\n\trecent_async_deriveds,\n\tupdate_derived\n} from './reactivity/deriveds.js';\nimport { async_mode_flag, tracing_mode_flag } from '../flags/index.js';\nimport { tracing_expressions } from './dev/tracing.js';\nimport { get_error } from '../shared/dev.js';\nimport {\n\tcomponent_context,\n\tdev_current_component_function,\n\tdev_stack,\n\tis_runes,\n\tset_component_context,\n\tset_dev_current_component_function,\n\tset_dev_stack\n} from './context.js';\nimport {\n\tBatch,\n\tbatch_values,\n\tcurrent_batch,\n\tflushSync,\n\tschedule_effect\n} from './reactivity/batch.js';\nimport { handle_error } from './error-handling.js';\nimport { UNINITIALIZED } from '../../constants.js';\nimport { captured_signals } from './legacy.js';\nimport { without_reactive_context } from './dom/elements/bindings/shared.js';\nimport { set_signal_status, update_derived_status } from './reactivity/status.js';\n\nexport let is_updating_effect = false;\n\n/** @param {boolean} value */\nexport function set_is_updating_effect(value) {\n\tis_updating_effect = value;\n}\n\nexport let is_destroying_effect = false;\n\n/** @param {boolean} value */\nexport function set_is_destroying_effect(value) {\n\tis_destroying_effect = value;\n}\n\n/** @type {null | Reaction} */\nexport let active_reaction = null;\n\nexport let untracking = false;\n\n/** @param {null | Reaction} reaction */\nexport function set_active_reaction(reaction) {\n\tactive_reaction = reaction;\n}\n\n/** @type {null | Effect} */\nexport let active_effect = null;\n\n/** @param {null | Effect} effect */\nexport function set_active_effect(effect) {\n\tactive_effect = effect;\n}\n\n/**\n * When sources are created within a reaction, reading and writing\n * them within that reaction should not cause a re-run\n * @type {null | Source[]}\n */\nexport let current_sources = null;\n\n/** @param {Value} value */\nexport function push_reaction_value(value) {\n\tif (active_reaction !== null && (!async_mode_flag || (active_reaction.f & DERIVED) !== 0)) {\n\t\tif (current_sources === null) {\n\t\t\tcurrent_sources = [value];\n\t\t} else {\n\t\t\tcurrent_sources.push(value);\n\t\t}\n\t}\n}\n\n/**\n * The dependencies of the reaction that is currently being executed. In many cases,\n * the dependencies are unchanged between runs, and so this will be `null` unless\n * and until a new dependency is accessed  we track this via `skipped_deps`\n * @type {null | Value[]}\n */\nlet new_deps = null;\n\nlet skipped_deps = 0;\n\n/**\n * Tracks writes that the effect it's executed in doesn't listen to yet,\n * so that the dependency can be added to the effect later on if it then reads it\n * @type {null | Source[]}\n */\nexport let untracked_writes = null;\n\n/** @param {null | Source[]} value */\nexport function set_untracked_writes(value) {\n\tuntracked_writes = value;\n}\n\n/**\n * @type {number} Used by sources and deriveds for handling updates.\n * Version starts from 1 so that unowned deriveds differentiate between a created effect and a run one for tracing\n **/\nexport let write_version = 1;\n\n/** @type {number} Used to version each read of a source of derived to avoid duplicating depedencies inside a reaction */\nlet read_version = 0;\n\nexport let update_version = read_version;\n\n/** @param {number} value */\nexport function set_update_version(value) {\n\tupdate_version = value;\n}\n\nexport function increment_write_version() {\n\treturn ++write_version;\n}\n\n/**\n * Determines whether a derived or effect is dirty.\n * If it is MAYBE_DIRTY, will set the status to CLEAN\n * @param {Reaction} reaction\n * @returns {boolean}\n */\nexport function is_dirty(reaction) {\n\tvar flags = reaction.f;\n\n\tif ((flags & DIRTY) !== 0) {\n\t\treturn true;\n\t}\n\n\tif (flags & DERIVED) {\n\t\treaction.f &= ~WAS_MARKED;\n\t}\n\n\tif ((flags & MAYBE_DIRTY) !== 0) {\n\t\tvar dependencies = /** @type {Value[]} */ (reaction.deps);\n\t\tvar length = dependencies.length;\n\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tvar dependency = dependencies[i];\n\n\t\t\tif (is_dirty(/** @type {Derived} */ (dependency))) {\n\t\t\t\tupdate_derived(/** @type {Derived} */ (dependency));\n\t\t\t}\n\n\t\t\tif (dependency.wv > reaction.wv) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\t(flags & CONNECTED) !== 0 &&\n\t\t\t// During time traveling we don't want to reset the status so that\n\t\t\t// traversal of the graph in the other batches still happens\n\t\t\tbatch_values === null\n\t\t) {\n\t\t\tset_signal_status(reaction, CLEAN);\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * @param {Value} signal\n * @param {Effect} effect\n * @param {boolean} [root]\n */\nfunction schedule_possible_effect_self_invalidation(signal, effect, root = true) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tif (!async_mode_flag && current_sources?.includes(signal)) {\n\t\treturn;\n\t}\n\n\tfor (var i = 0; i < reactions.length; i++) {\n\t\tvar reaction = reactions[i];\n\n\t\tif ((reaction.f & DERIVED) !== 0) {\n\t\t\tschedule_possible_effect_self_invalidation(/** @type {Derived} */ (reaction), effect, false);\n\t\t} else if (effect === reaction) {\n\t\t\tif (root) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t} else if ((reaction.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(reaction, MAYBE_DIRTY);\n\t\t\t}\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n\n/** @param {Reaction} reaction */\nexport function update_reaction(reaction) {\n\tvar previous_deps = new_deps;\n\tvar previous_skipped_deps = skipped_deps;\n\tvar previous_untracked_writes = untracked_writes;\n\tvar previous_reaction = active_reaction;\n\tvar previous_sources = current_sources;\n\tvar previous_component_context = component_context;\n\tvar previous_untracking = untracking;\n\tvar previous_update_version = update_version;\n\n\tvar flags = reaction.f;\n\n\tnew_deps = /** @type {null | Value[]} */ (null);\n\tskipped_deps = 0;\n\tuntracked_writes = null;\n\tactive_reaction = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) === 0 ? reaction : null;\n\n\tcurrent_sources = null;\n\tset_component_context(reaction.ctx);\n\tuntracking = false;\n\tupdate_version = ++read_version;\n\n\tif (reaction.ac !== null) {\n\t\twithout_reactive_context(() => {\n\t\t\t/** @type {AbortController} */ (reaction.ac).abort(STALE_REACTION);\n\t\t});\n\n\t\treaction.ac = null;\n\t}\n\n\ttry {\n\t\treaction.f |= REACTION_IS_UPDATING;\n\t\tvar fn = /** @type {Function} */ (reaction.fn);\n\t\tvar result = fn();\n\t\tvar deps = reaction.deps;\n\n\t\tif (new_deps !== null) {\n\t\t\tvar i;\n\n\t\t\tremove_reactions(reaction, skipped_deps);\n\n\t\t\tif (deps !== null && skipped_deps > 0) {\n\t\t\t\tdeps.length = skipped_deps + new_deps.length;\n\t\t\t\tfor (i = 0; i < new_deps.length; i++) {\n\t\t\t\t\tdeps[skipped_deps + i] = new_deps[i];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treaction.deps = deps = new_deps;\n\t\t\t}\n\n\t\t\tif (effect_tracking() && (reaction.f & CONNECTED) !== 0) {\n\t\t\t\tfor (i = skipped_deps; i < deps.length; i++) {\n\t\t\t\t\t(deps[i].reactions ??= []).push(reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (deps !== null && skipped_deps < deps.length) {\n\t\t\tremove_reactions(reaction, skipped_deps);\n\t\t\tdeps.length = skipped_deps;\n\t\t}\n\n\t\t// If we're inside an effect and we have untracked writes, then we need to\n\t\t// ensure that if any of those untracked writes result in re-invalidation\n\t\t// of the current effect, then that happens accordingly\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tuntracked_writes !== null &&\n\t\t\t!untracking &&\n\t\t\tdeps !== null &&\n\t\t\t(reaction.f & (DERIVED | MAYBE_DIRTY | DIRTY)) === 0\n\t\t) {\n\t\t\tfor (i = 0; i < /** @type {Source[]} */ (untracked_writes).length; i++) {\n\t\t\t\tschedule_possible_effect_self_invalidation(\n\t\t\t\t\tuntracked_writes[i],\n\t\t\t\t\t/** @type {Effect} */ (reaction)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// If we are returning to an previous reaction then\n\t\t// we need to increment the read version to ensure that\n\t\t// any dependencies in this reaction aren't marked with\n\t\t// the same version\n\t\tif (previous_reaction !== null && previous_reaction !== reaction) {\n\t\t\tread_version++;\n\n\t\t\tif (untracked_writes !== null) {\n\t\t\t\tif (previous_untracked_writes === null) {\n\t\t\t\t\tprevious_untracked_writes = untracked_writes;\n\t\t\t\t} else {\n\t\t\t\t\tprevious_untracked_writes.push(.../** @type {Source[]} */ (untracked_writes));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ((reaction.f & ERROR_VALUE) !== 0) {\n\t\t\treaction.f ^= ERROR_VALUE;\n\t\t}\n\n\t\treturn result;\n\t} catch (error) {\n\t\treturn handle_error(error);\n\t} finally {\n\t\treaction.f ^= REACTION_IS_UPDATING;\n\t\tnew_deps = previous_deps;\n\t\tskipped_deps = previous_skipped_deps;\n\t\tuntracked_writes = previous_untracked_writes;\n\t\tactive_reaction = previous_reaction;\n\t\tcurrent_sources = previous_sources;\n\t\tset_component_context(previous_component_context);\n\t\tuntracking = previous_untracking;\n\t\tupdate_version = previous_update_version;\n\t}\n}\n\n/**\n * @template V\n * @param {Reaction} signal\n * @param {Value<V>} dependency\n * @returns {void}\n */\nfunction remove_reaction(signal, dependency) {\n\tlet reactions = dependency.reactions;\n\tif (reactions !== null) {\n\t\tvar index = index_of.call(reactions, signal);\n\t\tif (index !== -1) {\n\t\t\tvar new_length = reactions.length - 1;\n\t\t\tif (new_length === 0) {\n\t\t\t\treactions = dependency.reactions = null;\n\t\t\t} else {\n\t\t\t\t// Swap with last element and then remove.\n\t\t\t\treactions[index] = reactions[new_length];\n\t\t\t\treactions.pop();\n\t\t\t}\n\t\t}\n\t}\n\n\t// If the derived has no reactions, then we can disconnect it from the graph,\n\t// allowing it to either reconnect in the future, or be GC'd by the VM.\n\tif (\n\t\treactions === null &&\n\t\t(dependency.f & DERIVED) !== 0 &&\n\t\t// Destroying a child effect while updating a parent effect can cause a dependency to appear\n\t\t// to be unused, when in fact it is used by the currently-updating parent. Checking `new_deps`\n\t\t// allows us to skip the expensive work of disconnecting and immediately reconnecting it\n\t\t(new_deps === null || !new_deps.includes(dependency))\n\t) {\n\t\tvar derived = /** @type {Derived} */ (dependency);\n\n\t\t// If we are working with a derived that is owned by an effect, then mark it as being\n\t\t// disconnected and remove the mark flag, as it cannot be reliably removed otherwise\n\t\tif ((derived.f & CONNECTED) !== 0) {\n\t\t\tderived.f ^= CONNECTED;\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t}\n\n\t\tupdate_derived_status(derived);\n\n\t\t// Disconnect any reactions owned by this reaction\n\t\tdestroy_derived_effects(derived);\n\t\tremove_reactions(derived, 0);\n\t}\n}\n\n/**\n * @param {Reaction} signal\n * @param {number} start_index\n * @returns {void}\n */\nexport function remove_reactions(signal, start_index) {\n\tvar dependencies = signal.deps;\n\tif (dependencies === null) return;\n\n\tfor (var i = start_index; i < dependencies.length; i++) {\n\t\tremove_reaction(signal, dependencies[i]);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @returns {void}\n */\nexport function update_effect(effect) {\n\tvar flags = effect.f;\n\n\tif ((flags & DESTROYED) !== 0) {\n\t\treturn;\n\t}\n\n\tset_signal_status(effect, CLEAN);\n\n\tvar previous_effect = active_effect;\n\tvar was_updating_effect = is_updating_effect;\n\n\tactive_effect = effect;\n\tis_updating_effect = true;\n\n\tif (DEV) {\n\t\tvar previous_component_fn = dev_current_component_function;\n\t\tset_dev_current_component_function(effect.component_function);\n\t\tvar previous_stack = /** @type {any} */ (dev_stack);\n\t\t// only block effects have a dev stack, keep the current one otherwise\n\t\tset_dev_stack(effect.dev_stack ?? dev_stack);\n\t}\n\n\ttry {\n\t\tif ((flags & (BLOCK_EFFECT | MANAGED_EFFECT)) !== 0) {\n\t\t\tdestroy_block_effect_children(effect);\n\t\t} else {\n\t\t\tdestroy_effect_children(effect);\n\t\t}\n\n\t\texecute_effect_teardown(effect);\n\t\tvar teardown = update_reaction(effect);\n\t\teffect.teardown = typeof teardown === 'function' ? teardown : null;\n\t\teffect.wv = write_version;\n\n\t\t// In DEV, increment versions of any sources that were written to during the effect,\n\t\t// so that they are correctly marked as dirty when the effect re-runs\n\t\tif (DEV && tracing_mode_flag && (effect.f & DIRTY) !== 0 && effect.deps !== null) {\n\t\t\tfor (var dep of effect.deps) {\n\t\t\t\tif (dep.set_during_effect) {\n\t\t\t\t\tdep.wv = increment_write_version();\n\t\t\t\t\tdep.set_during_effect = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tis_updating_effect = was_updating_effect;\n\t\tactive_effect = previous_effect;\n\n\t\tif (DEV) {\n\t\t\tset_dev_current_component_function(previous_component_fn);\n\t\t\tset_dev_stack(previous_stack);\n\t\t}\n\t}\n}\n\n/**\n * Returns a promise that resolves once any pending state changes have been applied.\n * @returns {Promise<void>}\n */\nexport async function tick() {\n\tif (async_mode_flag) {\n\t\treturn new Promise((f) => {\n\t\t\t// Race them against each other - in almost all cases requestAnimationFrame will fire first,\n\t\t\t// but e.g. in case the window is not focused or a view transition happens, requestAnimationFrame\n\t\t\t// will be delayed and setTimeout helps us resolve fast enough in that case\n\t\t\trequestAnimationFrame(() => f());\n\t\t\tsetTimeout(() => f());\n\t\t});\n\t}\n\n\tawait Promise.resolve();\n\n\t// By calling flushSync we guarantee that any pending state changes are applied after one tick.\n\t// TODO look into whether we can make flushing subsequent updates synchronously in the future.\n\tflushSync();\n}\n\n/**\n * Returns a promise that resolves once any state changes, and asynchronous work resulting from them,\n * have resolved and the DOM has been updated\n * @returns {Promise<void>}\n * @since 5.36\n */\nexport function settled() {\n\treturn Batch.ensure().settled();\n}\n\n/**\n * @template V\n * @param {Value<V>} signal\n * @returns {V}\n */\nexport function get(signal) {\n\tvar flags = signal.f;\n\tvar is_derived = (flags & DERIVED) !== 0;\n\n\tcaptured_signals?.add(signal);\n\n\t// Register the dependency on the current reaction signal.\n\tif (active_reaction !== null && !untracking) {\n\t\t// if we're in a derived that is being read inside an _async_ derived,\n\t\t// it's possible that the effect was already destroyed. In this case,\n\t\t// we don't add the dependency, because that would create a memory leak\n\t\tvar destroyed = active_effect !== null && (active_effect.f & DESTROYED) !== 0;\n\n\t\tif (!destroyed && !current_sources?.includes(signal)) {\n\t\t\tvar deps = active_reaction.deps;\n\n\t\t\tif ((active_reaction.f & REACTION_IS_UPDATING) !== 0) {\n\t\t\t\t// we're in the effect init/update cycle\n\t\t\t\tif (signal.rv < read_version) {\n\t\t\t\t\tsignal.rv = read_version;\n\n\t\t\t\t\t// If the signal is accessing the same dependencies in the same\n\t\t\t\t\t// order as it did last time, increment `skipped_deps`\n\t\t\t\t\t// rather than updating `new_deps`, which creates GC cost\n\t\t\t\t\tif (new_deps === null && deps !== null && deps[skipped_deps] === signal) {\n\t\t\t\t\t\tskipped_deps++;\n\t\t\t\t\t} else if (new_deps === null) {\n\t\t\t\t\t\tnew_deps = [signal];\n\t\t\t\t\t} else if (!new_deps.includes(signal)) {\n\t\t\t\t\t\tnew_deps.push(signal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// we're adding a dependency outside the init/update cycle\n\t\t\t\t// (i.e. after an `await`)\n\t\t\t\t(active_reaction.deps ??= []).push(signal);\n\n\t\t\t\tvar reactions = signal.reactions;\n\n\t\t\t\tif (reactions === null) {\n\t\t\t\t\tsignal.reactions = [active_reaction];\n\t\t\t\t} else if (!reactions.includes(active_reaction)) {\n\t\t\t\t\treactions.push(active_reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (DEV) {\n\t\t// TODO reinstate this, but make it actually work\n\t\t// if (current_async_effect) {\n\t\t// \tvar tracking = (current_async_effect.f & REACTION_IS_UPDATING) !== 0;\n\t\t// \tvar was_read = current_async_effect.deps?.includes(signal);\n\n\t\t// \tif (!tracking && !untracking && !was_read) {\n\t\t// \t\tw.await_reactivity_loss(/** @type {string} */ (signal.label));\n\n\t\t// \t\tvar trace = get_error('traced at');\n\t\t// \t\t// eslint-disable-next-line no-console\n\t\t// \t\tif (trace) console.warn(trace);\n\t\t// \t}\n\t\t// }\n\n\t\trecent_async_deriveds.delete(signal);\n\n\t\tif (\n\t\t\ttracing_mode_flag &&\n\t\t\t!untracking &&\n\t\t\ttracing_expressions !== null &&\n\t\t\tactive_reaction !== null &&\n\t\t\ttracing_expressions.reaction === active_reaction\n\t\t) {\n\t\t\t// Used when mapping state between special blocks like `each`\n\t\t\tif (signal.trace) {\n\t\t\t\tsignal.trace();\n\t\t\t} else {\n\t\t\t\tvar trace = get_error('traced at');\n\n\t\t\t\tif (trace) {\n\t\t\t\t\tvar entry = tracing_expressions.entries.get(signal);\n\n\t\t\t\t\tif (entry === undefined) {\n\t\t\t\t\t\tentry = { traces: [] };\n\t\t\t\t\t\ttracing_expressions.entries.set(signal, entry);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar last = entry.traces[entry.traces.length - 1];\n\n\t\t\t\t\t// traces can be duplicated, e.g. by `snapshot` invoking both\n\t\t\t\t\t// both `getOwnPropertyDescriptor` and `get` traps at once\n\t\t\t\t\tif (trace.stack !== last?.stack) {\n\t\t\t\t\t\tentry.traces.push(trace);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (is_destroying_effect && old_values.has(signal)) {\n\t\treturn old_values.get(signal);\n\t}\n\n\tif (is_derived) {\n\t\tvar derived = /** @type {Derived} */ (signal);\n\n\t\tif (is_destroying_effect) {\n\t\t\tvar value = derived.v;\n\n\t\t\t// if the derived is dirty and has reactions, or depends on the values that just changed, re-execute\n\t\t\t// (a derived can be maybe_dirty due to the effect destroy removing its last reaction)\n\t\t\tif (\n\t\t\t\t((derived.f & CLEAN) === 0 && derived.reactions !== null) ||\n\t\t\t\tdepends_on_old_values(derived)\n\t\t\t) {\n\t\t\t\tvalue = execute_derived(derived);\n\t\t\t}\n\n\t\t\told_values.set(derived, value);\n\n\t\t\treturn value;\n\t\t}\n\n\t\t// connect disconnected deriveds if we are reading them inside an effect,\n\t\t// or inside another derived that is already connected\n\t\tvar should_connect =\n\t\t\t(derived.f & CONNECTED) === 0 &&\n\t\t\t!untracking &&\n\t\t\tactive_reaction !== null &&\n\t\t\t(is_updating_effect || (active_reaction.f & CONNECTED) !== 0);\n\n\t\tvar is_new = derived.deps === null;\n\n\t\tif (is_dirty(derived)) {\n\t\t\tif (should_connect) {\n\t\t\t\t// set the flag before `update_derived`, so that the derived\n\t\t\t\t// is added as a reaction to its dependencies\n\t\t\t\tderived.f |= CONNECTED;\n\t\t\t}\n\n\t\t\tupdate_derived(derived);\n\t\t}\n\n\t\tif (should_connect && !is_new) {\n\t\t\treconnect(derived);\n\t\t}\n\t}\n\n\tif (batch_values?.has(signal)) {\n\t\treturn batch_values.get(signal);\n\t}\n\n\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\tthrow signal.v;\n\t}\n\n\treturn signal.v;\n}\n\n/**\n * (Re)connect a disconnected derived, so that it is notified\n * of changes in `mark_reactions`\n * @param {Derived} derived\n */\nfunction reconnect(derived) {\n\tif (derived.deps === null) return;\n\n\tderived.f |= CONNECTED;\n\n\tfor (const dep of derived.deps) {\n\t\t(dep.reactions ??= []).push(derived);\n\n\t\tif ((dep.f & DERIVED) !== 0 && (dep.f & CONNECTED) === 0) {\n\t\t\treconnect(/** @type {Derived} */ (dep));\n\t\t}\n\t}\n}\n\n/** @param {Derived} derived */\nfunction depends_on_old_values(derived) {\n\tif (derived.v === UNINITIALIZED) return true; // we don't know, so assume the worst\n\tif (derived.deps === null) return false;\n\n\tfor (const dep of derived.deps) {\n\t\tif (old_values.has(dep)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ((dep.f & DERIVED) !== 0 && depends_on_old_values(/** @type {Derived} */ (dep))) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Like `get`, but checks for `undefined`. Used for `var` declarations because they can be accessed before being declared\n * @template V\n * @param {Value<V> | undefined} signal\n * @returns {V | undefined}\n */\nexport function safe_get(signal) {\n\treturn signal && get(signal);\n}\n\n/**\n * When used inside a [`$derived`](https://svelte.dev/docs/svelte/$derived) or [`$effect`](https://svelte.dev/docs/svelte/$effect),\n * any state read inside `fn` will not be treated as a dependency.\n *\n * ```ts\n * $effect(() => {\n *   // this will run when `data` changes, but not when `time` changes\n *   save(data, {\n *     timestamp: untrack(() => time)\n *   });\n * });\n * ```\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function untrack(fn) {\n\tvar previous_untracking = untracking;\n\ttry {\n\t\tuntracking = true;\n\t\treturn fn();\n\t} finally {\n\t\tuntracking = previous_untracking;\n\t}\n}\n\n/**\n * @param {Record<string | symbol, unknown>} obj\n * @param {Array<string | symbol>} keys\n * @returns {Record<string | symbol, unknown>}\n */\nexport function exclude_from_object(obj, keys) {\n\t/** @type {Record<string | symbol, unknown>} */\n\tvar result = {};\n\n\tfor (var key in obj) {\n\t\tif (!keys.includes(key)) {\n\t\t\tresult[key] = obj[key];\n\t\t}\n\t}\n\n\tfor (var symbol of Object.getOwnPropertySymbols(obj)) {\n\t\tif (Object.propertyIsEnumerable.call(obj, symbol) && !keys.includes(symbol)) {\n\t\t\tresult[symbol] = obj[symbol];\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Possibly traverse an object and read all its properties so that they're all reactive in case this is `$state`.\n * Does only check first level of an object for performance reasons (heuristic should be good for 99% of all cases).\n * @param {any} value\n * @returns {void}\n */\nexport function deep_read_state(value) {\n\tif (typeof value !== 'object' || !value || value instanceof EventTarget) {\n\t\treturn;\n\t}\n\n\tif (STATE_SYMBOL in value) {\n\t\tdeep_read(value);\n\t} else if (!Array.isArray(value)) {\n\t\tfor (let key in value) {\n\t\t\tconst prop = value[key];\n\t\t\tif (typeof prop === 'object' && prop && STATE_SYMBOL in prop) {\n\t\t\t\tdeep_read(prop);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Deeply traverse an object and read all its properties\n * so that they're all reactive in case this is `$state`\n * @param {any} value\n * @param {Set<any>} visited\n * @returns {void}\n */\nexport function deep_read(value, visited = new Set()) {\n\tif (\n\t\ttypeof value === 'object' &&\n\t\tvalue !== null &&\n\t\t// We don't want to traverse DOM elements\n\t\t!(value instanceof EventTarget) &&\n\t\t!visited.has(value)\n\t) {\n\t\tvisited.add(value);\n\t\t// When working with a possible SvelteDate, this\n\t\t// will ensure we capture changes to it.\n\t\tif (value instanceof Date) {\n\t\t\tvalue.getTime();\n\t\t}\n\t\tfor (let key in value) {\n\t\t\ttry {\n\t\t\t\tdeep_read(value[key], visited);\n\t\t\t} catch (e) {\n\t\t\t\t// continue\n\t\t\t}\n\t\t}\n\t\tconst proto = get_prototype_of(value);\n\t\tif (\n\t\t\tproto !== Object.prototype &&\n\t\t\tproto !== Array.prototype &&\n\t\t\tproto !== Map.prototype &&\n\t\t\tproto !== Set.prototype &&\n\t\t\tproto !== Date.prototype\n\t\t) {\n\t\t\tconst descriptors = get_descriptors(proto);\n\t\t\tfor (let key in descriptors) {\n\t\t\t\tconst get = descriptors[key].get;\n\t\t\t\tif (get) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tget.call(value);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// continue\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","/** @import { ComponentContext, ComponentContextLegacy, Derived, Effect, TemplateNode, TransitionManager } from '#client' */\nimport {\n\tis_dirty,\n\tactive_effect,\n\tactive_reaction,\n\tupdate_effect,\n\tget,\n\tis_destroying_effect,\n\tremove_reactions,\n\tset_active_reaction,\n\tset_is_destroying_effect,\n\tuntrack,\n\tuntracking\n} from '../runtime.js';\nimport {\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tRENDER_EFFECT,\n\tEFFECT,\n\tDESTROYED,\n\tINERT,\n\tEFFECT_RAN,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tEFFECT_TRANSPARENT,\n\tDERIVED,\n\tCLEAN,\n\tEAGER_EFFECT,\n\tHEAD_EFFECT,\n\tMAYBE_DIRTY,\n\tEFFECT_PRESERVED,\n\tSTALE_REACTION,\n\tUSER_EFFECT,\n\tASYNC,\n\tCONNECTED,\n\tMANAGED_EFFECT\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { DEV } from 'esm-env';\nimport { define_property } from '../../shared/utils.js';\nimport { get_next_sibling } from '../dom/operations.js';\nimport { component_context, dev_current_component_function, dev_stack } from '../context.js';\nimport { Batch, current_batch, schedule_effect } from './batch.js';\nimport { flatten } from './async.js';\nimport { without_reactive_context } from '../dom/elements/bindings/shared.js';\nimport { set_signal_status } from './status.js';\n\n/**\n * @param {'$effect' | '$effect.pre' | '$inspect'} rune\n */\nexport function validate_effect(rune) {\n\tif (active_effect === null) {\n\t\tif (active_reaction === null) {\n\t\t\te.effect_orphan(rune);\n\t\t}\n\n\t\te.effect_in_unowned_derived();\n\t}\n\n\tif (is_destroying_effect) {\n\t\te.effect_in_teardown(rune);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {Effect} parent_effect\n */\nfunction push_effect(effect, parent_effect) {\n\tvar parent_last = parent_effect.last;\n\tif (parent_last === null) {\n\t\tparent_effect.last = parent_effect.first = effect;\n\t} else {\n\t\tparent_last.next = effect;\n\t\teffect.prev = parent_last;\n\t\tparent_effect.last = effect;\n\t}\n}\n\n/**\n * @param {number} type\n * @param {null | (() => void | (() => void))} fn\n * @param {boolean} sync\n * @returns {Effect}\n */\nfunction create_effect(type, fn, sync) {\n\tvar parent = active_effect;\n\n\tif (DEV) {\n\t\t// Ensure the parent is never an inspect effect\n\t\twhile (parent !== null && (parent.f & EAGER_EFFECT) !== 0) {\n\t\t\tparent = parent.parent;\n\t\t}\n\t}\n\n\tif (parent !== null && (parent.f & INERT) !== 0) {\n\t\ttype |= INERT;\n\t}\n\n\t/** @type {Effect} */\n\tvar effect = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\tnodes: null,\n\t\tf: type | DIRTY | CONNECTED,\n\t\tfirst: null,\n\t\tfn,\n\t\tlast: null,\n\t\tnext: null,\n\t\tparent,\n\t\tb: parent && parent.b,\n\t\tprev: null,\n\t\tteardown: null,\n\t\twv: 0,\n\t\tac: null\n\t};\n\n\tif (DEV) {\n\t\teffect.component_function = dev_current_component_function;\n\t}\n\n\tif (sync) {\n\t\ttry {\n\t\t\tupdate_effect(effect);\n\t\t\teffect.f |= EFFECT_RAN;\n\t\t} catch (e) {\n\t\t\tdestroy_effect(effect);\n\t\t\tthrow e;\n\t\t}\n\t} else if (fn !== null) {\n\t\tschedule_effect(effect);\n\t}\n\n\t/** @type {Effect | null} */\n\tvar e = effect;\n\n\t// if an effect has already ran and doesn't need to be kept in the tree\n\t// (because it won't re-run, has no DOM, and has no teardown etc)\n\t// then we skip it and go to its child (if any)\n\tif (\n\t\tsync &&\n\t\te.deps === null &&\n\t\te.teardown === null &&\n\t\te.nodes === null &&\n\t\te.first === e.last && // either `null`, or a singular child\n\t\t(e.f & EFFECT_PRESERVED) === 0\n\t) {\n\t\te = e.first;\n\t\tif ((type & BLOCK_EFFECT) !== 0 && (type & EFFECT_TRANSPARENT) !== 0 && e !== null) {\n\t\t\te.f |= EFFECT_TRANSPARENT;\n\t\t}\n\t}\n\n\tif (e !== null) {\n\t\te.parent = parent;\n\n\t\tif (parent !== null) {\n\t\t\tpush_effect(e, parent);\n\t\t}\n\n\t\t// if we're in a derived, add the effect there too\n\t\tif (\n\t\t\tactive_reaction !== null &&\n\t\t\t(active_reaction.f & DERIVED) !== 0 &&\n\t\t\t(type & ROOT_EFFECT) === 0\n\t\t) {\n\t\t\tvar derived = /** @type {Derived} */ (active_reaction);\n\t\t\t(derived.effects ??= []).push(e);\n\t\t}\n\t}\n\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect.tracking()`\n * @returns {boolean}\n */\nexport function effect_tracking() {\n\treturn active_reaction !== null && !untracking;\n}\n\n/**\n * @param {() => void} fn\n */\nexport function teardown(fn) {\n\tconst effect = create_effect(RENDER_EFFECT, null, false);\n\tset_signal_status(effect, CLEAN);\n\teffect.teardown = fn;\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect(...)`\n * @param {() => void | (() => void)} fn\n */\nexport function user_effect(fn) {\n\tvalidate_effect('$effect');\n\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect'\n\t\t});\n\t}\n\n\t// Non-nested `$effect(...)` in a component should be deferred\n\t// until the component is mounted\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\tvar defer = !active_reaction && (flags & BRANCH_EFFECT) !== 0 && (flags & EFFECT_RAN) === 0;\n\n\tif (defer) {\n\t\t// Top-level `$effect(...)` in an unmounted component  defer until mount\n\t\tvar context = /** @type {ComponentContext} */ (component_context);\n\t\t(context.e ??= []).push(fn);\n\t} else {\n\t\t// Everything else  create immediately\n\t\treturn create_user_effect(fn);\n\t}\n}\n\n/**\n * @param {() => void | (() => void)} fn\n */\nexport function create_user_effect(fn) {\n\treturn create_effect(EFFECT | USER_EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$effect.pre(...)`\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function user_pre_effect(fn) {\n\tvalidate_effect('$effect.pre');\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect.pre'\n\t\t});\n\t}\n\treturn create_effect(RENDER_EFFECT | USER_EFFECT, fn, true);\n}\n\n/** @param {() => void | (() => void)} fn */\nexport function eager_effect(fn) {\n\treturn create_effect(EAGER_EFFECT, fn, true);\n}\n\n/**\n * Internal representation of `$effect.root(...)`\n * @param {() => void | (() => void)} fn\n * @returns {() => void}\n */\nexport function effect_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn () => {\n\t\tdestroy_effect(effect);\n\t};\n}\n\n/**\n * An effect root whose children can transition out\n * @param {() => void} fn\n * @returns {(options?: { outro?: boolean }) => Promise<void>}\n */\nexport function component_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn (options = {}) => {\n\t\treturn new Promise((fulfil) => {\n\t\t\tif (options.outro) {\n\t\t\t\tpause_effect(effect, () => {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t\tfulfil(undefined);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdestroy_effect(effect);\n\t\t\t\tfulfil(undefined);\n\t\t\t}\n\t\t});\n\t};\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function effect(fn) {\n\treturn create_effect(EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$: ..`\n * @param {() => any} deps\n * @param {() => void | (() => void)} fn\n */\nexport function legacy_pre_effect(deps, fn) {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\t/** @type {{ effect: null | Effect, ran: boolean, deps: () => any }} */\n\tvar token = { effect: null, ran: false, deps };\n\n\tcontext.l.$.push(token);\n\n\ttoken.effect = render_effect(() => {\n\t\tdeps();\n\n\t\t// If this legacy pre effect has already run before the end of the reset, then\n\t\t// bail out to emulate the same behavior.\n\t\tif (token.ran) return;\n\n\t\ttoken.ran = true;\n\t\tuntrack(fn);\n\t});\n}\n\nexport function legacy_pre_effect_reset() {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\trender_effect(() => {\n\t\t// Run dirty `$:` statements\n\t\tfor (var token of context.l.$) {\n\t\t\ttoken.deps();\n\n\t\t\tvar effect = token.effect;\n\n\t\t\t// If the effect is CLEAN, then make it MAYBE_DIRTY. This ensures we traverse through\n\t\t\t// the effects dependencies and correctly ensure each dependency is up-to-date.\n\t\t\tif ((effect.f & CLEAN) !== 0 && effect.deps !== null) {\n\t\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t\t}\n\n\t\t\tif (is_dirty(effect)) {\n\t\t\t\tupdate_effect(effect);\n\t\t\t}\n\n\t\t\ttoken.ran = false;\n\t\t}\n\t});\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function async_effect(fn) {\n\treturn create_effect(ASYNC | EFFECT_PRESERVED, fn, true);\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function render_effect(fn, flags = 0) {\n\treturn create_effect(RENDER_EFFECT | flags, fn, true);\n}\n\n/**\n * @param {(...expressions: any) => void | (() => void)} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {Array<Promise<void>>} blockers\n */\nexport function template_effect(fn, sync = [], async = [], blockers = []) {\n\tflatten(blockers, sync, async, (values) => {\n\t\tcreate_effect(RENDER_EFFECT, () => fn(...values.map(get)), true);\n\t});\n}\n\n/**\n * Like `template_effect`, but with an effect which is deferred until the batch commits\n * @param {(...expressions: any) => void | (() => void)} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {Array<Promise<void>>} blockers\n */\nexport function deferred_template_effect(fn, sync = [], async = [], blockers = []) {\n\tvar batch = /** @type {Batch} */ (current_batch);\n\tvar is_async = async.length > 0 || blockers.length > 0;\n\n\tif (is_async) batch.increment(true);\n\n\tflatten(blockers, sync, async, (values) => {\n\t\tcreate_effect(EFFECT, () => fn(...values.map(get)), false);\n\t\tif (is_async) batch.decrement(true);\n\t});\n}\n\n/**\n * @param {(() => void)} fn\n * @param {number} flags\n */\nexport function block(fn, flags = 0) {\n\tvar effect = create_effect(BLOCK_EFFECT | flags, fn, true);\n\tif (DEV) {\n\t\teffect.dev_stack = dev_stack;\n\t}\n\treturn effect;\n}\n\n/**\n * @param {(() => void)} fn\n * @param {number} flags\n */\nexport function managed(fn, flags = 0) {\n\tvar effect = create_effect(MANAGED_EFFECT | flags, fn, true);\n\tif (DEV) {\n\t\teffect.dev_stack = dev_stack;\n\t}\n\treturn effect;\n}\n\n/**\n * @param {(() => void)} fn\n */\nexport function branch(fn) {\n\treturn create_effect(BRANCH_EFFECT | EFFECT_PRESERVED, fn, true);\n}\n\n/**\n * @param {Effect} effect\n */\nexport function execute_effect_teardown(effect) {\n\tvar teardown = effect.teardown;\n\tif (teardown !== null) {\n\t\tconst previously_destroying_effect = is_destroying_effect;\n\t\tconst previous_reaction = active_reaction;\n\t\tset_is_destroying_effect(true);\n\t\tset_active_reaction(null);\n\t\ttry {\n\t\t\tteardown.call(null);\n\t\t} finally {\n\t\t\tset_is_destroying_effect(previously_destroying_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @param {boolean} remove_dom\n * @returns {void}\n */\nexport function destroy_effect_children(signal, remove_dom = false) {\n\tvar effect = signal.first;\n\tsignal.first = signal.last = null;\n\n\twhile (effect !== null) {\n\t\tconst controller = effect.ac;\n\n\t\tif (controller !== null) {\n\t\t\twithout_reactive_context(() => {\n\t\t\t\tcontroller.abort(STALE_REACTION);\n\t\t\t});\n\t\t}\n\n\t\tvar next = effect.next;\n\n\t\tif ((effect.f & ROOT_EFFECT) !== 0) {\n\t\t\t// this is now an independent root\n\t\t\teffect.parent = null;\n\t\t} else {\n\t\t\tdestroy_effect(effect, remove_dom);\n\t\t}\n\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function destroy_block_effect_children(signal) {\n\tvar effect = signal.first;\n\n\twhile (effect !== null) {\n\t\tvar next = effect.next;\n\t\tif ((effect.f & BRANCH_EFFECT) === 0) {\n\t\t\tdestroy_effect(effect);\n\t\t}\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} [remove_dom]\n * @returns {void}\n */\nexport function destroy_effect(effect, remove_dom = true) {\n\tvar removed = false;\n\n\tif (\n\t\t(remove_dom || (effect.f & HEAD_EFFECT) !== 0) &&\n\t\teffect.nodes !== null &&\n\t\teffect.nodes.end !== null\n\t) {\n\t\tremove_effect_dom(effect.nodes.start, /** @type {TemplateNode} */ (effect.nodes.end));\n\t\tremoved = true;\n\t}\n\n\tdestroy_effect_children(effect, remove_dom && !removed);\n\tremove_reactions(effect, 0);\n\tset_signal_status(effect, DESTROYED);\n\n\tvar transitions = effect.nodes && effect.nodes.t;\n\n\tif (transitions !== null) {\n\t\tfor (const transition of transitions) {\n\t\t\ttransition.stop();\n\t\t}\n\t}\n\n\texecute_effect_teardown(effect);\n\n\tvar parent = effect.parent;\n\n\t// If the parent doesn't have any children, then skip this work altogether\n\tif (parent !== null && parent.first !== null) {\n\t\tunlink_effect(effect);\n\t}\n\n\tif (DEV) {\n\t\teffect.component_function = null;\n\t}\n\n\t// `first` and `child` are nulled out in destroy_effect_children\n\t// we don't null out `parent` so that error propagation can work correctly\n\teffect.next =\n\t\teffect.prev =\n\t\teffect.teardown =\n\t\teffect.ctx =\n\t\teffect.deps =\n\t\teffect.fn =\n\t\teffect.nodes =\n\t\teffect.ac =\n\t\t\tnull;\n}\n\n/**\n *\n * @param {TemplateNode | null} node\n * @param {TemplateNode} end\n */\nexport function remove_effect_dom(node, end) {\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : get_next_sibling(node);\n\n\t\tnode.remove();\n\t\tnode = next;\n\t}\n}\n\n/**\n * Detach an effect from the effect tree, freeing up memory and\n * reducing the amount of work that happens on subsequent traversals\n * @param {Effect} effect\n */\nexport function unlink_effect(effect) {\n\tvar parent = effect.parent;\n\tvar prev = effect.prev;\n\tvar next = effect.next;\n\n\tif (prev !== null) prev.next = next;\n\tif (next !== null) next.prev = prev;\n\n\tif (parent !== null) {\n\t\tif (parent.first === effect) parent.first = next;\n\t\tif (parent.last === effect) parent.last = prev;\n\t}\n}\n\n/**\n * When a block effect is removed, we don't immediately destroy it or yank it\n * out of the DOM, because it might have transitions. Instead, we 'pause' it.\n * It stays around (in memory, and in the DOM) until outro transitions have\n * completed, and if the state change is reversed then we _resume_ it.\n * A paused effect does not update, and the DOM subtree becomes inert.\n * @param {Effect} effect\n * @param {() => void} [callback]\n * @param {boolean} [destroy]\n */\nexport function pause_effect(effect, callback, destroy = true) {\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\n\tpause_children(effect, transitions, true);\n\n\tvar fn = () => {\n\t\tif (destroy) destroy_effect(effect);\n\t\tif (callback) callback();\n\t};\n\n\tvar remaining = transitions.length;\n\tif (remaining > 0) {\n\t\tvar check = () => --remaining || fn();\n\t\tfor (var transition of transitions) {\n\t\t\ttransition.out(check);\n\t\t}\n\t} else {\n\t\tfn();\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {TransitionManager[]} transitions\n * @param {boolean} local\n */\nfunction pause_children(effect, transitions, local) {\n\tif ((effect.f & INERT) !== 0) return;\n\teffect.f ^= INERT;\n\n\tvar t = effect.nodes && effect.nodes.t;\n\n\tif (t !== null) {\n\t\tfor (const transition of t) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransitions.push(transition);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent =\n\t\t\t(child.f & EFFECT_TRANSPARENT) !== 0 ||\n\t\t\t// If this is a branch effect without a block effect parent,\n\t\t\t// it means the parent block effect was pruned. In that case,\n\t\t\t// transparency information was transferred to the branch effect.\n\t\t\t((child.f & BRANCH_EFFECT) !== 0 && (effect.f & BLOCK_EFFECT) !== 0);\n\t\t// TODO we don't need to call pause_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tpause_children(child, transitions, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n}\n\n/**\n * The opposite of `pause_effect`. We call this if (for example)\n * `x` becomes falsy then truthy: `{#if x}...{/if}`\n * @param {Effect} effect\n */\nexport function resume_effect(effect) {\n\tresume_children(effect, true);\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} local\n */\nfunction resume_children(effect, local) {\n\tif ((effect.f & INERT) === 0) return;\n\teffect.f ^= INERT;\n\n\t// If a dependency of this effect changed while it was paused,\n\t// schedule the effect to update. we don't use `is_dirty`\n\t// here because we don't want to eagerly recompute a derived like\n\t// `{#if foo}{foo.bar()}{/if}` if `foo` is now `undefined\n\tif ((effect.f & CLEAN) === 0) {\n\t\tset_signal_status(effect, DIRTY);\n\t\tschedule_effect(effect);\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent = (child.f & EFFECT_TRANSPARENT) !== 0 || (child.f & BRANCH_EFFECT) !== 0;\n\t\t// TODO we don't need to call resume_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tresume_children(child, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n\n\tvar t = effect.nodes && effect.nodes.t;\n\n\tif (t !== null) {\n\t\tfor (const transition of t) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransition.in();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function aborted(effect = /** @type {Effect} */ (active_effect)) {\n\treturn (effect.f & DESTROYED) !== 0;\n}\n\n/**\n * @param {Effect} effect\n * @param {DocumentFragment} fragment\n */\nexport function move_effect(effect, fragment) {\n\tif (!effect.nodes) return;\n\n\t/** @type {TemplateNode | null} */\n\tvar node = effect.nodes.start;\n\tvar end = effect.nodes.end;\n\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : get_next_sibling(node);\n\n\t\tfragment.append(node);\n\t\tnode = next;\n\t}\n}\n","const regex_return_characters = /\\r/g;\n\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function hash(str) {\n\tstr = str.replace(regex_return_characters, '');\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn (hash >>> 0).toString(36);\n}\n\nconst VOID_ELEMENT_NAMES = [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n];\n\n/**\n * Returns `true` if `name` is of a void element\n * @param {string} name\n */\nexport function is_void(name) {\n\treturn VOID_ELEMENT_NAMES.includes(name) || name.toLowerCase() === '!doctype';\n}\n\nconst RESERVED_WORDS = [\n\t'arguments',\n\t'await',\n\t'break',\n\t'case',\n\t'catch',\n\t'class',\n\t'const',\n\t'continue',\n\t'debugger',\n\t'default',\n\t'delete',\n\t'do',\n\t'else',\n\t'enum',\n\t'eval',\n\t'export',\n\t'extends',\n\t'false',\n\t'finally',\n\t'for',\n\t'function',\n\t'if',\n\t'implements',\n\t'import',\n\t'in',\n\t'instanceof',\n\t'interface',\n\t'let',\n\t'new',\n\t'null',\n\t'package',\n\t'private',\n\t'protected',\n\t'public',\n\t'return',\n\t'static',\n\t'super',\n\t'switch',\n\t'this',\n\t'throw',\n\t'true',\n\t'try',\n\t'typeof',\n\t'var',\n\t'void',\n\t'while',\n\t'with',\n\t'yield'\n];\n\n/**\n * Returns `true` if `word` is a reserved JavaScript keyword\n * @param {string} word\n */\nexport function is_reserved(word) {\n\treturn RESERVED_WORDS.includes(word);\n}\n\n/**\n * @param {string} name\n */\nexport function is_capture_event(name) {\n\treturn name.endsWith('capture') && name !== 'gotpointercapture' && name !== 'lostpointercapture';\n}\n\n/** List of Element events that will be delegated */\nconst DELEGATED_EVENTS = [\n\t'beforeinput',\n\t'click',\n\t'change',\n\t'dblclick',\n\t'contextmenu',\n\t'focusin',\n\t'focusout',\n\t'input',\n\t'keydown',\n\t'keyup',\n\t'mousedown',\n\t'mousemove',\n\t'mouseout',\n\t'mouseover',\n\t'mouseup',\n\t'pointerdown',\n\t'pointermove',\n\t'pointerout',\n\t'pointerover',\n\t'pointerup',\n\t'touchend',\n\t'touchmove',\n\t'touchstart'\n];\n\n/**\n * Returns `true` if `event_name` is a delegated event\n * @param {string} event_name\n */\nexport function can_delegate_event(event_name) {\n\treturn DELEGATED_EVENTS.includes(event_name);\n}\n\n/**\n * Attributes that are boolean, i.e. they are present or not present.\n */\nconst DOM_BOOLEAN_ATTRIBUTES = [\n\t'allowfullscreen',\n\t'async',\n\t'autofocus',\n\t'autoplay',\n\t'checked',\n\t'controls',\n\t'default',\n\t'disabled',\n\t'formnovalidate',\n\t'indeterminate',\n\t'inert',\n\t'ismap',\n\t'loop',\n\t'multiple',\n\t'muted',\n\t'nomodule',\n\t'novalidate',\n\t'open',\n\t'playsinline',\n\t'readonly',\n\t'required',\n\t'reversed',\n\t'seamless',\n\t'selected',\n\t'webkitdirectory',\n\t'defer',\n\t'disablepictureinpicture',\n\t'disableremoteplayback'\n];\n\n/**\n * Returns `true` if `name` is a boolean attribute\n * @param {string} name\n */\nexport function is_boolean_attribute(name) {\n\treturn DOM_BOOLEAN_ATTRIBUTES.includes(name);\n}\n\n/**\n * @type {Record<string, string>}\n * List of attribute names that should be aliased to their property names\n * because they behave differently between setting them as an attribute and\n * setting them as a property.\n */\nconst ATTRIBUTE_ALIASES = {\n\t// no `class: 'className'` because we handle that separately\n\tformnovalidate: 'formNoValidate',\n\tismap: 'isMap',\n\tnomodule: 'noModule',\n\tplaysinline: 'playsInline',\n\treadonly: 'readOnly',\n\tdefaultvalue: 'defaultValue',\n\tdefaultchecked: 'defaultChecked',\n\tsrcobject: 'srcObject',\n\tnovalidate: 'noValidate',\n\tallowfullscreen: 'allowFullscreen',\n\tdisablepictureinpicture: 'disablePictureInPicture',\n\tdisableremoteplayback: 'disableRemotePlayback'\n};\n\n/**\n * @param {string} name\n */\nexport function normalize_attribute(name) {\n\tname = name.toLowerCase();\n\treturn ATTRIBUTE_ALIASES[name] ?? name;\n}\n\nconst DOM_PROPERTIES = [\n\t...DOM_BOOLEAN_ATTRIBUTES,\n\t'formNoValidate',\n\t'isMap',\n\t'noModule',\n\t'playsInline',\n\t'readOnly',\n\t'value',\n\t'volume',\n\t'defaultValue',\n\t'defaultChecked',\n\t'srcObject',\n\t'noValidate',\n\t'allowFullscreen',\n\t'disablePictureInPicture',\n\t'disableRemotePlayback'\n];\n\n/**\n * @param {string} name\n */\nexport function is_dom_property(name) {\n\treturn DOM_PROPERTIES.includes(name);\n}\n\nconst NON_STATIC_PROPERTIES = ['autofocus', 'muted', 'defaultValue', 'defaultChecked'];\n\n/**\n * Returns `true` if the given attribute cannot be set through the template\n * string, i.e. needs some kind of JavaScript handling to work.\n * @param {string} name\n */\nexport function cannot_be_set_statically(name) {\n\treturn NON_STATIC_PROPERTIES.includes(name);\n}\n\n/**\n * Subset of delegated events which should be passive by default.\n * These two are already passive via browser defaults on window, document and body.\n * But since\n * - we're delegating them\n * - they happen often\n * - they apply to mobile which is generally less performant\n * we're marking them as passive by default for other elements, too.\n */\nconst PASSIVE_EVENTS = ['touchstart', 'touchmove'];\n\n/**\n * Returns `true` if `name` is a passive event\n * @param {string} name\n */\nexport function is_passive_event(name) {\n\treturn PASSIVE_EVENTS.includes(name);\n}\n\nconst CONTENT_EDITABLE_BINDINGS = ['textContent', 'innerHTML', 'innerText'];\n\n/** @param {string} name */\nexport function is_content_editable_binding(name) {\n\treturn CONTENT_EDITABLE_BINDINGS.includes(name);\n}\n\nconst LOAD_ERROR_ELEMENTS = [\n\t'body',\n\t'embed',\n\t'iframe',\n\t'img',\n\t'link',\n\t'object',\n\t'script',\n\t'style',\n\t'track'\n];\n\n/**\n * Returns `true` if the element emits `load` and `error` events\n * @param {string} name\n */\nexport function is_load_error_element(name) {\n\treturn LOAD_ERROR_ELEMENTS.includes(name);\n}\n\nconst SVG_ELEMENTS = [\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'discard',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feDropShadow',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hatch',\n\t'hatchpath',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'mesh',\n\t'meshgradient',\n\t'meshpatch',\n\t'meshrow',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'set',\n\t'solidcolor',\n\t'stop',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'tref',\n\t'tspan',\n\t'unknown',\n\t'use',\n\t'view',\n\t'vkern'\n];\n\n/** @param {string} name */\nexport function is_svg(name) {\n\treturn SVG_ELEMENTS.includes(name);\n}\n\nconst MATHML_ELEMENTS = [\n\t'annotation',\n\t'annotation-xml',\n\t'maction',\n\t'math',\n\t'merror',\n\t'mfrac',\n\t'mi',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mprescripts',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics'\n];\n\n/** @param {string} name */\nexport function is_mathml(name) {\n\treturn MATHML_ELEMENTS.includes(name);\n}\n\nconst STATE_CREATION_RUNES = /** @type {const} */ ([\n\t'$state',\n\t'$state.raw',\n\t'$derived',\n\t'$derived.by'\n]);\n\nconst RUNES = /** @type {const} */ ([\n\t...STATE_CREATION_RUNES,\n\t'$state.eager',\n\t'$state.snapshot',\n\t'$props',\n\t'$props.id',\n\t'$bindable',\n\t'$effect',\n\t'$effect.pre',\n\t'$effect.tracking',\n\t'$effect.root',\n\t'$effect.pending',\n\t'$inspect',\n\t'$inspect().with',\n\t'$inspect.trace',\n\t'$host'\n]);\n\n/** @typedef {typeof RUNES[number]} RuneName */\n\n/**\n * @param {string} name\n * @returns {name is RuneName}\n */\nexport function is_rune(name) {\n\treturn RUNES.includes(/** @type {RuneName} */ (name));\n}\n\n/** @typedef {typeof STATE_CREATION_RUNES[number]} StateCreationRuneName */\n\n/**\n * @param {string} name\n * @returns {name is StateCreationRuneName}\n */\nexport function is_state_creation_rune(name) {\n\treturn STATE_CREATION_RUNES.includes(/** @type {StateCreationRuneName} */ (name));\n}\n\n/** List of elements that require raw contents and should not have SSR comments put in them */\nconst RAW_TEXT_ELEMENTS = /** @type {const} */ (['textarea', 'script', 'style', 'title']);\n\n/** @param {string} name */\nexport function is_raw_text_element(name) {\n\treturn RAW_TEXT_ELEMENTS.includes(/** @type {typeof RAW_TEXT_ELEMENTS[number]} */ (name));\n}\n\n/**\n * Prevent devtools trying to make `location` a clickable link by inserting a zero-width space\n * @template {string | undefined} T\n * @param {T} location\n * @returns {T};\n */\nexport function sanitize_location(location) {\n\treturn /** @type {T} */ (location?.replace(/\\//g, '/\\u200b'));\n}\n","import { teardown } from '../../reactivity/effects.js';\nimport { define_property } from '../../../shared/utils.js';\nimport { hydrating } from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport { FILENAME } from '../../../../constants.js';\nimport * as w from '../../warnings.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { without_reactive_context } from './bindings/shared.js';\n\n/** @type {Set<string>} */\nexport const all_registered_events = new Set();\n\n/** @type {Set<(events: Array<string>) => void>} */\nexport const root_event_handles = new Set();\n\n/**\n * SSR adds onload and onerror attributes to catch those events before the hydration.\n * This function detects those cases, removes the attributes and replays the events.\n * @param {HTMLElement} dom\n */\nexport function replay_events(dom) {\n\tif (!hydrating) return;\n\n\tdom.removeAttribute('onload');\n\tdom.removeAttribute('onerror');\n\t// @ts-expect-error\n\tconst event = dom.__e;\n\tif (event !== undefined) {\n\t\t// @ts-expect-error\n\t\tdom.__e = undefined;\n\t\tqueueMicrotask(() => {\n\t\t\tif (dom.isConnected) {\n\t\t\t\tdom.dispatchEvent(event);\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * @param {string} event_name\n * @param {EventTarget} dom\n * @param {EventListener} [handler]\n * @param {AddEventListenerOptions} [options]\n */\nexport function create_event(event_name, dom, handler, options = {}) {\n\t/**\n\t * @this {EventTarget}\n\t */\n\tfunction target_handler(/** @type {Event} */ event) {\n\t\tif (!options.capture) {\n\t\t\t// Only call in the bubble phase, else delegated events would be called before the capturing events\n\t\t\thandle_event_propagation.call(dom, event);\n\t\t}\n\t\tif (!event.cancelBubble) {\n\t\t\treturn without_reactive_context(() => {\n\t\t\t\treturn handler?.call(this, event);\n\t\t\t});\n\t\t}\n\t}\n\n\t// Chrome has a bug where pointer events don't work when attached to a DOM element that has been cloned\n\t// with cloneNode() and the DOM element is disconnected from the document. To ensure the event works, we\n\t// defer the attachment till after it's been appended to the document. TODO: remove this once Chrome fixes\n\t// this bug. The same applies to wheel events and touch events.\n\tif (\n\t\tevent_name.startsWith('pointer') ||\n\t\tevent_name.startsWith('touch') ||\n\t\tevent_name === 'wheel'\n\t) {\n\t\tqueue_micro_task(() => {\n\t\t\tdom.addEventListener(event_name, target_handler, options);\n\t\t});\n\t} else {\n\t\tdom.addEventListener(event_name, target_handler, options);\n\t}\n\n\treturn target_handler;\n}\n\n/**\n * Attaches an event handler to an element and returns a function that removes the handler. Using this\n * rather than `addEventListener` will preserve the correct order relative to handlers added declaratively\n * (with attributes like `onclick`), which use event delegation for performance reasons\n *\n * @param {EventTarget} element\n * @param {string} type\n * @param {EventListener} handler\n * @param {AddEventListenerOptions} [options]\n */\nexport function on(element, type, handler, options = {}) {\n\tvar target_handler = create_event(type, element, handler, options);\n\n\treturn () => {\n\t\telement.removeEventListener(type, target_handler, options);\n\t};\n}\n\n/**\n * @param {string} event_name\n * @param {Element} dom\n * @param {EventListener} [handler]\n * @param {boolean} [capture]\n * @param {boolean} [passive]\n * @returns {void}\n */\nexport function event(event_name, dom, handler, capture, passive) {\n\tvar options = { capture, passive };\n\tvar target_handler = create_event(event_name, dom, handler, options);\n\n\tif (\n\t\tdom === document.body ||\n\t\t// @ts-ignore\n\t\tdom === window ||\n\t\t// @ts-ignore\n\t\tdom === document ||\n\t\t// Firefox has quirky behavior, it can happen that we still get \"canplay\" events when the element is already removed\n\t\tdom instanceof HTMLMediaElement\n\t) {\n\t\tteardown(() => {\n\t\t\tdom.removeEventListener(event_name, target_handler, options);\n\t\t});\n\t}\n}\n\n/**\n * @param {Array<string>} events\n * @returns {void}\n */\nexport function delegate(events) {\n\tfor (var i = 0; i < events.length; i++) {\n\t\tall_registered_events.add(events[i]);\n\t}\n\n\tfor (var fn of root_event_handles) {\n\t\tfn(events);\n\t}\n}\n\n// used to store the reference to the currently propagated event\n// to prevent garbage collection between microtasks in Firefox\n// If the event object is GCed too early, the expando __root property\n// set on the event object is lost, causing the event delegation\n// to process the event twice\nlet last_propagated_event = null;\n\n/**\n * @this {EventTarget}\n * @param {Event} event\n * @returns {void}\n */\nexport function handle_event_propagation(event) {\n\tvar handler_element = this;\n\tvar owner_document = /** @type {Node} */ (handler_element).ownerDocument;\n\tvar event_name = event.type;\n\tvar path = event.composedPath?.() || [];\n\tvar current_target = /** @type {null | Element} */ (path[0] || event.target);\n\n\tlast_propagated_event = event;\n\n\t// composedPath contains list of nodes the event has propagated through.\n\t// We check __root to skip all nodes below it in case this is a\n\t// parent of the __root node, which indicates that there's nested\n\t// mounted apps. In this case we don't want to trigger events multiple times.\n\tvar path_idx = 0;\n\n\t// the `last_propagated_event === event` check is redundant, but\n\t// without it the variable will be DCE'd and things will\n\t// fail mysteriously in Firefox\n\t// @ts-expect-error is added below\n\tvar handled_at = last_propagated_event === event && event.__root;\n\n\tif (handled_at) {\n\t\tvar at_idx = path.indexOf(handled_at);\n\t\tif (\n\t\t\tat_idx !== -1 &&\n\t\t\t(handler_element === document || handler_element === /** @type {any} */ (window))\n\t\t) {\n\t\t\t// This is the fallback document listener or a window listener, but the event was already handled\n\t\t\t// -> ignore, but set handle_at to document/window so that we're resetting the event\n\t\t\t// chain in case someone manually dispatches the same event object again.\n\t\t\t// @ts-expect-error\n\t\t\tevent.__root = handler_element;\n\t\t\treturn;\n\t\t}\n\n\t\t// We're deliberately not skipping if the index is higher, because\n\t\t// someone could create an event programmatically and emit it multiple times,\n\t\t// in which case we want to handle the whole propagation chain properly each time.\n\t\t// (this will only be a false negative if the event is dispatched multiple times and\n\t\t// the fallback document listener isn't reached in between, but that's super rare)\n\t\tvar handler_idx = path.indexOf(handler_element);\n\t\tif (handler_idx === -1) {\n\t\t\t// handle_idx can theoretically be -1 (happened in some JSDOM testing scenarios with an event listener on the window object)\n\t\t\t// so guard against that, too, and assume that everything was handled at this point.\n\t\t\treturn;\n\t\t}\n\n\t\tif (at_idx <= handler_idx) {\n\t\t\tpath_idx = at_idx;\n\t\t}\n\t}\n\n\tcurrent_target = /** @type {Element} */ (path[path_idx] || event.target);\n\t// there can only be one delegated event per element, and we either already handled the current target,\n\t// or this is the very first target in the chain which has a non-delegated listener, in which case it's safe\n\t// to handle a possible delegated event on it later (through the root delegation listener for example).\n\tif (current_target === handler_element) return;\n\n\t// Proxy currentTarget to correct target\n\tdefine_property(event, 'currentTarget', {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn current_target || owner_document;\n\t\t}\n\t});\n\n\t// This started because of Chromium issue https://chromestatus.com/feature/5128696823545856,\n\t// where removal or moving of of the DOM can cause sync `blur` events to fire, which can cause logic\n\t// to run inside the current `active_reaction`, which isn't what we want at all. However, on reflection,\n\t// it's probably best that all event handled by Svelte have this behaviour, as we don't really want\n\t// an event handler to run in the context of another reaction or effect.\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\t/**\n\t\t * @type {unknown}\n\t\t */\n\t\tvar throw_error;\n\t\t/**\n\t\t * @type {unknown[]}\n\t\t */\n\t\tvar other_errors = [];\n\n\t\twhile (current_target !== null) {\n\t\t\t/** @type {null | Element} */\n\t\t\tvar parent_element =\n\t\t\t\tcurrent_target.assignedSlot ||\n\t\t\t\tcurrent_target.parentNode ||\n\t\t\t\t/** @type {any} */ (current_target).host ||\n\t\t\t\tnull;\n\n\t\t\ttry {\n\t\t\t\t// @ts-expect-error\n\t\t\t\tvar delegated = current_target['__' + event_name];\n\n\t\t\t\tif (\n\t\t\t\t\tdelegated != null &&\n\t\t\t\t\t(!(/** @type {any} */ (current_target).disabled) ||\n\t\t\t\t\t\t// DOM could've been updated already by the time this is reached, so we check this as well\n\t\t\t\t\t\t// -> the target could not have been disabled because it emits the event in the first place\n\t\t\t\t\t\tevent.target === current_target)\n\t\t\t\t) {\n\t\t\t\t\tdelegated.call(current_target, event);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (throw_error) {\n\t\t\t\t\tother_errors.push(error);\n\t\t\t\t} else {\n\t\t\t\t\tthrow_error = error;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (event.cancelBubble || parent_element === handler_element || parent_element === null) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrent_target = parent_element;\n\t\t}\n\n\t\tif (throw_error) {\n\t\t\tfor (let error of other_errors) {\n\t\t\t\t// Throw the rest of the errors, one-by-one on a microtask\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t}\n\t\t\tthrow throw_error;\n\t\t}\n\t} finally {\n\t\t// @ts-expect-error is used above\n\t\tevent.__root = handler_element;\n\t\t// @ts-ignore remove proxy on currentTarget\n\t\tdelete event.currentTarget;\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * In dev, warn if an event handler is not a function, as it means the\n * user probably called the handler or forgot to add a `() =>`\n * @param {() => (event: Event, ...args: any) => void} thunk\n * @param {EventTarget} element\n * @param {[Event, ...any]} args\n * @param {any} component\n * @param {[number, number]} [loc]\n * @param {boolean} [remove_parens]\n */\nexport function apply(\n\tthunk,\n\telement,\n\targs,\n\tcomponent,\n\tloc,\n\thas_side_effects = false,\n\tremove_parens = false\n) {\n\tlet handler;\n\tlet error;\n\n\ttry {\n\t\thandler = thunk();\n\t} catch (e) {\n\t\terror = e;\n\t}\n\n\tif (typeof handler !== 'function' && (has_side_effects || handler != null || error)) {\n\t\tconst filename = component?.[FILENAME];\n\t\tconst location = loc ? ` at ${filename}:${loc[0]}:${loc[1]}` : ` in ${filename}`;\n\t\tconst phase = args[0]?.eventPhase < Event.BUBBLING_PHASE ? 'capture' : '';\n\t\tconst event_name = args[0]?.type + phase;\n\t\tconst description = `\\`${event_name}\\` handler${location}`;\n\t\tconst suggestion = remove_parens ? 'remove the trailing `()`' : 'add a leading `() =>`';\n\n\t\tw.event_handler_invalid(description, suggestion);\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\t}\n\thandler?.apply(element, args);\n}\n","/** @param {string} html */\nexport function create_fragment_from_html(html) {\n\tvar elem = document.createElement('template');\n\telem.innerHTML = html.replaceAll('<!>', '<!---->'); // XHTML compliance\n\treturn elem.content;\n}\n","/** @import { Effect, EffectNodes, TemplateNode } from '#client' */\n/** @import { TemplateStructure } from './types' */\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport {\n\tcreate_text,\n\tget_first_child,\n\tis_firefox,\n\tcreate_element,\n\tcreate_fragment,\n\tcreate_comment,\n\tset_attribute\n} from './operations.js';\nimport { create_fragment_from_html } from './reconciler.js';\nimport { active_effect } from '../runtime.js';\nimport {\n\tNAMESPACE_MATHML,\n\tNAMESPACE_SVG,\n\tTEMPLATE_FRAGMENT,\n\tTEMPLATE_USE_IMPORT_NODE,\n\tTEMPLATE_USE_MATHML,\n\tTEMPLATE_USE_SVG\n} from '../../../constants.js';\nimport { COMMENT_NODE, DOCUMENT_FRAGMENT_NODE, EFFECT_RAN, TEXT_NODE } from '#client/constants';\n\n/**\n * @param {TemplateNode} start\n * @param {TemplateNode | null} end\n */\nexport function assign_nodes(start, end) {\n\tvar effect = /** @type {Effect} */ (active_effect);\n\tif (effect.nodes === null) {\n\t\teffect.nodes = { start, end, a: null, t: null };\n\t}\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_html(content, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tnode = create_fragment_from_html(has_start ? content : '<!>' + content);\n\t\t\tif (!is_fragment) node = /** @type {TemplateNode} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @param {'svg' | 'math'} ns\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nfunction from_namespace(content, flags, ns = 'svg') {\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar wrapped = `<${ns}>${has_start ? content : '<!>' + content}</${ns}>`;\n\n\t/** @type {Element | DocumentFragment} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (!node) {\n\t\t\tvar fragment = /** @type {DocumentFragment} */ (create_fragment_from_html(wrapped));\n\t\t\tvar root = /** @type {Element} */ (get_first_child(fragment));\n\n\t\t\tif (is_fragment) {\n\t\t\t\tnode = document.createDocumentFragment();\n\t\t\t\twhile (get_first_child(root)) {\n\t\t\t\t\tnode.appendChild(/** @type {TemplateNode} */ (get_first_child(root)));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode = /** @type {Element} */ (get_first_child(root));\n\t\t\t}\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (node.cloneNode(true));\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_svg(content, flags) {\n\treturn from_namespace(content, flags, 'svg');\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_mathml(content, flags) {\n\treturn from_namespace(content, flags, 'math');\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {typeof NAMESPACE_SVG | typeof NAMESPACE_MATHML | undefined} [ns]\n */\nfunction fragment_from_tree(structure, ns) {\n\tvar fragment = create_fragment();\n\n\tfor (var item of structure) {\n\t\tif (typeof item === 'string') {\n\t\t\tfragment.append(create_text(item));\n\t\t\tcontinue;\n\t\t}\n\n\t\t// if `preserveComments === true`, comments are represented as `['// <data>']`\n\t\tif (item === undefined || item[0][0] === '/') {\n\t\t\tfragment.append(create_comment(item ? item[0].slice(3) : ''));\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst [name, attributes, ...children] = item;\n\n\t\tconst namespace = name === 'svg' ? NAMESPACE_SVG : name === 'math' ? NAMESPACE_MATHML : ns;\n\n\t\tvar element = create_element(name, namespace, attributes?.is);\n\n\t\tfor (var key in attributes) {\n\t\t\tset_attribute(element, key, attributes[key]);\n\t\t}\n\n\t\tif (children.length > 0) {\n\t\t\tvar target =\n\t\t\t\telement.tagName === 'TEMPLATE'\n\t\t\t\t\t? /** @type {HTMLTemplateElement} */ (element).content\n\t\t\t\t\t: element;\n\n\t\t\ttarget.append(\n\t\t\t\tfragment_from_tree(children, element.tagName === 'foreignObject' ? undefined : namespace)\n\t\t\t);\n\t\t}\n\n\t\tfragment.append(element);\n\t}\n\n\treturn fragment;\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_tree(structure, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tconst ns =\n\t\t\t\t(flags & TEMPLATE_USE_SVG) !== 0\n\t\t\t\t\t? NAMESPACE_SVG\n\t\t\t\t\t: (flags & TEMPLATE_USE_MATHML) !== 0\n\t\t\t\t\t\t? NAMESPACE_MATHML\n\t\t\t\t\t\t: undefined;\n\n\t\t\tnode = fragment_from_tree(structure, ns);\n\t\t\tif (!is_fragment) node = /** @type {TemplateNode} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {() => Element | DocumentFragment} fn\n */\nexport function with_script(fn) {\n\treturn () => run_scripts(fn());\n}\n\n/**\n * Creating a document fragment from HTML that contains script tags will not execute\n * the scripts. We need to replace the script tags with new ones so that they are executed.\n * @param {Element | DocumentFragment} node\n * @returns {Node | Node[]}\n */\nfunction run_scripts(node) {\n\t// scripts were SSR'd, in which case they will run\n\tif (hydrating) return node;\n\n\tconst is_fragment = node.nodeType === DOCUMENT_FRAGMENT_NODE;\n\tconst scripts =\n\t\t/** @type {HTMLElement} */ (node).tagName === 'SCRIPT'\n\t\t\t? [/** @type {HTMLScriptElement} */ (node)]\n\t\t\t: node.querySelectorAll('script');\n\n\tconst effect = /** @type {Effect & { nodes: EffectNodes }} */ (active_effect);\n\n\tfor (const script of scripts) {\n\t\tconst clone = document.createElement('script');\n\t\tfor (var attribute of script.attributes) {\n\t\t\tclone.setAttribute(attribute.name, attribute.value);\n\t\t}\n\n\t\tclone.textContent = script.textContent;\n\n\t\t// The script has changed - if it's at the edges, the effect now points at dead nodes\n\t\tif (is_fragment ? node.firstChild === script : node === script) {\n\t\t\teffect.nodes.start = clone;\n\t\t}\n\t\tif (is_fragment ? node.lastChild === script : node === script) {\n\t\t\teffect.nodes.end = clone;\n\t\t}\n\n\t\tscript.replaceWith(clone);\n\t}\n\treturn node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {any} value\n */\nexport function text(value = '') {\n\tif (!hydrating) {\n\t\tvar t = create_text(value + '');\n\t\tassign_nodes(t, t);\n\t\treturn t;\n\t}\n\n\tvar node = hydrate_node;\n\n\tif (node.nodeType !== TEXT_NODE) {\n\t\t// if an {expression} is empty during SSR, we need to insert an empty text node\n\t\tnode.before((node = create_text()));\n\t\tset_hydrate_node(node);\n\t}\n\n\tassign_nodes(node, node);\n\treturn node;\n}\n\n/**\n * @returns {TemplateNode | DocumentFragment}\n */\nexport function comment() {\n\t// we're not delegating to `template` here for performance reasons\n\tif (hydrating) {\n\t\tassign_nodes(hydrate_node, null);\n\t\treturn hydrate_node;\n\t}\n\n\tvar frag = document.createDocumentFragment();\n\tvar start = document.createComment('');\n\tvar anchor = create_text();\n\tfrag.append(start, anchor);\n\n\tassign_nodes(start, anchor);\n\n\treturn frag;\n}\n\n/**\n * Assign the created (or in hydration mode, traversed) dom elements to the current block\n * and insert the elements into the dom (in client mode).\n * @param {Text | Comment | Element} anchor\n * @param {DocumentFragment | Element} dom\n */\nexport function append(anchor, dom) {\n\tif (hydrating) {\n\t\tvar effect = /** @type {Effect & { nodes: EffectNodes }} */ (active_effect);\n\n\t\t// When hydrating and outer component and an inner component is async, i.e. blocked on a promise,\n\t\t// then by the time the inner resolves we have already advanced to the end of the hydrated nodes\n\t\t// of the parent component. Check for defined for that reason to avoid rewinding the parent's end marker.\n\t\tif ((effect.f & EFFECT_RAN) === 0 || effect.nodes.end === null) {\n\t\t\teffect.nodes.end = hydrate_node;\n\t\t}\n\n\t\thydrate_next();\n\t\treturn;\n\t}\n\n\tif (anchor === null) {\n\t\t// edge case  void `<svelte:element>` with content\n\t\treturn;\n\t}\n\n\tanchor.before(/** @type {Node} */ (dom));\n}\n\n/**\n * Create (or hydrate) an unique UID for the component instance.\n */\nexport function props_id() {\n\tif (\n\t\thydrating &&\n\t\thydrate_node &&\n\t\thydrate_node.nodeType === COMMENT_NODE &&\n\t\thydrate_node.textContent?.startsWith(`$`)\n\t) {\n\t\tconst id = hydrate_node.textContent.substring(1);\n\t\thydrate_next();\n\t\treturn id;\n\t}\n\n\t// @ts-expect-error This way we ensure the id is unique even across Svelte runtimes\n\t(window.__svelte ??= {}).uid ??= 1;\n\n\t// @ts-expect-error\n\treturn `c${window.__svelte.uid++}`;\n}\n","/** @import { ComponentContext, Effect, EffectNodes, TemplateNode } from '#client' */\n/** @import { Component, ComponentType, SvelteComponent, MountOptions } from '../../index.js' */\nimport { DEV } from 'esm-env';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tinit_operations\n} from './dom/operations.js';\nimport { HYDRATION_END, HYDRATION_ERROR, HYDRATION_START } from '../../constants.js';\nimport { active_effect } from './runtime.js';\nimport { push, pop, component_context } from './context.js';\nimport { component_root } from './reactivity/effects.js';\nimport { hydrate_node, hydrating, set_hydrate_node, set_hydrating } from './dom/hydration.js';\nimport { array_from } from '../shared/utils.js';\nimport {\n\tall_registered_events,\n\thandle_event_propagation,\n\troot_event_handles\n} from './dom/elements/events.js';\nimport * as w from './warnings.js';\nimport * as e from './errors.js';\nimport { assign_nodes } from './dom/template.js';\nimport { is_passive_event } from '../../utils.js';\nimport { COMMENT_NODE, STATE_SYMBOL } from './constants.js';\nimport { boundary } from './dom/blocks/boundary.js';\n\n/**\n * This is normally true  block effects should run their intro transitions \n * but is false during hydration (unless `options.intro` is `true`) and\n * when creating the children of a `<svelte:element>` that just changed tag\n */\nexport let should_intro = true;\n\n/** @param {boolean} value */\nexport function set_should_intro(value) {\n\tshould_intro = value;\n}\n\n/**\n * @param {Element} text\n * @param {string} value\n * @returns {void}\n */\nexport function set_text(text, value) {\n\t// For objects, we apply string coercion (which might make things like $state array references in the template reactive) before diffing\n\tvar str = value == null ? '' : typeof value === 'object' ? value + '' : value;\n\t// @ts-expect-error\n\tif (str !== (text.__t ??= text.nodeValue)) {\n\t\t// @ts-expect-error\n\t\ttext.__t = str;\n\t\ttext.nodeValue = str + '';\n\t}\n}\n\n/**\n * Mounts a component to the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component.\n * Transitions will play during the initial render unless the `intro` option is set to `false`.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {MountOptions<Props>} options\n * @returns {Exports}\n */\nexport function mount(component, options) {\n\treturn _mount(component, options);\n}\n\n/**\n * Hydrates a component on the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {{} extends Props ? {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops?: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t} : {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t}} options\n * @returns {Exports}\n */\nexport function hydrate(component, options) {\n\tinit_operations();\n\toptions.intro = options.intro ?? false;\n\tconst target = options.target;\n\tconst was_hydrating = hydrating;\n\tconst previous_hydrate_node = hydrate_node;\n\n\ttry {\n\t\tvar anchor = get_first_child(target);\n\n\t\twhile (\n\t\t\tanchor &&\n\t\t\t(anchor.nodeType !== COMMENT_NODE || /** @type {Comment} */ (anchor).data !== HYDRATION_START)\n\t\t) {\n\t\t\tanchor = get_next_sibling(anchor);\n\t\t}\n\n\t\tif (!anchor) {\n\t\t\tthrow HYDRATION_ERROR;\n\t\t}\n\n\t\tset_hydrating(true);\n\t\tset_hydrate_node(/** @type {Comment} */ (anchor));\n\n\t\tconst instance = _mount(component, { ...options, anchor });\n\n\t\tset_hydrating(false);\n\n\t\treturn /**  @type {Exports} */ (instance);\n\t} catch (error) {\n\t\t// re-throw Svelte errors - they are certainly not related to hydration\n\t\tif (\n\t\t\terror instanceof Error &&\n\t\t\terror.message.split('\\n').some((line) => line.startsWith('https://svelte.dev/e/'))\n\t\t) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error !== HYDRATION_ERROR) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn('Failed to hydrate: ', error);\n\t\t}\n\n\t\tif (options.recover === false) {\n\t\t\te.hydration_failed();\n\t\t}\n\n\t\t// If an error occurred above, the operations might not yet have been initialised.\n\t\tinit_operations();\n\t\tclear_text_content(target);\n\n\t\tset_hydrating(false);\n\t\treturn mount(component, options);\n\t} finally {\n\t\tset_hydrating(was_hydrating);\n\t\tset_hydrate_node(previous_hydrate_node);\n\t}\n}\n\n/** @type {Map<string, number>} */\nconst document_listeners = new Map();\n\n/**\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<any>> | Component<any>} Component\n * @param {MountOptions} options\n * @returns {Exports}\n */\nfunction _mount(Component, { target, anchor, props = {}, events, context, intro = true }) {\n\tinit_operations();\n\n\t/** @type {Set<string>} */\n\tvar registered_events = new Set();\n\n\t/** @param {Array<string>} events */\n\tvar event_handle = (events) => {\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tvar event_name = events[i];\n\n\t\t\tif (registered_events.has(event_name)) continue;\n\t\t\tregistered_events.add(event_name);\n\n\t\t\tvar passive = is_passive_event(event_name);\n\n\t\t\t// Add the event listener to both the container and the document.\n\t\t\t// The container listener ensures we catch events from within in case\n\t\t\t// the outer content stops propagation of the event.\n\t\t\ttarget.addEventListener(event_name, handle_event_propagation, { passive });\n\n\t\t\tvar n = document_listeners.get(event_name);\n\n\t\t\tif (n === undefined) {\n\t\t\t\t// The document listener ensures we catch events that originate from elements that were\n\t\t\t\t// manually moved outside of the container (e.g. via manual portals).\n\t\t\t\tdocument.addEventListener(event_name, handle_event_propagation, { passive });\n\t\t\t\tdocument_listeners.set(event_name, 1);\n\t\t\t} else {\n\t\t\t\tdocument_listeners.set(event_name, n + 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tevent_handle(array_from(all_registered_events));\n\troot_event_handles.add(event_handle);\n\n\t/** @type {Exports} */\n\t// @ts-expect-error will be defined because the render effect runs synchronously\n\tvar component = undefined;\n\n\tvar unmount = component_root(() => {\n\t\tvar anchor_node = anchor ?? target.appendChild(create_text());\n\n\t\tboundary(\n\t\t\t/** @type {TemplateNode} */ (anchor_node),\n\t\t\t{\n\t\t\t\tpending: () => {}\n\t\t\t},\n\t\t\t(anchor_node) => {\n\t\t\t\tif (context) {\n\t\t\t\t\tpush({});\n\t\t\t\t\tvar ctx = /** @type {ComponentContext} */ (component_context);\n\t\t\t\t\tctx.c = context;\n\t\t\t\t}\n\n\t\t\t\tif (events) {\n\t\t\t\t\t// We can't spread the object or else we'd lose the state proxy stuff, if it is one\n\t\t\t\t\t/** @type {any} */ (props).$$events = events;\n\t\t\t\t}\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\tassign_nodes(/** @type {TemplateNode} */ (anchor_node), null);\n\t\t\t\t}\n\n\t\t\t\tshould_intro = intro;\n\t\t\t\t// @ts-expect-error the public typings are not what the actual function looks like\n\t\t\t\tcomponent = Component(anchor_node, props) || {};\n\t\t\t\tshould_intro = true;\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\t/** @type {Effect & { nodes: EffectNodes }} */ (active_effect).nodes.end = hydrate_node;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\thydrate_node === null ||\n\t\t\t\t\t\thydrate_node.nodeType !== COMMENT_NODE ||\n\t\t\t\t\t\t/** @type {Comment} */ (hydrate_node).data !== HYDRATION_END\n\t\t\t\t\t) {\n\t\t\t\t\t\tw.hydration_mismatch();\n\t\t\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (context) {\n\t\t\t\t\tpop();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn () => {\n\t\t\tfor (var event_name of registered_events) {\n\t\t\t\ttarget.removeEventListener(event_name, handle_event_propagation);\n\n\t\t\t\tvar n = /** @type {number} */ (document_listeners.get(event_name));\n\n\t\t\t\tif (--n === 0) {\n\t\t\t\t\tdocument.removeEventListener(event_name, handle_event_propagation);\n\t\t\t\t\tdocument_listeners.delete(event_name);\n\t\t\t\t} else {\n\t\t\t\t\tdocument_listeners.set(event_name, n);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\troot_event_handles.delete(event_handle);\n\n\t\t\tif (anchor_node !== anchor) {\n\t\t\t\tanchor_node.parentNode?.removeChild(anchor_node);\n\t\t\t}\n\t\t};\n\t});\n\n\tmounted_components.set(component, unmount);\n\treturn component;\n}\n\n/**\n * References of the components that were mounted or hydrated.\n * Uses a `WeakMap` to avoid memory leaks.\n */\nlet mounted_components = new WeakMap();\n\n/**\n * Unmounts a component that was previously mounted using `mount` or `hydrate`.\n *\n * Since 5.13.0, if `options.outro` is `true`, [transitions](https://svelte.dev/docs/svelte/transition) will play before the component is removed from the DOM.\n *\n * Returns a `Promise` that resolves after transitions have completed if `options.outro` is true, or immediately otherwise (prior to 5.13.0, returns `void`).\n *\n * ```js\n * import { mount, unmount } from 'svelte';\n * import App from './App.svelte';\n *\n * const app = mount(App, { target: document.body });\n *\n * // later...\n * unmount(app, { outro: true });\n * ```\n * @param {Record<string, any>} component\n * @param {{ outro?: boolean }} [options]\n * @returns {Promise<void>}\n */\nexport function unmount(component, options) {\n\tconst fn = mounted_components.get(component);\n\n\tif (fn) {\n\t\tmounted_components.delete(component);\n\t\treturn fn(options);\n\t}\n\n\tif (DEV) {\n\t\tif (STATE_SYMBOL in component) {\n\t\t\tw.state_proxy_unmount();\n\t\t} else {\n\t\t\tw.lifecycle_double_unmount();\n\t\t}\n\t}\n\n\treturn Promise.resolve();\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { Batch, current_batch } from '../../reactivity/batch.js';\nimport {\n\tbranch,\n\tdestroy_effect,\n\tmove_effect,\n\tpause_effect,\n\tresume_effect\n} from '../../reactivity/effects.js';\nimport { hydrate_node, hydrating } from '../hydration.js';\nimport { create_text, should_defer_append } from '../operations.js';\n\n/**\n * @typedef {{ effect: Effect, fragment: DocumentFragment }} Branch\n */\n\n/**\n * @template Key\n */\nexport class BranchManager {\n\t/** @type {TemplateNode} */\n\tanchor;\n\n\t/** @type {Map<Batch, Key>} */\n\t#batches = new Map();\n\n\t/**\n\t * Map of keys to effects that are currently rendered in the DOM.\n\t * These effects are visible and actively part of the document tree.\n\t * Example:\n\t * ```\n\t * {#if condition}\n\t * \tfoo\n\t * {:else}\n\t * \tbar\n\t * {/if}\n\t * ```\n\t * Can result in the entries `true->Effect` and `false->Effect`\n\t * @type {Map<Key, Effect>}\n\t */\n\t#onscreen = new Map();\n\n\t/**\n\t * Similar to #onscreen with respect to the keys, but contains branches that are not yet\n\t * in the DOM, because their insertion is deferred.\n\t * @type {Map<Key, Branch>}\n\t */\n\t#offscreen = new Map();\n\n\t/**\n\t * Keys of effects that are currently outroing\n\t * @type {Set<Key>}\n\t */\n\t#outroing = new Set();\n\n\t/**\n\t * Whether to pause (i.e. outro) on change, or destroy immediately.\n\t * This is necessary for `<svelte:element>`\n\t */\n\t#transition = true;\n\n\t/**\n\t * @param {TemplateNode} anchor\n\t * @param {boolean} transition\n\t */\n\tconstructor(anchor, transition = true) {\n\t\tthis.anchor = anchor;\n\t\tthis.#transition = transition;\n\t}\n\n\t#commit = () => {\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\t// if this batch was made obsolete, bail\n\t\tif (!this.#batches.has(batch)) return;\n\n\t\tvar key = /** @type {Key} */ (this.#batches.get(batch));\n\n\t\tvar onscreen = this.#onscreen.get(key);\n\n\t\tif (onscreen) {\n\t\t\t// effect is already in the DOM  abort any current outro\n\t\t\tresume_effect(onscreen);\n\t\t\tthis.#outroing.delete(key);\n\t\t} else {\n\t\t\t// effect is currently offscreen. put it in the DOM\n\t\t\tvar offscreen = this.#offscreen.get(key);\n\n\t\t\tif (offscreen) {\n\t\t\t\tthis.#onscreen.set(key, offscreen.effect);\n\t\t\t\tthis.#offscreen.delete(key);\n\n\t\t\t\t// remove the anchor...\n\t\t\t\t/** @type {TemplateNode} */ (offscreen.fragment.lastChild).remove();\n\n\t\t\t\t// ...and append the fragment\n\t\t\t\tthis.anchor.before(offscreen.fragment);\n\t\t\t\tonscreen = offscreen.effect;\n\t\t\t}\n\t\t}\n\n\t\tfor (const [b, k] of this.#batches) {\n\t\t\tthis.#batches.delete(b);\n\n\t\t\tif (b === batch) {\n\t\t\t\t// keep values for newer batches\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst offscreen = this.#offscreen.get(k);\n\n\t\t\tif (offscreen) {\n\t\t\t\t// for older batches, destroy offscreen effects\n\t\t\t\t// as they will never be committed\n\t\t\t\tdestroy_effect(offscreen.effect);\n\t\t\t\tthis.#offscreen.delete(k);\n\t\t\t}\n\t\t}\n\n\t\t// outro/destroy all onscreen effects...\n\t\tfor (const [k, effect] of this.#onscreen) {\n\t\t\t// ...except the one that was just committed\n\t\t\t//    or those that are already outroing (else the transition is aborted and the effect destroyed right away)\n\t\t\tif (k === key || this.#outroing.has(k)) continue;\n\n\t\t\tconst on_destroy = () => {\n\t\t\t\tconst keys = Array.from(this.#batches.values());\n\n\t\t\t\tif (keys.includes(k)) {\n\t\t\t\t\t// keep the effect offscreen, as another batch will need it\n\t\t\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\t\t\tmove_effect(effect, fragment);\n\n\t\t\t\t\tfragment.append(create_text()); // TODO can we avoid this?\n\n\t\t\t\t\tthis.#offscreen.set(k, { effect, fragment });\n\t\t\t\t} else {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t}\n\n\t\t\t\tthis.#outroing.delete(k);\n\t\t\t\tthis.#onscreen.delete(k);\n\t\t\t};\n\n\t\t\tif (this.#transition || !onscreen) {\n\t\t\t\tthis.#outroing.add(k);\n\t\t\t\tpause_effect(effect, on_destroy, false);\n\t\t\t} else {\n\t\t\t\ton_destroy();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @param {Batch} batch\n\t */\n\t#discard = (batch) => {\n\t\tthis.#batches.delete(batch);\n\n\t\tconst keys = Array.from(this.#batches.values());\n\n\t\tfor (const [k, branch] of this.#offscreen) {\n\t\t\tif (!keys.includes(k)) {\n\t\t\t\tdestroy_effect(branch.effect);\n\t\t\t\tthis.#offscreen.delete(k);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t *\n\t * @param {any} key\n\t * @param {null | ((target: TemplateNode) => void)} fn\n\t */\n\tensure(key, fn) {\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\t\tvar defer = should_defer_append();\n\n\t\tif (fn && !this.#onscreen.has(key) && !this.#offscreen.has(key)) {\n\t\t\tif (defer) {\n\t\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\t\tvar target = create_text();\n\n\t\t\t\tfragment.append(target);\n\n\t\t\t\tthis.#offscreen.set(key, {\n\t\t\t\t\teffect: branch(() => fn(target)),\n\t\t\t\t\tfragment\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.#onscreen.set(\n\t\t\t\t\tkey,\n\t\t\t\t\tbranch(() => fn(this.anchor))\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.#batches.set(batch, key);\n\n\t\tif (defer) {\n\t\t\tfor (const [k, effect] of this.#onscreen) {\n\t\t\t\tif (k === key) {\n\t\t\t\t\tbatch.skipped_effects.delete(effect);\n\t\t\t\t} else {\n\t\t\t\t\tbatch.skipped_effects.add(effect);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const [k, branch] of this.#offscreen) {\n\t\t\t\tif (k === key) {\n\t\t\t\t\tbatch.skipped_effects.delete(branch.effect);\n\t\t\t\t} else {\n\t\t\t\t\tbatch.skipped_effects.add(branch.effect);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbatch.oncommit(this.#commit);\n\t\t\tbatch.ondiscard(this.#discard);\n\t\t} else {\n\t\t\tif (hydrating) {\n\t\t\t\tthis.anchor = hydrate_node;\n\t\t\t}\n\n\t\t\tthis.#commit();\n\t\t}\n\t}\n}\n","/** @import { TemplateNode } from '#client' */\nimport { EFFECT_TRANSPARENT } from '#client/constants';\nimport {\n\thydrate_next,\n\thydrating,\n\tread_hydration_instruction,\n\tskip_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport { block } from '../../reactivity/effects.js';\nimport { HYDRATION_START_ELSE } from '../../../../constants.js';\nimport { BranchManager } from './branches.js';\n\n// TODO reinstate https://github.com/sveltejs/svelte/pull/15250\n\n/**\n * @param {TemplateNode} node\n * @param {(branch: (fn: (anchor: Node) => void, flag?: boolean) => void) => void} fn\n * @param {boolean} [elseif] True if this is an `{:else if ...}` block rather than an `{#if ...}`, as that affects which transitions are considered 'local'\n * @returns {void}\n */\nexport function if_block(node, fn, elseif = false) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar branches = new BranchManager(node);\n\tvar flags = elseif ? EFFECT_TRANSPARENT : 0;\n\n\t/**\n\t * @param {boolean} condition,\n\t * @param {null | ((anchor: Node) => void)} fn\n\t */\n\tfunction update_branch(condition, fn) {\n\t\tif (hydrating) {\n\t\t\tconst is_else = read_hydration_instruction(node) === HYDRATION_START_ELSE;\n\n\t\t\tif (condition === is_else) {\n\t\t\t\t// Hydration mismatch: remove everything inside the anchor and start fresh.\n\t\t\t\t// This could happen with `{#if browser}...{/if}`, for example\n\t\t\t\tvar anchor = skip_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tbranches.anchor = anchor;\n\n\t\t\t\tset_hydrating(false);\n\t\t\t\tbranches.ensure(condition, fn);\n\t\t\t\tset_hydrating(true);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tbranches.ensure(condition, fn);\n\t}\n\n\tblock(() => {\n\t\tvar has_branch = false;\n\n\t\tfn((fn, flag = true) => {\n\t\t\thas_branch = true;\n\t\t\tupdate_branch(flag, fn);\n\t\t});\n\n\t\tif (!has_branch) {\n\t\t\tupdate_branch(false, null);\n\t\t}\n\t}, flags);\n}\n","/** @import { EachItem, EachOutroGroup, EachState, Effect, EffectNodes, MaybeSource, Source, TemplateNode, TransitionManager, Value } from '#client' */\n/** @import { Batch } from '../../reactivity/batch.js'; */\nimport {\n\tEACH_INDEX_REACTIVE,\n\tEACH_IS_ANIMATED,\n\tEACH_IS_CONTROLLED,\n\tEACH_ITEM_IMMUTABLE,\n\tEACH_ITEM_REACTIVE,\n\tHYDRATION_END,\n\tHYDRATION_START_ELSE\n} from '../../../../constants.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tread_hydration_instruction,\n\tskip_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tshould_defer_append\n} from '../operations.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\tpause_effect,\n\tresume_effect\n} from '../../reactivity/effects.js';\nimport { source, mutable_source, internal_set } from '../../reactivity/sources.js';\nimport { array_from, is_array } from '../../../shared/utils.js';\nimport { COMMENT_NODE, EFFECT_OFFSCREEN, INERT } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { get } from '../../runtime.js';\nimport { DEV } from 'esm-env';\nimport { derived_safe_equal } from '../../reactivity/deriveds.js';\nimport { current_batch } from '../../reactivity/batch.js';\n\n// When making substantive changes to this file, validate them with the each block stress test:\n// https://svelte.dev/playground/1972b2cf46564476ad8c8c6405b23b7b\n// This test also exists in this repo, as `packages/svelte/tests/manual/each-stress-test`\n\n/**\n * @param {any} _\n * @param {number} i\n */\nexport function index(_, i) {\n\treturn i;\n}\n\n/**\n * Pause multiple effects simultaneously, and coordinate their\n * subsequent destruction. Used in each blocks\n * @param {EachState} state\n * @param {Effect[]} to_destroy\n * @param {null | Node} controlled_anchor\n */\nfunction pause_effects(state, to_destroy, controlled_anchor) {\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\tvar length = to_destroy.length;\n\n\t/** @type {EachOutroGroup} */\n\tvar group;\n\tvar remaining = to_destroy.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tlet effect = to_destroy[i];\n\n\t\tpause_effect(\n\t\t\teffect,\n\t\t\t() => {\n\t\t\t\tif (group) {\n\t\t\t\t\tgroup.pending.delete(effect);\n\t\t\t\t\tgroup.done.add(effect);\n\n\t\t\t\t\tif (group.pending.size === 0) {\n\t\t\t\t\t\tvar groups = /** @type {Set<EachOutroGroup>} */ (state.outrogroups);\n\n\t\t\t\t\t\tdestroy_effects(array_from(group.done));\n\t\t\t\t\t\tgroups.delete(group);\n\n\t\t\t\t\t\tif (groups.size === 0) {\n\t\t\t\t\t\t\tstate.outrogroups = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tremaining -= 1;\n\t\t\t\t}\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t}\n\n\tif (remaining === 0) {\n\t\t// If we're in a controlled each block (i.e. the block is the only child of an\n\t\t// element), and we are removing all items, _and_ there are no out transitions,\n\t\t// we can use the fast path  emptying the element and replacing the anchor\n\t\tvar fast_path = transitions.length === 0 && controlled_anchor !== null;\n\n\t\tif (fast_path) {\n\t\t\tvar anchor = /** @type {Element} */ (controlled_anchor);\n\t\t\tvar parent_node = /** @type {Element} */ (anchor.parentNode);\n\n\t\t\tclear_text_content(parent_node);\n\t\t\tparent_node.append(anchor);\n\n\t\t\tstate.items.clear();\n\t\t}\n\n\t\tdestroy_effects(to_destroy, !fast_path);\n\t} else {\n\t\tgroup = {\n\t\t\tpending: new Set(to_destroy),\n\t\t\tdone: new Set()\n\t\t};\n\n\t\t(state.outrogroups ??= new Set()).add(group);\n\t}\n}\n\n/**\n * @param {Effect[]} to_destroy\n * @param {boolean} remove_dom\n */\nfunction destroy_effects(to_destroy, remove_dom = true) {\n\t// TODO only destroy effects if no pending batch needs them. otherwise,\n\t// just re-add the `EFFECT_OFFSCREEN` flag\n\tfor (var i = 0; i < to_destroy.length; i++) {\n\t\tdestroy_effect(to_destroy[i], remove_dom);\n\t}\n}\n\n/** @type {TemplateNode} */\nvar offscreen_anchor;\n\n/**\n * @template V\n * @param {Element | Comment} node The next sibling node, or the parent node if this is a 'controlled' block\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @param {(value: V, index: number) => any} get_key\n * @param {(anchor: Node, item: MaybeSource<V>, index: MaybeSource<number>) => void} render_fn\n * @param {null | ((anchor: Node) => void)} fallback_fn\n * @returns {void}\n */\nexport function each(node, flags, get_collection, get_key, render_fn, fallback_fn = null) {\n\tvar anchor = node;\n\n\t/** @type {Map<any, EachItem>} */\n\tvar items = new Map();\n\n\tvar is_controlled = (flags & EACH_IS_CONTROLLED) !== 0;\n\n\tif (is_controlled) {\n\t\tvar parent_node = /** @type {Element} */ (node);\n\n\t\tanchor = hydrating\n\t\t\t? set_hydrate_node(get_first_child(parent_node))\n\t\t\t: parent_node.appendChild(create_text());\n\t}\n\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\t/** @type {Effect | null} */\n\tvar fallback = null;\n\n\t// TODO: ideally we could use derived for runes mode but because of the ability\n\t// to use a store which can be mutated, we can't do that here as mutating a store\n\t// will still result in the collection array being the same from the store\n\tvar each_array = derived_safe_equal(() => {\n\t\tvar collection = get_collection();\n\n\t\treturn is_array(collection) ? collection : collection == null ? [] : array_from(collection);\n\t});\n\n\t/** @type {V[]} */\n\tvar array;\n\n\tvar first_run = true;\n\n\tfunction commit() {\n\t\tstate.fallback = fallback;\n\t\treconcile(state, array, anchor, flags, get_key);\n\n\t\tif (fallback !== null) {\n\t\t\tif (array.length === 0) {\n\t\t\t\tif ((fallback.f & EFFECT_OFFSCREEN) === 0) {\n\t\t\t\t\tresume_effect(fallback);\n\t\t\t\t} else {\n\t\t\t\t\tfallback.f ^= EFFECT_OFFSCREEN;\n\t\t\t\t\tmove(fallback, null, anchor);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpause_effect(fallback, () => {\n\t\t\t\t\t// TODO only null out if no pending batch needs it,\n\t\t\t\t\t// otherwise re-add `fallback.fragment` and move the\n\t\t\t\t\t// effect into it\n\t\t\t\t\tfallback = null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tvar effect = block(() => {\n\t\tarray = /** @type {V[]} */ (get(each_array));\n\t\tvar length = array.length;\n\n\t\t/** `true` if there was a hydration mismatch. Needs to be a `let` or else it isn't treeshaken out */\n\t\tlet mismatch = false;\n\n\t\tif (hydrating) {\n\t\t\tvar is_else = read_hydration_instruction(anchor) === HYDRATION_START_ELSE;\n\n\t\t\tif (is_else !== (length === 0)) {\n\t\t\t\t// hydration mismatch  remove the server-rendered DOM and start over\n\t\t\t\tanchor = skip_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tset_hydrating(false);\n\t\t\t\tmismatch = true;\n\t\t\t}\n\t\t}\n\n\t\tvar keys = new Set();\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\t\tvar defer = should_defer_append();\n\n\t\tfor (var index = 0; index < length; index += 1) {\n\t\t\tif (\n\t\t\t\thydrating &&\n\t\t\t\thydrate_node.nodeType === COMMENT_NODE &&\n\t\t\t\t/** @type {Comment} */ (hydrate_node).data === HYDRATION_END\n\t\t\t) {\n\t\t\t\t// The server rendered fewer items than expected,\n\t\t\t\t// so break out and continue appending non-hydrated items\n\t\t\t\tanchor = /** @type {Comment} */ (hydrate_node);\n\t\t\t\tmismatch = true;\n\t\t\t\tset_hydrating(false);\n\t\t\t}\n\n\t\t\tvar value = array[index];\n\t\t\tvar key = get_key(value, index);\n\n\t\t\tvar item = first_run ? null : items.get(key);\n\n\t\t\tif (item) {\n\t\t\t\t// update before reconciliation, to trigger any async updates\n\t\t\t\tif (item.v) internal_set(item.v, value);\n\t\t\t\tif (item.i) internal_set(item.i, index);\n\n\t\t\t\tif (defer) {\n\t\t\t\t\tbatch.skipped_effects.delete(item.e);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem = create_item(\n\t\t\t\t\titems,\n\t\t\t\t\tfirst_run ? anchor : (offscreen_anchor ??= create_text()),\n\t\t\t\t\tvalue,\n\t\t\t\t\tkey,\n\t\t\t\t\tindex,\n\t\t\t\t\trender_fn,\n\t\t\t\t\tflags,\n\t\t\t\t\tget_collection\n\t\t\t\t);\n\n\t\t\t\tif (!first_run) {\n\t\t\t\t\titem.e.f |= EFFECT_OFFSCREEN;\n\t\t\t\t}\n\n\t\t\t\titems.set(key, item);\n\t\t\t}\n\n\t\t\tkeys.add(key);\n\t\t}\n\n\t\tif (length === 0 && fallback_fn && !fallback) {\n\t\t\tif (first_run) {\n\t\t\t\tfallback = branch(() => fallback_fn(anchor));\n\t\t\t} else {\n\t\t\t\tfallback = branch(() => fallback_fn((offscreen_anchor ??= create_text())));\n\t\t\t\tfallback.f |= EFFECT_OFFSCREEN;\n\t\t\t}\n\t\t}\n\n\t\t// remove excess nodes\n\t\tif (hydrating && length > 0) {\n\t\t\tset_hydrate_node(skip_nodes());\n\t\t}\n\n\t\tif (!first_run) {\n\t\t\tif (defer) {\n\t\t\t\tfor (const [key, item] of items) {\n\t\t\t\t\tif (!keys.has(key)) {\n\t\t\t\t\t\tbatch.skipped_effects.add(item.e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbatch.oncommit(commit);\n\t\t\t\tbatch.ondiscard(() => {\n\t\t\t\t\t// TODO presumably we need to do something here?\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcommit();\n\t\t\t}\n\t\t}\n\n\t\tif (mismatch) {\n\t\t\t// continue in hydration mode\n\t\t\tset_hydrating(true);\n\t\t}\n\n\t\t// When we mount the each block for the first time, the collection won't be\n\t\t// connected to this effect as the effect hasn't finished running yet and its deps\n\t\t// won't be assigned. However, it's possible that when reconciling the each block\n\t\t// that a mutation occurred and it's made the collection MAYBE_DIRTY, so reading the\n\t\t// collection again can provide consistency to the reactive graph again as the deriveds\n\t\t// will now be `CLEAN`.\n\t\tget(each_array);\n\t});\n\n\t/** @type {EachState} */\n\tvar state = { effect, flags, items, outrogroups: null, fallback };\n\n\tfirst_run = false;\n\n\tif (hydrating) {\n\t\tanchor = hydrate_node;\n\t}\n}\n\n/**\n * Add, remove, or reorder items output by an each block as its input changes\n * @template V\n * @param {EachState} state\n * @param {Array<V>} array\n * @param {Element | Comment | Text} anchor\n * @param {number} flags\n * @param {(value: V, index: number) => any} get_key\n * @returns {void}\n */\nfunction reconcile(state, array, anchor, flags, get_key) {\n\tvar is_animated = (flags & EACH_IS_ANIMATED) !== 0;\n\n\tvar length = array.length;\n\tvar items = state.items;\n\tvar current = state.effect.first;\n\n\t/** @type {undefined | Set<Effect>} */\n\tvar seen;\n\n\t/** @type {Effect | null} */\n\tvar prev = null;\n\n\t/** @type {undefined | Set<Effect>} */\n\tvar to_animate;\n\n\t/** @type {Effect[]} */\n\tvar matched = [];\n\n\t/** @type {Effect[]} */\n\tvar stashed = [];\n\n\t/** @type {V} */\n\tvar value;\n\n\t/** @type {any} */\n\tvar key;\n\n\t/** @type {Effect | undefined} */\n\tvar effect;\n\n\t/** @type {number} */\n\tvar i;\n\n\tif (is_animated) {\n\t\tfor (i = 0; i < length; i += 1) {\n\t\t\tvalue = array[i];\n\t\t\tkey = get_key(value, i);\n\t\t\teffect = /** @type {EachItem} */ (items.get(key)).e;\n\n\t\t\t// offscreen == coming in now, no animation in that case,\n\t\t\t// else this would happen https://github.com/sveltejs/svelte/issues/17181\n\t\t\tif ((effect.f & EFFECT_OFFSCREEN) === 0) {\n\t\t\t\teffect.nodes?.a?.measure();\n\t\t\t\t(to_animate ??= new Set()).add(effect);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (i = 0; i < length; i += 1) {\n\t\tvalue = array[i];\n\t\tkey = get_key(value, i);\n\n\t\teffect = /** @type {EachItem} */ (items.get(key)).e;\n\n\t\tif (state.outrogroups !== null) {\n\t\t\tfor (const group of state.outrogroups) {\n\t\t\t\tgroup.pending.delete(effect);\n\t\t\t\tgroup.done.delete(effect);\n\t\t\t}\n\t\t}\n\n\t\tif ((effect.f & EFFECT_OFFSCREEN) !== 0) {\n\t\t\teffect.f ^= EFFECT_OFFSCREEN;\n\n\t\t\tif (effect === current) {\n\t\t\t\tmove(effect, null, anchor);\n\t\t\t} else {\n\t\t\t\tvar next = prev ? prev.next : current;\n\n\t\t\t\tif (effect === state.effect.last) {\n\t\t\t\t\tstate.effect.last = effect.prev;\n\t\t\t\t}\n\n\t\t\t\tif (effect.prev) effect.prev.next = effect.next;\n\t\t\t\tif (effect.next) effect.next.prev = effect.prev;\n\t\t\t\tlink(state, prev, effect);\n\t\t\t\tlink(state, effect, next);\n\n\t\t\t\tmove(effect, next, anchor);\n\t\t\t\tprev = effect;\n\n\t\t\t\tmatched = [];\n\t\t\t\tstashed = [];\n\n\t\t\t\tcurrent = prev.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\tif ((effect.f & INERT) !== 0) {\n\t\t\tresume_effect(effect);\n\t\t\tif (is_animated) {\n\t\t\t\teffect.nodes?.a?.unfix();\n\t\t\t\t(to_animate ??= new Set()).delete(effect);\n\t\t\t}\n\t\t}\n\n\t\tif (effect !== current) {\n\t\t\tif (seen !== undefined && seen.has(effect)) {\n\t\t\t\tif (matched.length < stashed.length) {\n\t\t\t\t\t// more efficient to move later items to the front\n\t\t\t\t\tvar start = stashed[0];\n\t\t\t\t\tvar j;\n\n\t\t\t\t\tprev = start.prev;\n\n\t\t\t\t\tvar a = matched[0];\n\t\t\t\t\tvar b = matched[matched.length - 1];\n\n\t\t\t\t\tfor (j = 0; j < matched.length; j += 1) {\n\t\t\t\t\t\tmove(matched[j], start, anchor);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (j = 0; j < stashed.length; j += 1) {\n\t\t\t\t\t\tseen.delete(stashed[j]);\n\t\t\t\t\t}\n\n\t\t\t\t\tlink(state, a.prev, b.next);\n\t\t\t\t\tlink(state, prev, a);\n\t\t\t\t\tlink(state, b, start);\n\n\t\t\t\t\tcurrent = start;\n\t\t\t\t\tprev = b;\n\t\t\t\t\ti -= 1;\n\n\t\t\t\t\tmatched = [];\n\t\t\t\t\tstashed = [];\n\t\t\t\t} else {\n\t\t\t\t\t// more efficient to move earlier items to the back\n\t\t\t\t\tseen.delete(effect);\n\t\t\t\t\tmove(effect, current, anchor);\n\n\t\t\t\t\tlink(state, effect.prev, effect.next);\n\t\t\t\t\tlink(state, effect, prev === null ? state.effect.first : prev.next);\n\t\t\t\t\tlink(state, prev, effect);\n\n\t\t\t\t\tprev = effect;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tmatched = [];\n\t\t\tstashed = [];\n\n\t\t\twhile (current !== null && current !== effect) {\n\t\t\t\t(seen ??= new Set()).add(current);\n\t\t\t\tstashed.push(current);\n\t\t\t\tcurrent = current.next;\n\t\t\t}\n\n\t\t\tif (current === null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\tif ((effect.f & EFFECT_OFFSCREEN) === 0) {\n\t\t\tmatched.push(effect);\n\t\t}\n\n\t\tprev = effect;\n\t\tcurrent = effect.next;\n\t}\n\n\tif (state.outrogroups !== null) {\n\t\tfor (const group of state.outrogroups) {\n\t\t\tif (group.pending.size === 0) {\n\t\t\t\tdestroy_effects(array_from(group.done));\n\t\t\t\tstate.outrogroups?.delete(group);\n\t\t\t}\n\t\t}\n\n\t\tif (state.outrogroups.size === 0) {\n\t\t\tstate.outrogroups = null;\n\t\t}\n\t}\n\n\tif (current !== null || seen !== undefined) {\n\t\t/** @type {Effect[]} */\n\t\tvar to_destroy = [];\n\n\t\tif (seen !== undefined) {\n\t\t\tfor (effect of seen) {\n\t\t\t\tif ((effect.f & INERT) === 0) {\n\t\t\t\t\tto_destroy.push(effect);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\twhile (current !== null) {\n\t\t\t// If the each block isn't inert, then inert effects are currently outroing and will be removed once the transition is finished\n\t\t\tif ((current.f & INERT) === 0 && current !== state.fallback) {\n\t\t\t\tto_destroy.push(current);\n\t\t\t}\n\n\t\t\tcurrent = current.next;\n\t\t}\n\n\t\tvar destroy_length = to_destroy.length;\n\n\t\tif (destroy_length > 0) {\n\t\t\tvar controlled_anchor = (flags & EACH_IS_CONTROLLED) !== 0 && length === 0 ? anchor : null;\n\n\t\t\tif (is_animated) {\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].nodes?.a?.measure();\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].nodes?.a?.fix();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpause_effects(state, to_destroy, controlled_anchor);\n\t\t}\n\t}\n\n\tif (is_animated) {\n\t\tqueue_micro_task(() => {\n\t\t\tif (to_animate === undefined) return;\n\t\t\tfor (effect of to_animate) {\n\t\t\t\teffect.nodes?.a?.apply();\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * @template V\n * @param {Map<any, EachItem>} items\n * @param {Node} anchor\n * @param {V} value\n * @param {unknown} key\n * @param {number} index\n * @param {(anchor: Node, item: V | Source<V>, index: number | Value<number>, collection: () => V[]) => void} render_fn\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @returns {EachItem}\n */\nfunction create_item(items, anchor, value, key, index, render_fn, flags, get_collection) {\n\tvar v =\n\t\t(flags & EACH_ITEM_REACTIVE) !== 0\n\t\t\t? (flags & EACH_ITEM_IMMUTABLE) === 0\n\t\t\t\t? mutable_source(value, false, false)\n\t\t\t\t: source(value)\n\t\t\t: null;\n\n\tvar i = (flags & EACH_INDEX_REACTIVE) !== 0 ? source(index) : null;\n\n\tif (DEV && v) {\n\t\t// For tracing purposes, we need to link the source signal we create with the\n\t\t// collection + index so that tracing works as intended\n\t\tv.trace = () => {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\t\t\tget_collection()[i?.v ?? index];\n\t\t};\n\t}\n\n\treturn {\n\t\tv,\n\t\ti,\n\t\te: branch(() => {\n\t\t\trender_fn(anchor, v ?? value, i ?? index, get_collection);\n\n\t\t\treturn () => {\n\t\t\t\titems.delete(key);\n\t\t\t};\n\t\t})\n\t};\n}\n\n/**\n * @param {Effect} effect\n * @param {Effect | null} next\n * @param {Text | Element | Comment} anchor\n */\nfunction move(effect, next, anchor) {\n\tif (!effect.nodes) return;\n\n\tvar node = effect.nodes.start;\n\tvar end = effect.nodes.end;\n\n\tvar dest =\n\t\tnext && (next.f & EFFECT_OFFSCREEN) === 0\n\t\t\t? /** @type {EffectNodes} */ (next.nodes).start\n\t\t\t: anchor;\n\n\twhile (node !== null) {\n\t\tvar next_node = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\tdest.before(node);\n\n\t\tif (node === end) {\n\t\t\treturn;\n\t\t}\n\n\t\tnode = next_node;\n\t}\n}\n\n/**\n * @param {EachState} state\n * @param {Effect | null} prev\n * @param {Effect | null} next\n */\nfunction link(state, prev, next) {\n\tif (prev === null) {\n\t\tstate.effect.first = next;\n\t} else {\n\t\tprev.next = next;\n\t}\n\n\tif (next === null) {\n\t\tstate.effect.last = prev;\n\t} else {\n\t\tnext.prev = prev;\n\t}\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { FILENAME, HYDRATION_ERROR } from '../../../../constants.js';\nimport { remove_effect_dom, template_effect } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from '../hydration.js';\nimport { create_fragment_from_html } from '../reconciler.js';\nimport { assign_nodes } from '../template.js';\nimport * as w from '../../warnings.js';\nimport { hash, sanitize_location } from '../../../../utils.js';\nimport { DEV } from 'esm-env';\nimport { dev_current_component_function } from '../../context.js';\nimport { get_first_child, get_next_sibling } from '../operations.js';\nimport { active_effect } from '../../runtime.js';\nimport { COMMENT_NODE } from '#client/constants';\n\n/**\n * @param {Element} element\n * @param {string | null} server_hash\n * @param {string} value\n */\nfunction check_hash(element, server_hash, value) {\n\tif (!server_hash || server_hash === hash(String(value ?? ''))) return;\n\n\tlet location;\n\n\t// @ts-expect-error\n\tconst loc = element.__svelte_meta?.loc;\n\tif (loc) {\n\t\tlocation = `near ${loc.file}:${loc.line}:${loc.column}`;\n\t} else if (dev_current_component_function?.[FILENAME]) {\n\t\tlocation = `in ${dev_current_component_function[FILENAME]}`;\n\t}\n\n\tw.hydration_html_changed(sanitize_location(location));\n}\n\n/**\n * @param {Element | Text | Comment} node\n * @param {() => string} get_value\n * @param {boolean} [svg]\n * @param {boolean} [mathml]\n * @param {boolean} [skip_warning]\n * @returns {void}\n */\nexport function html(node, get_value, svg = false, mathml = false, skip_warning = false) {\n\tvar anchor = node;\n\n\tvar value = '';\n\n\ttemplate_effect(() => {\n\t\tvar effect = /** @type {Effect} */ (active_effect);\n\n\t\tif (value === (value = get_value() ?? '')) {\n\t\t\tif (hydrating) hydrate_next();\n\t\t\treturn;\n\t\t}\n\n\t\tif (effect.nodes !== null) {\n\t\t\tremove_effect_dom(effect.nodes.start, /** @type {TemplateNode} */ (effect.nodes.end));\n\t\t\teffect.nodes = null;\n\t\t}\n\n\t\tif (value === '') return;\n\n\t\tif (hydrating) {\n\t\t\t// We're deliberately not trying to repair mismatches between server and client,\n\t\t\t// as it's costly and error-prone (and it's an edge case to have a mismatch anyway)\n\t\t\tvar hash = /** @type {Comment} */ (hydrate_node).data;\n\n\t\t\t/** @type {TemplateNode | null} */\n\t\t\tvar next = hydrate_next();\n\t\t\tvar last = next;\n\n\t\t\twhile (\n\t\t\t\tnext !== null &&\n\t\t\t\t(next.nodeType !== COMMENT_NODE || /** @type {Comment} */ (next).data !== '')\n\t\t\t) {\n\t\t\t\tlast = next;\n\t\t\t\tnext = get_next_sibling(next);\n\t\t\t}\n\n\t\t\tif (next === null) {\n\t\t\t\tw.hydration_mismatch();\n\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t}\n\n\t\t\tif (DEV && !skip_warning) {\n\t\t\t\tcheck_hash(/** @type {Element} */ (next.parentNode), hash, value);\n\t\t\t}\n\n\t\t\tassign_nodes(hydrate_node, last);\n\t\t\tanchor = set_hydrate_node(next);\n\t\t\treturn;\n\t\t}\n\n\t\tvar html = value + '';\n\t\tif (svg) html = `<svg>${html}</svg>`;\n\t\telse if (mathml) html = `<math>${html}</math>`;\n\n\t\t// Don't use create_fragment_with_script_from_html here because that would mean script tags are executed.\n\t\t// @html is basically `.innerHTML = ...` and that doesn't execute scripts either due to security reasons.\n\t\t/** @type {DocumentFragment | Element} */\n\t\tvar node = create_fragment_from_html(html);\n\n\t\tif (svg || mathml) {\n\t\t\tnode = /** @type {Element} */ (get_first_child(node));\n\t\t}\n\n\t\tassign_nodes(\n\t\t\t/** @type {TemplateNode} */ (get_first_child(node)),\n\t\t\t/** @type {TemplateNode} */ (node.lastChild)\n\t\t);\n\n\t\tif (svg || mathml) {\n\t\t\twhile (get_first_child(node)) {\n\t\t\t\tanchor.before(/** @type {TemplateNode} */ (get_first_child(node)));\n\t\t\t}\n\t\t} else {\n\t\t\tanchor.before(node);\n\t\t}\n\t});\n}\n","/** @import { Raf } from '#client' */\nimport { noop } from '../shared/utils.js';\n\nimport { BROWSER } from 'esm-env';\n\nconst now = BROWSER ? () => performance.now() : () => Date.now();\n\n/** @type {Raf} */\nexport const raf = {\n\t// don't access requestAnimationFrame eagerly outside method\n\t// this allows basic testing of user code without JSDOM\n\t// bunder will eval and remove ternary when the user's app is built\n\ttick: /** @param {any} _ */ (_) => (BROWSER ? requestAnimationFrame : noop)(_),\n\tnow: () => now(),\n\ttasks: new Set()\n};\n","/** @import { TaskCallback, Task, TaskEntry } from '#client' */\nimport { raf } from './timing.js';\n\n// TODO move this into timing.js where it probably belongs\n\n/**\n * @returns {void}\n */\nfunction run_tasks() {\n\t// use `raf.now()` instead of the `requestAnimationFrame` callback argument, because\n\t// otherwise things can get wonky https://github.com/sveltejs/svelte/pull/14541\n\tconst now = raf.now();\n\n\traf.tasks.forEach((task) => {\n\t\tif (!task.c(now)) {\n\t\t\traf.tasks.delete(task);\n\t\t\ttask.f();\n\t\t}\n\t});\n\n\tif (raf.tasks.size !== 0) {\n\t\traf.tick(run_tasks);\n\t}\n}\n\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n * @param {TaskCallback} callback\n * @returns {Task}\n */\nexport function loop(callback) {\n\t/** @type {TaskEntry} */\n\tlet task;\n\n\tif (raf.tasks.size === 0) {\n\t\traf.tick(run_tasks);\n\t}\n\n\treturn {\n\t\tpromise: new Promise((fulfill) => {\n\t\t\traf.tasks.add((task = { c: callback, f: fulfill }));\n\t\t}),\n\t\tabort() {\n\t\t\traf.tasks.delete(task);\n\t\t}\n\t};\n}\n","/** @import { AnimateFn, Animation, AnimationConfig, EachItem, Effect, EffectNodes, TransitionFn, TransitionManager } from '#client' */\nimport { noop, is_function } from '../../../shared/utils.js';\nimport { effect } from '../../reactivity/effects.js';\nimport { active_effect, untrack } from '../../runtime.js';\nimport { loop } from '../../loop.js';\nimport { should_intro } from '../../render.js';\nimport { TRANSITION_GLOBAL, TRANSITION_IN, TRANSITION_OUT } from '../../../../constants.js';\nimport { BLOCK_EFFECT, EFFECT_RAN, EFFECT_TRANSPARENT } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { without_reactive_context } from './bindings/shared.js';\n\n/**\n * @param {Element} element\n * @param {'introstart' | 'introend' | 'outrostart' | 'outroend'} type\n * @returns {void}\n */\nfunction dispatch_event(element, type) {\n\twithout_reactive_context(() => {\n\t\telement.dispatchEvent(new CustomEvent(type));\n\t});\n}\n\n/**\n * Converts a property to the camel-case format expected by Element.animate(), KeyframeEffect(), and KeyframeEffect.setKeyframes().\n * @param {string} style\n * @returns {string}\n */\nfunction css_property_to_camelcase(style) {\n\t// in compliance with spec\n\tif (style === 'float') return 'cssFloat';\n\tif (style === 'offset') return 'cssOffset';\n\n\t// do not rename custom @properties\n\tif (style.startsWith('--')) return style;\n\n\tconst parts = style.split('-');\n\tif (parts.length === 1) return parts[0];\n\treturn (\n\t\tparts[0] +\n\t\tparts\n\t\t\t.slice(1)\n\t\t\t.map(/** @param {any} word */ (word) => word[0].toUpperCase() + word.slice(1))\n\t\t\t.join('')\n\t);\n}\n\n/**\n * @param {string} css\n * @returns {Keyframe}\n */\nfunction css_to_keyframe(css) {\n\t/** @type {Keyframe} */\n\tconst keyframe = {};\n\tconst parts = css.split(';');\n\tfor (const part of parts) {\n\t\tconst [property, value] = part.split(':');\n\t\tif (!property || value === undefined) break;\n\n\t\tconst formatted_property = css_property_to_camelcase(property.trim());\n\t\tkeyframe[formatted_property] = value.trim();\n\t}\n\treturn keyframe;\n}\n\n/** @param {number} t */\nconst linear = (t) => t;\n\n/** @type {Effect | null} */\nlet animation_effect_override = null;\n\n/** @param {Effect | null} v */\nexport function set_animation_effect_override(v) {\n\tanimation_effect_override = v;\n}\n\n/**\n * Called inside keyed `{#each ...}` blocks (as `$.animation(...)`). This creates an animation manager\n * and attaches it to the block, so that moves can be animated following reconciliation.\n * @template P\n * @param {Element} element\n * @param {() => AnimateFn<P | undefined>} get_fn\n * @param {(() => P) | null} get_params\n */\nexport function animation(element, get_fn, get_params) {\n\tvar effect = animation_effect_override ?? /** @type {Effect} */ (active_effect);\n\tvar nodes = /** @type {EffectNodes} */ (effect.nodes);\n\n\t/** @type {DOMRect} */\n\tvar from;\n\n\t/** @type {DOMRect} */\n\tvar to;\n\n\t/** @type {Animation | undefined} */\n\tvar animation;\n\n\t/** @type {null | { position: string, width: string, height: string, transform: string }} */\n\tvar original_styles = null;\n\n\tnodes.a ??= {\n\t\telement,\n\t\tmeasure() {\n\t\t\tfrom = this.element.getBoundingClientRect();\n\t\t},\n\t\tapply() {\n\t\t\tanimation?.abort();\n\n\t\t\tto = this.element.getBoundingClientRect();\n\n\t\t\tif (\n\t\t\t\tfrom.left !== to.left ||\n\t\t\t\tfrom.right !== to.right ||\n\t\t\t\tfrom.top !== to.top ||\n\t\t\t\tfrom.bottom !== to.bottom\n\t\t\t) {\n\t\t\t\tconst options = get_fn()(this.element, { from, to }, get_params?.());\n\n\t\t\t\tanimation = animate(this.element, options, undefined, 1, () => {\n\t\t\t\t\tanimation?.abort();\n\t\t\t\t\tanimation = undefined;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tfix() {\n\t\t\t// If an animation is already running, transforming the element is likely to fail,\n\t\t\t// because the styles applied by the animation take precedence. In the case of crossfade,\n\t\t\t// that means the `translate(...)` of the crossfade transition overrules the `translate(...)`\n\t\t\t// we would apply below, leading to the element jumping somewhere to the top left.\n\t\t\tif (element.getAnimations().length) return;\n\n\t\t\t// It's important to destructure these to get fixed values - the object itself has getters,\n\t\t\t// and changing the style to 'absolute' can for example influence the width.\n\t\t\tvar { position, width, height } = getComputedStyle(element);\n\n\t\t\tif (position !== 'absolute' && position !== 'fixed') {\n\t\t\t\tvar style = /** @type {HTMLElement | SVGElement} */ (element).style;\n\n\t\t\t\toriginal_styles = {\n\t\t\t\t\tposition: style.position,\n\t\t\t\t\twidth: style.width,\n\t\t\t\t\theight: style.height,\n\t\t\t\t\ttransform: style.transform\n\t\t\t\t};\n\n\t\t\t\tstyle.position = 'absolute';\n\t\t\t\tstyle.width = width;\n\t\t\t\tstyle.height = height;\n\t\t\t\tvar to = element.getBoundingClientRect();\n\n\t\t\t\tif (from.left !== to.left || from.top !== to.top) {\n\t\t\t\t\tvar transform = `translate(${from.left - to.left}px, ${from.top - to.top}px)`;\n\t\t\t\t\tstyle.transform = style.transform ? `${style.transform} ${transform}` : transform;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tunfix() {\n\t\t\tif (original_styles) {\n\t\t\t\tvar style = /** @type {HTMLElement | SVGElement} */ (element).style;\n\n\t\t\t\tstyle.position = original_styles.position;\n\t\t\t\tstyle.width = original_styles.width;\n\t\t\t\tstyle.height = original_styles.height;\n\t\t\t\tstyle.transform = original_styles.transform;\n\t\t\t}\n\t\t}\n\t};\n\n\t// in the case of a `<svelte:element>`, it's possible for `$.animation(...)` to be called\n\t// when an animation manager already exists, if the tag changes. in that case, we need to\n\t// swap out the element rather than creating a new manager, in case it happened at the same\n\t// moment as a reconciliation\n\tnodes.a.element = element;\n}\n\n/**\n * Called inside block effects as `$.transition(...)`. This creates a transition manager and\n * attaches it to the current effect  later, inside `pause_effect` and `resume_effect`, we\n * use this to create `intro` and `outro` transitions.\n * @template P\n * @param {number} flags\n * @param {HTMLElement} element\n * @param {() => TransitionFn<P | undefined>} get_fn\n * @param {(() => P) | null} get_params\n * @returns {void}\n */\nexport function transition(flags, element, get_fn, get_params) {\n\tvar is_intro = (flags & TRANSITION_IN) !== 0;\n\tvar is_outro = (flags & TRANSITION_OUT) !== 0;\n\tvar is_both = is_intro && is_outro;\n\tvar is_global = (flags & TRANSITION_GLOBAL) !== 0;\n\n\t/** @type {'in' | 'out' | 'both'} */\n\tvar direction = is_both ? 'both' : is_intro ? 'in' : 'out';\n\n\t/** @type {AnimationConfig | ((opts: { direction: 'in' | 'out' }) => AnimationConfig) | undefined} */\n\tvar current_options;\n\n\tvar inert = element.inert;\n\n\t/**\n\t * The default overflow style, stashed so we can revert changes during the transition\n\t * that are necessary to work around a Safari <18 bug\n\t * TODO 6.0 remove this, if older versions of Safari have died out enough\n\t */\n\tvar overflow = element.style.overflow;\n\n\t/** @type {Animation | undefined} */\n\tvar intro;\n\n\t/** @type {Animation | undefined} */\n\tvar outro;\n\n\tfunction get_options() {\n\t\treturn without_reactive_context(() => {\n\t\t\t// If a transition is still ongoing, we use the existing options rather than generating\n\t\t\t// new ones. This ensures that reversible transitions reverse smoothly, rather than\n\t\t\t// jumping to a new spot because (for example) a different `duration` was used\n\t\t\treturn (current_options ??= get_fn()(element, get_params?.() ?? /** @type {P} */ ({}), {\n\t\t\t\tdirection\n\t\t\t}));\n\t\t});\n\t}\n\n\t/** @type {TransitionManager} */\n\tvar transition = {\n\t\tis_global,\n\t\tin() {\n\t\t\telement.inert = inert;\n\n\t\t\tif (!is_intro) {\n\t\t\t\toutro?.abort();\n\t\t\t\toutro?.reset?.();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!is_outro) {\n\t\t\t\t// if we intro then outro then intro again, we want to abort the first intro,\n\t\t\t\t// if it's not a bidirectional transition\n\t\t\t\tintro?.abort();\n\t\t\t}\n\n\t\t\tdispatch_event(element, 'introstart');\n\n\t\t\tintro = animate(element, get_options(), outro, 1, () => {\n\t\t\t\tdispatch_event(element, 'introend');\n\n\t\t\t\t// Ensure we cancel the animation to prevent leaking\n\t\t\t\tintro?.abort();\n\t\t\t\tintro = current_options = undefined;\n\n\t\t\t\telement.style.overflow = overflow;\n\t\t\t});\n\t\t},\n\t\tout(fn) {\n\t\t\tif (!is_outro) {\n\t\t\t\tfn?.();\n\t\t\t\tcurrent_options = undefined;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telement.inert = true;\n\n\t\t\tdispatch_event(element, 'outrostart');\n\n\t\t\toutro = animate(element, get_options(), intro, 0, () => {\n\t\t\t\tdispatch_event(element, 'outroend');\n\t\t\t\tfn?.();\n\t\t\t});\n\t\t},\n\t\tstop: () => {\n\t\t\tintro?.abort();\n\t\t\toutro?.abort();\n\t\t}\n\t};\n\n\tvar e = /** @type {Effect & { nodes: EffectNodes }} */ (active_effect);\n\n\t(e.nodes.t ??= []).push(transition);\n\n\t// if this is a local transition, we only want to run it if the parent (branch) effect's\n\t// parent (block) effect is where the state change happened. we can determine that by\n\t// looking at whether the block effect is currently initializing\n\tif (is_intro && should_intro) {\n\t\tvar run = is_global;\n\n\t\tif (!run) {\n\t\t\tvar block = /** @type {Effect | null} */ (e.parent);\n\n\t\t\t// skip over transparent blocks (e.g. snippets, else-if blocks)\n\t\t\twhile (block && (block.f & EFFECT_TRANSPARENT) !== 0) {\n\t\t\t\twhile ((block = block.parent)) {\n\t\t\t\t\tif ((block.f & BLOCK_EFFECT) !== 0) break;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trun = !block || (block.f & EFFECT_RAN) !== 0;\n\t\t}\n\n\t\tif (run) {\n\t\t\teffect(() => {\n\t\t\t\tuntrack(() => transition.in());\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * Animates an element, according to the provided configuration\n * @param {Element} element\n * @param {AnimationConfig | ((opts: { direction: 'in' | 'out' }) => AnimationConfig)} options\n * @param {Animation | undefined} counterpart The corresponding intro/outro to this outro/intro\n * @param {number} t2 The target `t` value  `1` for intro, `0` for outro\n * @param {(() => void)} on_finish Called after successfully completing the animation\n * @returns {Animation}\n */\nfunction animate(element, options, counterpart, t2, on_finish) {\n\tvar is_intro = t2 === 1;\n\n\tif (is_function(options)) {\n\t\t// In the case of a deferred transition (such as `crossfade`), `option` will be\n\t\t// a function rather than an `AnimationConfig`. We need to call this function\n\t\t// once the DOM has been updated...\n\t\t/** @type {Animation} */\n\t\tvar a;\n\t\tvar aborted = false;\n\n\t\tqueue_micro_task(() => {\n\t\t\tif (aborted) return;\n\t\t\tvar o = options({ direction: is_intro ? 'in' : 'out' });\n\t\t\ta = animate(element, o, counterpart, t2, on_finish);\n\t\t});\n\n\t\t// ...but we want to do so without using `async`/`await` everywhere, so\n\t\t// we return a facade that allows everything to remain synchronous\n\t\treturn {\n\t\t\tabort: () => {\n\t\t\t\taborted = true;\n\t\t\t\ta?.abort();\n\t\t\t},\n\t\t\tdeactivate: () => a.deactivate(),\n\t\t\treset: () => a.reset(),\n\t\t\tt: () => a.t()\n\t\t};\n\t}\n\n\tcounterpart?.deactivate();\n\n\tif (!options?.duration) {\n\t\ton_finish();\n\n\t\treturn {\n\t\t\tabort: noop,\n\t\t\tdeactivate: noop,\n\t\t\treset: noop,\n\t\t\tt: () => t2\n\t\t};\n\t}\n\n\tconst { delay = 0, css, tick, easing = linear } = options;\n\n\tvar keyframes = [];\n\n\tif (is_intro && counterpart === undefined) {\n\t\tif (tick) {\n\t\t\ttick(0, 1); // TODO put in nested effect, to avoid interleaved reads/writes?\n\t\t}\n\n\t\tif (css) {\n\t\t\tvar styles = css_to_keyframe(css(0, 1));\n\t\t\tkeyframes.push(styles, styles);\n\t\t}\n\t}\n\n\tvar get_t = () => 1 - t2;\n\n\t// create a dummy animation that lasts as long as the delay (but with whatever devtools\n\t// multiplier is in effect). in the common case that it is `0`, we keep it anyway so that\n\t// the CSS keyframes aren't created until the DOM is updated\n\t//\n\t// fill forwards to prevent the element from rendering without styles applied\n\t// see https://github.com/sveltejs/svelte/issues/14732\n\tvar animation = element.animate(keyframes, { duration: delay, fill: 'forwards' });\n\n\tanimation.onfinish = () => {\n\t\t// remove dummy animation from the stack to prevent conflict with main animation\n\t\tanimation.cancel();\n\n\t\t// for bidirectional transitions, we start from the current position,\n\t\t// rather than doing a full intro/outro\n\t\tvar t1 = counterpart?.t() ?? 1 - t2;\n\t\tcounterpart?.abort();\n\n\t\tvar delta = t2 - t1;\n\t\tvar duration = /** @type {number} */ (options.duration) * Math.abs(delta);\n\t\tvar keyframes = [];\n\n\t\tif (duration > 0) {\n\t\t\t/**\n\t\t\t * Whether or not the CSS includes `overflow: hidden`, in which case we need to\n\t\t\t * add it as an inline style to work around a Safari <18 bug\n\t\t\t * TODO 6.0 remove this, if possible\n\t\t\t */\n\t\t\tvar needs_overflow_hidden = false;\n\n\t\t\tif (css) {\n\t\t\t\tvar n = Math.ceil(duration / (1000 / 60)); // `n` must be an integer, or we risk missing the `t2` value\n\n\t\t\t\tfor (var i = 0; i <= n; i += 1) {\n\t\t\t\t\tvar t = t1 + delta * easing(i / n);\n\t\t\t\t\tvar styles = css_to_keyframe(css(t, 1 - t));\n\t\t\t\t\tkeyframes.push(styles);\n\n\t\t\t\t\tneeds_overflow_hidden ||= styles.overflow === 'hidden';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (needs_overflow_hidden) {\n\t\t\t\t/** @type {HTMLElement} */ (element).style.overflow = 'hidden';\n\t\t\t}\n\n\t\t\tget_t = () => {\n\t\t\t\tvar time = /** @type {number} */ (\n\t\t\t\t\t/** @type {globalThis.Animation} */ (animation).currentTime\n\t\t\t\t);\n\n\t\t\t\treturn t1 + delta * easing(time / duration);\n\t\t\t};\n\n\t\t\tif (tick) {\n\t\t\t\tloop(() => {\n\t\t\t\t\tif (animation.playState !== 'running') return false;\n\n\t\t\t\t\tvar t = get_t();\n\t\t\t\t\ttick(t, 1 - t);\n\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tanimation = element.animate(keyframes, { duration, fill: 'forwards' });\n\n\t\tanimation.onfinish = () => {\n\t\t\tget_t = () => t2;\n\t\t\ttick?.(t2, 1 - t2);\n\t\t\ton_finish();\n\t\t};\n\t};\n\n\treturn {\n\t\tabort: () => {\n\t\t\tif (animation) {\n\t\t\t\tanimation.cancel();\n\t\t\t\t// This prevents memory leaks in Chromium\n\t\t\t\tanimation.effect = null;\n\t\t\t\t// This prevents onfinish to be launched after cancel(),\n\t\t\t\t// which can happen in some rare cases\n\t\t\t\t// see https://github.com/sveltejs/svelte/issues/13681\n\t\t\t\tanimation.onfinish = noop;\n\t\t\t}\n\t\t},\n\t\tdeactivate: () => {\n\t\t\ton_finish = noop;\n\t\t},\n\t\treset: () => {\n\t\t\tif (t2 === 0) {\n\t\t\t\ttick?.(1, 0);\n\t\t\t}\n\t\t},\n\t\tt: () => get_t()\n\t};\n}\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { escape_html } from '../../escaping.js';\nimport { clsx as _clsx } from 'clsx';\n\n/**\n * `<div translate={false}>` should be rendered as `<div translate=\"no\">` and _not_\n * `<div translate=\"false\">`, which is equivalent to `<div translate=\"yes\">`. There\n * may be other odd cases that need to be added to this list in future\n * @type {Record<string, Map<any, string>>}\n */\nconst replacements = {\n\ttranslate: new Map([\n\t\t[true, 'yes'],\n\t\t[false, 'no']\n\t])\n};\n\n/**\n * @template V\n * @param {string} name\n * @param {V} value\n * @param {boolean} [is_boolean]\n * @returns {string}\n */\nexport function attr(name, value, is_boolean = false) {\n\t// attribute hidden for values other than \"until-found\" behaves like a boolean attribute\n\tif (name === 'hidden' && value !== 'until-found') {\n\t\tis_boolean = true;\n\t}\n\tif (value == null || (!value && is_boolean)) return '';\n\tconst normalized = (name in replacements && replacements[name].get(value)) || value;\n\tconst assignment = is_boolean ? '' : `=\"${escape_html(normalized, true)}\"`;\n\treturn ` ${name}${assignment}`;\n}\n\n/**\n * Small wrapper around clsx to preserve Svelte's (weird) handling of falsy values.\n * TODO Svelte 6 revisit this, and likely turn all falsy values into the empty string (what clsx also does)\n * @param  {any} value\n */\nexport function clsx(value) {\n\tif (typeof value === 'object') {\n\t\treturn _clsx(value);\n\t} else {\n\t\treturn value ?? '';\n\t}\n}\n\nconst whitespace = [...' \\t\\n\\r\\f\\u00a0\\u000b\\ufeff'];\n\n/**\n * @param {any} value\n * @param {string | null} [hash]\n * @param {Record<string, boolean>} [directives]\n * @returns {string | null}\n */\nexport function to_class(value, hash, directives) {\n\tvar classname = value == null ? '' : '' + value;\n\n\tif (hash) {\n\t\tclassname = classname ? classname + ' ' + hash : hash;\n\t}\n\n\tif (directives) {\n\t\tfor (var key in directives) {\n\t\t\tif (directives[key]) {\n\t\t\t\tclassname = classname ? classname + ' ' + key : key;\n\t\t\t} else if (classname.length) {\n\t\t\t\tvar len = key.length;\n\t\t\t\tvar a = 0;\n\n\t\t\t\twhile ((a = classname.indexOf(key, a)) >= 0) {\n\t\t\t\t\tvar b = a + len;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t(a === 0 || whitespace.includes(classname[a - 1])) &&\n\t\t\t\t\t\t(b === classname.length || whitespace.includes(classname[b]))\n\t\t\t\t\t) {\n\t\t\t\t\t\tclassname = (a === 0 ? '' : classname.substring(0, a)) + classname.substring(b + 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta = b;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn classname === '' ? null : classname;\n}\n\n/**\n *\n * @param {Record<string,any>} styles\n * @param {boolean} important\n */\nfunction append_styles(styles, important = false) {\n\tvar separator = important ? ' !important;' : ';';\n\tvar css = '';\n\n\tfor (var key in styles) {\n\t\tvar value = styles[key];\n\t\tif (value != null && value !== '') {\n\t\t\tcss += ' ' + key + ': ' + value + separator;\n\t\t}\n\t}\n\n\treturn css;\n}\n\n/**\n * @param {string} name\n * @returns {string}\n */\nfunction to_css_name(name) {\n\tif (name[0] !== '-' || name[1] !== '-') {\n\t\treturn name.toLowerCase();\n\t}\n\treturn name;\n}\n\n/**\n * @param {any} value\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [styles]\n * @returns {string | null}\n */\nexport function to_style(value, styles) {\n\tif (styles) {\n\t\tvar new_style = '';\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar normal_styles;\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar important_styles;\n\n\t\tif (Array.isArray(styles)) {\n\t\t\tnormal_styles = styles[0];\n\t\t\timportant_styles = styles[1];\n\t\t} else {\n\t\t\tnormal_styles = styles;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = String(value)\n\t\t\t\t.replaceAll(/\\s*\\/\\*.*?\\*\\/\\s*/g, '')\n\t\t\t\t.trim();\n\n\t\t\t/** @type {boolean | '\"' | \"'\"} */\n\t\t\tvar in_str = false;\n\t\t\tvar in_apo = 0;\n\t\t\tvar in_comment = false;\n\n\t\t\tvar reserved_names = [];\n\n\t\t\tif (normal_styles) {\n\t\t\t\treserved_names.push(...Object.keys(normal_styles).map(to_css_name));\n\t\t\t}\n\t\t\tif (important_styles) {\n\t\t\t\treserved_names.push(...Object.keys(important_styles).map(to_css_name));\n\t\t\t}\n\n\t\t\tvar start_index = 0;\n\t\t\tvar name_index = -1;\n\n\t\t\tconst len = value.length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar c = value[i];\n\n\t\t\t\tif (in_comment) {\n\t\t\t\t\tif (c === '/' && value[i - 1] === '*') {\n\t\t\t\t\t\tin_comment = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (in_str) {\n\t\t\t\t\tif (in_str === c) {\n\t\t\t\t\t\tin_str = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (c === '/' && value[i + 1] === '*') {\n\t\t\t\t\tin_comment = true;\n\t\t\t\t} else if (c === '\"' || c === \"'\") {\n\t\t\t\t\tin_str = c;\n\t\t\t\t} else if (c === '(') {\n\t\t\t\t\tin_apo++;\n\t\t\t\t} else if (c === ')') {\n\t\t\t\t\tin_apo--;\n\t\t\t\t}\n\n\t\t\t\tif (!in_comment && in_str === false && in_apo === 0) {\n\t\t\t\t\tif (c === ':' && name_index === -1) {\n\t\t\t\t\t\tname_index = i;\n\t\t\t\t\t} else if (c === ';' || i === len - 1) {\n\t\t\t\t\t\tif (name_index !== -1) {\n\t\t\t\t\t\t\tvar name = to_css_name(value.substring(start_index, name_index).trim());\n\n\t\t\t\t\t\t\tif (!reserved_names.includes(name)) {\n\t\t\t\t\t\t\t\tif (c !== ';') {\n\t\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar property = value.substring(start_index, i).trim();\n\t\t\t\t\t\t\t\tnew_style += ' ' + property + ';';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart_index = i + 1;\n\t\t\t\t\t\tname_index = -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (normal_styles) {\n\t\t\tnew_style += append_styles(normal_styles);\n\t\t}\n\n\t\tif (important_styles) {\n\t\t\tnew_style += append_styles(important_styles, true);\n\t\t}\n\n\t\tnew_style = new_style.trim();\n\t\treturn new_style === '' ? null : new_style;\n\t}\n\n\treturn value == null ? null : String(value);\n}\n","import { to_class } from '../../../shared/attributes.js';\nimport { hydrating } from '../hydration.js';\n\n/**\n * @param {Element} dom\n * @param {boolean | number} is_html\n * @param {string | null} value\n * @param {string} [hash]\n * @param {Record<string, any>} [prev_classes]\n * @param {Record<string, any>} [next_classes]\n * @returns {Record<string, boolean> | undefined}\n */\nexport function set_class(dom, is_html, value, hash, prev_classes, next_classes) {\n\t// @ts-expect-error need to add __className to patched prototype\n\tvar prev = dom.__className;\n\n\tif (\n\t\thydrating ||\n\t\tprev !== value ||\n\t\tprev === undefined // for edge case of `class={undefined}`\n\t) {\n\t\tvar next_class_name = to_class(value, hash, next_classes);\n\n\t\tif (!hydrating || next_class_name !== dom.getAttribute('class')) {\n\t\t\t// Removing the attribute when the value is only an empty string causes\n\t\t\t// performance issues vs simply making the className an empty string. So\n\t\t\t// we should only remove the class if the value is nullish\n\t\t\t// and there no hash/directives :\n\t\t\tif (next_class_name == null) {\n\t\t\t\tdom.removeAttribute('class');\n\t\t\t} else if (is_html) {\n\t\t\t\tdom.className = next_class_name;\n\t\t\t} else {\n\t\t\t\tdom.setAttribute('class', next_class_name);\n\t\t\t}\n\t\t}\n\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = value;\n\t} else if (next_classes && prev_classes !== next_classes) {\n\t\tfor (var key in next_classes) {\n\t\t\tvar is_present = !!next_classes[key];\n\n\t\t\tif (prev_classes == null || is_present !== !!prev_classes[key]) {\n\t\t\t\tdom.classList.toggle(key, is_present);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn next_classes;\n}\n","import { effect, teardown } from '../../../reactivity/effects.js';\nimport { listen_to_event_and_reset_event } from './shared.js';\nimport { is } from '../../../proxy.js';\nimport { is_array } from '../../../../shared/utils.js';\nimport * as w from '../../../warnings.js';\nimport { Batch, current_batch, previous_batch } from '../../../reactivity/batch.js';\n\n/**\n * Selects the correct option(s) (depending on whether this is a multiple select)\n * @template V\n * @param {HTMLSelectElement} select\n * @param {V} value\n * @param {boolean} mounting\n */\nexport function select_option(select, value, mounting = false) {\n\tif (select.multiple) {\n\t\t// If value is null or undefined, keep the selection as is\n\t\tif (value == undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If not an array, warn and keep the selection as is\n\t\tif (!is_array(value)) {\n\t\t\treturn w.select_multiple_invalid_value();\n\t\t}\n\n\t\t// Otherwise, update the selection\n\t\tfor (var option of select.options) {\n\t\t\toption.selected = value.includes(get_option_value(option));\n\t\t}\n\n\t\treturn;\n\t}\n\n\tfor (option of select.options) {\n\t\tvar option_value = get_option_value(option);\n\t\tif (is(option_value, value)) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * Selects the correct option(s) if `value` is given,\n * and then sets up a mutation observer to sync the\n * current selection to the dom when it changes. Such\n * changes could for example occur when options are\n * inside an `#each` block.\n * @param {HTMLSelectElement} select\n */\nexport function init_select(select) {\n\tvar observer = new MutationObserver(() => {\n\t\t// @ts-ignore\n\t\tselect_option(select, select.__value);\n\t\t// Deliberately don't update the potential binding value,\n\t\t// the model should be preserved unless explicitly changed\n\t});\n\n\tobserver.observe(select, {\n\t\t// Listen to option element changes\n\t\tchildList: true,\n\t\tsubtree: true, // because of <optgroup>\n\t\t// Listen to option element value attribute changes\n\t\t// (doesn't get notified of select value changes,\n\t\t// because that property is not reflected as an attribute)\n\t\tattributes: true,\n\t\tattributeFilter: ['value']\n\t});\n\n\tteardown(() => {\n\t\tobserver.disconnect();\n\t});\n}\n\n/**\n * @param {HTMLSelectElement} select\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_select_value(select, get, set = get) {\n\tvar batches = new WeakSet();\n\tvar mounting = true;\n\n\tlisten_to_event_and_reset_event(select, 'change', (is_reset) => {\n\t\tvar query = is_reset ? '[selected]' : ':checked';\n\t\t/** @type {unknown} */\n\t\tvar value;\n\n\t\tif (select.multiple) {\n\t\t\tvalue = [].map.call(select.querySelectorAll(query), get_option_value);\n\t\t} else {\n\t\t\t/** @type {HTMLOptionElement | null} */\n\t\t\tvar selected_option =\n\t\t\t\tselect.querySelector(query) ??\n\t\t\t\t// will fall back to first non-disabled option if no option is selected\n\t\t\t\tselect.querySelector('option:not([disabled])');\n\t\t\tvalue = selected_option && get_option_value(selected_option);\n\t\t}\n\n\t\tset(value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\t});\n\n\t// Needs to be an effect, not a render_effect, so that in case of each loops the logic runs after the each block has updated\n\teffect(() => {\n\t\tvar value = get();\n\n\t\tif (select === document.activeElement) {\n\t\t\t// we need both, because in non-async mode, render effects run before previous_batch is set\n\t\t\tvar batch = /** @type {Batch} */ (previous_batch ?? current_batch);\n\n\t\t\t// Don't update the <select> if it is focused. We can get here if, for example,\n\t\t\t// an update is deferred because of async work depending on the select:\n\t\t\t//\n\t\t\t// <select bind:value={selected}>...</select>\n\t\t\t// <p>{await find(selected)}</p>\n\t\t\tif (batches.has(batch)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tselect_option(select, value, mounting);\n\n\t\t// Mounting and value undefined -> take selection from dom\n\t\tif (mounting && value === undefined) {\n\t\t\t/** @type {HTMLOptionElement | null} */\n\t\t\tvar selected_option = select.querySelector(':checked');\n\t\t\tif (selected_option !== null) {\n\t\t\t\tvalue = get_option_value(selected_option);\n\t\t\t\tset(value);\n\t\t\t}\n\t\t}\n\n\t\t// @ts-ignore\n\t\tselect.__value = value;\n\t\tmounting = false;\n\t});\n\n\tinit_select(select);\n}\n\n/** @param {HTMLOptionElement} option */\nfunction get_option_value(option) {\n\t// __value only exists if the <option> has a value attribute\n\tif ('__value' in option) {\n\t\treturn option.__value;\n\t} else {\n\t\treturn option.value;\n\t}\n}\n","/** @import { Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport { hydrating, set_hydrating } from '../hydration.js';\nimport { get_descriptors, get_prototype_of } from '../../../shared/utils.js';\nimport { create_event, delegate } from './events.js';\nimport { add_form_reset_listener, autofocus } from './misc.js';\nimport * as w from '../../warnings.js';\nimport { LOADING_ATTR_SYMBOL } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { is_capture_event, can_delegate_event, normalize_attribute } from '../../../../utils.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tget,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { attach } from './attachments.js';\nimport { clsx } from '../../../shared/attributes.js';\nimport { set_class } from './class.js';\nimport { set_style } from './style.js';\nimport { ATTACHMENT_KEY, NAMESPACE_HTML, UNINITIALIZED } from '../../../../constants.js';\nimport { branch, destroy_effect, effect, managed } from '../../reactivity/effects.js';\nimport { init_select, select_option } from './bindings/select.js';\nimport { flatten } from '../../reactivity/async.js';\n\nexport const CLASS = Symbol('class');\nexport const STYLE = Symbol('style');\n\nconst IS_CUSTOM_ELEMENT = Symbol('is custom element');\nconst IS_HTML = Symbol('is html');\n\n/**\n * The value/checked attribute in the template actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLInputElement} input\n * @returns {void}\n */\nexport function remove_input_defaults(input) {\n\tif (!hydrating) return;\n\n\tvar already_removed = false;\n\n\t// We try and remove the default attributes later, rather than sync during hydration.\n\t// Doing it sync during hydration has a negative impact on performance, but deferring the\n\t// work in an idle task alleviates this greatly. If a form reset event comes in before\n\t// the idle callback, then we ensure the input defaults are cleared just before.\n\tvar remove_defaults = () => {\n\t\tif (already_removed) return;\n\t\talready_removed = true;\n\n\t\t// Remove the attributes but preserve the values\n\t\tif (input.hasAttribute('value')) {\n\t\t\tvar value = input.value;\n\t\t\tset_attribute(input, 'value', null);\n\t\t\tinput.value = value;\n\t\t}\n\n\t\tif (input.hasAttribute('checked')) {\n\t\t\tvar checked = input.checked;\n\t\t\tset_attribute(input, 'checked', null);\n\t\t\tinput.checked = checked;\n\t\t}\n\t};\n\n\t// @ts-expect-error\n\tinput.__on_r = remove_defaults;\n\tqueue_micro_task(remove_defaults);\n\tadd_form_reset_listener();\n}\n\n/**\n * @param {Element} element\n * @param {any} value\n */\nexport function set_value(element, value) {\n\tvar attributes = get_attributes(element);\n\n\tif (\n\t\tattributes.value ===\n\t\t\t(attributes.value =\n\t\t\t\t// treat null and undefined the same for the initial value\n\t\t\t\tvalue ?? undefined) ||\n\t\t// @ts-expect-error\n\t\t// `progress` elements always need their value set when it's `0`\n\t\t(element.value === value && (value !== 0 || element.nodeName !== 'PROGRESS'))\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.value = value ?? '';\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n */\nexport function set_checked(element, checked) {\n\tvar attributes = get_attributes(element);\n\n\tif (\n\t\tattributes.checked ===\n\t\t(attributes.checked =\n\t\t\t// treat null and undefined the same for the initial value\n\t\t\tchecked ?? undefined)\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.checked = checked;\n}\n\n/**\n * Sets the `selected` attribute on an `option` element.\n * Not set through the property because that doesn't reflect to the DOM,\n * which means it wouldn't be taken into account when a form is reset.\n * @param {HTMLOptionElement} element\n * @param {boolean} selected\n */\nexport function set_selected(element, selected) {\n\tif (selected) {\n\t\t// The selected option could've changed via user selection, and\n\t\t// setting the value without this check would set it back.\n\t\tif (!element.hasAttribute('selected')) {\n\t\t\telement.setAttribute('selected', '');\n\t\t}\n\t} else {\n\t\telement.removeAttribute('selected');\n\t}\n}\n\n/**\n * Applies the default checked property without influencing the current checked property.\n * @param {HTMLInputElement} element\n * @param {boolean} checked\n */\nexport function set_default_checked(element, checked) {\n\tconst existing_value = element.checked;\n\telement.defaultChecked = checked;\n\telement.checked = existing_value;\n}\n\n/**\n * Applies the default value property without influencing the current value property.\n * @param {HTMLInputElement | HTMLTextAreaElement} element\n * @param {string} value\n */\nexport function set_default_value(element, value) {\n\tconst existing_value = element.value;\n\telement.defaultValue = value;\n\telement.value = existing_value;\n}\n\n/**\n * @param {Element} element\n * @param {string} attribute\n * @param {string | null} value\n * @param {boolean} [skip_warning]\n */\nexport function set_attribute(element, attribute, value, skip_warning) {\n\tvar attributes = get_attributes(element);\n\n\tif (hydrating) {\n\t\tattributes[attribute] = element.getAttribute(attribute);\n\n\t\tif (\n\t\t\tattribute === 'src' ||\n\t\t\tattribute === 'srcset' ||\n\t\t\t(attribute === 'href' && element.nodeName === 'LINK')\n\t\t) {\n\t\t\tif (!skip_warning) {\n\t\t\t\tcheck_src_in_dev_hydration(element, attribute, value ?? '');\n\t\t\t}\n\n\t\t\t// If we reset these attributes, they would result in another network request, which we want to avoid.\n\t\t\t// We assume they are the same between client and server as checking if they are equal is expensive\n\t\t\t// (we can't just compare the strings as they can be different between client and server but result in the\n\t\t\t// same url, so we would need to create hidden anchor elements to compare them)\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (attributes[attribute] === (attributes[attribute] = value)) return;\n\n\tif (attribute === 'loading') {\n\t\t// @ts-expect-error\n\t\telement[LOADING_ATTR_SYMBOL] = value;\n\t}\n\n\tif (value == null) {\n\t\telement.removeAttribute(attribute);\n\t} else if (typeof value !== 'string' && get_setters(element).includes(attribute)) {\n\t\t// @ts-ignore\n\t\telement[attribute] = value;\n\t} else {\n\t\telement.setAttribute(attribute, value);\n\t}\n}\n\n/**\n * @param {Element} dom\n * @param {string} attribute\n * @param {string} value\n */\nexport function set_xlink_attribute(dom, attribute, value) {\n\tdom.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @param {string} prop\n * @param {any} value\n */\nexport function set_custom_element_data(node, prop, value) {\n\t// We need to ensure that setting custom element props, which can\n\t// invoke lifecycle methods on other custom elements, does not also\n\t// associate those lifecycle methods with the current active reaction\n\t// or effect\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet was_hydrating = hydrating;\n\tif (hydrating) {\n\t\tset_hydrating(false);\n\t}\n\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\tif (\n\t\t\t// `style` should use `set_attribute` rather than the setter\n\t\t\tprop !== 'style' &&\n\t\t\t// Don't compute setters for custom elements while they aren't registered yet,\n\t\t\t// because during their upgrade/instantiation they might add more setters.\n\t\t\t// Instead, fall back to a simple \"an object, then set as property\" heuristic.\n\t\t\t(setters_cache.has(node.getAttribute('is') || node.nodeName) ||\n\t\t\t// customElements may not be available in browser extension contexts\n\t\t\t!customElements ||\n\t\t\tcustomElements.get(node.getAttribute('is') || node.tagName.toLowerCase())\n\t\t\t\t? get_setters(node).includes(prop)\n\t\t\t\t: value && typeof value === 'object')\n\t\t) {\n\t\t\t// @ts-expect-error\n\t\t\tnode[prop] = value;\n\t\t} else {\n\t\t\t// We did getters etc checks already, stringify before passing to set_attribute\n\t\t\t// to ensure it doesn't invoke the same logic again, and potentially populating\n\t\t\t// the setters cache too early.\n\t\t\tset_attribute(node, prop, value == null ? value : String(value));\n\t\t}\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t}\n\t}\n}\n\n/**\n * Spreads attributes onto a DOM element, taking into account the currently set attributes\n * @param {Element & ElementCSSInlineStyle} element\n * @param {Record<string | symbol, any> | undefined} prev\n * @param {Record<string | symbol, any>} next New attributes - this function mutates this object\n * @param {string} [css_hash]\n * @param {boolean} [should_remove_defaults]\n * @param {boolean} [skip_warning]\n * @returns {Record<string, any>}\n */\nfunction set_attributes(\n\telement,\n\tprev,\n\tnext,\n\tcss_hash,\n\tshould_remove_defaults = false,\n\tskip_warning = false\n) {\n\tif (hydrating && should_remove_defaults && element.tagName === 'INPUT') {\n\t\tvar input = /** @type {HTMLInputElement} */ (element);\n\t\tvar attribute = input.type === 'checkbox' ? 'defaultChecked' : 'defaultValue';\n\n\t\tif (!(attribute in next)) {\n\t\t\tremove_input_defaults(input);\n\t\t}\n\t}\n\n\tvar attributes = get_attributes(element);\n\n\tvar is_custom_element = attributes[IS_CUSTOM_ELEMENT];\n\tvar preserve_attribute_case = !attributes[IS_HTML];\n\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet is_hydrating_custom_element = hydrating && is_custom_element;\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(false);\n\t}\n\n\tvar current = prev || {};\n\tvar is_option_element = element.tagName === 'OPTION';\n\n\tfor (var key in prev) {\n\t\tif (!(key in next)) {\n\t\t\tnext[key] = null;\n\t\t}\n\t}\n\n\tif (next.class) {\n\t\tnext.class = clsx(next.class);\n\t} else if (css_hash || next[CLASS]) {\n\t\tnext.class = null; /* force call to set_class() */\n\t}\n\n\tif (next[STYLE]) {\n\t\tnext.style ??= null; /* force call to set_style() */\n\t}\n\n\tvar setters = get_setters(element);\n\n\t// since key is captured we use const\n\tfor (const key in next) {\n\t\t// let instead of var because referenced in a closure\n\t\tlet value = next[key];\n\n\t\t// Up here because we want to do this for the initial value, too, even if it's undefined,\n\t\t// and this wouldn't be reached in case of undefined because of the equality check below\n\t\tif (is_option_element && key === 'value' && value == null) {\n\t\t\t// The <option> element is a special case because removing the value attribute means\n\t\t\t// the value is set to the text content of the option element, and setting the value\n\t\t\t// to null or undefined means the value is set to the string \"null\" or \"undefined\".\n\t\t\t// To align with how we handle this case in non-spread-scenarios, this logic is needed.\n\t\t\t// There's a super-edge-case bug here that is left in in favor of smaller code size:\n\t\t\t// Because of the \"set missing props to null\" logic above, we can't differentiate\n\t\t\t// between a missing value and an explicitly set value of null or undefined. That means\n\t\t\t// that once set, the value attribute of an <option> element can't be removed. This is\n\t\t\t// a very rare edge case, and removing the attribute altogether isn't possible either\n\t\t\t// for the <option value={undefined}> case, so we're not losing any functionality here.\n\t\t\t// @ts-ignore\n\t\t\telement.value = element.__value = '';\n\t\t\tcurrent[key] = value;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key === 'class') {\n\t\t\tvar is_html = element.namespaceURI === 'http://www.w3.org/1999/xhtml';\n\t\t\tset_class(element, is_html, value, css_hash, prev?.[CLASS], next[CLASS]);\n\t\t\tcurrent[key] = value;\n\t\t\tcurrent[CLASS] = next[CLASS];\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key === 'style') {\n\t\t\tset_style(element, value, prev?.[STYLE], next[STYLE]);\n\t\t\tcurrent[key] = value;\n\t\t\tcurrent[STYLE] = next[STYLE];\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar prev_value = current[key];\n\n\t\t// Skip if value is unchanged, unless it's `undefined` and the element still has the attribute\n\t\tif (value === prev_value && !(value === undefined && element.hasAttribute(key))) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tcurrent[key] = value;\n\n\t\tvar prefix = key[0] + key[1]; // this is faster than key.slice(0, 2)\n\t\tif (prefix === '$$') continue;\n\n\t\tif (prefix === 'on') {\n\t\t\t/** @type {{ capture?: true }} */\n\t\t\tconst opts = {};\n\t\t\tconst event_handle_key = '$$' + key;\n\t\t\tlet event_name = key.slice(2);\n\t\t\tvar delegated = can_delegate_event(event_name);\n\n\t\t\tif (is_capture_event(event_name)) {\n\t\t\t\tevent_name = event_name.slice(0, -7);\n\t\t\t\topts.capture = true;\n\t\t\t}\n\n\t\t\tif (!delegated && prev_value) {\n\t\t\t\t// Listening to same event but different handler -> our handle function below takes care of this\n\t\t\t\t// If we were to remove and add listeners in this case, it could happen that the event is \"swallowed\"\n\t\t\t\t// (the browser seems to not know yet that a new one exists now) and doesn't reach the handler\n\t\t\t\t// https://github.com/sveltejs/svelte/issues/11903\n\t\t\t\tif (value != null) continue;\n\n\t\t\t\telement.removeEventListener(event_name, current[event_handle_key], opts);\n\t\t\t\tcurrent[event_handle_key] = null;\n\t\t\t}\n\n\t\t\tif (value != null) {\n\t\t\t\tif (!delegated) {\n\t\t\t\t\t/**\n\t\t\t\t\t * @this {any}\n\t\t\t\t\t * @param {Event} evt\n\t\t\t\t\t */\n\t\t\t\t\tfunction handle(evt) {\n\t\t\t\t\t\tcurrent[key].call(this, evt);\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrent[event_handle_key] = create_event(event_name, element, handle, opts);\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\telement[`__${event_name}`] = value;\n\t\t\t\t\tdelegate([event_name]);\n\t\t\t\t}\n\t\t\t} else if (delegated) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[`__${event_name}`] = undefined;\n\t\t\t}\n\t\t} else if (key === 'style') {\n\t\t\t// avoid using the setter\n\t\t\tset_attribute(element, key, value);\n\t\t} else if (key === 'autofocus') {\n\t\t\tautofocus(/** @type {HTMLElement} */ (element), Boolean(value));\n\t\t} else if (!is_custom_element && (key === '__value' || (key === 'value' && value != null))) {\n\t\t\t// @ts-ignore We're not running this for custom elements because __value is actually\n\t\t\t// how Lit stores the current value on the element, and messing with that would break things.\n\t\t\telement.value = element.__value = value;\n\t\t} else if (key === 'selected' && is_option_element) {\n\t\t\tset_selected(/** @type {HTMLOptionElement} */ (element), value);\n\t\t} else {\n\t\t\tvar name = key;\n\t\t\tif (!preserve_attribute_case) {\n\t\t\t\tname = normalize_attribute(name);\n\t\t\t}\n\n\t\t\tvar is_default = name === 'defaultValue' || name === 'defaultChecked';\n\n\t\t\tif (value == null && !is_custom_element && !is_default) {\n\t\t\t\tattributes[key] = null;\n\n\t\t\t\tif (name === 'value' || name === 'checked') {\n\t\t\t\t\t// removing value/checked also removes defaultValue/defaultChecked  preserve\n\t\t\t\t\tlet input = /** @type {HTMLInputElement} */ (element);\n\t\t\t\t\tconst use_default = prev === undefined;\n\t\t\t\t\tif (name === 'value') {\n\t\t\t\t\t\tlet previous = input.defaultValue;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultValue = previous;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tinput.value = input.__value = use_default ? previous : null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet previous = input.defaultChecked;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultChecked = previous;\n\t\t\t\t\t\tinput.checked = use_default ? previous : false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\telement.removeAttribute(key);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tis_default ||\n\t\t\t\t(setters.includes(name) && (is_custom_element || typeof value !== 'string'))\n\t\t\t) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[name] = value;\n\t\t\t\t// remove it from attributes's cache\n\t\t\t\tif (name in attributes) attributes[name] = UNINITIALIZED;\n\t\t\t} else if (typeof value !== 'function') {\n\t\t\t\tset_attribute(element, name, value, skip_warning);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(true);\n\t}\n\n\treturn current;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} element\n * @param {(...expressions: any) => Record<string | symbol, any>} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {Array<Promise<void>>} blockers\n * @param {string} [css_hash]\n * @param {boolean} [should_remove_defaults]\n * @param {boolean} [skip_warning]\n */\nexport function attribute_effect(\n\telement,\n\tfn,\n\tsync = [],\n\tasync = [],\n\tblockers = [],\n\tcss_hash,\n\tshould_remove_defaults = false,\n\tskip_warning = false\n) {\n\tflatten(blockers, sync, async, (values) => {\n\t\t/** @type {Record<string | symbol, any> | undefined} */\n\t\tvar prev = undefined;\n\n\t\t/** @type {Record<symbol, Effect>} */\n\t\tvar effects = {};\n\n\t\tvar is_select = element.nodeName === 'SELECT';\n\t\tvar inited = false;\n\n\t\tmanaged(() => {\n\t\t\tvar next = fn(...values.map(get));\n\t\t\t/** @type {Record<string | symbol, any>} */\n\t\t\tvar current = set_attributes(\n\t\t\t\telement,\n\t\t\t\tprev,\n\t\t\t\tnext,\n\t\t\t\tcss_hash,\n\t\t\t\tshould_remove_defaults,\n\t\t\t\tskip_warning\n\t\t\t);\n\n\t\t\tif (inited && is_select && 'value' in next) {\n\t\t\t\tselect_option(/** @type {HTMLSelectElement} */ (element), next.value);\n\t\t\t}\n\n\t\t\tfor (let symbol of Object.getOwnPropertySymbols(effects)) {\n\t\t\t\tif (!next[symbol]) destroy_effect(effects[symbol]);\n\t\t\t}\n\n\t\t\tfor (let symbol of Object.getOwnPropertySymbols(next)) {\n\t\t\t\tvar n = next[symbol];\n\n\t\t\t\tif (symbol.description === ATTACHMENT_KEY && (!prev || n !== prev[symbol])) {\n\t\t\t\t\tif (effects[symbol]) destroy_effect(effects[symbol]);\n\t\t\t\t\teffects[symbol] = branch(() => attach(element, () => n));\n\t\t\t\t}\n\n\t\t\t\tcurrent[symbol] = n;\n\t\t\t}\n\n\t\t\tprev = current;\n\t\t});\n\n\t\tif (is_select) {\n\t\t\tvar select = /** @type {HTMLSelectElement} */ (element);\n\n\t\t\teffect(() => {\n\t\t\t\tselect_option(select, /** @type {Record<string | symbol, any>} */ (prev).value, true);\n\t\t\t\tinit_select(select);\n\t\t\t});\n\t\t}\n\n\t\tinited = true;\n\t});\n}\n\n/**\n *\n * @param {Element} element\n */\nfunction get_attributes(element) {\n\treturn /** @type {Record<string | symbol, unknown>} **/ (\n\t\t// @ts-expect-error\n\t\telement.__attributes ??= {\n\t\t\t[IS_CUSTOM_ELEMENT]: element.nodeName.includes('-'),\n\t\t\t[IS_HTML]: element.namespaceURI === NAMESPACE_HTML\n\t\t}\n\t);\n}\n\n/** @type {Map<string, string[]>} */\nvar setters_cache = new Map();\n\n/** @param {Element} element */\nfunction get_setters(element) {\n\tvar cache_key = element.getAttribute('is') || element.nodeName;\n\tvar setters = setters_cache.get(cache_key);\n\tif (setters) return setters;\n\tsetters_cache.set(cache_key, (setters = []));\n\n\tvar descriptors;\n\tvar proto = element; // In the case of custom elements there might be setters on the instance\n\tvar element_proto = Element.prototype;\n\n\t// Stop at Element, from there on there's only unnecessary setters we're not interested in\n\t// Do not use contructor.name here as that's unreliable in some browser environments\n\twhile (element_proto !== proto) {\n\t\tdescriptors = get_descriptors(proto);\n\n\t\tfor (var key in descriptors) {\n\t\t\tif (descriptors[key].set) {\n\t\t\t\tsetters.push(key);\n\t\t\t}\n\t\t}\n\n\t\tproto = get_prototype_of(proto);\n\t}\n\n\treturn setters;\n}\n\n/**\n * @param {any} element\n * @param {string} attribute\n * @param {string} value\n */\nfunction check_src_in_dev_hydration(element, attribute, value) {\n\tif (!DEV) return;\n\tif (attribute === 'srcset' && srcset_url_equal(element, value)) return;\n\tif (src_url_equal(element.getAttribute(attribute) ?? '', value)) return;\n\n\tw.hydration_attribute_changed(\n\t\tattribute,\n\t\telement.outerHTML.replace(element.innerHTML, element.innerHTML && '...'),\n\t\tString(value)\n\t);\n}\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nfunction src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\treturn new URL(element_src, document.baseURI).href === new URL(url, document.baseURI).href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element\n * @param {string} srcset\n * @returns {boolean}\n */\nfunction srcset_url_equal(element, srcset) {\n\tvar element_urls = split_srcset(element.srcset);\n\tvar urls = split_srcset(srcset);\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n","/** @import { Batch } from '../../../reactivity/batch.js' */\nimport { DEV } from 'esm-env';\nimport { render_effect, teardown } from '../../../reactivity/effects.js';\nimport { listen_to_event_and_reset_event } from './shared.js';\nimport * as e from '../../../errors.js';\nimport { is } from '../../../proxy.js';\nimport { queue_micro_task } from '../../task.js';\nimport { hydrating } from '../../hydration.js';\nimport { tick, untrack } from '../../../runtime.js';\nimport { is_runes } from '../../../context.js';\nimport { current_batch, previous_batch } from '../../../reactivity/batch.js';\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_value(input, get, set = get) {\n\tvar batches = new WeakSet();\n\n\tlisten_to_event_and_reset_event(input, 'input', async (is_reset) => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\t/** @type {any} */\n\t\tvar value = is_reset ? input.defaultValue : input.value;\n\t\tvalue = is_numberlike_input(input) ? to_number(value) : value;\n\t\tset(value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\n\t\t// Because `{#each ...}` blocks work by updating sources inside the flush,\n\t\t// we need to wait a tick before checking to see if we should forcibly\n\t\t// update the input and reset the selection state\n\t\tawait tick();\n\n\t\t// Respect any validation in accessors\n\t\tif (value !== (value = get())) {\n\t\t\tvar start = input.selectionStart;\n\t\t\tvar end = input.selectionEnd;\n\t\t\tvar length = input.value.length;\n\n\t\t\t// the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\n\t\t\t// Restore selection\n\t\t\tif (end !== null) {\n\t\t\t\tvar new_length = input.value.length;\n\t\t\t\t// If cursor was at end and new input is longer, move cursor to new end\n\t\t\t\tif (start === end && end === length && new_length > length) {\n\t\t\t\t\tinput.selectionStart = new_length;\n\t\t\t\t\tinput.selectionEnd = new_length;\n\t\t\t\t} else {\n\t\t\t\t\tinput.selectionStart = start;\n\t\t\t\t\tinput.selectionEnd = Math.min(end, new_length);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\t(hydrating && input.defaultValue !== input.value) ||\n\t\t// If defaultValue is set, then value == defaultValue\n\t\t// TODO Svelte 6: remove input.value check and set to empty string?\n\t\t(untrack(get) == null && input.value)\n\t) {\n\t\tset(is_numberlike_input(input) ? to_number(input.value) : input.value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\t}\n\n\trender_effect(() => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\tvar value = get();\n\n\t\tif (input === document.activeElement) {\n\t\t\t// we need both, because in non-async mode, render effects run before previous_batch is set\n\t\t\tvar batch = /** @type {Batch} */ (previous_batch ?? current_batch);\n\n\t\t\t// Never rewrite the contents of a focused input. We can get here if, for example,\n\t\t\t// an update is deferred because of async work depending on the input:\n\t\t\t//\n\t\t\t// <input bind:value={query}>\n\t\t\t// <p>{await find(query)}</p>\n\t\t\tif (batches.has(batch)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (is_numberlike_input(input) && value === to_number(input.value)) {\n\t\t\t// handles 0 vs 00 case (see https://github.com/sveltejs/svelte/issues/9959)\n\t\t\treturn;\n\t\t}\n\n\t\tif (input.type === 'date' && !value && !input.value) {\n\t\t\t// Handles the case where a temporarily invalid date is set (while typing, for example with a leading 0 for the day)\n\t\t\t// and prevents this state from clearing the other parts of the date input (see https://github.com/sveltejs/svelte/issues/7897)\n\t\t\treturn;\n\t\t}\n\n\t\t// don't set the value of the input if it's the same to allow\n\t\t// minlength to work properly\n\t\tif (value !== input.value) {\n\t\t\t// @ts-expect-error the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\t\t}\n\t});\n}\n\n/** @type {Set<HTMLInputElement[]>} */\nconst pending = new Set();\n\n/**\n * @param {HTMLInputElement[]} inputs\n * @param {null | [number]} group_index\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_group(inputs, group_index, input, get, set = get) {\n\tvar is_checkbox = input.getAttribute('type') === 'checkbox';\n\tvar binding_group = inputs;\n\n\t// needs to be let or related code isn't treeshaken out if it's always false\n\tlet hydration_mismatch = false;\n\n\tif (group_index !== null) {\n\t\tfor (var index of group_index) {\n\t\t\t// @ts-expect-error\n\t\t\tbinding_group = binding_group[index] ??= [];\n\t\t}\n\t}\n\n\tbinding_group.push(input);\n\n\tlisten_to_event_and_reset_event(\n\t\tinput,\n\t\t'change',\n\t\t() => {\n\t\t\t// @ts-ignore\n\t\t\tvar value = input.__value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t}\n\n\t\t\tset(value);\n\t\t},\n\t\t// TODO better default value handling\n\t\t() => set(is_checkbox ? [] : null)\n\t);\n\n\trender_effect(() => {\n\t\tvar value = get();\n\n\t\t// If we are hydrating and the value has since changed, then use the update value\n\t\t// from the input instead.\n\t\tif (hydrating && input.defaultChecked !== input.checked) {\n\t\t\thydration_mismatch = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (is_checkbox) {\n\t\t\tvalue = value || [];\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = value.includes(input.__value);\n\t\t} else {\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = is(input.__value, value);\n\t\t}\n\t});\n\n\tteardown(() => {\n\t\tvar index = binding_group.indexOf(input);\n\n\t\tif (index !== -1) {\n\t\t\tbinding_group.splice(index, 1);\n\t\t}\n\t});\n\n\tif (!pending.has(binding_group)) {\n\t\tpending.add(binding_group);\n\n\t\tqueue_micro_task(() => {\n\t\t\t// necessary to maintain binding group order in all insertion scenarios\n\t\t\tbinding_group.sort((a, b) => (a.compareDocumentPosition(b) === 4 ? -1 : 1));\n\t\t\tpending.delete(binding_group);\n\t\t});\n\t}\n\n\tqueue_micro_task(() => {\n\t\tif (hydration_mismatch) {\n\t\t\tvar value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t} else {\n\t\t\t\tvar hydration_input = binding_group.find((input) => input.checked);\n\t\t\t\t// @ts-ignore\n\t\t\t\tvalue = hydration_input?.__value;\n\t\t\t}\n\n\t\t\tset(value);\n\t\t}\n\t});\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_checked(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', (is_reset) => {\n\t\tvar value = is_reset ? input.defaultChecked : input.checked;\n\t\tset(value);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the update value from the input instead.\n\t\t(hydrating && input.defaultChecked !== input.checked) ||\n\t\t// If defaultChecked is set, then checked == defaultChecked\n\t\tuntrack(get) == null\n\t) {\n\t\tset(input.checked);\n\t}\n\n\trender_effect(() => {\n\t\tvar value = get();\n\t\tinput.checked = Boolean(value);\n\t});\n}\n\n/**\n * @template V\n * @param {Array<HTMLInputElement>} group\n * @param {V} __value\n * @param {boolean} checked\n * @returns {V[]}\n */\nfunction get_binding_group_value(group, __value, checked) {\n\t/** @type {Set<V>} */\n\tvar value = new Set();\n\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) {\n\t\t\t// @ts-ignore\n\t\t\tvalue.add(group[i].__value);\n\t\t}\n\t}\n\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement} input\n */\nfunction is_numberlike_input(input) {\n\tvar type = input.type;\n\treturn type === 'number' || type === 'range';\n}\n\n/**\n * @param {string} value\n */\nfunction to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => FileList | null} get\n * @param {(value: FileList | null) => void} set\n */\nexport function bind_files(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', () => {\n\t\tset(input.files);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\thydrating &&\n\t\tinput.files\n\t) {\n\t\tset(input.files);\n\t}\n\n\trender_effect(() => {\n\t\tinput.files = get();\n\t});\n}\n","/** @import { StoreReferencesContainer } from '#client' */\n/** @import { Store } from '#shared' */\nimport { subscribe_to_store } from '../../../store/utils.js';\nimport { get as get_store } from '../../../store/shared/index.js';\nimport { define_property, noop } from '../../shared/utils.js';\nimport { get } from '../runtime.js';\nimport { teardown } from './effects.js';\nimport { mutable_source, set } from './sources.js';\nimport { DEV } from 'esm-env';\n\n/**\n * Whether or not the prop currently being read is a store binding, as in\n * `<Child bind:x={$y} />`. If it is, we treat the prop as mutable even in\n * runes mode, and skip `binding_property_non_reactive` validation\n */\nlet is_store_binding = false;\n\nlet IS_UNMOUNTED = Symbol();\n\n/**\n * Gets the current value of a store. If the store isn't subscribed to yet, it will create a proxy\n * signal that will be updated when the store is. The store references container is needed to\n * track reassignments to stores and to track the correct component context.\n * @template V\n * @param {Store<V> | null | undefined} store\n * @param {string} store_name\n * @param {StoreReferencesContainer} stores\n * @returns {V}\n */\nexport function store_get(store, store_name, stores) {\n\tconst entry = (stores[store_name] ??= {\n\t\tstore: null,\n\t\tsource: mutable_source(undefined),\n\t\tunsubscribe: noop\n\t});\n\n\tif (DEV) {\n\t\tentry.source.label = store_name;\n\t}\n\n\t// if the component that setup this is already unmounted we don't want to register a subscription\n\tif (entry.store !== store && !(IS_UNMOUNTED in stores)) {\n\t\tentry.unsubscribe();\n\t\tentry.store = store ?? null;\n\n\t\tif (store == null) {\n\t\t\tentry.source.v = undefined; // see synchronous callback comment below\n\t\t\tentry.unsubscribe = noop;\n\t\t} else {\n\t\t\tvar is_synchronous_callback = true;\n\n\t\t\tentry.unsubscribe = subscribe_to_store(store, (v) => {\n\t\t\t\tif (is_synchronous_callback) {\n\t\t\t\t\t// If the first updates to the store value (possibly multiple of them) are synchronously\n\t\t\t\t\t// inside a derived, we will hit the `state_unsafe_mutation` error if we `set` the value\n\t\t\t\t\tentry.source.v = v;\n\t\t\t\t} else {\n\t\t\t\t\tset(entry.source, v);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tis_synchronous_callback = false;\n\t\t}\n\t}\n\n\t// if the component that setup this stores is already unmounted the source will be out of sync\n\t// so we just use the `get` for the stores, less performant but it avoids to create a memory leak\n\t// and it will keep the value consistent\n\tif (store && IS_UNMOUNTED in stores) {\n\t\treturn get_store(store);\n\t}\n\n\treturn get(entry.source);\n}\n\n/**\n * Unsubscribe from a store if it's not the same as the one in the store references container.\n * We need this in addition to `store_get` because someone could unsubscribe from a store but\n * then never subscribe to the new one (if any), causing the subscription to stay open wrongfully.\n * @param {Store<any> | null | undefined} store\n * @param {string} store_name\n * @param {StoreReferencesContainer} stores\n */\nexport function store_unsub(store, store_name, stores) {\n\t/** @type {StoreReferencesContainer[''] | undefined} */\n\tlet entry = stores[store_name];\n\n\tif (entry && entry.store !== store) {\n\t\t// Don't reset store yet, so that store_get above can resubscribe to new store if necessary\n\t\tentry.unsubscribe();\n\t\tentry.unsubscribe = noop;\n\t}\n\n\treturn store;\n}\n\n/**\n * Sets the new value of a store and returns that value.\n * @template V\n * @param {Store<V>} store\n * @param {V} value\n * @returns {V}\n */\nexport function store_set(store, value) {\n\tstore.set(value);\n\treturn value;\n}\n\n/**\n * @param {StoreReferencesContainer} stores\n * @param {string} store_name\n */\nexport function invalidate_store(stores, store_name) {\n\tvar entry = stores[store_name];\n\tif (entry.store !== null) {\n\t\tstore_set(entry.store, entry.source.v);\n\t}\n}\n\n/**\n * Unsubscribes from all auto-subscribed stores on destroy\n * @returns {[StoreReferencesContainer, ()=>void]}\n */\nexport function setup_stores() {\n\t/** @type {StoreReferencesContainer} */\n\tconst stores = {};\n\n\tfunction cleanup() {\n\t\tteardown(() => {\n\t\t\tfor (var store_name in stores) {\n\t\t\t\tconst ref = stores[store_name];\n\t\t\t\tref.unsubscribe();\n\t\t\t}\n\t\t\tdefine_property(stores, IS_UNMOUNTED, {\n\t\t\t\tenumerable: false,\n\t\t\t\tvalue: true\n\t\t\t});\n\t\t});\n\t}\n\n\treturn [stores, cleanup];\n}\n\n/**\n * Updates a store with a new value.\n * @param {Store<V>} store  the store to update\n * @param {any} expression  the expression that mutates the store\n * @param {V} new_value  the new store value\n * @template V\n */\nexport function store_mutate(store, expression, new_value) {\n\tstore.set(new_value);\n\treturn expression;\n}\n\n/**\n * @param {Store<number>} store\n * @param {number} store_value\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_store(store, store_value, d = 1) {\n\tstore.set(store_value + d);\n\treturn store_value;\n}\n\n/**\n * @param {Store<number>} store\n * @param {number} store_value\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_pre_store(store, store_value, d = 1) {\n\tconst value = store_value + d;\n\tstore.set(value);\n\treturn value;\n}\n\n/**\n * Called inside prop getters to communicate that the prop is a store binding\n */\nexport function mark_store_binding() {\n\tis_store_binding = true;\n}\n\n/**\n * Returns a tuple that indicates whether `fn()` reads a prop that is a store binding.\n * Used to prevent `binding_property_non_reactive` validation false positives and\n * ensure that these props are treated as mutable even in runes mode\n * @template T\n * @param {() => T} fn\n * @returns {[T, boolean]}\n */\nexport function capture_store_binding(fn) {\n\tvar previous_is_store_binding = is_store_binding;\n\n\ttry {\n\t\tis_store_binding = false;\n\t\treturn [fn(), is_store_binding];\n\t} finally {\n\t\tis_store_binding = previous_is_store_binding;\n\t}\n}\n","/** @import { ComponentContext, ComponentContextLegacy } from '#client' */\n/** @import { EventDispatcher } from './index.js' */\n/** @import { NotFunction } from './internal/types.js' */\nimport { active_reaction, untrack } from './internal/client/runtime.js';\nimport { is_array } from './internal/shared/utils.js';\nimport { user_effect } from './internal/client/index.js';\nimport * as e from './internal/client/errors.js';\nimport { legacy_mode_flag } from './internal/flags/index.js';\nimport { component_context } from './internal/client/context.js';\nimport { DEV } from 'esm-env';\n\nif (DEV) {\n\t/**\n\t * @param {string} rune\n\t */\n\tfunction throw_rune_error(rune) {\n\t\tif (!(rune in globalThis)) {\n\t\t\t// TODO if people start adjusting the \"this can contain runes\" config through v-p-s more, adjust this message\n\t\t\t/** @type {any} */\n\t\t\tlet value; // let's hope noone modifies this global, but belts and braces\n\t\t\tObject.defineProperty(globalThis, rune, {\n\t\t\t\tconfigurable: true,\n\t\t\t\t// eslint-disable-next-line getter-return\n\t\t\t\tget: () => {\n\t\t\t\t\tif (value !== undefined) {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\n\t\t\t\t\te.rune_outside_svelte(rune);\n\t\t\t\t},\n\t\t\t\tset: (v) => {\n\t\t\t\t\tvalue = v;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tthrow_rune_error('$state');\n\tthrow_rune_error('$effect');\n\tthrow_rune_error('$derived');\n\tthrow_rune_error('$inspect');\n\tthrow_rune_error('$props');\n\tthrow_rune_error('$bindable');\n}\n\n/**\n * Returns an [`AbortSignal`](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal) that aborts when the current [derived](https://svelte.dev/docs/svelte/$derived) or [effect](https://svelte.dev/docs/svelte/$effect) re-runs or is destroyed.\n *\n * Must be called while a derived or effect is running.\n *\n * ```svelte\n * <script>\n * \timport { getAbortSignal } from 'svelte';\n *\n * \tlet { id } = $props();\n *\n * \tasync function getData(id) {\n * \t\tconst response = await fetch(`/items/${id}`, {\n * \t\t\tsignal: getAbortSignal()\n * \t\t});\n *\n * \t\treturn await response.json();\n * \t}\n *\n * \tconst data = $derived(await getData(id));\n * </script>\n * ```\n */\nexport function getAbortSignal() {\n\tif (active_reaction === null) {\n\t\te.get_abort_signal_outside_reaction();\n\t}\n\n\treturn (active_reaction.ac ??= new AbortController()).signal;\n}\n\n/**\n * `onMount`, like [`$effect`](https://svelte.dev/docs/svelte/$effect), schedules a function to run as soon as the component has been mounted to the DOM.\n * Unlike `$effect`, the provided function only runs once.\n *\n * It must be called during the component's initialisation (but doesn't need to live _inside_ the component;\n * it can be called from an external module). If a function is returned _synchronously_ from `onMount`,\n * it will be called when the component is unmounted.\n *\n * `onMount` functions do not run during [server-side rendering](https://svelte.dev/docs/svelte/svelte-server#render).\n *\n * @template T\n * @param {() => NotFunction<T> | Promise<NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('onMount');\n\t}\n\n\tif (legacy_mode_flag && component_context.l !== null) {\n\t\tinit_update_callbacks(component_context).m.push(fn);\n\t} else {\n\t\tuser_effect(() => {\n\t\t\tconst cleanup = untrack(fn);\n\t\t\tif (typeof cleanup === 'function') return /** @type {() => void} */ (cleanup);\n\t\t});\n\t}\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('onDestroy');\n\t}\n\n\tonMount(() => () => untrack(fn));\n}\n\n/**\n * @template [T=any]\n * @param {string} type\n * @param {T} [detail]\n * @param {any}params_0\n * @returns {CustomEvent<T>}\n */\nfunction create_custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs/svelte/legacy-on#Component-events).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: null; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * @deprecated Use callback props and/or the `$host()` rune instead  see [migration guide](https://svelte.dev/docs/svelte/v5-migration-guide#Event-changes-Component-events)\n * @template {Record<string, any>} [EventMap = any]\n * @returns {EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst active_component_context = component_context;\n\tif (active_component_context === null) {\n\t\te.lifecycle_outside_component('createEventDispatcher');\n\t}\n\n\t/**\n\t * @param [detail]\n\t * @param [options]\n\t */\n\treturn (type, detail, options) => {\n\t\tconst events = /** @type {Record<string, Function | Function[]>} */ (\n\t\t\tactive_component_context.s.$$events\n\t\t)?.[/** @type {string} */ (type)];\n\n\t\tif (events) {\n\t\t\tconst callbacks = is_array(events) ? events.slice() : [events];\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = create_custom_event(/** @type {string} */ (type), detail, options);\n\t\t\tfor (const fn of callbacks) {\n\t\t\t\tfn.call(active_component_context.x, event);\n\t\t\t}\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\n\t\treturn true;\n\t};\n}\n\n// TODO mark beforeUpdate and afterUpdate as deprecated in Svelte 6\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`.\n *\n * In runes mode use `$effect.pre` instead.\n *\n * @deprecated Use [`$effect.pre`](https://svelte.dev/docs/svelte/$effect#$effect.pre) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('beforeUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('beforeUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).b.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`.\n *\n * In runes mode use `$effect` instead.\n *\n * @deprecated Use [`$effect`](https://svelte.dev/docs/svelte/$effect) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('afterUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('afterUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).a.push(fn);\n}\n\n/**\n * Legacy-mode: Init callbacks object for onMount/beforeUpdate/afterUpdate\n * @param {ComponentContext} context\n */\nfunction init_update_callbacks(context) {\n\tvar l = /** @type {ComponentContextLegacy} */ (context).l;\n\treturn (l.u ??= { a: [], b: [], m: [] });\n}\n\nexport { flushSync, fork } from './internal/client/reactivity/batch.js';\nexport {\n\tcreateContext,\n\tgetContext,\n\tgetAllContexts,\n\thasContext,\n\tsetContext\n} from './internal/client/context.js';\nexport { hydratable } from './internal/client/hydratable.js';\nexport { hydrate, mount, unmount } from './internal/client/render.js';\nexport { tick, untrack, settled } from './internal/client/runtime.js';\nexport { createRawSnippet } from './internal/client/dom/blocks/snippet.js';\n","/** @import { Readable } from './public' */\nimport { untrack } from '../index-client.js';\nimport { noop } from '../internal/shared/utils.js';\n\n/**\n * @template T\n * @param {Readable<T> | null | undefined} store\n * @param {(value: T) => void} run\n * @param {(value: T) => void} [invalidate]\n * @returns {() => void}\n */\nexport function subscribe_to_store(store, run, invalidate) {\n\tif (store == null) {\n\t\t// @ts-expect-error\n\t\trun(undefined);\n\n\t\t// @ts-expect-error\n\t\tif (invalidate) invalidate(undefined);\n\n\t\treturn noop;\n\t}\n\n\t// Svelte store takes a private second argument\n\t// StartStopNotifier could mutate state, and we want to silence the corresponding validation error\n\tconst unsub = untrack(() =>\n\t\tstore.subscribe(\n\t\t\trun,\n\t\t\t// @ts-expect-error\n\t\t\tinvalidate\n\t\t)\n\t);\n\n\t// Also support RxJS\n\t// @ts-expect-error TODO fix this in the types?\n\treturn unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\n","/** @import { Readable, StartStopNotifier, Subscriber, Unsubscriber, Updater, Writable } from '../public.js' */\n/** @import { Stores, StoresValues, SubscribeInvalidateTuple } from '../private.js' */\nimport { noop, run_all } from '../../internal/shared/utils.js';\nimport { safe_not_equal } from '../../internal/client/reactivity/equality.js';\nimport { subscribe_to_store } from '../utils.js';\n\n/**\n * @type {Array<SubscribeInvalidateTuple<any> | any>}\n */\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {Unsubscriber | null} */\n\tlet stop = null;\n\n\t/** @type {Set<SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\n\t/**\n\t * @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(/** @type {T} */ (value)));\n\t}\n\n\t/**\n\t * @param {Subscriber<T>} run\n\t * @param {() => void} [invalidate]\n\t * @returns {Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(/** @type {T} */ (value));\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>, set: (value: T) => void, update: (fn: Updater<T>) => void) => Unsubscriber | void} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>) => T} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * @template {Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\t/** @type {T[]} */\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = typeof result === 'function' ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe_to_store(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * @template T\n * @param {Readable<T>} store  - store to make readonly\n * @returns {Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\t// @ts-expect-error TODO i suspect the bind is unnecessary\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * @template T\n * @param {Readable<T>} store\n * @returns {T}\n */\nexport function get(store) {\n\tlet value;\n\tsubscribe_to_store(store, (_) => (value = _))();\n\t// @ts-expect-error\n\treturn value;\n}\n","import { systemControls } from '@/core/controls/defaults.ts';\nimport { getDefaultOptions } from '@/core/options/defaults/index.ts';\nimport type { GmOptionsData, SystemControls } from '@/main.ts';\nimport { cloneDeep } from 'lodash-es';\nimport { writable } from 'svelte/store';\n\nconst initialState: {\n  controls: SystemControls;\n  options: GmOptionsData['controls'];\n  settings: GmOptionsData['settings'];\n} = {\n  controls: cloneDeep(systemControls),\n  options: getDefaultOptions().controls,\n  settings: getDefaultOptions().settings,\n};\n\nexport const controlsStore = writable(initialState);\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n * @type {string}\n */\nexport const VERSION = '5.46.4';\nexport const PUBLIC_VERSION = '5';\n","import { PUBLIC_VERSION } from '../version.js';\n\nif (typeof window !== 'undefined') {\n\t// @ts-expect-error\n\t((window.__svelte ??= {}).v ??= new Set()).add(PUBLIC_VERSION);\n}\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" fill=\\\"currentColor\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path d=\\\"M7.474 17.988h49.045L31.996 46.012zm-3.85 3.37 24.522 28.019a5.113 5.113 0 0 0 7.7 0l24.523-28.02c2.894-3.308.542-8.482-3.85-8.482H7.474a5.113 5.113 0 0 0-3.85 8.482\\\"/>\\n</svg>\\n\"","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" fill=\\\"currentColor\\\" viewBox=\\\"0 0 64 64\\\">\\n    <path d=\\\"M7.474 46.012h49.045L31.996 17.988Zm-3.85-3.37 24.522-28.019a5.113 5.113 0 0 1 7.7 0l24.523 28.02c2.894 3.308.542 8.482-3.85 8.482H7.474a5.113 5.113 0 0 1-3.85-8.482\\\"/>\\n</svg>\\n\"","<script lang=\"ts\">\n  import type { ActionInstance, ActionOption } from '@/main.ts';\n  import log from 'loglevel';\n  import { onMount } from 'svelte';\n\n  const { name, actionInstance, actionOption }: {\n    name: string,\n    actionInstance: ActionInstance | null,\n    actionOption: ActionOption | null,\n  } = $props();\n\n  let selectedValue: string | number | boolean = $state('');\n\n  onMount(() => {\n    if (actionOption) {\n      if (actionOption.type === 'select') {\n        selectedValue = actionOption.value.value;\n      } else if (actionOption.type === 'toggle') {\n        selectedValue = actionOption.value;\n      }\n    }\n  });\n\n  const handleOptionChange = (event: Event) => {\n    if (!actionInstance || !actionOption) {\n      log.error('Can\\'t apply option value', actionInstance, actionOption);\n      return;\n    }\n\n    if (actionOption?.type === 'toggle') {\n      const target = event.target as HTMLInputElement;\n      selectedValue = target.checked;\n    } else if (actionOption?.type === 'select') {\n      const target = event.target as HTMLSelectElement;\n      selectedValue = target.value;\n    }\n\n    actionInstance.applyOptionValue(name, selectedValue);\n  };\n</script>\n\n{#if actionOption}\n  <div class=\"action-option\">\n    {#if actionOption.type === 'select'}\n      <label for={name}>{actionOption.label}</label>\n      <select\n        id={name}\n        bind:value={selectedValue}\n        onchange={handleOptionChange}>\n        {#each actionOption.choices as choiceItem}\n          <option value={choiceItem.value}>{choiceItem.title}</option>\n        {/each}\n      </select>\n    {:else if actionOption.type === 'toggle' && typeof selectedValue === 'boolean'}\n      <label for={name}>\n        <input\n          type=\"checkbox\"\n          id={String(name)}\n          bind:checked={selectedValue}\n          onchange={handleOptionChange} />\n        {actionOption.label}\n      </label>\n    {/if}\n  </div>\n{/if}\n\n<style lang=\"scss\">\n  .action-option {\n    display: flex;\n    align-items: center;\n    padding: 0.2rem;\n\n    label {\n      margin-right: 0.5rem;\n      white-space: nowrap;\n      cursor: pointer;\n    }\n\n    select, input[type=\"checkbox\"] {\n      cursor: pointer;\n    }\n\n    &:empty {\n      display: none;\n    }\n  }\n</style>\n","<script lang=\"ts\">\n  import type { ActionInstance, SubAction } from '@/main.ts';\n  import log from 'loglevel';\n\n  const { name, actionInstance, subAction }: {\n    name: string,\n    actionInstance: ActionInstance | null,\n    subAction: SubAction | null,\n  } = $props();\n\n  const handleSubAction = (event: Event) => {\n    event.preventDefault();\n    if (!actionInstance || !subAction) {\n      log.error('Can\\'t run a SubAction', actionInstance, subAction);\n      return;\n    }\n    subAction.method();\n  };\n</script>\n\n{#if subAction}\n  <button\n    id={`subaction-${name}`}\n    type=\"submit\"\n    class=\"sub-action\"\n    title={subAction.label}\n    onclick={handleSubAction}>\n    {subAction.label}\n  </button>\n{/if}\n\n<style lang=\"scss\">\n  .sub-action {\n    width: auto;\n    height: auto;\n    border: 1px solid #ccc;\n    margin: 3px;\n    padding: 3px;\n  }\n</style>\n","<script lang=\"ts\">\n  import ActionOption from '@/core/controls/components/action-option.svelte';\n  import SubAction from '@/core/controls/components/sub-action.svelte';\n  import type { ActionInstance, GenericSystemControl, Geoman } from '@/main.ts';\n  import { getContext } from 'svelte';\n\n  const gm: Geoman = getContext('gm');\n  const { control }: { control: GenericSystemControl } = $props();\n\n  const actionType = $derived(control.type);\n  const modeName = $derived(control.targetMode);\n\n  const actionInstance: ActionInstance | null = $derived(\n    actionType && modeName ? gm.actionInstances[`${actionType}__${modeName}`] || null : null\n  );\n</script>\n\n{#if actionInstance}\n  {#each Object.entries(actionInstance.options) as [key, item] (key)}\n    <ActionOption\n      name={key}\n      actionInstance={actionInstance}\n      actionOption={item} />\n  {/each}\n  {#each Object.entries(actionInstance.actions) as [key, item] (key)}\n    <SubAction\n      name={key}\n      actionInstance={actionInstance}\n      subAction={item} />\n  {/each}\n{/if}\n\n<style lang=\"scss\">\n</style>\n","/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */\n\nconst {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor\n} = Object;\nlet {\n  freeze,\n  seal,\n  create\n} = Object; // eslint-disable-line import/no-mutable-exports\nlet {\n  apply,\n  construct\n} = typeof Reflect !== 'undefined' && Reflect;\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\nif (!apply) {\n  apply = function apply(func, thisArg) {\n    for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      args[_key - 2] = arguments[_key];\n    }\n    return func.apply(thisArg, args);\n  };\n}\nif (!construct) {\n  construct = function construct(Func) {\n    for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      args[_key2 - 1] = arguments[_key2];\n    }\n    return new Func(...args);\n  };\n}\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySplice = unapply(Array.prototype.splice);\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\nconst regExpTest = unapply(RegExp.prototype.test);\nconst typeErrorCreate = unconstruct(TypeError);\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply(func) {\n  return function (thisArg) {\n    if (thisArg instanceof RegExp) {\n      thisArg.lastIndex = 0;\n    }\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    return apply(func, thisArg, args);\n  };\n}\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct(Func) {\n  return function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return construct(Func, args);\n  };\n}\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(set, array) {\n  let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n        element = lcElement;\n      }\n    }\n    set[element] = true;\n  }\n  return set;\n}\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray(array) {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n  return array;\n}\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone(object) {\n  const newObject = create(null);\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (value && typeof value === 'object' && value.constructor === Object) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n  return newObject;\n}\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n    object = getPrototypeOf(object);\n  }\n  function fallbackValue() {\n    return null;\n  }\n  return fallbackValue;\n}\n\nconst html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'search', 'section', 'select', 'shadow', 'slot', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\nconst svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'enterkeyhint', 'exportparts', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'inputmode', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'part', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\nconst svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nconst svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\nconst mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nconst mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\nconst text = freeze(['#text']);\n\nconst html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'exportparts', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inert', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'part', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'slot', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\nconst svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'mask-type', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\nconst mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\nconst xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nconst MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nconst ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nconst TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\nconst DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\nconst ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nconst IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nconst IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nconst ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nconst DOCTYPE_NAME = seal(/^html$/i);\nconst CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\nvar EXPRESSIONS = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ARIA_ATTR: ARIA_ATTR,\n  ATTR_WHITESPACE: ATTR_WHITESPACE,\n  CUSTOM_ELEMENT: CUSTOM_ELEMENT,\n  DATA_ATTR: DATA_ATTR,\n  DOCTYPE_NAME: DOCTYPE_NAME,\n  ERB_EXPR: ERB_EXPR,\n  IS_ALLOWED_URI: IS_ALLOWED_URI,\n  IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n  MUSTACHE_EXPR: MUSTACHE_EXPR,\n  TMPLIT_EXPR: TMPLIT_EXPR\n});\n\n/* eslint-disable @typescript-eslint/indent */\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5,\n  // Deprecated\n  entityNode: 6,\n  // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12 // Deprecated\n};\nconst getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n  if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\nconst _createHooksMap = function _createHooksMap() {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: []\n  };\n};\nfunction createDOMPurify() {\n  let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n  const DOMPurify = root => createDOMPurify(root);\n  DOMPurify.version = '3.3.1';\n  DOMPurify.removed = [];\n  if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document || !window.Element) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n  let {\n    document\n  } = window;\n  const originalDocument = document;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes\n  } = window;\n  const ElementPrototype = Element.prototype;\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName\n  } = document;\n  const {\n    importNode\n  } = originalDocument;\n  let hooks = _createHooksMap();\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT\n  } = EXPRESSIONS;\n  let {\n    IS_ALLOWED_URI: IS_ALLOWED_URI$1\n  } = EXPRESSIONS;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n  /* Config object to store ADD_TAGS/ADD_ATTR functions (when used as functions) */\n  const EXTRA_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    }\n  }));\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (7.3.3)\n   *   - DOM Tree Accessors (3.1.5)\n   *   - Form Element Parent-Child Relations (4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (4.8.5)\n   *   - HTMLCollection (4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc = null;\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n  const formElement = document.createElement('form');\n  const isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function _parseConfig() {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE =\n    // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : clone({});\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : clone({});\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1);\n        addToSet(ALLOWED_ATTR, html);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (typeof cfg.ADD_TAGS === 'function') {\n        EXTRA_ELEMENT_HANDLING.tagCheck = cfg.ADD_TAGS;\n      } else {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n      }\n    }\n    if (cfg.ADD_ATTR) {\n      if (typeof cfg.ADD_ATTR === 'function') {\n        EXTRA_ELEMENT_HANDLING.attributeCheck = cfg.ADD_ATTR;\n      } else {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n      }\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n    if (cfg.ADD_FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.ADD_FORBID_CONTENTS, transformCaseFunc);\n    }\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n      }\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n      }\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n      }\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n    CONFIG = cfg;\n  };\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function _checkValidNamespace(element) {\n    let parent = getParentNode(element);\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template'\n      };\n    }\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n    // For XHTML and XML documents that support custom namespaces\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return true;\n    }\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, {\n      element: node\n    });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function _removeAttribute(name, element) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element\n      });\n    }\n    element.removeAttribute(name);\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n    const body = doc.body || doc.documentElement;\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function _createNodeIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n  };\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function _isClobbered(element) {\n    return element instanceof HTMLFormElement && (typeof element.nodeName !== 'string' || typeof element.textContent !== 'string' || typeof element.removeChild !== 'function' || !(element.attributes instanceof NamedNodeMap) || typeof element.removeAttribute !== 'function' || typeof element.setAttribute !== 'function' || typeof element.namespaceURI !== 'string' || typeof element.insertBefore !== 'function' || typeof element.hasChildNodes !== 'function');\n  };\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function _isNode(value) {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n  function _executeHooks(hooks, currentNode, data) {\n    arrayForEach(hooks, hook => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function _sanitizeElements(currentNode) {\n    let content = null;\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (SAFE_FOR_XML && currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w!]/g, currentNode.innerHTML) && regExpTest(/<[/\\w!]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any kind of possibly harmful comments */\n    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove element if anything forbids its presence */\n    if (!(EXTRA_ELEMENT_HANDLING.tagCheck instanceof Function && EXTRA_ELEMENT_HANDLING.tagCheck(tagName)) && (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName])) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n          return false;\n        }\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n          return false;\n        }\n      }\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        content = stringReplace(content, expr, ' ');\n      });\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content;\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n    return false;\n  };\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (EXTRA_ELEMENT_HANDLING.attributeCheck instanceof Function && EXTRA_ELEMENT_HANDLING.attributeCheck(lcName, lcTag)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n      // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n      // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n      _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName, lcTag)) ||\n      // Alternative, second condition checks if it's an `is`-attribute, AND\n      // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n      return false;\n    } else ;\n    return true;\n  };\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n    const {\n      attributes\n    } = currentNode;\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined\n    };\n    let l = attributes.length;\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const {\n        name,\n        namespaceURI,\n        value: attrValue\n      } = attr;\n      const lcName = transformCaseFunc(name);\n      const initValue = attrValue;\n      let value = name === 'value' ? initValue : stringTrim(initValue);\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title|textarea)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Make sure we cannot easily use animated hrefs, even if animations are allowed */\n      if (lcName === 'attributename' && stringMatch(value, 'href')) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Handle attributes that require Trusted Types */\n      if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n        if (namespaceURI) ; else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML':\n              {\n                value = trustedTypesPolicy.createHTML(value);\n                break;\n              }\n            case 'TrustedScriptURL':\n              {\n                value = trustedTypesPolicy.createScriptURL(value);\n                break;\n              }\n          }\n        }\n      }\n      /* Handle invalid data-* attribute set by try-catching it */\n      if (value !== initValue) {\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n          if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n          } else {\n            arrayPop(DOMPurify.removed);\n          }\n        } catch (_) {\n          _removeAttribute(name, currentNode);\n        }\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n      /* Sanitize tags and elements */\n      _sanitizeElements(shadowNode);\n      /* Check attributes next */\n      _sanitizeAttributes(shadowNode);\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty) {\n    let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n      // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Sanitize tags and elements */\n      _sanitizeElements(currentNode);\n      /* Check attributes next */\n      _sanitizeAttributes(currentNode);\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n      return returnNode;\n    }\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    /* Serialize doctype if allowed */\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n  DOMPurify.setConfig = function () {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n  DOMPurify.removeHook = function (entryPoint, hookFunction) {\n    if (hookFunction !== undefined) {\n      const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n      return index === -1 ? undefined : arraySplice(hooks[entryPoint], index, 1)[0];\n    }\n    return arrayPop(hooks[entryPoint]);\n  };\n  DOMPurify.removeHooks = function (entryPoint) {\n    hooks[entryPoint] = [];\n  };\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n  return DOMPurify;\n}\nvar purify = createDOMPurify();\n\nexport { purify as default };\n//# sourceMappingURL=purify.es.mjs.map\n","<script lang=\"ts\">\n  import ControlMenu from '@/core/controls/components/control-menu.svelte';\n  import type { ControlOptions, GenericSystemControl, Geoman } from '@/main.ts';\n  import DOMPurify from 'dompurify';\n  import log from 'loglevel';\n  import { getContext } from 'svelte';\n  import { controlsStore } from '@/core/controls/components/controls-store.ts';\n\n  const { control, controlOptions }: {\n    control: GenericSystemControl,\n    controlOptions: ControlOptions,\n  } = $props();\n\n  const sanitizedSvg = $derived(controlOptions?.icon ? DOMPurify.sanitize(controlOptions.icon.trim()) : null);\n\n  const gm: Geoman = getContext('gm');\n  const menuPosition = gm.control.getDefaultPosition();\n\n  const handleClick = () => {\n    if (control && controlOptions) {\n      gm.options.toggleMode(control.type, control.targetMode);\n    } else {\n      log.error('Control or controlOptions not defined', control, controlOptions);\n    }\n  };\n</script>\n\n{#if control && controlOptions && controlOptions.uiEnabled}\n  <div class={$controlsStore.settings.controlsStyles.controlContainerClass}>\n    <button\n      type=\"button\"\n      id={`id_${control.type}_${control.targetMode}`}\n      class={`${$controlsStore.settings.controlsStyles.controlButtonClass} ${control.type}-${control.targetMode}`}\n      class:active={controlOptions.active}\n      title={controlOptions.title}\n      onclick={handleClick}>\n      {#if controlOptions.icon}\n        <!-- eslint-disable-next-line svelte/no-at-html-tags -->\n        {@html sanitizedSvg}\n      {:else if controlOptions.title}\n        {controlOptions.title.slice(0, 2)}\n      {:else}\n        {control.targetMode}\n      {/if}\n    </button>\n    {#if controlOptions.active}\n      <div\n        class=\"control-menu\"\n        class:menu-right={menuPosition.endsWith('left')}\n        class:menu-left={menuPosition.endsWith('right')}>\n        <ControlMenu control={control} />\n      </div>\n    {/if}\n  </div>\n{/if}\n\n<style lang=\"scss\">\n  .gm-control-container {\n    position: relative;\n\n    .control-menu {\n      position: absolute;\n      top: 0;\n      display: flex;\n      flex-direction: column;\n      background: white;\n      box-shadow: 4px 0 0 2px rgba(0, 0, 0, 0.1);\n      clip-path: inset(-2px -2px -2px 0 round 3px);\n\n      &.menu-right {\n        left: 100%;\n        border-radius: 0 3px 3px 0;\n      }\n\n      // todo: auto adjust menu position\n      &.menu-left {\n        right: 100%;\n        border-radius: 3px 0 0 3px;\n      }\n    }\n  }\n</style>\n","/** @import { BlurParams, CrossfadeParams, DrawParams, FadeParams, FlyParams, ScaleParams, SlideParams, TransitionConfig } from './public' */\n\nimport { DEV } from 'esm-env';\nimport * as w from '../internal/client/warnings.js';\n\n/** @param {number} x */\nconst linear = (x) => x;\n\n/** @param {number} t */\nfunction cubic_out(t) {\n\tconst f = t - 1.0;\n\treturn f * f * f + 1.0;\n}\n\n/**\n * @param {number} t\n * @returns {number}\n */\nfunction cubic_in_out(t) {\n\treturn t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\n\n/** @param {number | string} value\n * @returns {[number, string]}\n */\nfunction split_css_unit(value) {\n\tconst split = typeof value === 'string' && value.match(/^\\s*(-?[\\d.]+)([^\\s]*)\\s*$/);\n\treturn split ? [parseFloat(split[1]), split[2] || 'px'] : [/** @type {number} */ (value), 'px'];\n}\n\n/**\n * Animates a `blur` filter alongside an element's opacity.\n *\n * @param {Element} node\n * @param {BlurParams} [params]\n * @returns {TransitionConfig}\n */\nexport function blur(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubic_in_out, amount = 5, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst f = style.filter === 'none' ? '' : style.filter;\n\tconst od = target_opacity * (1 - opacity);\n\tconst [value, unit] = split_css_unit(amount);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_t, u) => `opacity: ${target_opacity - od * u}; filter: ${f} blur(${u * value}${unit});`\n\t};\n}\n\n/**\n * Animates the opacity of an element from 0 to the current opacity for `in` transitions and from the current opacity to 0 for `out` transitions.\n *\n * @param {Element} node\n * @param {FadeParams} [params]\n * @returns {TransitionConfig}\n */\nexport function fade(node, { delay = 0, duration = 400, easing = linear } = {}) {\n\tconst o = +getComputedStyle(node).opacity;\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t) => `opacity: ${t * o}`\n\t};\n}\n\n/**\n * Animates the x and y positions and the opacity of an element. `in` transitions animate from the provided values, passed as parameters to the element's default values. `out` transitions animate from the element's default values to the provided values.\n *\n * @param {Element} node\n * @param {FlyParams} [params]\n * @returns {TransitionConfig}\n */\nexport function fly(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubic_out, x = 0, y = 0, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst od = target_opacity * (1 - opacity);\n\tconst [x_value, x_unit] = split_css_unit(x);\n\tconst [y_value, y_unit] = split_css_unit(y);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x_value}${x_unit}, ${(1 - t) * y_value}${y_unit});\n\t\t\topacity: ${target_opacity - od * u}`\n\t};\n}\n\nvar slide_warning = false;\n\n/**\n * Slides an element in and out.\n *\n * @param {Element} node\n * @param {SlideParams} [params]\n * @returns {TransitionConfig}\n */\nexport function slide(node, { delay = 0, duration = 400, easing = cubic_out, axis = 'y' } = {}) {\n\tconst style = getComputedStyle(node);\n\n\tif (DEV && !slide_warning && /(contents|inline|table)/.test(style.display)) {\n\t\tslide_warning = true;\n\t\tPromise.resolve().then(() => (slide_warning = false));\n\t\tw.transition_slide_display(style.display);\n\t}\n\n\tconst opacity = +style.opacity;\n\tconst primary_property = axis === 'y' ? 'height' : 'width';\n\tconst primary_property_value = parseFloat(style[primary_property]);\n\tconst secondary_properties = axis === 'y' ? ['top', 'bottom'] : ['left', 'right'];\n\tconst capitalized_secondary_properties = secondary_properties.map(\n\t\t(e) => /** @type {'Left' | 'Right' | 'Top' | 'Bottom'} */ (`${e[0].toUpperCase()}${e.slice(1)}`)\n\t);\n\tconst padding_start_value = parseFloat(style[`padding${capitalized_secondary_properties[0]}`]);\n\tconst padding_end_value = parseFloat(style[`padding${capitalized_secondary_properties[1]}`]);\n\tconst margin_start_value = parseFloat(style[`margin${capitalized_secondary_properties[0]}`]);\n\tconst margin_end_value = parseFloat(style[`margin${capitalized_secondary_properties[1]}`]);\n\tconst border_width_start_value = parseFloat(\n\t\tstyle[`border${capitalized_secondary_properties[0]}Width`]\n\t);\n\tconst border_width_end_value = parseFloat(\n\t\tstyle[`border${capitalized_secondary_properties[1]}Width`]\n\t);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t) =>\n\t\t\t'overflow: hidden;' +\n\t\t\t`opacity: ${Math.min(t * 20, 1) * opacity};` +\n\t\t\t`${primary_property}: ${t * primary_property_value}px;` +\n\t\t\t`padding-${secondary_properties[0]}: ${t * padding_start_value}px;` +\n\t\t\t`padding-${secondary_properties[1]}: ${t * padding_end_value}px;` +\n\t\t\t`margin-${secondary_properties[0]}: ${t * margin_start_value}px;` +\n\t\t\t`margin-${secondary_properties[1]}: ${t * margin_end_value}px;` +\n\t\t\t`border-${secondary_properties[0]}-width: ${t * border_width_start_value}px;` +\n\t\t\t`border-${secondary_properties[1]}-width: ${t * border_width_end_value}px;` +\n\t\t\t`min-${primary_property}: 0`\n\t};\n}\n\n/**\n * Animates the opacity and scale of an element. `in` transitions animate from the provided values, passed as parameters, to an element's current (default) values. `out` transitions animate from an element's default values to the provided values.\n *\n * @param {Element} node\n * @param {ScaleParams} [params]\n * @returns {TransitionConfig}\n */\nexport function scale(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubic_out, start = 0, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst sd = 1 - start;\n\tconst od = target_opacity * (1 - opacity);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - sd * u});\n\t\t\topacity: ${target_opacity - od * u}\n\t\t`\n\t};\n}\n\n/**\n * Animates the stroke of an SVG element, like a snake in a tube. `in` transitions begin with the path invisible and draw the path to the screen over time. `out` transitions start in a visible state and gradually erase the path. `draw` only works with elements that have a `getTotalLength` method, like `<path>` and `<polyline>`.\n *\n * @param {SVGElement & { getTotalLength(): number }} node\n * @param {DrawParams} [params]\n * @returns {TransitionConfig}\n */\nexport function draw(node, { delay = 0, speed, duration, easing = cubic_in_out } = {}) {\n\tlet len = node.getTotalLength();\n\tconst style = getComputedStyle(node);\n\tif (style.strokeLinecap !== 'butt') {\n\t\tlen += parseInt(style.strokeWidth);\n\t}\n\tif (duration === undefined) {\n\t\tif (speed === undefined) {\n\t\t\tduration = 800;\n\t\t} else {\n\t\t\tduration = len / speed;\n\t\t}\n\t} else if (typeof duration === 'function') {\n\t\tduration = duration(len);\n\t}\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_, u) => `\n\t\t\tstroke-dasharray: ${len};\n\t\t\tstroke-dashoffset: ${u * len};\n\t\t`\n\t};\n}\n\n/**\n * @template T\n * @template S\n * @param {T} tar\n * @param {S} src\n * @returns {T & S}\n */\nfunction assign(tar, src) {\n\t// @ts-ignore\n\tfor (const k in src) tar[k] = src[k];\n\treturn /** @type {T & S} */ (tar);\n}\n\n/**\n * The `crossfade` function creates a pair of [transitions](https://svelte.dev/docs/svelte/transition) called `send` and `receive`. When an element is 'sent', it looks for a corresponding element being 'received', and generates a transition that transforms the element to its counterpart's position and fades it out. When an element is 'received', the reverse happens. If there is no counterpart, the `fallback` transition is used.\n *\n * @param {CrossfadeParams & {\n * \tfallback?: (node: Element, params: CrossfadeParams, intro: boolean) => TransitionConfig;\n * }} params\n * @returns {[(node: any, params: CrossfadeParams & { key: any; }) => () => TransitionConfig, (node: any, params: CrossfadeParams & { key: any; }) => () => TransitionConfig]}\n */\nexport function crossfade({ fallback, ...defaults }) {\n\t/** @type {Map<any, Element>} */\n\tconst to_receive = new Map();\n\t/** @type {Map<any, Element>} */\n\tconst to_send = new Map();\n\n\t/**\n\t * @param {Element} from_node\n\t * @param {Element} node\n\t * @param {CrossfadeParams} params\n\t * @returns {TransitionConfig}\n\t */\n\tfunction crossfade(from_node, node, params) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = /** @param {number} d */ (d) => Math.sqrt(d) * 30,\n\t\t\teasing = cubic_out\n\t\t} = assign(assign({}, defaults), params);\n\t\tconst from = from_node.getBoundingClientRect();\n\t\tconst to = node.getBoundingClientRect();\n\t\tconst dx = from.left - to.left;\n\t\tconst dy = from.top - to.top;\n\t\tconst dw = from.width / to.width;\n\t\tconst dh = from.height / to.height;\n\t\tconst d = Math.sqrt(dx * dx + dy * dy);\n\t\tconst style = getComputedStyle(node);\n\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\t\tconst opacity = +style.opacity;\n\t\treturn {\n\t\t\tdelay,\n\t\t\tduration: typeof duration === 'function' ? duration(d) : duration,\n\t\t\teasing,\n\t\t\tcss: (t, u) => `\n\t\t\t   opacity: ${t * opacity};\n\t\t\t   transform-origin: top left;\n\t\t\t   transform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${\n\t\t\t\t\t\tt + (1 - t) * dh\n\t\t\t\t\t});\n\t\t   `\n\t\t};\n\t}\n\n\t/**\n\t * @param {Map<any, Element>} items\n\t * @param {Map<any, Element>} counterparts\n\t * @param {boolean} intro\n\t * @returns {(node: any, params: CrossfadeParams & { key: any; }) => () => TransitionConfig}\n\t */\n\tfunction transition(items, counterparts, intro) {\n\t\t// @ts-expect-error TODO improve typings (are the public types wrong?)\n\t\treturn (node, params) => {\n\t\t\titems.set(params.key, node);\n\t\t\treturn () => {\n\t\t\t\tif (counterparts.has(params.key)) {\n\t\t\t\t\tconst other_node = counterparts.get(params.key);\n\t\t\t\t\tcounterparts.delete(params.key);\n\t\t\t\t\treturn crossfade(/** @type {Element} */ (other_node), node, params);\n\t\t\t\t}\n\t\t\t\t// if the node is disappearing altogether\n\t\t\t\t// (i.e. wasn't claimed by the other list)\n\t\t\t\t// then we need to supply an outro\n\t\t\t\titems.delete(params.key);\n\t\t\t\treturn fallback && fallback(node, params, intro);\n\t\t\t};\n\t\t};\n\t}\n\treturn [transition(to_send, to_receive, false), transition(to_receive, to_send, true)];\n}\n","<script lang=\"ts\">\n  import caretDown from '@/assets/images/controls2/caret-down.svg';\n  import caretUp from '@/assets/images/controls2/caret-up.svg';\n  import ActionControl from '@/core/controls/components/action-control.svelte';\n  import { controlsStore } from '@/core/controls/components/controls-store.ts';\n  import type { ActionType, ControlOptions, GenericSystemControls, ModeName } from '@/main.ts';\n  import DOMPurify from 'dompurify';\n  import { slide } from 'svelte/transition';\n\n  // const gm: Geoman = getContext('gm');\n  let expanded = $state(true);\n  let controlsCollapsible = $derived($controlsStore.settings.controlsCollapsible);\n  let controlsStyles = $derived($controlsStore.settings.controlsStyles);\n\n  const getControl = (groupKey: string, mode: string) => {\n    const controlSection = (\n      $controlsStore.controls?.[groupKey as ActionType] as GenericSystemControls | undefined\n    );\n    return controlSection?.[mode as ModeName] || null;\n  };\n\n  const hasVisibleControls = (groupKey: string, groupControls: Record<string, unknown>) => {\n    return Object.entries(groupControls).some(([controlKey, controlOptions]) => {\n      const control = getControl(groupKey, controlKey);\n      return control && controlOptions && (controlOptions as { uiEnabled?: boolean }).uiEnabled;\n    });\n  };\n\n  const toggleExpanded = () => {\n    expanded = !expanded;\n  };\n\n  const getToggleExpandedIcon = () => {\n    return DOMPurify.sanitize(expanded ? caretDown : caretUp);\n  };\n\n  // Sort controls by order property while preserving insertion order for undefined values\n  const sortControlEntries = (groupControls: Record<string, ControlOptions>): Array<[string, ControlOptions]> => {\n    return Object.entries(groupControls)\n            .map(([key, options], originalIndex) => ({ key, options, originalIndex }))\n            .sort((a, b) => {\n              const orderA = a.options.order ?? Infinity;\n              const orderB = b.options.order ?? Infinity;\n\n              // Sort by order value, use original index as tiebreaker\n              if (orderA !== orderB) {\n                return orderA - orderB;\n              }\n              return a.originalIndex - b.originalIndex;\n            })\n            .map(({ key, options }) => [key, options] as [string, ControlOptions]);\n  };\n</script>\n\n<div class=\"gm-reactive-controls\">\n  {#if controlsCollapsible}\n    <div class={`${controlsStyles.controlGroupClass} group-settings`}>\n      <button class=\"gm-control-button\" onclick={toggleExpanded}>\n        {@html getToggleExpandedIcon()}\n      </button>\n    </div>\n  {/if}\n\n  {#if expanded}\n    <div in:slide={{ duration: 180 }} out:slide={{ duration: 140 }}>\n      {#each Object.entries($controlsStore.options) as [groupKey, groupControls] (groupKey)}\n        {#if hasVisibleControls(groupKey, groupControls)}\n          <div class={`${controlsStyles.controlGroupClass} group-${groupKey}`}>\n            {#each sortControlEntries(groupControls) as [controlKey, controlOptions] (controlKey)}\n              {@const control = getControl(groupKey, controlKey)}\n              {#if control}\n                <ActionControl control={control} controlOptions={controlOptions} />\n              {/if}\n            {/each}\n          </div>\n        {/if}\n      {/each}\n    </div>\n  {/if}\n</div>\n\n<style>\n</style>\n","import type { Geoman } from '@/main.ts';\n\nexport abstract class BaseControl {\n  gm: Geoman;\n\n  constructor(gm: Geoman) {\n    this.gm = gm;\n  }\n\n  abstract onAdd(): HTMLElement;\n\n  abstract onRemove(): void;\n}\n","export const typedKeys = <T extends object>(obj: T) => Object.keys(obj) as Array<keyof T>;\n\nexport const typedValues = <T extends object>(obj: T): Array<T[keyof T]> => {\n  return Object.values(obj) as Array<T[keyof T]>;\n};\n\nexport const includesWithType = <T extends readonly string[]>(\n  value: string,\n  validValues: T,\n): value is T[number] => validValues.includes(value as T[number]);\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { controlsStore } from '@/core/controls/components/controls-store.ts';\nimport GmReactiveControls from '@/core/controls/components/gm-controls.svelte';\nimport { systemControls } from '@/core/controls/defaults.ts';\nimport { BaseControl } from '@/core/map/base/control.ts';\nimport {\n  type BaseControlsPosition,\n  type ControlOptions,\n  type EventHandlers,\n  type GenericSystemControl,\n  type GenericSystemControls,\n  type GmBaseModeEvent,\n  isGmModeEvent,\n  type ModeAction,\n  type ModeName,\n  type ModeType,\n  type SystemControls,\n} from '@/main.ts';\nimport { typedKeys } from '@/utils/typing.ts';\nimport { cloneDeep } from 'lodash-es';\nimport log from 'loglevel';\nimport { mount, unmount } from 'svelte';\n\nexport default class GMControl extends BaseControl {\n  controls: SystemControls = cloneDeep(systemControls);\n  reactiveControls: Record<string, unknown> | null = null;\n  container: HTMLElement | undefined = undefined;\n  eventHandlers: EventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:draw`]: this.handleModeEvent.bind(this),\n    [`${GM_SYSTEM_PREFIX}:edit`]: this.handleModeEvent.bind(this),\n    [`${GM_SYSTEM_PREFIX}:helper`]: this.handleModeEvent.bind(this),\n  };\n\n  onAdd(): HTMLElement {\n    this.createControls();\n    this.gm.events.bus.attachEvents(this.eventHandlers);\n\n    if (!this.container) {\n      // container must be created in .createControls()\n      throw new Error('Controls container is not initialized');\n    }\n    return this.container;\n  }\n\n  createControls(containerElement: HTMLElement | undefined = undefined) {\n    if (this.controlsAdded()) {\n      log.warn(\"Can't add controls: controls already added\");\n      return;\n    }\n\n    this.container = containerElement || this.createHtmlContainer();\n    this.createReactivePanel();\n  }\n\n  onRemove() {\n    this.gm.events.bus.detachEvents(this.eventHandlers);\n\n    // Destroy the Svelte component\n    if (this.reactiveControls) {\n      unmount(this.reactiveControls);\n      this.reactiveControls = null;\n    }\n\n    // Remove the container from the DOM\n    if (this.container && this.container.parentNode) {\n      this.container.parentNode.removeChild(this.container);\n    }\n    this.container = undefined;\n  }\n\n  handleModeEvent(event: GmBaseModeEvent) {\n    if (!isGmModeEvent(event)) {\n      return { next: true };\n    }\n\n    const trackModes: Array<ModeAction> = ['mode_started', 'mode_ended'];\n\n    if (trackModes.includes(event.action)) {\n      this.updateReactivePanel();\n    }\n\n    return { next: true };\n  }\n\n  controlsAdded() {\n    return !!this.reactiveControls;\n  }\n\n  createReactivePanel() {\n    if (!this.container) {\n      log.error(\"Can't create reactive panel: container is not initialized\");\n      return;\n    }\n\n    this.syncModeStates();\n\n    const controlsContext = new Map();\n    controlsContext.set('gm', this.gm);\n\n    this.reactiveControls = mount(GmReactiveControls, {\n      target: this.container,\n      context: controlsContext,\n    });\n\n    this.updateReactivePanel();\n  }\n\n  updateReactivePanel() {\n    controlsStore.update(() => ({\n      controls: this.controls,\n      options: this.gm.options.controls,\n      settings: this.gm.options.settings,\n    }));\n  }\n\n  createHtmlContainer() {\n    const container = document.createElement('div');\n    container.classList.add('geoman-controls');\n    return container;\n  }\n\n  syncModeStates() {\n    this.eachControlWithOptions(({ control }) => {\n      this.gm.options.syncModeState(control.type, control.targetMode);\n    });\n  }\n\n  eachControlWithOptions(\n    callback: ({\n      control,\n    }: {\n      control: GenericSystemControl;\n      controlOptions: ControlOptions;\n    }) => void,\n  ) {\n    return typedKeys(this.controls).forEach((modeType) => {\n      const section = this.controls[modeType];\n\n      return Object.keys(section).forEach((modeName) => {\n        const mode = modeName as ModeName;\n        const control = this.getControl({ modeType: modeType, modeName: mode });\n        const controlOptions = this.gm.options.getControlOptions({\n          modeType: modeType,\n          modeName: mode,\n        });\n\n        if (control && controlOptions) {\n          callback({ control, controlOptions });\n        }\n        // else {\n        //   log.warn(`Can't find control section for: ${actionType}:${modeName}`, !!actionType, !!modeName);\n        // }\n      });\n    });\n  }\n\n  getControl({\n    modeType,\n    modeName,\n  }: {\n    modeType: ModeType;\n    modeName: ModeName;\n  }): GenericSystemControl | null {\n    if (modeType && modeName) {\n      const section = this.controls[modeType] as GenericSystemControls;\n      return (section[modeName] || null) as GenericSystemControl | null;\n    }\n\n    return null;\n  }\n\n  getDefaultPosition(): BaseControlsPosition {\n    return this.gm.options.settings.controlsPosition;\n  }\n}\n","import { GM_PREFIX, GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport type {\n  AnyEventName,\n  EditModeName,\n  FeatureCreatedFwdEvent,\n  FeatureEditEndFwdEvent,\n  FeatureEditStartFwdEvent,\n  FeatureRemovedFwdEvent,\n  FeatureSourceName,\n  FeatureUpdatedFwdEvent,\n  FwdEditModeName,\n  Geoman,\n  GlobalDrawEnabledDisabledFwdEvent,\n  GlobalDrawToggledFwdEvent,\n  GlobalEditToggledFwdEvent,\n  GlobalEventsListener,\n  GlobalHelperToggledFwdEvent,\n  GmControlLoadEvent,\n  GmDrawFeatureCreatedEvent,\n  GmDrawModeEvent,\n  GmEditFeatureEditEndEvent,\n  GmEditFeatureEditStartEvent,\n  GmEditFeatureRemovedEvent,\n  GmEditFeatureUpdatedEvent,\n  GmEditModeEvent,\n  GmEvent,\n  GmEventName,\n  GmEventNameWithoutPrefix,\n  GmFwdEventName,\n  GmHelperModeEvent,\n  GmSystemEvent,\n  ModeName,\n  SystemFwdEvent,\n} from '@/main.ts';\n\nexport class EventForwarder {\n  gm: Geoman;\n  globalEventsListener: GlobalEventsListener | null = null;\n\n  constructor(gm: Geoman) {\n    this.gm = gm;\n  }\n\n  get map() {\n    return this.gm.mapAdapter.getMapInstance();\n  }\n\n  async processEvent(eventName: GmEventName, payload: GmSystemEvent) {\n    // repeat the events to the map to allow end users to listen\n    await this.fireToMap({\n      type: 'system',\n      eventName: eventName.split(':')[1] as GmEventNameWithoutPrefix,\n      payload: {\n        ...payload,\n        level: 'user',\n      },\n    });\n\n    if (payload.action === 'mode_start' || payload.action === 'mode_end') {\n      await this.forwardModeToggledEvent(payload);\n    } else if (payload.action === 'feature_created') {\n      await this.forwardFeatureCreated(payload);\n    } else if (payload.action === 'feature_removed') {\n      await this.forwardFeatureRemoved(payload);\n    } else if (payload.action === 'feature_updated') {\n      await this.forwardFeatureUpdated(payload);\n    } else if (payload.action === 'feature_edit_start') {\n      await this.forwardFeatureEditStart(payload);\n    } else if (payload.action === 'feature_edit_end') {\n      await this.forwardFeatureEditEnd(payload);\n    } else if (payload.action === 'loaded' || payload.action === 'unloaded') {\n      await this.forwardGeomanLoaded(payload);\n    }\n  }\n\n  async forwardModeToggledEvent(payload: GmDrawModeEvent | GmEditModeEvent | GmHelperModeEvent) {\n    const enabled = payload.action === 'mode_start';\n\n    if (payload.actionType === 'draw') {\n      // global draw mode toggled\n      const eventName = 'globaldrawmodetoggled';\n      const eventData: GlobalDrawToggledFwdEvent = {\n        name: `${GM_PREFIX}:${eventName}`,\n        actionType: payload.actionType,\n        action: payload.action,\n        enabled,\n        shape: payload.mode,\n        map: this.map,\n      };\n      await this.fireToMap({ type: 'converted', eventName, payload: eventData });\n\n      // drawstart, drawend\n      const eventName2 = enabled ? 'drawstart' : 'drawend';\n      const eventData2: GlobalDrawEnabledDisabledFwdEvent = {\n        name: `${GM_PREFIX}:${eventName2}`,\n        actionType: payload.actionType,\n        action: payload.action,\n        shape: payload.mode,\n        map: this.map,\n      };\n      await this.fireToMap({\n        type: 'converted',\n        eventName: eventName2,\n        payload: eventData2,\n      });\n    } else if (payload.actionType === 'edit') {\n      const modeName = this.getConvertedEditModeName(payload.mode);\n      const eventName = `global${modeName}modetoggled` as const;\n      const eventData: GlobalEditToggledFwdEvent = {\n        name: `${GM_PREFIX}:${eventName}`,\n        actionType: payload.actionType,\n        action: payload.action,\n        enabled,\n        map: this.map,\n      };\n      await this.fireToMap({\n        type: 'converted',\n        eventName,\n        payload: eventData,\n      });\n    } else if (payload.actionType === 'helper') {\n      const eventName = `global${payload.mode}modetoggled` as const;\n      const eventData: GlobalHelperToggledFwdEvent = {\n        name: `${GM_PREFIX}:${eventName}`,\n        actionType: payload.actionType,\n        action: payload.action,\n        enabled,\n        map: this.map,\n      };\n      await this.fireToMap({\n        type: 'converted',\n        eventName,\n        payload: eventData,\n      });\n    }\n  }\n\n  async forwardFeatureCreated(payload: GmDrawFeatureCreatedEvent) {\n    const eventData: FeatureCreatedFwdEvent = {\n      name: `${GM_PREFIX}:create`,\n      actionType: payload.actionType,\n      action: payload.action,\n      shape: payload.mode,\n      feature: payload.featureData,\n      map: this.map,\n    };\n    await this.fireToMap({ type: 'converted', eventName: 'create', payload: eventData });\n  }\n\n  async forwardFeatureRemoved(payload: GmEditFeatureRemovedEvent) {\n    const eventData: FeatureRemovedFwdEvent = {\n      name: `${GM_PREFIX}:remove`,\n      actionType: payload.actionType,\n      action: payload.action,\n      shape: payload.mode,\n      feature: payload.featureData,\n      map: this.map,\n    };\n    await this.fireToMap({ type: 'converted', eventName: 'remove', payload: eventData });\n  }\n\n  async forwardFeatureUpdated(payload: GmEditFeatureUpdatedEvent) {\n    const modeName = this.getConvertedEditModeName(payload.mode);\n    const multiFeatureMode: Array<ModeName> = ['lasso'];\n    const featuresPayload: FeatureUpdatedFwdEvent = {\n      name: `${GM_PREFIX}:${modeName}`,\n      actionType: payload.actionType,\n      action: payload.action,\n      map: this.map,\n    };\n\n    if (payload.sourceFeatures.length === 1 && !multiFeatureMode.includes(payload.mode)) {\n      featuresPayload.originalFeature = payload.sourceFeatures[0];\n    } else {\n      featuresPayload.originalFeatures = payload.sourceFeatures;\n    }\n\n    if (payload.targetFeatures.length === 1 && !multiFeatureMode.includes(payload.mode)) {\n      featuresPayload.feature = payload.targetFeatures[0];\n      featuresPayload.shape = featuresPayload.feature.shape;\n    } else {\n      featuresPayload.features = payload.targetFeatures;\n    }\n\n    await this.fireToMap({ type: 'converted', eventName: `${modeName}`, payload: featuresPayload });\n  }\n\n  async forwardFeatureEditStart(payload: GmEditFeatureEditStartEvent) {\n    const modeName = this.getConvertedEditModeName(payload.mode);\n    const eventData: FeatureEditStartFwdEvent = {\n      name: `${GM_PREFIX}:${modeName}start`,\n      actionType: payload.actionType,\n      action: payload.action,\n      shape: payload.feature.shape,\n      feature: payload.feature,\n      map: this.map,\n    };\n    await this.fireToMap({ type: 'converted', eventName: `${modeName}start`, payload: eventData });\n  }\n\n  async forwardFeatureEditEnd(payload: GmEditFeatureEditEndEvent) {\n    const modeName = this.getConvertedEditModeName(payload.mode);\n    const eventData: FeatureEditEndFwdEvent = {\n      name: `${GM_PREFIX}:${modeName}end`,\n      actionType: payload.actionType,\n      action: payload.action,\n      shape: payload.feature.shape,\n      feature: payload.feature,\n      map: this.map,\n    };\n    await this.fireToMap({ type: 'converted', eventName: `${modeName}end`, payload: eventData });\n  }\n\n  async forwardGeomanLoaded(inputPayload: GmControlLoadEvent) {\n    const payload: SystemFwdEvent = {\n      name: `${GM_PREFIX}:${inputPayload.action}`,\n      actionType: inputPayload.actionType,\n      action: inputPayload.action,\n      map: this.map,\n      [GM_PREFIX]: this.gm,\n    };\n\n    await this.fireToMap({\n      type: 'converted',\n      eventName: `${payload.action}`,\n      payload,\n    });\n  }\n\n  async fireToMap({\n    type,\n    eventName,\n    payload,\n  }:\n    | { type: 'system'; eventName: GmEventNameWithoutPrefix; payload: GmSystemEvent }\n    | { type: 'converted'; eventName: GmFwdEventName; payload: GmEvent }): Promise<void> {\n    const prefix = type === 'system' ? GM_SYSTEM_PREFIX : GM_PREFIX;\n    const eventNameWithPrefix = `${prefix}:${eventName}`;\n\n    // Wait for pending source updates when the setting is enabled and\n    // the payload contains a feature with a source. This ensures feature\n    // data is accessible in event handlers via exportGeoJson().\n    // Users can disable this via settings.awaitDataUpdatesOnEvents for faster async updates.\n    const shouldAwaitUpdates =\n      this.gm.options.settings.awaitDataUpdatesOnEvents &&\n      'feature' in payload &&\n      payload.feature?.source;\n\n    if (shouldAwaitUpdates) {\n      // Wait for MapLibre to commit pending data updates before firing the event\n      const sourceName = payload.feature!.source.id as FeatureSourceName;\n      await this.gm.features.updateManager.waitForPendingUpdates(sourceName);\n    }\n\n    this.globalEventsListener?.(payload);\n    this.gm.mapAdapter.fire(eventNameWithPrefix as AnyEventName, payload);\n  }\n\n  getConvertedEditModeName(mode: EditModeName): FwdEditModeName {\n    return mode === 'change' ? 'edit' : mode;\n  }\n}\n","import type { GmControlSwitchEvent } from '@/types/index.ts';\nimport { isGmEvent } from '@/utils/guards/events/index.ts';\nimport { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\n\nexport const isGmControlEvent = (payload: unknown): payload is GmControlSwitchEvent => {\n  return isGmEvent(payload) && payload.name === `${GM_SYSTEM_PREFIX}:control:switch`;\n};\n","import type { GmSystemEvent } from '@/main.ts';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\n\nexport const isGmEvent = (payload: unknown): payload is GmSystemEvent => {\n  const fields: Array<keyof GmSystemEvent> = ['level', 'name', 'actionType', 'action'];\n\n  return !!(\n    payload &&\n    typeof payload === 'object' &&\n    fields.every((fieldName) => fieldName in payload)\n  );\n};\n\nexport const isBaseMapEvent = (payload: unknown): payload is BaseMapEvent => {\n  const fields: Array<keyof BaseMapEvent> = ['type', 'originalEvent', 'target'];\n\n  return !!(\n    payload &&\n    typeof payload === 'object' &&\n    fields.every((fieldName) => fieldName in payload)\n  );\n};\n\nexport { isGmControlEvent } from '@/utils/guards/events/control.ts';\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { EventForwarder } from '@/core/events/forwarder.ts';\nimport type {\n  AnyEventName,\n  EventControls,\n  EventHandlers,\n  Geoman,\n  GmEvent,\n  GmEventHadler,\n  GmEventHandlersWithControl,\n  GmEventName,\n  GmSystemEvent,\n  MapEventHadler,\n  MapEventHandlersWithControl,\n  MapEventName,\n} from '@/main.ts';\nimport { isBaseMapEvent, isGmEvent } from '@/utils/guards/events/index.ts';\nimport { typedKeys } from '@/utils/typing.ts';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\nimport log from 'loglevel';\n\nexport class EventBus {\n  gm: Geoman;\n  forwarder: EventForwarder;\n  mapEventHandlers: MapEventHandlersWithControl = {};\n  gmEventHandlers: GmEventHandlersWithControl = {};\n\n  constructor(gm: Geoman) {\n    this.gm = gm;\n    this.forwarder = new EventForwarder(gm);\n  }\n\n  // Track pending event forwarding to maintain event ordering\n  // Events are processed sequentially to ensure dragstart fires before drag, etc.\n  private pendingForward: Promise<void> = Promise.resolve();\n\n  fireEvent(eventName: GmEventName, payload: GmSystemEvent) {\n    const eventHandler = this.gmEventHandlers[eventName];\n    if (!eventHandler) {\n      return;\n    }\n\n    const { controlHandler } = eventHandler;\n    controlHandler(payload);\n\n    // Chain event forwarding to maintain order\n    // This ensures dragstart completes before drag events are forwarded\n    this.pendingForward = this.pendingForward.then(() =>\n      this.forwarder.processEvent(eventName, payload),\n    );\n  }\n\n  attachEvents(handlers: EventHandlers) {\n    typedKeys(handlers).forEach((eventName) => {\n      const handler = handlers[eventName];\n      if (handler) {\n        this.on(eventName, handler);\n      }\n    });\n  }\n\n  detachEvents(handlers: EventHandlers) {\n    typedKeys(handlers).forEach((eventName) => {\n      const handler = handlers[eventName];\n      if (handler) {\n        this.off(eventName, handler);\n      }\n    });\n  }\n\n  detachAllEvents() {\n    typedKeys(this.gmEventHandlers).forEach((gmEventName) => {\n      const handlers = Array.from(this.gmEventHandlers[gmEventName]?.handlers || []);\n      handlers.forEach((handler) => {\n        this.off(gmEventName, handler);\n      });\n    });\n\n    typedKeys(this.mapEventHandlers).forEach((mapEventName) => {\n      const handlers = Array.from(this.mapEventHandlers[mapEventName]?.handlers || []);\n      handlers.forEach((handler) => {\n        this.off(mapEventName, handler);\n      });\n    });\n  }\n\n  on(eventName: AnyEventName, handler: MapEventHadler | GmEventHadler) {\n    if (eventName.startsWith(GM_SYSTEM_PREFIX)) {\n      this.onGmEvent(eventName as GmEventName, handler as GmEventHadler);\n    } else {\n      this.onMapEvent(eventName as MapEventName, handler as MapEventHadler);\n    }\n  }\n\n  onGmEvent(eventName: GmEventName, handler: GmEventHadler) {\n    if (!this.gmEventHandlers[eventName]) {\n      this.gmEventHandlers[eventName] = this.createEventSection(eventName);\n    }\n    this.gmEventHandlers[eventName]?.handlers.unshift(handler);\n  }\n\n  onMapEvent(eventName: MapEventName, handler: MapEventHadler) {\n    if (!this.mapEventHandlers[eventName]) {\n      const eventSection = this.createEventSection(eventName);\n      this.gm.mapAdapter.on(eventName, eventSection.controlHandler);\n      this.mapEventHandlers[eventName] = eventSection;\n    }\n    this.mapEventHandlers[eventName]?.handlers.unshift(handler);\n  }\n\n  off(eventName: AnyEventName, handler: GmEventHadler | MapEventHadler) {\n    if (eventName.startsWith(`${GM_SYSTEM_PREFIX}`)) {\n      this.offGmEvent(eventName as GmEventName, handler as GmEventHadler);\n    } else {\n      this.offMapEvent(eventName as MapEventName, handler as MapEventHadler);\n    }\n  }\n\n  offGmEvent(eventName: GmEventName, handler: GmEventHadler) {\n    const eventHandlers = this.gmEventHandlers[eventName]?.handlers || [];\n    const handlerIndex = eventHandlers.findIndex((handlerItem) => handler === handlerItem);\n\n    if (handlerIndex === -1) {\n      log.warn('MapEvents: handler not found', eventName, handler);\n    } else {\n      eventHandlers.splice(handlerIndex, 1);\n      if (eventHandlers.length === 0) {\n        delete this.gmEventHandlers[eventName];\n      }\n    }\n  }\n\n  offMapEvent(eventName: MapEventName, handler: MapEventHadler) {\n    const eventHandlers = this.mapEventHandlers[eventName]?.handlers || [];\n    const handlerIndex = eventHandlers.findIndex((handlerItem) => handler === handlerItem);\n\n    if (handlerIndex === -1) {\n      log.warn('MapEvents: handler not found', eventName, handler);\n    } else {\n      eventHandlers.splice(handlerIndex, 1);\n      if (eventHandlers.length === 0) {\n        const controlHandler = this.mapEventHandlers[eventName]?.controlHandler;\n        if (controlHandler) {\n          this.gm.mapAdapter.off(eventName, controlHandler);\n        }\n        delete this.mapEventHandlers[eventName];\n      }\n    }\n  }\n\n  createEventSection(eventName: MapEventName | GmEventName) {\n    return {\n      handlers: [],\n      controlHandler: (event: GmSystemEvent | GmEvent | BaseMapEvent) => {\n        let eventHandler: EventControls;\n        if (isGmEvent(event) && eventName.startsWith(`${GM_SYSTEM_PREFIX}`)) {\n          eventHandler = this.gmEventHandlers[eventName as GmEventName];\n        } else {\n          eventHandler = this.mapEventHandlers[eventName as MapEventName];\n        }\n        if (!eventHandler) {\n          log.debug(`No handlers for eventName: \"${eventName}\"`);\n          return;\n        }\n\n        // controlHandler calls all handlers for the events type\n        eventHandler.handlers.some((handlerItem: GmEventHadler | MapEventHadler) => {\n          let result;\n          if (isGmEvent(event)) {\n            result = (handlerItem as GmEventHadler)(event);\n          } else if (isBaseMapEvent(event)) {\n            result = (handlerItem as MapEventHadler)(event);\n          } else {\n            log.error('EventsBus: unknown event type', event);\n          }\n\n          if (result && typeof result === 'object' && 'next' in result) {\n            // if handler returns \"{next: false}\", then don't call the next handler\n            return !result.next; // true means \"stop calling the next handlers\" here\n          } else {\n            log.error('EventsBus: handler should return an object with a \"next\" property');\n            return false; // don't prevent the next handler\n          }\n        });\n      },\n    };\n  }\n}\n","import {\n  type ActionType,\n  type ControlOptions,\n  type GenericSystemControl,\n  type Geoman,\n  type GmControlSwitchEvent,\n  type GmDrawModeEvent,\n  type GmEditModeEvent,\n  type GmSystemEvent,\n  type GmHelperModeEvent,\n  type ModeName,\n  isGmModeEvent,\n} from '@/main.ts';\nimport { isGmControlEvent } from '@/utils/guards/events/index.ts';\nimport log from 'loglevel';\n\nexport abstract class BaseEventListener {\n  gm: Geoman;\n\n  protected constructor(gm: Geoman) {\n    this.gm = gm;\n  }\n\n  trackExclusiveModes(payload: GmSystemEvent) {\n    // if an exclusive mode is started, turn off all other exclusive modes\n    if (payload.action !== 'mode_start') {\n      return;\n    }\n\n    const { sectionName: currentSectionName, modeName: currentModeName } =\n      this.getControlIds(payload) || {};\n\n    const control = this.getControl(payload);\n    if (!control?.settings.exclusive) {\n      return;\n    }\n\n    this.gm.control.eachControlWithOptions((item) => {\n      const actionType = item.control.type;\n      const targetMode = item.control.targetMode;\n\n      if (actionType === currentSectionName && targetMode === currentModeName) {\n        return;\n      }\n\n      if (item.controlOptions.active && item.control.settings.exclusive) {\n        this.gm.options.disableMode(actionType, targetMode);\n      }\n    });\n  }\n\n  trackRelatedModes(payload: GmSystemEvent) {\n    if (!isGmModeEvent(payload)) {\n      return;\n    }\n\n    this.gm.control.eachControlWithOptions((item) => {\n      const control = item.control;\n      const { type: actionType, targetMode: modeName } = control;\n\n      if (control.settings.enabledBy?.includes(payload.mode)) {\n        if (payload.action === 'mode_start') {\n          if (this.gm.options.isModeEnabled(actionType, modeName)) {\n            // disable a mode if it's enabled already\n            // log.debug(`force disable ${actionType}:${modeName}`);\n            this.gm.options.disableMode(actionType, modeName);\n          }\n          this.gm.options.enableMode(actionType, modeName);\n        } else if (payload.action === 'mode_end') {\n          this.gm.options.disableMode(actionType, modeName);\n        } else {\n          log.error('Unknown mode action', payload.action);\n        }\n      }\n    });\n  }\n\n  getControl(\n    payload: GmDrawModeEvent | GmEditModeEvent | GmHelperModeEvent | GmControlSwitchEvent,\n  ): GenericSystemControl | null {\n    const { modeName, sectionName } = this.getControlIds(payload) || {};\n\n    if (modeName && sectionName) {\n      return this.gm.control.getControl({ modeType: sectionName, modeName });\n    }\n\n    return null;\n  }\n\n  getControlOptions(\n    payload: GmDrawModeEvent | GmEditModeEvent | GmHelperModeEvent | GmControlSwitchEvent,\n  ): ControlOptions | null {\n    const { modeName, sectionName } = this.getControlIds(payload) || {};\n\n    if (modeName && sectionName) {\n      return this.gm.options.getControlOptions({ modeType: sectionName, modeName });\n    }\n\n    return null;\n  }\n\n  getControlIds(\n    payload: GmDrawModeEvent | GmEditModeEvent | GmHelperModeEvent | GmControlSwitchEvent,\n  ) {\n    let sectionName: ActionType | null = null;\n    let modeName: ModeName | null = null;\n\n    if (payload.action === 'mode_start') {\n      sectionName = payload.actionType;\n      modeName = payload.mode;\n    } else if (isGmControlEvent(payload)) {\n      sectionName = payload.section;\n      modeName = payload.mode;\n    }\n\n    return sectionName && modeName ? { sectionName, modeName } : null;\n  }\n}\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { EventBus } from '@/core/events/bus.ts';\nimport { BaseEventListener } from '@/core/events/listeners/base.ts';\nimport type { EventHandlers, Geoman, GmSystemEvent } from '@/main.ts';\nimport { isGmControlEvent } from '@/utils/guards/events/control.ts';\nimport log from 'loglevel';\n\nexport class ControlEventListener extends BaseEventListener {\n  eventHandlers: EventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:control`]: this.handleControlEvent.bind(this),\n  };\n\n  constructor(gm: Geoman, bus: EventBus) {\n    super(gm);\n    bus.attachEvents(this.eventHandlers);\n  }\n\n  handleControlEvent(payload: GmSystemEvent) {\n    // doesn't handle loaded/unloaded control events\n    if (!isGmControlEvent(payload)) {\n      return { next: true };\n    }\n\n    const control = this.getControl(payload);\n    if (!control) {\n      log.error('Control not found, event payload', payload);\n    }\n    return { next: true };\n  }\n}\n","export const MODE_TYPES = ['draw', 'edit', 'helper'] as const;\nexport const ACTION_TYPES = [...MODE_TYPES, 'control'] as const;\n\nexport const SHAPE_NAMES = [\n  // shapes\n  'marker',\n  'circle',\n  'circle_marker',\n  'ellipse',\n  'text_marker',\n  'line',\n  'rectangle',\n  'polygon',\n] as const;\n\nexport const SPECIAL_SHAPE_NAMES = [\n  'dom_marker',\n  'vertex_marker',\n  'center_marker',\n  'edge_marker',\n  'snap_guide',\n] as const;\n\nexport const ALL_SHAPE_NAMES = [...SHAPE_NAMES, ...SPECIAL_SHAPE_NAMES] as const;\n\nexport const EXTRA_DRAW_MODES = ['freehand', 'custom_shape'] as const;\n\nexport const DRAW_MODES = [...SHAPE_NAMES, ...EXTRA_DRAW_MODES] as const;\n\nexport const HELPER_MODES = [\n  'shape_markers',\n  'pin',\n  'snapping',\n  'snap_guides',\n  'measurements',\n  'auto_trace',\n  'geofencing',\n  'zoom_to_features',\n  'click_to_edit',\n] as const;\n\nexport const EDIT_MODES = [\n  'drag',\n  'change',\n  'rotate',\n  'scale',\n  'copy',\n  'cut',\n  'split',\n  'union',\n  'difference',\n  'line_simplification',\n  'lasso',\n  'delete',\n] as const;\n","import type { LngLatTuple } from '@/types';\n\nexport const isLngLat = (value: unknown): value is LngLatTuple => {\n  return (\n    Array.isArray(value) &&\n    value.length === 2 &&\n    typeof value[0] === 'number' &&\n    typeof value[1] === 'number'\n  );\n};\n","import type { FeatureId, FeatureShape, FeatureShapeProperties, LngLatTuple } from '@/types';\nimport { includesWithType } from '@/utils/typing.ts';\nimport { ALL_SHAPE_NAMES } from '@/modes/constants.ts';\nimport { isLngLat } from '@/utils/guards/geojson.ts';\n\nimport type { PropertyValidator } from '@/types/utils.ts';\n\nexport const propertyValidators: {\n  [K in keyof Required<FeatureShapeProperties>]: PropertyValidator<\n    NonNullable<FeatureShapeProperties[K]>\n  >;\n} = {\n  id: (value: unknown): value is FeatureId =>\n    typeof value === 'string' || typeof value === 'number',\n\n  shape: (value: unknown): value is FeatureShape =>\n    typeof value === 'string' && includesWithType(value, ALL_SHAPE_NAMES),\n\n  center: (value: unknown): value is LngLatTuple => isLngLat(value),\n\n  xSemiAxis: (value: unknown): value is number => typeof value === 'number',\n\n  ySemiAxis: (value: unknown): value is number => typeof value === 'number',\n\n  angle: (value: unknown): value is number => typeof value === 'number',\n\n  text: (value: unknown): value is string => typeof value === 'string',\n\n  disableEdit: (value: unknown): value is boolean => typeof value === 'boolean',\n};\n","import type { LngLatTuple } from '@/main.ts';\nimport log from 'loglevel';\n\nexport abstract class BaseDomMarker<TMarkerInstance = unknown> {\n  abstract markerInstance: TMarkerInstance | null;\n\n  abstract getElement(): HTMLElement | null;\n\n  abstract setLngLat(lngLat: LngLatTuple): void;\n\n  abstract getLngLat(): LngLatTuple;\n\n  abstract remove(): void;\n\n  isMarkerInstanceAvailable(): this is { markerInstance: TMarkerInstance } {\n    if (this.markerInstance) {\n      return true;\n    }\n\n    log.error('Marker instance is not available');\n    return false;\n  }\n}\n","// index.ts\nvar earthRadius = 63710088e-1;\nvar factors = {\n  centimeters: earthRadius * 100,\n  centimetres: earthRadius * 100,\n  degrees: 360 / (2 * Math.PI),\n  feet: earthRadius * 3.28084,\n  inches: earthRadius * 39.37,\n  kilometers: earthRadius / 1e3,\n  kilometres: earthRadius / 1e3,\n  meters: earthRadius,\n  metres: earthRadius,\n  miles: earthRadius / 1609.344,\n  millimeters: earthRadius * 1e3,\n  millimetres: earthRadius * 1e3,\n  nauticalmiles: earthRadius / 1852,\n  radians: 1,\n  yards: earthRadius * 1.0936\n};\nvar areaFactors = {\n  acres: 247105e-9,\n  centimeters: 1e4,\n  centimetres: 1e4,\n  feet: 10.763910417,\n  hectares: 1e-4,\n  inches: 1550.003100006,\n  kilometers: 1e-6,\n  kilometres: 1e-6,\n  meters: 1,\n  metres: 1,\n  miles: 386e-9,\n  nauticalmiles: 29155334959812285e-23,\n  millimeters: 1e6,\n  millimetres: 1e6,\n  yards: 1.195990046\n};\nfunction feature(geom, properties, options = {}) {\n  const feat = { type: \"Feature\" };\n  if (options.id === 0 || options.id) {\n    feat.id = options.id;\n  }\n  if (options.bbox) {\n    feat.bbox = options.bbox;\n  }\n  feat.properties = properties || {};\n  feat.geometry = geom;\n  return feat;\n}\nfunction geometry(type, coordinates, _options = {}) {\n  switch (type) {\n    case \"Point\":\n      return point(coordinates).geometry;\n    case \"LineString\":\n      return lineString(coordinates).geometry;\n    case \"Polygon\":\n      return polygon(coordinates).geometry;\n    case \"MultiPoint\":\n      return multiPoint(coordinates).geometry;\n    case \"MultiLineString\":\n      return multiLineString(coordinates).geometry;\n    case \"MultiPolygon\":\n      return multiPolygon(coordinates).geometry;\n    default:\n      throw new Error(type + \" is invalid\");\n  }\n}\nfunction point(coordinates, properties, options = {}) {\n  if (!coordinates) {\n    throw new Error(\"coordinates is required\");\n  }\n  if (!Array.isArray(coordinates)) {\n    throw new Error(\"coordinates must be an Array\");\n  }\n  if (coordinates.length < 2) {\n    throw new Error(\"coordinates must be at least 2 numbers long\");\n  }\n  if (!isNumber(coordinates[0]) || !isNumber(coordinates[1])) {\n    throw new Error(\"coordinates must contain numbers\");\n  }\n  const geom = {\n    type: \"Point\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction points(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return point(coords, properties);\n    }),\n    options\n  );\n}\nfunction polygon(coordinates, properties, options = {}) {\n  for (const ring of coordinates) {\n    if (ring.length < 4) {\n      throw new Error(\n        \"Each LinearRing of a Polygon must have 4 or more Positions.\"\n      );\n    }\n    if (ring[ring.length - 1].length !== ring[0].length) {\n      throw new Error(\"First and last Position are not equivalent.\");\n    }\n    for (let j = 0; j < ring[ring.length - 1].length; j++) {\n      if (ring[ring.length - 1][j] !== ring[0][j]) {\n        throw new Error(\"First and last Position are not equivalent.\");\n      }\n    }\n  }\n  const geom = {\n    type: \"Polygon\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction polygons(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return polygon(coords, properties);\n    }),\n    options\n  );\n}\nfunction lineString(coordinates, properties, options = {}) {\n  if (coordinates.length < 2) {\n    throw new Error(\"coordinates must be an array of two or more positions\");\n  }\n  const geom = {\n    type: \"LineString\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction lineStrings(coordinates, properties, options = {}) {\n  return featureCollection(\n    coordinates.map((coords) => {\n      return lineString(coords, properties);\n    }),\n    options\n  );\n}\nfunction featureCollection(features, options = {}) {\n  const fc = { type: \"FeatureCollection\" };\n  if (options.id) {\n    fc.id = options.id;\n  }\n  if (options.bbox) {\n    fc.bbox = options.bbox;\n  }\n  fc.features = features;\n  return fc;\n}\nfunction multiLineString(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiLineString\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction multiPoint(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiPoint\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction multiPolygon(coordinates, properties, options = {}) {\n  const geom = {\n    type: \"MultiPolygon\",\n    coordinates\n  };\n  return feature(geom, properties, options);\n}\nfunction geometryCollection(geometries, properties, options = {}) {\n  const geom = {\n    type: \"GeometryCollection\",\n    geometries\n  };\n  return feature(geom, properties, options);\n}\nfunction round(num, precision = 0) {\n  if (precision && !(precision >= 0)) {\n    throw new Error(\"precision must be a positive number\");\n  }\n  const multiplier = Math.pow(10, precision || 0);\n  return Math.round(num * multiplier) / multiplier;\n}\nfunction radiansToLength(radians, units = \"kilometers\") {\n  const factor = factors[units];\n  if (!factor) {\n    throw new Error(units + \" units is invalid\");\n  }\n  return radians * factor;\n}\nfunction lengthToRadians(distance, units = \"kilometers\") {\n  const factor = factors[units];\n  if (!factor) {\n    throw new Error(units + \" units is invalid\");\n  }\n  return distance / factor;\n}\nfunction lengthToDegrees(distance, units) {\n  return radiansToDegrees(lengthToRadians(distance, units));\n}\nfunction bearingToAzimuth(bearing) {\n  let angle = bearing % 360;\n  if (angle < 0) {\n    angle += 360;\n  }\n  return angle;\n}\nfunction azimuthToBearing(angle) {\n  angle = angle % 360;\n  if (angle > 180) {\n    return angle - 360;\n  } else if (angle < -180) {\n    return angle + 360;\n  }\n  return angle;\n}\nfunction radiansToDegrees(radians) {\n  const normalisedRadians = radians % (2 * Math.PI);\n  return normalisedRadians * 180 / Math.PI;\n}\nfunction degreesToRadians(degrees) {\n  const normalisedDegrees = degrees % 360;\n  return normalisedDegrees * Math.PI / 180;\n}\nfunction convertLength(length, originalUnit = \"kilometers\", finalUnit = \"kilometers\") {\n  if (!(length >= 0)) {\n    throw new Error(\"length must be a positive number\");\n  }\n  return radiansToLength(lengthToRadians(length, originalUnit), finalUnit);\n}\nfunction convertArea(area, originalUnit = \"meters\", finalUnit = \"kilometers\") {\n  if (!(area >= 0)) {\n    throw new Error(\"area must be a positive number\");\n  }\n  const startFactor = areaFactors[originalUnit];\n  if (!startFactor) {\n    throw new Error(\"invalid original units\");\n  }\n  const finalFactor = areaFactors[finalUnit];\n  if (!finalFactor) {\n    throw new Error(\"invalid final units\");\n  }\n  return area / startFactor * finalFactor;\n}\nfunction isNumber(num) {\n  return !isNaN(num) && num !== null && !Array.isArray(num);\n}\nfunction isObject(input) {\n  return input !== null && typeof input === \"object\" && !Array.isArray(input);\n}\nfunction validateBBox(bbox) {\n  if (!bbox) {\n    throw new Error(\"bbox is required\");\n  }\n  if (!Array.isArray(bbox)) {\n    throw new Error(\"bbox must be an Array\");\n  }\n  if (bbox.length !== 4 && bbox.length !== 6) {\n    throw new Error(\"bbox must be an Array of 4 or 6 numbers\");\n  }\n  bbox.forEach((num) => {\n    if (!isNumber(num)) {\n      throw new Error(\"bbox must only contain numbers\");\n    }\n  });\n}\nfunction validateId(id) {\n  if (!id) {\n    throw new Error(\"id is required\");\n  }\n  if ([\"string\", \"number\"].indexOf(typeof id) === -1) {\n    throw new Error(\"id must be a number or a string\");\n  }\n}\nexport {\n  areaFactors,\n  azimuthToBearing,\n  bearingToAzimuth,\n  convertArea,\n  convertLength,\n  degreesToRadians,\n  earthRadius,\n  factors,\n  feature,\n  featureCollection,\n  geometry,\n  geometryCollection,\n  isNumber,\n  isObject,\n  lengthToDegrees,\n  lengthToRadians,\n  lineString,\n  lineStrings,\n  multiLineString,\n  multiPoint,\n  multiPolygon,\n  point,\n  points,\n  polygon,\n  polygons,\n  radiansToDegrees,\n  radiansToLength,\n  round,\n  validateBBox,\n  validateId\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { feature, point, lineString, isObject } from \"@turf/helpers\";\nfunction coordEach(geojson, callback, excludeWrapCoord) {\n  if (geojson === null) return;\n  var j, k, l, geometry, stopG, coords, geometryMaybeCollection, wrapShrink = 0, coordIndex = 0, isGeometryCollection, type = geojson.type, isFeatureCollection = type === \"FeatureCollection\", isFeature = type === \"Feature\", stop = isFeatureCollection ? geojson.features.length : 1;\n  for (var featureIndex = 0; featureIndex < stop; featureIndex++) {\n    geometryMaybeCollection = isFeatureCollection ? (\n      // @ts-expect-error: Known type conflict\n      geojson.features[featureIndex].geometry\n    ) : isFeature ? (\n      // @ts-expect-error: Known type conflict\n      geojson.geometry\n    ) : geojson;\n    isGeometryCollection = geometryMaybeCollection ? geometryMaybeCollection.type === \"GeometryCollection\" : false;\n    stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n    for (var geomIndex = 0; geomIndex < stopG; geomIndex++) {\n      var multiFeatureIndex = 0;\n      var geometryIndex = 0;\n      geometry = isGeometryCollection ? geometryMaybeCollection.geometries[geomIndex] : geometryMaybeCollection;\n      if (geometry === null) continue;\n      coords = geometry.coordinates;\n      var geomType = geometry.type;\n      wrapShrink = excludeWrapCoord && (geomType === \"Polygon\" || geomType === \"MultiPolygon\") ? 1 : 0;\n      switch (geomType) {\n        case null:\n          break;\n        case \"Point\":\n          if (\n            // @ts-expect-error: Known type conflict\n            callback(\n              coords,\n              coordIndex,\n              featureIndex,\n              multiFeatureIndex,\n              geometryIndex\n            ) === false\n          )\n            return false;\n          coordIndex++;\n          multiFeatureIndex++;\n          break;\n        case \"LineString\":\n        case \"MultiPoint\":\n          for (j = 0; j < coords.length; j++) {\n            if (\n              // @ts-expect-error: Known type conflict\n              callback(\n                coords[j],\n                coordIndex,\n                featureIndex,\n                multiFeatureIndex,\n                geometryIndex\n              ) === false\n            )\n              return false;\n            coordIndex++;\n            if (geomType === \"MultiPoint\") multiFeatureIndex++;\n          }\n          if (geomType === \"LineString\") multiFeatureIndex++;\n          break;\n        case \"Polygon\":\n        case \"MultiLineString\":\n          for (j = 0; j < coords.length; j++) {\n            for (k = 0; k < coords[j].length - wrapShrink; k++) {\n              if (\n                // @ts-expect-error: Known type conflict\n                callback(\n                  coords[j][k],\n                  coordIndex,\n                  featureIndex,\n                  multiFeatureIndex,\n                  geometryIndex\n                ) === false\n              )\n                return false;\n              coordIndex++;\n            }\n            if (geomType === \"MultiLineString\") multiFeatureIndex++;\n            if (geomType === \"Polygon\") geometryIndex++;\n          }\n          if (geomType === \"Polygon\") multiFeatureIndex++;\n          break;\n        case \"MultiPolygon\":\n          for (j = 0; j < coords.length; j++) {\n            geometryIndex = 0;\n            for (k = 0; k < coords[j].length; k++) {\n              for (l = 0; l < coords[j][k].length - wrapShrink; l++) {\n                if (\n                  // @ts-expect-error: Known type conflict\n                  callback(\n                    coords[j][k][l],\n                    coordIndex,\n                    featureIndex,\n                    multiFeatureIndex,\n                    geometryIndex\n                  ) === false\n                )\n                  return false;\n                coordIndex++;\n              }\n              geometryIndex++;\n            }\n            multiFeatureIndex++;\n          }\n          break;\n        case \"GeometryCollection\":\n          for (j = 0; j < geometry.geometries.length; j++)\n            if (\n              // @ts-expect-error: Known type conflict\n              coordEach(geometry.geometries[j], callback, excludeWrapCoord) === false\n            )\n              return false;\n          break;\n        default:\n          throw new Error(\"Unknown Geometry Type\");\n      }\n    }\n  }\n}\nfunction coordReduce(geojson, callback, initialValue, excludeWrapCoord) {\n  var previousValue = initialValue;\n  coordEach(\n    geojson,\n    function(currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n      if (coordIndex === 0 && initialValue === void 0)\n        previousValue = currentCoord;\n      else\n        previousValue = callback(\n          // @ts-expect-error: Known type conflict\n          previousValue,\n          currentCoord,\n          coordIndex,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex\n        );\n    },\n    excludeWrapCoord\n  );\n  return previousValue;\n}\nfunction propEach(geojson, callback) {\n  var i;\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      for (i = 0; i < geojson.features.length; i++) {\n        if (callback(geojson.features[i].properties, i) === false) break;\n      }\n      break;\n    case \"Feature\":\n      callback(geojson.properties, 0);\n      break;\n  }\n}\nfunction propReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  propEach(geojson, function(currentProperties, featureIndex) {\n    if (featureIndex === 0 && initialValue === void 0)\n      previousValue = currentProperties;\n    else\n      previousValue = callback(previousValue, currentProperties, featureIndex);\n  });\n  return previousValue;\n}\nfunction featureEach(geojson, callback) {\n  if (geojson.type === \"Feature\") {\n    callback(geojson, 0);\n  } else if (geojson.type === \"FeatureCollection\") {\n    for (var i = 0; i < geojson.features.length; i++) {\n      if (callback(geojson.features[i], i) === false) break;\n    }\n  }\n}\nfunction featureReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  featureEach(geojson, function(currentFeature, featureIndex) {\n    if (featureIndex === 0 && initialValue === void 0)\n      previousValue = currentFeature;\n    else previousValue = callback(previousValue, currentFeature, featureIndex);\n  });\n  return previousValue;\n}\nfunction coordAll(geojson) {\n  var coords = [];\n  coordEach(geojson, function(coord) {\n    coords.push(coord);\n  });\n  return coords;\n}\nfunction geomEach(geojson, callback) {\n  var i, j, g, geometry, stopG, geometryMaybeCollection, isGeometryCollection, featureProperties, featureBBox, featureId, featureIndex = 0, isFeatureCollection = geojson.type === \"FeatureCollection\", isFeature = geojson.type === \"Feature\", stop = isFeatureCollection ? geojson.features.length : 1;\n  for (i = 0; i < stop; i++) {\n    geometryMaybeCollection = isFeatureCollection ? (\n      // @ts-expect-error: Known type conflict\n      geojson.features[i].geometry\n    ) : isFeature ? (\n      // @ts-expect-error: Known type conflict\n      geojson.geometry\n    ) : geojson;\n    featureProperties = isFeatureCollection ? (\n      // @ts-expect-error: Known type conflict\n      geojson.features[i].properties\n    ) : isFeature ? (\n      // @ts-expect-error: Known type conflict\n      geojson.properties\n    ) : {};\n    featureBBox = isFeatureCollection ? (\n      // @ts-expect-error: Known type conflict\n      geojson.features[i].bbox\n    ) : isFeature ? (\n      // @ts-expect-error: Known type conflict\n      geojson.bbox\n    ) : void 0;\n    featureId = isFeatureCollection ? (\n      // @ts-expect-error: Known type conflict\n      geojson.features[i].id\n    ) : isFeature ? (\n      // @ts-expect-error: Known type conflict\n      geojson.id\n    ) : void 0;\n    isGeometryCollection = geometryMaybeCollection ? geometryMaybeCollection.type === \"GeometryCollection\" : false;\n    stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n    for (g = 0; g < stopG; g++) {\n      geometry = isGeometryCollection ? geometryMaybeCollection.geometries[g] : geometryMaybeCollection;\n      if (geometry === null) {\n        if (\n          // @ts-expect-error: Known type conflict\n          callback(\n            // @ts-expect-error: Known type conflict\n            null,\n            featureIndex,\n            featureProperties,\n            featureBBox,\n            featureId\n          ) === false\n        )\n          return false;\n        continue;\n      }\n      switch (geometry.type) {\n        case \"Point\":\n        case \"LineString\":\n        case \"MultiPoint\":\n        case \"Polygon\":\n        case \"MultiLineString\":\n        case \"MultiPolygon\": {\n          if (\n            // @ts-expect-error: Known type conflict\n            callback(\n              geometry,\n              featureIndex,\n              featureProperties,\n              featureBBox,\n              featureId\n            ) === false\n          )\n            return false;\n          break;\n        }\n        case \"GeometryCollection\": {\n          for (j = 0; j < geometry.geometries.length; j++) {\n            if (\n              // @ts-expect-error: Known type conflict\n              callback(\n                geometry.geometries[j],\n                featureIndex,\n                featureProperties,\n                featureBBox,\n                featureId\n              ) === false\n            )\n              return false;\n          }\n          break;\n        }\n        default:\n          throw new Error(\"Unknown Geometry Type\");\n      }\n    }\n    featureIndex++;\n  }\n}\nfunction geomReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  geomEach(\n    geojson,\n    function(currentGeometry, featureIndex, featureProperties, featureBBox, featureId) {\n      if (featureIndex === 0 && initialValue === void 0)\n        previousValue = currentGeometry;\n      else\n        previousValue = callback(\n          // @ts-expect-error: Known type conflict\n          previousValue,\n          currentGeometry,\n          featureIndex,\n          featureProperties,\n          featureBBox,\n          featureId\n        );\n    }\n  );\n  return previousValue;\n}\nfunction flattenEach(geojson, callback) {\n  geomEach(geojson, function(geometry, featureIndex, properties, bbox, id) {\n    var type = geometry === null ? null : geometry.type;\n    switch (type) {\n      case null:\n      case \"Point\":\n      case \"LineString\":\n      case \"Polygon\":\n        if (\n          // @ts-expect-error: Known type conflict\n          callback(\n            feature(geometry, properties, { bbox, id }),\n            featureIndex,\n            0\n          ) === false\n        )\n          return false;\n        return;\n    }\n    var geomType;\n    switch (type) {\n      case \"MultiPoint\":\n        geomType = \"Point\";\n        break;\n      case \"MultiLineString\":\n        geomType = \"LineString\";\n        break;\n      case \"MultiPolygon\":\n        geomType = \"Polygon\";\n        break;\n    }\n    for (\n      var multiFeatureIndex = 0;\n      // @ts-expect-error: Known type conflict\n      multiFeatureIndex < geometry.coordinates.length;\n      multiFeatureIndex++\n    ) {\n      var coordinate = geometry.coordinates[multiFeatureIndex];\n      var geom = {\n        type: geomType,\n        coordinates: coordinate\n      };\n      if (\n        // @ts-expect-error: Known type conflict\n        callback(feature(geom, properties), featureIndex, multiFeatureIndex) === false\n      )\n        return false;\n    }\n  });\n}\nfunction flattenReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  flattenEach(\n    geojson,\n    function(currentFeature, featureIndex, multiFeatureIndex) {\n      if (featureIndex === 0 && multiFeatureIndex === 0 && initialValue === void 0)\n        previousValue = currentFeature;\n      else\n        previousValue = callback(\n          // @ts-expect-error: Known type conflict\n          previousValue,\n          currentFeature,\n          featureIndex,\n          multiFeatureIndex\n        );\n    }\n  );\n  return previousValue;\n}\nfunction segmentEach(geojson, callback) {\n  flattenEach(geojson, function(feature2, featureIndex, multiFeatureIndex) {\n    var segmentIndex = 0;\n    if (!feature2.geometry) return;\n    var type = feature2.geometry.type;\n    if (type === \"Point\" || type === \"MultiPoint\") return;\n    var previousCoords;\n    var previousFeatureIndex = 0;\n    var previousMultiIndex = 0;\n    var prevGeomIndex = 0;\n    if (\n      // @ts-expect-error: Known type conflict\n      coordEach(\n        feature2,\n        function(currentCoord, coordIndex, featureIndexCoord, multiPartIndexCoord, geometryIndex) {\n          if (\n            // @ts-expect-error: Known type conflict\n            previousCoords === void 0 || featureIndex > previousFeatureIndex || multiPartIndexCoord > previousMultiIndex || geometryIndex > prevGeomIndex\n          ) {\n            previousCoords = currentCoord;\n            previousFeatureIndex = featureIndex;\n            previousMultiIndex = multiPartIndexCoord;\n            prevGeomIndex = geometryIndex;\n            segmentIndex = 0;\n            return;\n          }\n          var currentSegment = lineString(\n            // @ts-expect-error: Known type conflict\n            [previousCoords, currentCoord],\n            feature2.properties\n          );\n          if (\n            // @ts-expect-error: Known type conflict\n            callback(\n              // @ts-expect-error: Known type conflict\n              currentSegment,\n              featureIndex,\n              multiFeatureIndex,\n              geometryIndex,\n              segmentIndex\n            ) === false\n          )\n            return false;\n          segmentIndex++;\n          previousCoords = currentCoord;\n        }\n      ) === false\n    )\n      return false;\n  });\n}\nfunction segmentReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  var started = false;\n  segmentEach(\n    geojson,\n    function(currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) {\n      if (started === false && initialValue === void 0)\n        previousValue = currentSegment;\n      else\n        previousValue = callback(\n          previousValue,\n          // @ts-expect-error: Known type conflict\n          currentSegment,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex,\n          segmentIndex\n        );\n      started = true;\n    }\n  );\n  return previousValue;\n}\nfunction lineEach(geojson, callback) {\n  if (!geojson) throw new Error(\"geojson is required\");\n  flattenEach(geojson, function(feature2, featureIndex, multiFeatureIndex) {\n    if (feature2.geometry === null) return;\n    var type = feature2.geometry.type;\n    var coords = feature2.geometry.coordinates;\n    switch (type) {\n      case \"LineString\":\n        if (callback(feature2, featureIndex, multiFeatureIndex, 0, 0) === false)\n          return false;\n        break;\n      case \"Polygon\":\n        for (var geometryIndex = 0; geometryIndex < coords.length; geometryIndex++) {\n          if (\n            // @ts-expect-error: Known type conflict\n            callback(\n              // @ts-expect-error: Known type conflict\n              lineString(coords[geometryIndex], feature2.properties),\n              featureIndex,\n              multiFeatureIndex,\n              geometryIndex\n            ) === false\n          )\n            return false;\n        }\n        break;\n    }\n  });\n}\nfunction lineReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  lineEach(\n    geojson,\n    function(currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n      if (featureIndex === 0 && initialValue === void 0)\n        previousValue = currentLine;\n      else\n        previousValue = callback(\n          previousValue,\n          currentLine,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex\n        );\n    }\n  );\n  return previousValue;\n}\nfunction findSegment(geojson, options) {\n  options = options || {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  var featureIndex = options.featureIndex || 0;\n  var multiFeatureIndex = options.multiFeatureIndex || 0;\n  var geometryIndex = options.geometryIndex || 0;\n  var segmentIndex = options.segmentIndex || 0;\n  var properties = options.properties;\n  var geometry;\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      if (featureIndex < 0)\n        featureIndex = geojson.features.length + featureIndex;\n      properties = properties || geojson.features[featureIndex].properties;\n      geometry = geojson.features[featureIndex].geometry;\n      break;\n    case \"Feature\":\n      properties = properties || geojson.properties;\n      geometry = geojson.geometry;\n      break;\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n    case \"Polygon\":\n    case \"MultiLineString\":\n    case \"MultiPolygon\":\n      geometry = geojson;\n      break;\n    default:\n      throw new Error(\"geojson is invalid\");\n  }\n  if (geometry === null) return null;\n  var coords = geometry.coordinates;\n  switch (geometry.type) {\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n      if (segmentIndex < 0) segmentIndex = coords.length + segmentIndex - 1;\n      return lineString(\n        // @ts-expect-error: Known type conflict\n        [coords[segmentIndex], coords[segmentIndex + 1]],\n        properties,\n        options\n      );\n    case \"Polygon\":\n      if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n      if (segmentIndex < 0)\n        segmentIndex = coords[geometryIndex].length + segmentIndex - 1;\n      return lineString(\n        [\n          // @ts-expect-error: Known type conflict\n          coords[geometryIndex][segmentIndex],\n          // @ts-expect-error: Known type conflict\n          coords[geometryIndex][segmentIndex + 1]\n        ],\n        properties,\n        options\n      );\n    case \"MultiLineString\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (segmentIndex < 0)\n        segmentIndex = coords[multiFeatureIndex].length + segmentIndex - 1;\n      return lineString(\n        [\n          // @ts-expect-error: Known type conflict\n          coords[multiFeatureIndex][segmentIndex],\n          // @ts-expect-error: Known type conflict\n          coords[multiFeatureIndex][segmentIndex + 1]\n        ],\n        properties,\n        options\n      );\n    case \"MultiPolygon\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (geometryIndex < 0)\n        geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n      if (segmentIndex < 0)\n        segmentIndex = // @ts-expect-error: Known type conflict\n        coords[multiFeatureIndex][geometryIndex].length - segmentIndex - 1;\n      return lineString(\n        [\n          // @ts-expect-error: Known type conflict\n          coords[multiFeatureIndex][geometryIndex][segmentIndex],\n          // @ts-expect-error: Known type conflict\n          coords[multiFeatureIndex][geometryIndex][segmentIndex + 1]\n        ],\n        properties,\n        options\n      );\n  }\n  throw new Error(\"geojson is invalid\");\n}\nfunction findPoint(geojson, options) {\n  options = options || {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  var featureIndex = options.featureIndex || 0;\n  var multiFeatureIndex = options.multiFeatureIndex || 0;\n  var geometryIndex = options.geometryIndex || 0;\n  var coordIndex = options.coordIndex || 0;\n  var properties = options.properties;\n  var geometry;\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      if (featureIndex < 0)\n        featureIndex = geojson.features.length + featureIndex;\n      properties = properties || geojson.features[featureIndex].properties;\n      geometry = geojson.features[featureIndex].geometry;\n      break;\n    case \"Feature\":\n      properties = properties || geojson.properties;\n      geometry = geojson.geometry;\n      break;\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n    case \"Polygon\":\n    case \"MultiLineString\":\n    case \"MultiPolygon\":\n      geometry = geojson;\n      break;\n    default:\n      throw new Error(\"geojson is invalid\");\n  }\n  if (geometry === null) return null;\n  var coords = geometry.coordinates;\n  switch (geometry.type) {\n    case \"Point\":\n      return point(coords, properties, options);\n    case \"MultiPoint\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      return point(coords[multiFeatureIndex], properties, options);\n    case \"LineString\":\n      if (coordIndex < 0) coordIndex = coords.length + coordIndex;\n      return point(coords[coordIndex], properties, options);\n    case \"Polygon\":\n      if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n      if (coordIndex < 0)\n        coordIndex = coords[geometryIndex].length + coordIndex;\n      return point(coords[geometryIndex][coordIndex], properties, options);\n    case \"MultiLineString\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (coordIndex < 0)\n        coordIndex = coords[multiFeatureIndex].length + coordIndex;\n      return point(coords[multiFeatureIndex][coordIndex], properties, options);\n    case \"MultiPolygon\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (geometryIndex < 0)\n        geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n      if (coordIndex < 0)\n        coordIndex = coords[multiFeatureIndex][geometryIndex].length - coordIndex;\n      return point(\n        coords[multiFeatureIndex][geometryIndex][coordIndex],\n        properties,\n        options\n      );\n  }\n  throw new Error(\"geojson is invalid\");\n}\nexport {\n  coordAll,\n  coordEach,\n  coordReduce,\n  featureEach,\n  featureReduce,\n  findPoint,\n  findSegment,\n  flattenEach,\n  flattenReduce,\n  geomEach,\n  geomReduce,\n  lineEach,\n  lineReduce,\n  propEach,\n  propReduce,\n  segmentEach,\n  segmentReduce\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { coordEach } from \"@turf/meta\";\nfunction bbox(geojson, options = {}) {\n  if (geojson.bbox != null && true !== options.recompute) {\n    return geojson.bbox;\n  }\n  const result = [Infinity, Infinity, -Infinity, -Infinity];\n  coordEach(geojson, (coord) => {\n    if (result[0] > coord[0]) {\n      result[0] = coord[0];\n    }\n    if (result[1] > coord[1]) {\n      result[1] = coord[1];\n    }\n    if (result[2] < coord[0]) {\n      result[2] = coord[0];\n    }\n    if (result[3] < coord[1]) {\n      result[3] = coord[1];\n    }\n  });\n  return result;\n}\nvar index_default = bbox;\nexport {\n  bbox,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { isNumber } from \"@turf/helpers\";\nfunction getCoord(coord) {\n  if (!coord) {\n    throw new Error(\"coord is required\");\n  }\n  if (!Array.isArray(coord)) {\n    if (coord.type === \"Feature\" && coord.geometry !== null && coord.geometry.type === \"Point\") {\n      return [...coord.geometry.coordinates];\n    }\n    if (coord.type === \"Point\") {\n      return [...coord.coordinates];\n    }\n  }\n  if (Array.isArray(coord) && coord.length >= 2 && !Array.isArray(coord[0]) && !Array.isArray(coord[1])) {\n    return [...coord];\n  }\n  throw new Error(\"coord must be GeoJSON Point or an Array of numbers\");\n}\nfunction getCoords(coords) {\n  if (Array.isArray(coords)) {\n    return coords;\n  }\n  if (coords.type === \"Feature\") {\n    if (coords.geometry !== null) {\n      return coords.geometry.coordinates;\n    }\n  } else {\n    if (coords.coordinates) {\n      return coords.coordinates;\n    }\n  }\n  throw new Error(\n    \"coords must be GeoJSON Feature, Geometry Object or an Array\"\n  );\n}\nfunction containsNumber(coordinates) {\n  if (coordinates.length > 1 && isNumber(coordinates[0]) && isNumber(coordinates[1])) {\n    return true;\n  }\n  if (Array.isArray(coordinates[0]) && coordinates[0].length) {\n    return containsNumber(coordinates[0]);\n  }\n  throw new Error(\"coordinates must only contain numbers\");\n}\nfunction geojsonType(value, type, name) {\n  if (!type || !name) {\n    throw new Error(\"type and name required\");\n  }\n  if (!value || value.type !== type) {\n    throw new Error(\n      \"Invalid input to \" + name + \": must be a \" + type + \", given \" + value.type\n    );\n  }\n}\nfunction featureOf(feature, type, name) {\n  if (!feature) {\n    throw new Error(\"No feature passed\");\n  }\n  if (!name) {\n    throw new Error(\".featureOf() requires a name\");\n  }\n  if (!feature || feature.type !== \"Feature\" || !feature.geometry) {\n    throw new Error(\n      \"Invalid input to \" + name + \", Feature with geometry required\"\n    );\n  }\n  if (!feature.geometry || feature.geometry.type !== type) {\n    throw new Error(\n      \"Invalid input to \" + name + \": must be a \" + type + \", given \" + feature.geometry.type\n    );\n  }\n}\nfunction collectionOf(featureCollection, type, name) {\n  if (!featureCollection) {\n    throw new Error(\"No featureCollection passed\");\n  }\n  if (!name) {\n    throw new Error(\".collectionOf() requires a name\");\n  }\n  if (!featureCollection || featureCollection.type !== \"FeatureCollection\") {\n    throw new Error(\n      \"Invalid input to \" + name + \", FeatureCollection required\"\n    );\n  }\n  for (const feature of featureCollection.features) {\n    if (!feature || feature.type !== \"Feature\" || !feature.geometry) {\n      throw new Error(\n        \"Invalid input to \" + name + \", Feature with geometry required\"\n      );\n    }\n    if (!feature.geometry || feature.geometry.type !== type) {\n      throw new Error(\n        \"Invalid input to \" + name + \": must be a \" + type + \", given \" + feature.geometry.type\n      );\n    }\n  }\n}\nfunction getGeom(geojson) {\n  if (geojson.type === \"Feature\") {\n    return geojson.geometry;\n  }\n  return geojson;\n}\nfunction getType(geojson, _name) {\n  if (geojson.type === \"FeatureCollection\") {\n    return \"FeatureCollection\";\n  }\n  if (geojson.type === \"GeometryCollection\") {\n    return \"GeometryCollection\";\n  }\n  if (geojson.type === \"Feature\" && geojson.geometry !== null) {\n    return geojson.geometry.type;\n  }\n  return geojson.type;\n}\nexport {\n  collectionOf,\n  containsNumber,\n  featureOf,\n  geojsonType,\n  getCoord,\n  getCoords,\n  getGeom,\n  getType\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport {\n  degreesToRadians,\n  lengthToRadians,\n  point,\n  radiansToDegrees\n} from \"@turf/helpers\";\nimport { getCoord } from \"@turf/invariant\";\nfunction destination(origin, distance, bearing, options = {}) {\n  const coordinates1 = getCoord(origin);\n  const longitude1 = degreesToRadians(coordinates1[0]);\n  const latitude1 = degreesToRadians(coordinates1[1]);\n  const bearingRad = degreesToRadians(bearing);\n  const radians = lengthToRadians(distance, options.units);\n  const latitude2 = Math.asin(\n    Math.sin(latitude1) * Math.cos(radians) + Math.cos(latitude1) * Math.sin(radians) * Math.cos(bearingRad)\n  );\n  const longitude2 = longitude1 + Math.atan2(\n    Math.sin(bearingRad) * Math.sin(radians) * Math.cos(latitude1),\n    Math.cos(radians) - Math.sin(latitude1) * Math.sin(latitude2)\n  );\n  const lng = radiansToDegrees(longitude2);\n  const lat = radiansToDegrees(latitude2);\n  if (coordinates1[2] !== void 0) {\n    return point([lng, lat, coordinates1[2]], options.properties);\n  }\n  return point([lng, lat], options.properties);\n}\nvar index_default = destination;\nexport {\n  index_default as default,\n  destination\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { destination } from \"@turf/destination\";\nimport { polygon } from \"@turf/helpers\";\nfunction circle(center, radius, options = {}) {\n  const steps = options.steps || 64;\n  const properties = options.properties ? options.properties : !Array.isArray(center) && center.type === \"Feature\" && center.properties ? center.properties : {};\n  const coordinates = [];\n  for (let i = 0; i < steps; i++) {\n    coordinates.push(\n      destination(center, radius, i * -360 / steps, options).geometry.coordinates\n    );\n  }\n  coordinates.push(coordinates[0]);\n  return polygon([coordinates], properties);\n}\nvar index_default = circle;\nexport {\n  circle,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { point } from \"@turf/helpers\";\nimport { coordEach } from \"@turf/meta\";\nfunction centroid(geojson, options = {}) {\n  let xSum = 0;\n  let ySum = 0;\n  let len = 0;\n  coordEach(\n    geojson,\n    function(coord) {\n      xSum += coord[0];\n      ySum += coord[1];\n      len++;\n    },\n    true\n  );\n  return point([xSum / len, ySum / len], options.properties);\n}\nvar index_default = centroid;\nexport {\n  centroid,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { degreesToRadians, radiansToDegrees } from \"@turf/helpers\";\nimport { getCoord } from \"@turf/invariant\";\nfunction rhumbBearing(start, end, options = {}) {\n  let bear360;\n  if (options.final) {\n    bear360 = calculateRhumbBearing(getCoord(end), getCoord(start));\n  } else {\n    bear360 = calculateRhumbBearing(getCoord(start), getCoord(end));\n  }\n  const bear180 = bear360 > 180 ? -(360 - bear360) : bear360;\n  return bear180;\n}\nfunction calculateRhumbBearing(from, to) {\n  const phi1 = degreesToRadians(from[1]);\n  const phi2 = degreesToRadians(to[1]);\n  let deltaLambda = degreesToRadians(to[0] - from[0]);\n  if (deltaLambda > Math.PI) {\n    deltaLambda -= 2 * Math.PI;\n  }\n  if (deltaLambda < -Math.PI) {\n    deltaLambda += 2 * Math.PI;\n  }\n  const deltaPsi = Math.log(\n    Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4)\n  );\n  const theta = Math.atan2(deltaLambda, deltaPsi);\n  return (radiansToDegrees(theta) + 360) % 360;\n}\nvar index_default = rhumbBearing;\nexport {\n  index_default as default,\n  rhumbBearing\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { convertLength, earthRadius } from \"@turf/helpers\";\nimport { getCoord } from \"@turf/invariant\";\nfunction rhumbDistance(from, to, options = {}) {\n  const origin = getCoord(from);\n  const destination = getCoord(to);\n  destination[0] += destination[0] - origin[0] > 180 ? -360 : origin[0] - destination[0] > 180 ? 360 : 0;\n  const distanceInMeters = calculateRhumbDistance(origin, destination);\n  const distance = convertLength(distanceInMeters, \"meters\", options.units);\n  return distance;\n}\nfunction calculateRhumbDistance(origin, destination, radius) {\n  radius = radius === void 0 ? earthRadius : Number(radius);\n  const R = radius;\n  const phi1 = origin[1] * Math.PI / 180;\n  const phi2 = destination[1] * Math.PI / 180;\n  const DeltaPhi = phi2 - phi1;\n  let DeltaLambda = Math.abs(destination[0] - origin[0]) * Math.PI / 180;\n  if (DeltaLambda > Math.PI) {\n    DeltaLambda -= 2 * Math.PI;\n  }\n  const DeltaPsi = Math.log(\n    Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4)\n  );\n  const q = Math.abs(DeltaPsi) > 1e-11 ? DeltaPhi / DeltaPsi : Math.cos(phi1);\n  const delta = Math.sqrt(\n    DeltaPhi * DeltaPhi + q * q * DeltaLambda * DeltaLambda\n  );\n  const dist = delta * R;\n  return dist;\n}\nvar index_default = rhumbDistance;\nexport {\n  index_default as default,\n  rhumbDistance\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport {\n  convertLength,\n  degreesToRadians,\n  earthRadius,\n  point\n} from \"@turf/helpers\";\nimport { getCoord } from \"@turf/invariant\";\nfunction rhumbDestination(origin, distance, bearing, options = {}) {\n  const wasNegativeDistance = distance < 0;\n  let distanceInMeters = convertLength(\n    Math.abs(distance),\n    options.units,\n    \"meters\"\n  );\n  if (wasNegativeDistance) distanceInMeters = -Math.abs(distanceInMeters);\n  const coords = getCoord(origin);\n  const destination = calculateRhumbDestination(\n    coords,\n    distanceInMeters,\n    bearing\n  );\n  destination[0] += destination[0] - coords[0] > 180 ? -360 : coords[0] - destination[0] > 180 ? 360 : 0;\n  return point(destination, options.properties);\n}\nfunction calculateRhumbDestination(origin, distance, bearing, radius) {\n  radius = radius === void 0 ? earthRadius : Number(radius);\n  const delta = distance / radius;\n  const lambda1 = origin[0] * Math.PI / 180;\n  const phi1 = degreesToRadians(origin[1]);\n  const theta = degreesToRadians(bearing);\n  const DeltaPhi = delta * Math.cos(theta);\n  let phi2 = phi1 + DeltaPhi;\n  if (Math.abs(phi2) > Math.PI / 2) {\n    phi2 = phi2 > 0 ? Math.PI - phi2 : -Math.PI - phi2;\n  }\n  const DeltaPsi = Math.log(\n    Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4)\n  );\n  const q = Math.abs(DeltaPsi) > 1e-11 ? DeltaPhi / DeltaPsi : Math.cos(phi1);\n  const DeltaLambda = delta * Math.sin(theta) / q;\n  const lambda2 = lambda1 + DeltaLambda;\n  return [\n    (lambda2 * 180 / Math.PI + 540) % 360 - 180,\n    phi2 * 180 / Math.PI\n  ];\n}\nvar index_default = rhumbDestination;\nexport {\n  index_default as default,\n  rhumbDestination\n};\n//# sourceMappingURL=index.js.map","// index.ts\nfunction clone(geojson) {\n  if (!geojson) {\n    throw new Error(\"geojson is required\");\n  }\n  switch (geojson.type) {\n    case \"Feature\":\n      return cloneFeature(geojson);\n    case \"FeatureCollection\":\n      return cloneFeatureCollection(geojson);\n    case \"Point\":\n    case \"LineString\":\n    case \"Polygon\":\n    case \"MultiPoint\":\n    case \"MultiLineString\":\n    case \"MultiPolygon\":\n    case \"GeometryCollection\":\n      return cloneGeometry(geojson);\n    default:\n      throw new Error(\"unknown GeoJSON type\");\n  }\n}\nfunction cloneFeature(geojson) {\n  const cloned = { type: \"Feature\" };\n  Object.keys(geojson).forEach((key) => {\n    switch (key) {\n      case \"type\":\n      case \"properties\":\n      case \"geometry\":\n        return;\n      default:\n        cloned[key] = geojson[key];\n    }\n  });\n  cloned.properties = cloneProperties(geojson.properties);\n  if (geojson.geometry == null) {\n    cloned.geometry = null;\n  } else {\n    cloned.geometry = cloneGeometry(geojson.geometry);\n  }\n  return cloned;\n}\nfunction cloneProperties(properties) {\n  const cloned = {};\n  if (!properties) {\n    return cloned;\n  }\n  Object.keys(properties).forEach((key) => {\n    const value = properties[key];\n    if (typeof value === \"object\") {\n      if (value === null) {\n        cloned[key] = null;\n      } else if (Array.isArray(value)) {\n        cloned[key] = value.map((item) => {\n          return item;\n        });\n      } else {\n        cloned[key] = cloneProperties(value);\n      }\n    } else {\n      cloned[key] = value;\n    }\n  });\n  return cloned;\n}\nfunction cloneFeatureCollection(geojson) {\n  const cloned = { type: \"FeatureCollection\" };\n  Object.keys(geojson).forEach((key) => {\n    switch (key) {\n      case \"type\":\n      case \"features\":\n        return;\n      default:\n        cloned[key] = geojson[key];\n    }\n  });\n  cloned.features = geojson.features.map((feature) => {\n    return cloneFeature(feature);\n  });\n  return cloned;\n}\nfunction cloneGeometry(geometry) {\n  const geom = { type: geometry.type };\n  if (geometry.bbox) {\n    geom.bbox = geometry.bbox;\n  }\n  if (geometry.type === \"GeometryCollection\") {\n    geom.geometries = geometry.geometries.map((g) => {\n      return cloneGeometry(g);\n    });\n    return geom;\n  }\n  geom.coordinates = deepSlice(geometry.coordinates);\n  return geom;\n}\nfunction deepSlice(coords) {\n  const cloned = coords;\n  if (typeof cloned[0] !== \"object\") {\n    return cloned.slice();\n  }\n  return cloned.map((coord) => {\n    return deepSlice(coord);\n  });\n}\nvar index_default = clone;\nexport {\n  clone,\n  cloneProperties,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { centroid } from \"@turf/centroid\";\nimport { rhumbBearing } from \"@turf/rhumb-bearing\";\nimport { rhumbDistance } from \"@turf/rhumb-distance\";\nimport { rhumbDestination } from \"@turf/rhumb-destination\";\nimport { clone } from \"@turf/clone\";\nimport { coordEach } from \"@turf/meta\";\nimport { getCoords } from \"@turf/invariant\";\nimport { isObject } from \"@turf/helpers\";\nfunction transformRotate(geojson, angle, options) {\n  options = options || {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  const pivot = options.pivot;\n  const mutate = options.mutate;\n  if (!geojson) throw new Error(\"geojson is required\");\n  if (angle === void 0 || angle === null || isNaN(angle))\n    throw new Error(\"angle is required\");\n  if (angle === 0) return geojson;\n  const pivotCoord = pivot != null ? pivot : centroid(geojson);\n  if (mutate === false || mutate === void 0) geojson = clone(geojson);\n  coordEach(geojson, function(pointCoords) {\n    const initialAngle = rhumbBearing(pivotCoord, pointCoords);\n    const finalAngle = initialAngle + angle;\n    const distance = rhumbDistance(pivotCoord, pointCoords);\n    const newCoords = getCoords(\n      rhumbDestination(pivotCoord, distance, finalAngle)\n    );\n    pointCoords[0] = newCoords[0];\n    pointCoords[1] = newCoords[1];\n  });\n  return geojson;\n}\nvar index_default = transformRotate;\nexport {\n  index_default as default,\n  transformRotate\n};\n//# sourceMappingURL=index.js.map","import {\n  polygon,\n  isObject,\n  isNumber,\n  type Coord,\n  type Units,\n  point,\n  radiansToDegrees,\n} from '@turf/helpers';\nimport { destination } from '@turf/destination';\nimport { transformRotate } from '@turf/transform-rotate';\nimport { getCoord } from '@turf/invariant';\nimport type { GeoJsonProperties, Feature, Polygon, Position } from 'geojson';\n\n/**\n * Included to resolve issues\n * https://github.com/Turfjs/turf/pull/2739\n */\n\n/**\n * Takes a {@link Point} and calculates the ellipse polygon given two semi-axes expressed in variable units and steps for precision.\n *\n * @param {Coord} center center point\n * @param {number} xSemiAxis semi (major) axis of the ellipse along the x-axis\n * @param {number} ySemiAxis semi (minor) axis of the ellipse along the y-axis\n * @param {Object} [options={}] Optional parameters\n * @param {number} [options.angle=0] angle of rotation in decimal degrees, positive clockwise\n * @param {Coord} [options.pivot=center] point around which any rotation will be performed\n * @param {number} [options.steps=64] number of steps\n * @param {Units} [options.units='kilometers'] unit of measurement for axes. Supports all valid Turf {@link https://turfjs.org/docs/api/types/Units Units}\n * @param {Object} [options.properties={}] properties\n * @returns {Feature<Polygon>} ellipse polygon\n * @example\n * var center = [-75, 40];\n * var xSemiAxis = 5;\n * var ySemiAxis = 2;\n * var ellipse = turf.ellipse(center, xSemiAxis, ySemiAxis);\n *\n * //addToMap\n * var addToMap = [turf.point(center), ellipse]\n */\n\nexport default function ellipse(\n  center: Coord,\n  xSemiAxis: number,\n  ySemiAxis: number,\n  options: {\n    steps?: number;\n    units?: Units;\n    angle?: number;\n    pivot?: Coord;\n    properties?: GeoJsonProperties;\n  },\n): Feature<Polygon> {\n  // Optional params\n  options = options || {};\n  let steps = options.steps || 64;\n  const units = options.units || 'kilometers';\n  let angle = options.angle || 0;\n  const pivot = options.pivot || center;\n  const properties = options.properties || {};\n  // validation\n  if (!center) throw new Error('center is required');\n  if (!xSemiAxis) throw new Error('xSemiAxis is required');\n  if (!ySemiAxis) throw new Error('ySemiAxis is required');\n  if (!isObject(options)) throw new Error('options must be an object');\n  if (!isNumber(steps)) throw new Error('steps must be a number');\n  if (!isNumber(angle)) throw new Error('angle must be a number');\n\n  const centerCoords = getCoord(transformRotate(point(getCoord(center)), angle, { pivot }));\n\n  angle = -90 + angle;\n\n  // Divide steps by 4 for one quadrant\n  steps = Math.ceil(steps / 4);\n\n  const quadrantParameters: number[] = [];\n  const parameters: number[] = [];\n\n  const a = xSemiAxis;\n  const b = ySemiAxis;\n\n  // Gradient x intersect\n  const c = b;\n\n  // Gradient of line\n  const m = (a - b) / (Math.PI / 2);\n\n  // Area under line\n  const A = ((a + b) * Math.PI) / 4;\n\n  // Weighting function\n  const v = 0.5;\n\n  const k = steps;\n\n  let w = 0;\n  let x = 0;\n\n  for (let i = 0; i < steps; i++) {\n    x += w;\n\n    if (m === 0) {\n      // It's a circle, so use simplified c*w - A/k == 0\n      w = A / k / c;\n    } else {\n      // Otherwise, use full (v*m)*w^2 + (m*x+c)*w - A/k == 0\n      // Solve as quadratic ax^2 + bx + c = 0\n      w =\n        (-(m * x + c) + Math.sqrt(Math.pow(m * x + c, 2) - 4 * (v * m) * -(A / k))) / (2 * (v * m));\n    }\n    if (x != 0) {\n      // easier to add it later to avoid having twice the same point\n      quadrantParameters.push(x);\n    }\n  }\n\n  //NE\n  parameters.push(0);\n  for (let i = 0; i < quadrantParameters.length; i++) {\n    parameters.push(quadrantParameters[i]);\n  }\n  //NW\n  parameters.push(Math.PI / 2);\n  for (let i = 0; i < quadrantParameters.length; i++) {\n    parameters.push(Math.PI - quadrantParameters[quadrantParameters.length - i - 1]);\n  }\n  //SW\n  parameters.push(Math.PI);\n  for (let i = 0; i < quadrantParameters.length; i++) {\n    parameters.push(Math.PI + quadrantParameters[i]);\n  }\n  //SE\n  parameters.push((3 * Math.PI) / 2);\n  for (let i = 0; i < quadrantParameters.length; i++) {\n    parameters.push(2 * Math.PI - quadrantParameters[quadrantParameters.length - i - 1]);\n  }\n  parameters.push(0);\n\n  // We can now construct the ellipse\n  const coords: Position[] = [];\n  for (const param of parameters) {\n    const theta = Math.atan2(b * Math.sin(param), a * Math.cos(param));\n    const r = Math.sqrt(\n      (Math.pow(a, 2) * Math.pow(b, 2)) /\n        (Math.pow(a * Math.sin(theta), 2) + Math.pow(b * Math.cos(theta), 2)),\n    );\n    coords.push(\n      destination(centerCoords, r, angle + radiansToDegrees(theta), {\n        units: units,\n      }).geometry.coordinates,\n    );\n  }\n\n  return polygon([coords], properties);\n}\n","// index.ts\nimport { degreesToRadians, radiansToDegrees } from \"@turf/helpers\";\nimport { getCoord } from \"@turf/invariant\";\nfunction bearing(start, end, options = {}) {\n  if (options.final === true) {\n    return calculateFinalBearing(start, end);\n  }\n  const coordinates1 = getCoord(start);\n  const coordinates2 = getCoord(end);\n  const lon1 = degreesToRadians(coordinates1[0]);\n  const lon2 = degreesToRadians(coordinates2[0]);\n  const lat1 = degreesToRadians(coordinates1[1]);\n  const lat2 = degreesToRadians(coordinates2[1]);\n  const a = Math.sin(lon2 - lon1) * Math.cos(lat2);\n  const b = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1);\n  return radiansToDegrees(Math.atan2(a, b));\n}\nfunction calculateFinalBearing(start, end) {\n  let bear = bearing(end, start);\n  bear = (bear + 180) % 360;\n  return bear;\n}\nvar index_default = bearing;\nexport {\n  bearing,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { getCoord } from \"@turf/invariant\";\nimport { radiansToLength, degreesToRadians } from \"@turf/helpers\";\nfunction distance(from, to, options = {}) {\n  var coordinates1 = getCoord(from);\n  var coordinates2 = getCoord(to);\n  var dLat = degreesToRadians(coordinates2[1] - coordinates1[1]);\n  var dLon = degreesToRadians(coordinates2[0] - coordinates1[0]);\n  var lat1 = degreesToRadians(coordinates1[1]);\n  var lat2 = degreesToRadians(coordinates2[1]);\n  var a = Math.pow(Math.sin(dLat / 2), 2) + Math.pow(Math.sin(dLon / 2), 2) * Math.cos(lat1) * Math.cos(lat2);\n  return radiansToLength(\n    2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)),\n    options.units\n  );\n}\nvar index_default = distance;\nexport {\n  index_default as default,\n  distance\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { featureCollection, lineString, multiLineString } from \"@turf/helpers\";\nimport { getGeom } from \"@turf/invariant\";\nfunction polygonToLine(poly, options = {}) {\n  const geom = getGeom(poly);\n  if (!options.properties && poly.type === \"Feature\") {\n    options.properties = poly.properties;\n  }\n  switch (geom.type) {\n    case \"Polygon\":\n      return singlePolygonToLine(geom, options);\n    case \"MultiPolygon\":\n      return multiPolygonToLine(geom, options);\n    default:\n      throw new Error(\"invalid poly\");\n  }\n}\nfunction singlePolygonToLine(poly, options = {}) {\n  const geom = getGeom(poly);\n  const coords = geom.coordinates;\n  const properties = options.properties ? options.properties : poly.type === \"Feature\" ? poly.properties : {};\n  return coordsToLine(coords, properties);\n}\nfunction multiPolygonToLine(multiPoly, options = {}) {\n  const geom = getGeom(multiPoly);\n  const coords = geom.coordinates;\n  const properties = options.properties ? options.properties : multiPoly.type === \"Feature\" ? multiPoly.properties : {};\n  const lines = [];\n  coords.forEach((coord) => {\n    lines.push(coordsToLine(coord, properties));\n  });\n  return featureCollection(lines);\n}\nfunction coordsToLine(coords, properties) {\n  if (coords.length > 1) {\n    return multiLineString(coords, properties);\n  }\n  return lineString(coords[0], properties);\n}\nvar index_default = polygonToLine;\nexport {\n  coordsToLine,\n  index_default as default,\n  multiPolygonToLine,\n  polygonToLine,\n  singlePolygonToLine\n};\n//# sourceMappingURL=index.js.map","import { FEATURE_PROPERTY_PREFIX } from '@/core/features/constants.ts';\nimport type {\n  CoordinateIndices,\n  GeoJsonShapeFeature,\n  GeoJsonShapeFeatureCollection,\n  LineBasedGeometry,\n  LngLatTuple,\n  LngLatDiff,\n  PositionData,\n  ScreenPoint,\n  SegmentPosition,\n  ShapeName,\n} from '@/main.ts';\nimport { typedKeys } from '@/utils/typing.ts';\nimport bbox from '@turf/bbox';\nimport turfCircle from '@turf/circle';\nimport turfEllipse from '@/turf/ellipse.ts';\nimport turfBearing from '@turf/bearing';\n\nimport { distance as turfDistance } from '@turf/distance';\nimport { coordEach as turfCoordEach } from '@turf/meta';\nimport { multiPolygonToLine, singlePolygonToLine } from '@turf/polygon-to-line';\nimport type {\n  BBox,\n  Feature,\n  FeatureCollection,\n  GeoJSON,\n  GeoJsonProperties,\n  LineString,\n  MultiLineString,\n  MultiPolygon,\n  Point,\n  Polygon,\n} from 'geojson';\nimport { get, isEqual } from 'lodash-es';\nimport log from 'loglevel';\nimport { lineString } from '@turf/helpers';\n\nexport const isEqualPosition = (position1: LngLatTuple, position2: LngLatTuple): boolean => {\n  return position1[0] === position2[0] && position1[1] === position2[1];\n};\n\nexport const isLineStringFeature = (\n  geoJson: Feature | FeatureCollection,\n): geoJson is Feature<LineString> => {\n  return geoJson.type === 'Feature' && geoJson.geometry.type === 'LineString';\n};\n\nexport const isMultiLineStringFeature = (\n  geoJson: Feature | FeatureCollection,\n): geoJson is Feature<MultiLineString> => {\n  return geoJson.type === 'Feature' && geoJson.geometry.type === 'MultiLineString';\n};\n\nexport const isPolygonFeature = (\n  geoJson: Feature | FeatureCollection,\n): geoJson is Feature<Polygon> => {\n  return geoJson.type === 'Feature' && geoJson.geometry.type === 'Polygon';\n};\n\nexport const isMultiPolygonFeature = (\n  geoJson: Feature | FeatureCollection,\n): geoJson is Feature<MultiPolygon> => {\n  return geoJson.type === 'Feature' && geoJson.geometry.type === 'MultiPolygon';\n};\n\nexport const multiLineStringToFeatureCollection = (\n  geoJson: Feature<MultiLineString>,\n): FeatureCollection<LineString> => {\n  return {\n    type: 'FeatureCollection',\n    features: geoJson.geometry.coordinates.map((lineCoordinates) => ({\n      type: 'Feature',\n      properties: geoJson.properties,\n      geometry: {\n        type: 'LineString',\n        coordinates: lineCoordinates,\n      },\n    })),\n  };\n};\n\nexport const getLngLatDiff = (startLngLat: LngLatTuple, endLngLat: LngLatTuple): LngLatDiff => ({\n  lng: endLngLat[0] - startLngLat[0],\n  lat: endLngLat[1] - startLngLat[1],\n});\n\nconst isPosition = (position: unknown): position is LngLatTuple =>\n  Array.isArray(position) &&\n  position.length >= 2 &&\n  position.length <= 3 &&\n  position.every((item) => typeof item === 'number');\n\nexport const eachCoordinateWithPath = (\n  geoJson: GeoJSON,\n  callback: (position: PositionData, index: number) => void,\n  skipClosingCoordinate: boolean = false,\n) => {\n  let counter = 0;\n  const nestedKeys = ['features', 'geometries', 'geometry', 'coordinates'] as const;\n\n  const traverseGeoJson = (\n    geoJsonItem: unknown,\n    currentPath: Array<string | number>,\n    isPolygon: boolean = false,\n  ) => {\n    if (isPosition(geoJsonItem)) {\n      callback({ coordinate: geoJsonItem, path: currentPath }, counter);\n      counter += 1;\n    } else if (Array.isArray(geoJsonItem)) {\n      geoJsonItem.forEach((subItem, index) => {\n        if (\n          isPolygon &&\n          skipClosingCoordinate &&\n          index === geoJsonItem.length - 1 &&\n          isPosition(subItem)\n        ) {\n          return;\n        }\n        traverseGeoJson(subItem, [...currentPath, index], isPolygon);\n      });\n    } else if (typeof geoJsonItem === 'object' && geoJsonItem !== null) {\n      typedKeys(geoJsonItem).forEach((key) => {\n        const subItem = geoJsonItem[key];\n        if (nestedKeys.includes(key) && subItem) {\n          const itemType = 'type' in geoJsonItem && geoJsonItem.type;\n          const nextIsPolygon = itemType === 'Polygon' || itemType === 'MultiPolygon';\n          traverseGeoJson(subItem, [...currentPath, key], nextIsPolygon);\n        }\n      });\n    }\n  };\n\n  traverseGeoJson(geoJson, []);\n};\n\nexport const findCoordinateWithPath = (geoJson: GeoJSON, coordinate: LngLatTuple) => {\n  let targetPosition: PositionData = { coordinate: [0, 0], path: [] };\n  let targetIndex: number = -1;\n\n  try {\n    eachCoordinateWithPath(geoJson, (position, index) => {\n      if (coordinate[0] === position.coordinate[0] && coordinate[1] === position.coordinate[1]) {\n        targetIndex = index;\n        targetPosition = position;\n        throw new Error('stop');\n      }\n    });\n  } catch {\n    if (targetPosition) {\n      return {\n        index: targetIndex,\n        coordinate: targetPosition.coordinate,\n        path: targetPosition.path,\n      };\n    }\n  }\n\n  return null;\n};\n\nexport const eachSegmentWithPath = (\n  geoJson: GeoJSON,\n  callback: (segment: SegmentPosition, index: number) => void,\n) => {\n  let counter = 0;\n  const nestedKeys = ['features', 'geometries', 'geometry', 'coordinates'] as const;\n\n  const traverseGeoJson = (\n    geoJsonItem: unknown,\n    nextGeoJsonItem: unknown | undefined,\n    currentPath: Array<string | number>,\n    nextPath: Array<string | number>,\n  ) => {\n    if (isPosition(geoJsonItem) && isPosition(nextGeoJsonItem)) {\n      callback(\n        {\n          start: { coordinate: [...geoJsonItem], path: currentPath },\n          end: { coordinate: [...nextGeoJsonItem], path: nextPath },\n        },\n        counter,\n      );\n      counter += 1;\n    } else if (Array.isArray(geoJsonItem)) {\n      geoJsonItem.forEach((subItem, index) => {\n        traverseGeoJson(\n          subItem,\n          geoJsonItem[index + 1],\n          [...currentPath, index],\n          [...currentPath, index + 1],\n        );\n      });\n    } else if (typeof geoJsonItem === 'object' && geoJsonItem !== null) {\n      typedKeys(geoJsonItem).forEach((key) => {\n        const subItem = geoJsonItem[key];\n        if (nestedKeys.includes(key) && subItem) {\n          traverseGeoJson(subItem, undefined, [...currentPath, key], []);\n        }\n      });\n    }\n  };\n\n  traverseGeoJson(geoJson, undefined, [], []);\n};\n\nexport const findCoordinateIndices = (geoJson: GeoJSON, lngLat: LngLatTuple): CoordinateIndices => {\n  let indices: CoordinateIndices = {\n    absCoordIndex: -1,\n    featureIndex: -1,\n    multiFeatureIndex: -1,\n    geometryIndex: -1,\n  };\n\n  try {\n    turfCoordEach(\n      geoJson,\n      (currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) => {\n        if (currentCoord[0] === lngLat[0] && currentCoord[1] === lngLat[1]) {\n          indices = { absCoordIndex: coordIndex, featureIndex, multiFeatureIndex, geometryIndex };\n          throw new Error('found');\n        }\n      },\n    );\n  } catch {\n    // ...\n  }\n  return indices;\n};\n\nexport const twoCoordsToLineString = (\n  position1: LngLatTuple,\n  position2: LngLatTuple,\n  properties: GeoJsonProperties = {},\n): Feature<LineString> => {\n  return {\n    type: 'Feature',\n    properties,\n    geometry: {\n      type: 'LineString',\n      coordinates: [position1, position2],\n    },\n  };\n};\n\nexport const getBboxFromTwoCoords = (lngLat1: LngLatTuple, lngLat2: LngLatTuple): BBox => {\n  const [lng1, lat1] = lngLat1;\n  const [lng2, lat2] = lngLat2;\n\n  const minX = Math.min(lng1, lng2);\n  const minY = Math.min(lat1, lat2);\n  const maxX = Math.max(lng1, lng2);\n  const maxY = Math.max(lat1, lat2);\n\n  return [minX, minY, maxX, maxY];\n};\n\nexport const twoCoordsToGeoJsonRectangle = (\n  lngLat1: LngLatTuple,\n  lngLat2: LngLatTuple,\n): GeoJsonShapeFeature => {\n  const bBox = getBboxFromTwoCoords(lngLat1, lngLat2);\n  const southWest = [bBox[0], bBox[1]];\n  const northEast = [bBox[2], bBox[3]];\n\n  const minX = southWest[0];\n  const minY = southWest[1];\n  const maxX = northEast[0];\n  const maxY = northEast[1];\n\n  return {\n    type: 'Feature',\n    properties: {\n      shape: 'rectangle',\n    },\n    geometry: {\n      type: 'Polygon',\n      coordinates: [\n        [\n          [minX, minY],\n          [maxX, minY],\n          [maxX, maxY],\n          [minX, maxY],\n          [minX, minY],\n        ],\n      ],\n    },\n  };\n};\n\nexport const geoJsonPointToLngLat = (geoJson: Feature<Point>): LngLatTuple => {\n  return [geoJson.geometry.coordinates[0], geoJson.geometry.coordinates[1]];\n};\n\nexport const getGeoJsonBounds = (geoJson: GeoJSON): [LngLatTuple, LngLatTuple] => {\n  const bounds = bbox(geoJson);\n\n  return [\n    [bounds[0], bounds[1]], // South-West (min-x, min-y)\n    [bounds[2], bounds[3]], // North-East (max-x, max-y)\n  ];\n};\n\nexport const boundsToBBox = (bounds: [LngLatTuple, LngLatTuple]): BBox => {\n  return [bounds[0][0], bounds[0][1], bounds[1][0], bounds[1][1]];\n};\n\nexport const bBoxContains = (bBoxBounds: BBox, lngLat: LngLatTuple): boolean => {\n  const [minX, minY, maxX, maxY] = bBoxBounds;\n  const [lng, lat] = lngLat;\n\n  return lng >= minX && lng <= maxX && lat >= minY && lat <= maxY;\n};\n\nexport const boundsContains = (\n  bounds: [LngLatTuple, LngLatTuple],\n  lngLat: LngLatTuple,\n): boolean => {\n  const bBoxBounds = boundsToBBox(bounds);\n  return bBoxContains(bBoxBounds, lngLat);\n};\n\nexport const getGeoJsonCoordinatesCount = (geoJson: GeoJSON): number => {\n  let count: number = 0;\n  turfCoordEach(\n    geoJson,\n    () => {\n      count += 1;\n    },\n    true,\n  );\n  return count;\n};\n\nexport const getAllGeoJsonCoordinates = (geoJson: GeoJSON): Array<LngLatTuple> => {\n  const coordinates: Array<LngLatTuple> = [];\n  turfCoordEach(\n    geoJson,\n    (coord) => {\n      coordinates.push([coord[0], coord[1]]);\n    },\n    true,\n  );\n  return coordinates;\n};\n\nexport const allCoordinatesEqual = (geoJson: GeoJSON): boolean => {\n  const featureLngLats: Array<LngLatTuple> = getAllGeoJsonCoordinates(geoJson);\n\n  // for now only checks if all points aren't the same\n  return featureLngLats.some((lngLat) => !isEqual(featureLngLats[0], lngLat));\n};\n\nexport const getGeoJsonFirstPoint = (shapeGeoJson: GeoJSON): LngLatTuple | null => {\n  let firstPoint: LngLatTuple | null = null;\n\n  try {\n    eachCoordinateWithPath(shapeGeoJson, (position) => {\n      firstPoint = position.coordinate;\n      throw new Error('found');\n    });\n  } catch {\n    return firstPoint;\n  }\n\n  return null;\n};\n\nexport const getEuclideanDistance = (point1: ScreenPoint, point2: ScreenPoint): number => {\n  return Math.sqrt((point1[0] - point2[0]) ** 2 + (point1[1] - point2[1]) ** 2);\n};\n\nexport const getEuclideanSegmentNearestPoint = (\n  linePoint1: ScreenPoint,\n  linePoint2: ScreenPoint,\n  targetPoint: ScreenPoint,\n): ScreenPoint => {\n  const [x1, y1] = [linePoint1[0], linePoint1[1]];\n  const [x2, y2] = [linePoint2[0], linePoint2[1]];\n  const [px, py] = [targetPoint[0], targetPoint[1]];\n\n  // Calculate vector components\n  const vx = x2 - x1;\n  const vy = y2 - y1;\n  const wx = px - x1;\n  const wy = py - y1;\n\n  // Calculate dot product and projection scalar\n  const c1 = wx * vx + wy * vy;\n  const c2 = vx * vx + vy * vy;\n  let b = c1 / c2;\n\n  // Clamp b between 0 and 1 to ensure the nearest point lies on the segment\n  b = Math.max(0, Math.min(1, b));\n\n  // Calculate nearest point\n  return [x1 + b * vx, y1 + b * vy];\n};\n\nexport const removeVertexFromLine = (\n  lineGeoJson: Feature<LineString>,\n  vertexLngLat: LngLatTuple,\n): boolean => {\n  const { absCoordIndex } = findCoordinateIndices(lineGeoJson, vertexLngLat);\n\n  if (absCoordIndex !== -1) {\n    lineGeoJson.geometry.coordinates.splice(absCoordIndex, 1);\n    return true;\n  }\n  return false;\n};\n\nexport const removeVertexFromPolygon = (\n  shapeGeoJson: Feature<Polygon>,\n  vertexLngLat: LngLatTuple,\n): boolean => {\n  const coordIndices = findCoordinateIndices(shapeGeoJson, vertexLngLat);\n\n  if (coordIndices.absCoordIndex !== -1) {\n    const coordinatesPath: [number] = [coordIndices.geometryIndex];\n    const coordinates = get(\n      shapeGeoJson.geometry.coordinates,\n      coordinatesPath,\n    ) as Array<LngLatTuple>;\n    const targetCoordIndex = coordinates.findIndex((coord) => isEqual(coord, vertexLngLat));\n\n    if (coordinates.length <= 4) {\n      shapeGeoJson.geometry.coordinates.splice(coordIndices.geometryIndex, 1);\n      return true;\n    }\n\n    coordinates.splice(targetCoordIndex, 1);\n    if (targetCoordIndex === 0) {\n      coordinates[coordinates.length - 1] = [...coordinates[0]];\n    }\n    return true;\n  }\n  return false;\n};\n\nexport const removeVertexFromMultiPolygon = (\n  shapeGeoJson: Feature<MultiPolygon>,\n  vertexLngLat: LngLatTuple,\n): boolean => {\n  const coordIndices = findCoordinateIndices(shapeGeoJson, vertexLngLat);\n\n  if (coordIndices.absCoordIndex !== -1) {\n    const coordinatesPath: LngLatTuple = [\n      coordIndices.multiFeatureIndex,\n      coordIndices.geometryIndex,\n    ];\n    const coordinates = get(\n      shapeGeoJson.geometry.coordinates,\n      coordinatesPath,\n    ) as Array<LngLatTuple>;\n    const targetCoordIndex = coordinates.findIndex((coord) => isEqual(coord, vertexLngLat));\n\n    if (coordinates.length <= 4) {\n      coordinatesPath.pop();\n      const coordinatesContainer = get(\n        shapeGeoJson.geometry.coordinates,\n        coordIndices.multiFeatureIndex,\n      ) as Array<Array<LngLatTuple>>;\n      coordinatesContainer.splice(coordIndices.geometryIndex, 1);\n\n      if (coordinatesContainer.length === 0) {\n        shapeGeoJson.geometry.coordinates.splice(coordIndices.multiFeatureIndex, 1);\n      }\n      return true;\n    }\n\n    coordinates.splice(targetCoordIndex, 1);\n    if (targetCoordIndex === 0) {\n      coordinates[coordinates.length - 1] = [...coordinates[0]];\n    }\n    return true;\n  }\n  return false;\n};\n\nexport const removeVertexFromGeoJsonFeature = (\n  shapeGeoJson: Feature<LineString | Polygon | MultiPolygon>,\n  vertexLngLat: LngLatTuple,\n): boolean => {\n  if (isLineStringFeature(shapeGeoJson)) {\n    return removeVertexFromLine(shapeGeoJson, vertexLngLat);\n  }\n\n  if (isPolygonFeature(shapeGeoJson)) {\n    return removeVertexFromPolygon(shapeGeoJson, vertexLngLat);\n  }\n\n  if (isMultiPolygonFeature(shapeGeoJson)) {\n    return removeVertexFromMultiPolygon(shapeGeoJson, vertexLngLat);\n  }\n\n  return false;\n};\n\nexport const calculatePerimeter = (geoJson: Feature<LineBasedGeometry>) => {\n  let perimeter = 0;\n\n  eachSegmentWithPath(geoJson, (segment) => {\n    perimeter += turfDistance(segment.start.coordinate, segment.end.coordinate, {\n      units: 'meters',\n    });\n  });\n\n  return perimeter;\n};\n\nexport const convertToLineStringFeatureCollection = (\n  sourceFeatureCollection: GeoJsonShapeFeatureCollection,\n): FeatureCollection<LineString> => {\n  const targetFeatureCollection: FeatureCollection<LineString> = {\n    type: 'FeatureCollection',\n    features: [],\n  };\n\n  // convert lines/polygons/multipolygons to a FutureCollection of LineStrings\n  sourceFeatureCollection.features.forEach((feature) => {\n    if (isLineStringFeature(feature)) {\n      targetFeatureCollection.features.push(feature);\n    } else if (isPolygonFeature(feature)) {\n      const lineFeature = singlePolygonToLine(feature);\n      if (isLineStringFeature(lineFeature)) {\n        targetFeatureCollection.features.push(lineFeature);\n      } else if (isMultiLineStringFeature(lineFeature)) {\n        const line = multiLineStringToFeatureCollection(lineFeature);\n        line.features.forEach((item) => {\n          targetFeatureCollection.features.push(item);\n        });\n      }\n    } else if (isMultiPolygonFeature(feature)) {\n      const featureCollection = multiPolygonToLine(feature);\n      featureCollection.features.forEach((lineFeature) => {\n        if (isLineStringFeature(lineFeature)) {\n          targetFeatureCollection.features.push(lineFeature);\n        } else if (isMultiLineStringFeature(lineFeature)) {\n          const line = multiLineStringToFeatureCollection(lineFeature);\n          line.features.forEach((item) => {\n            targetFeatureCollection.features.push(item);\n          });\n        }\n      });\n    } else {\n      log.warn('AutoTraceHelper.getFeaturesGeoJsonAsLines: Feature is not supported', feature);\n    }\n  });\n\n  return targetFeatureCollection;\n};\n\nexport const lngLatToGeoJsonPoint = (\n  position: LngLatTuple,\n  shape: Extract<ShapeName, 'marker' | 'text_marker' | 'circle_marker'> = 'marker',\n): GeoJsonShapeFeature => {\n  return {\n    type: 'Feature',\n    properties: {\n      shape,\n    },\n    geometry: {\n      type: 'Point',\n      coordinates: position,\n    },\n  };\n};\n\nexport const getGeoJsonCircle = ({\n  center,\n  radius,\n  steps = 80,\n}: {\n  center: LngLatTuple;\n  radius: number;\n  steps?: number;\n}) => {\n  const circleGeoJson = turfCircle(center, radius, {\n    steps,\n    units: 'meters',\n  });\n\n  // remove link between first and last coordinates\n  circleGeoJson.geometry.coordinates[0][0] = [...circleGeoJson.geometry.coordinates[0][0]];\n\n  return circleGeoJson;\n};\n\nexport const getEllipseParameters = ({\n  center,\n  xSemiAxisLngLat,\n  rimLngLat,\n}: {\n  center: LngLatTuple;\n  xSemiAxisLngLat: LngLatTuple;\n  rimLngLat?: LngLatTuple;\n}) => {\n  let xSemiAxis = turfDistance(center, xSemiAxisLngLat, { units: 'meters' });\n  if (xSemiAxis === 0) {\n    xSemiAxis = 1;\n  }\n\n  const cwAngle = turfBearing(center, xSemiAxisLngLat) - 90;\n\n  let ySemiAxis = 0;\n\n  if (rimLngLat) {\n    const ccwAngle = -cwAngle;\n    const ccwAngleRad = (ccwAngle * Math.PI) / 180;\n    const ccwRimAngle = -(turfBearing(center, rimLngLat) - 90);\n    const ccwRimAngleRad = (ccwRimAngle * Math.PI) / 180;\n\n    const dRim = turfDistance(center, rimLngLat, { units: 'meters' });\n\n    const px = dRim * Math.cos(ccwRimAngleRad);\n    const py = dRim * Math.sin(ccwRimAngleRad);\n\n    const pxReproj = px * Math.cos(ccwAngleRad) + py * Math.sin(ccwAngleRad);\n    const pyReproj = px * -Math.sin(ccwAngleRad) + py * Math.cos(ccwAngleRad);\n\n    const xPart = (pxReproj * pxReproj) / (xSemiAxis * xSemiAxis);\n    ySemiAxis = Math.abs(pyReproj) / Math.sqrt(1 - xPart);\n\n    // if xPart === 1\n    if (isNaN(ySemiAxis)) {\n      ySemiAxis = 0;\n    }\n  }\n\n  return {\n    xSemiAxis,\n    ySemiAxis,\n    angle: cwAngle,\n  };\n};\n\nexport const ellipseSteps = 80;\n\nexport const getGeoJsonEllipse = ({\n  center,\n  xSemiAxis,\n  ySemiAxis,\n  angle,\n  properties = {},\n}: {\n  center: LngLatTuple;\n  xSemiAxis: number;\n  ySemiAxis?: number;\n  angle: number;\n  properties?: GeoJsonProperties;\n}): GeoJsonShapeFeature => {\n  const options = {\n    steps: ellipseSteps,\n    angle,\n    units: 'meters',\n  } as const;\n\n  if (ySemiAxis === undefined || ySemiAxis === 0) {\n    const ellipseGeoJson = turfEllipse(center, xSemiAxis, 1, options);\n    return lineString(ellipseGeoJson.geometry.coordinates[0].slice(0, 41), {\n      shape: 'line',\n    });\n  }\n\n  const ellipseGeoJson = turfEllipse(center, xSemiAxis, ySemiAxis, {\n    ...options,\n    properties: {\n      ...properties,\n      [`${FEATURE_PROPERTY_PREFIX}shape`]: 'ellipse',\n      [`${FEATURE_PROPERTY_PREFIX}center`]: center,\n      [`${FEATURE_PROPERTY_PREFIX}xSemiAxis`]: xSemiAxis,\n      [`${FEATURE_PROPERTY_PREFIX}ySemiAxis`]: ySemiAxis,\n      [`${FEATURE_PROPERTY_PREFIX}angle`]: angle,\n    },\n  });\n\n  // remove link between first and last coordinates\n  ellipseGeoJson.geometry.coordinates[0][0] = [...ellipseGeoJson.geometry.coordinates[0][0]];\n\n  return ellipseGeoJson as GeoJsonShapeFeature;\n};\n\nexport const getCoordinateByPath = (\n  geoJson: GeoJSON,\n  path: Array<string | number>,\n): LngLatTuple | null => {\n  const coordinate = get(geoJson, path) as unknown;\n  if (isPosition(coordinate)) {\n    return coordinate;\n  }\n  log.warn('getCoordinateByPath: Invalid path or coordinate not found at path', path, geoJson);\n  return null;\n};\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { FEATURE_PROPERTY_PREFIX, SOURCES } from '@/core/features/constants.ts';\nimport { propertyValidators } from '@/core/features/validators.ts';\nimport { BaseDomMarker } from '@/core/map/base/marker.ts';\nimport type { BaseSource } from '@/core/map/base/source.ts';\nimport {\n  type BasicGeometry,\n  type EditModeName,\n  type FeatureDataParameters,\n  type FeatureId,\n  type FeatureShape,\n  type FeatureShapeProperties,\n  type FeatureSourceName,\n  type GeoJsonShapeFeature,\n  type Geoman,\n  type GmEditFeatureUpdatedEvent,\n  includesWithType,\n  type MarkerData,\n  type MarkerId,\n  type PrefixedFeatureShapeProperties,\n  type ShapeGeoJsonProperties,\n  typedKeys,\n} from '@/main.ts';\nimport { ALL_SHAPE_NAMES } from '@/modes/constants.ts';\nimport { geoJsonPointToLngLat } from '@/utils/geojson.ts';\nimport centroid from '@turf/centroid';\nimport type { Feature } from 'geojson';\nimport { cloneDeep } from 'lodash-es';\nimport log from 'loglevel';\n\nexport const toPolygonAllowedShapes: Array<FeatureData['shape']> = [\n  'circle',\n  'ellipse',\n  'rectangle',\n];\n\nexport class FeatureData {\n  gm: Geoman;\n  id: FeatureId = 'no-id';\n  parent: FeatureData | null = null;\n  markers: Map<MarkerId, MarkerData>;\n  source: BaseSource;\n  _geoJson: GeoJsonShapeFeature | null = null;\n\n  constructor(parameters: FeatureDataParameters) {\n    this.gm = parameters.gm;\n    this.id = parameters.id;\n    this.source = parameters.source;\n    this.parent = parameters.parent;\n    this.markers = new Map();\n\n    const geoJson = {\n      ...parameters.geoJsonShapeFeature,\n      properties: {\n        ...this.parseExtraProperties(parameters.geoJsonShapeFeature),\n        ...this.parseGmShapeProperties(parameters.geoJsonShapeFeature),\n      },\n    };\n\n    if (parameters.skipSourceUpdate) {\n      // When hydrating from existing source, just set the internal GeoJSON\n      // without adding to the source (feature already exists there)\n      this._geoJson = {\n        ...geoJson,\n        id: this.id,\n      };\n      // For circles, ensure center property is set (but don't queue an update\n      // since the feature already exists in the source)\n      if (this.shape === 'circle') {\n        const shapeCentroid = geoJsonPointToLngLat(centroid(this._geoJson));\n        this._geoJson.properties[`${FEATURE_PROPERTY_PREFIX}center`] = shapeCentroid;\n      }\n    } else {\n      this.addGeoJson(geoJson);\n    }\n  }\n\n  get shape(): FeatureShape {\n    const value = this.getShapeProperty('shape');\n    if (typeof value === 'string' && includesWithType(value, ALL_SHAPE_NAMES)) {\n      return value;\n    }\n    throw new Error(`Wrong shape type: \"${value}\"`);\n  }\n\n  set shape(shape: FeatureShape) {\n    this.setShapeProperty('shape', shape);\n  }\n\n  get temporary(): boolean {\n    return (this.source.id as FeatureSourceName) === SOURCES.temporary;\n  }\n\n  get sourceName(): FeatureSourceName {\n    return this.source.id as FeatureSourceName;\n  }\n\n  getShapeProperty<T extends keyof FeatureShapeProperties>(\n    name: T,\n    inputGeoJson?: GeoJsonShapeFeature,\n  ): FeatureShapeProperties[T] | undefined {\n    const geoJsonProperties = inputGeoJson?.properties || this._geoJson?.properties || {};\n    const validator = propertyValidators[name];\n    const value = geoJsonProperties[`${FEATURE_PROPERTY_PREFIX}${name}`] ?? geoJsonProperties[name];\n\n    if (validator && validator(value)) {\n      return value;\n    }\n\n    return undefined;\n  }\n\n  setShapeProperty<T extends keyof FeatureShapeProperties>(\n    name: T,\n    value: ShapeGeoJsonProperties[`${typeof FEATURE_PROPERTY_PREFIX}${T}`],\n  ) {\n    if (!this._geoJson) {\n      log.error(`FeatureData.setShapeProperty(): geojson is not set`);\n      return;\n    }\n    this._geoJson.properties[`${FEATURE_PROPERTY_PREFIX}${name}`] = value;\n    this._updateAllProperties(this._geoJson.properties);\n  }\n\n  deleteShapeProperty<T extends keyof FeatureShapeProperties>(name: T) {\n    if (!this._geoJson) {\n      log.error(`FeatureData.deleteShapeProperty(): geojson is not set`);\n      return;\n    }\n    delete this._geoJson.properties[`${FEATURE_PROPERTY_PREFIX}${name}`];\n    this._updateAllProperties(this._geoJson.properties);\n  }\n\n  parseGmShapeProperties(geoJson: GeoJsonShapeFeature): PrefixedFeatureShapeProperties {\n    const shape =\n      this.getShapeProperty('shape', geoJson) || this.gm.features.getFeatureShapeByGeoJson(geoJson);\n\n    if (!shape) {\n      log.error(`FeatureData.importGmShapeProperties(): unknown shape: ${shape}`);\n    }\n\n    const allProperties: FeatureShapeProperties = Object.fromEntries(\n      typedKeys(propertyValidators).map((name) => [name, this.getShapeProperty(name, geoJson)]),\n    );\n\n    const properties: FeatureShapeProperties = {\n      ...allProperties,\n      id: this.id,\n      shape: shape || undefined,\n    };\n\n    return Object.fromEntries(\n      typedKeys(properties)\n        .filter((fieldName) => properties[fieldName] !== undefined)\n        .map((fieldName) => [`${FEATURE_PROPERTY_PREFIX}${fieldName}`, properties[fieldName]]),\n    );\n  }\n\n  parseExtraProperties(geoJson: GeoJsonShapeFeature) {\n    const extraProperties = cloneDeep(geoJson.properties) || {};\n    typedKeys(propertyValidators).forEach((name) => {\n      delete extraProperties[name];\n      delete extraProperties[`${FEATURE_PROPERTY_PREFIX}${name}`];\n    });\n    return extraProperties;\n  }\n\n  getGeoJson(): GeoJsonShapeFeature {\n    if (this._geoJson) {\n      return this._geoJson;\n    } else {\n      throw new Error(`Missing GeoJSON for feature: \"${this.shape}:${this.id}\"`);\n    }\n  }\n\n  addGeoJson(geoJson: GeoJsonShapeFeature) {\n    this._geoJson = {\n      ...geoJson,\n      id: this.id,\n    };\n    // For circles, calculate and set center property directly on _geoJson\n    // before adding to source. We must not call setShapeProperty here because\n    // it would queue an update diff before the add diff, causing MapLibre\n    // to receive an update for a non-existent feature.\n    if (this.shape === 'circle') {\n      const shapeCentroid = geoJsonPointToLngLat(centroid(this._geoJson));\n      this._geoJson.properties[`${FEATURE_PROPERTY_PREFIX}center`] = shapeCentroid;\n    }\n\n    this.gm.features.updateManager.updateSource({\n      diff: { add: [this._geoJson] },\n      sourceName: this.sourceName,\n    });\n  }\n\n  removeGeoJson() {\n    if (!this._geoJson) {\n      throw new Error(`Feature not found: \"${this.id}\"`);\n    }\n\n    this.gm.features.updateManager.updateSource({\n      diff: { remove: [this.id] },\n      sourceName: this.sourceName,\n    });\n  }\n\n  removeMarkers() {\n    this.markers.forEach((markerData) => {\n      if (markerData.instance instanceof BaseDomMarker) {\n        markerData.instance.remove();\n      } else {\n        this.gm.features.delete(markerData.instance);\n      }\n    });\n    this.markers = new Map();\n  }\n\n  /**\n   * Updates the geometry of this feature.\n   *\n   * @param geometry - The new geometry for the feature\n   *\n   * @example\n   * // Update a marker's position\n   * feature.updateGeometry({ type: 'Point', coordinates: [10, 52] });\n   *\n   * // Update a polygon's coordinates\n   * feature.updateGeometry({\n   *   type: 'Polygon',\n   *   coordinates: [[[0, 0], [1, 0], [1, 1], [0, 1], [0, 0]]]\n   * });\n   */\n  updateGeometry(geometry: BasicGeometry) {\n    const featureGeoJson = this.getGeoJson();\n    if (!featureGeoJson) {\n      throw new Error(`Feature not found: \"${this.id}\"`);\n    }\n\n    this._geoJson = { ...featureGeoJson, geometry };\n\n    const diff = {\n      update: [this._geoJson],\n    };\n    this.gm.features.updateManager.updateSource({\n      diff,\n      sourceName: this.sourceName,\n    });\n  }\n\n  /**\n   * @deprecated Use `updateGeometry()` instead.\n   */\n  updateGeoJsonGeometry(geometry: BasicGeometry) {\n    this.updateGeometry(geometry);\n  }\n\n  /**\n   * Updates custom properties on this feature. Properties are merged with existing ones.\n   * Set a property value to `undefined` to delete it.\n   *\n   * Internal Geoman properties (prefixed with `gm_`) cannot be modified through this method\n   * and will be preserved.\n   *\n   * @param properties - Object containing properties to update or delete (set to undefined)\n   *\n   * @example\n   * // Add or update properties\n   * feature.updateProperties({ color: 'red', size: 10 });\n   *\n   * // Delete a property\n   * feature.updateProperties({ color: undefined });\n   *\n   * // Mix of updates and deletions\n   * feature.updateProperties({ color: 'blue', oldProp: undefined });\n   */\n  updateProperties(properties: Record<string, unknown>) {\n    if (!this._geoJson) {\n      throw new Error(`Feature not found: \"${this.id}\"`);\n    }\n\n    const mandatoryProperties = this.parseGmShapeProperties(this._geoJson);\n    const protectedKeys = new Set(Object.keys(mandatoryProperties));\n\n    // Build new properties: start with existing, apply updates (respecting undefined as delete)\n    const newProperties: Record<string, unknown> = {};\n\n    // Copy existing properties (excluding ones being deleted)\n    for (const [key, value] of Object.entries(this._geoJson.properties)) {\n      if (key in properties) {\n        // This key is being updated - will be handled below\n        continue;\n      }\n      newProperties[key] = value;\n    }\n\n    // Apply updates (skip protected keys, handle undefined as delete signal)\n    for (const [key, value] of Object.entries(properties)) {\n      if (protectedKeys.has(key)) {\n        // Skip protected gm_ properties\n        continue;\n      }\n      if (value !== undefined) {\n        newProperties[key] = value;\n      }\n      // If value is undefined, we simply don't add it (deletion)\n    }\n\n    // Always preserve mandatory properties\n    Object.assign(newProperties, mandatoryProperties);\n\n    // Update internal state (without undefined markers)\n    this._geoJson.properties = newProperties as ShapeGeoJsonProperties;\n\n    // Build diff properties with undefined markers for MapLibre's removeProperties\n    const diffProperties: Record<string, unknown> = { ...newProperties };\n    for (const [key, value] of Object.entries(properties)) {\n      if (protectedKeys.has(key)) continue;\n      if (value === undefined) {\n        diffProperties[key] = undefined; // Signal to MapLibre to remove this property\n      }\n    }\n\n    const diff = { update: [{ ...this._geoJson, properties: diffProperties }] };\n    this.gm.features.updateManager.updateSource({\n      diff,\n      sourceName: this.sourceName,\n    });\n  }\n\n  /**\n   * Replaces all custom properties on this feature. Existing custom properties are removed\n   * and replaced with the provided ones.\n   *\n   * Internal Geoman properties (prefixed with `gm_`) cannot be modified and will be preserved.\n   *\n   * @param properties - Object containing the new properties (replaces all existing custom properties)\n   *\n   * @example\n   * // Replace all custom properties\n   * feature.setProperties({ name: 'New Feature', category: 'poi' });\n   */\n  setProperties(properties: Record<string, unknown>) {\n    if (!this._geoJson) {\n      throw new Error(`Feature not found: \"${this.id}\"`);\n    }\n\n    const mandatoryProperties = this.parseGmShapeProperties(this._geoJson);\n\n    // Filter out undefined values and protected keys from input\n    const filteredProperties: Record<string, unknown> = {};\n    for (const [key, value] of Object.entries(properties)) {\n      if (value !== undefined && !(key in mandatoryProperties)) {\n        filteredProperties[key] = value;\n      }\n    }\n\n    this._geoJson.properties = {\n      ...filteredProperties,\n      ...mandatoryProperties,\n    } as ShapeGeoJsonProperties;\n\n    const diff = { update: [this._geoJson] };\n    this.gm.features.updateManager.updateSource({\n      diff,\n      sourceName: this.sourceName,\n    });\n  }\n\n  /**\n   * Internal method to update all properties including Geoman system properties.\n   * This should only be used by internal Geoman code (edit modes, draw modes, etc.).\n   *\n   * @internal\n   * @param properties - Properties to merge with existing ones\n   */\n  _updateAllProperties(properties: Partial<ShapeGeoJsonProperties>) {\n    if (!this._geoJson) {\n      throw new Error(`Feature not found: \"${this.id}\"`);\n    }\n\n    this._geoJson.properties = { ...this._geoJson.properties, ...properties };\n    const diff = { update: [this._geoJson] };\n\n    this.gm.features.updateManager.updateSource({\n      diff,\n      sourceName: this.sourceName,\n    });\n  }\n\n  /**\n   * @deprecated Use `updateProperties()` instead. Set property value to `undefined` to delete it.\n   */\n  updateGeoJsonProperties(properties: Partial<ShapeGeoJsonProperties>) {\n    this._updateAllProperties(properties);\n  }\n\n  /**\n   * @deprecated Use `setProperties()` instead.\n   */\n  setGeoJsonCustomProperties(properties: Feature['properties']) {\n    this.setProperties(properties || {});\n  }\n\n  /**\n   * @deprecated Use `updateProperties()` instead.\n   */\n  updateGeoJsonCustomProperties(properties: Feature['properties']) {\n    this.updateProperties(properties || {});\n  }\n\n  /**\n   * @deprecated Use `updateProperties({ propName: undefined })` instead.\n   */\n  deleteGeoJsonCustomProperties(fieldNames: Array<string>) {\n    const deleteProps: Record<string, undefined> = {};\n    for (const fieldName of fieldNames) {\n      deleteProps[fieldName] = undefined;\n    }\n    this.updateProperties(deleteProps);\n  }\n\n  convertToPolygon(): boolean {\n    if (this.isConvertableToPolygon()) {\n      this.shape = 'polygon';\n      this.deleteShapeProperty('center');\n      this.deleteShapeProperty('angle');\n      this.deleteShapeProperty('xSemiAxis');\n      this.deleteShapeProperty('ySemiAxis');\n      return true;\n    }\n\n    return false;\n  }\n\n  isConvertableToPolygon(): boolean {\n    return toPolygonAllowedShapes.includes(this.shape);\n  }\n\n  // changeSource({ sourceName, atomic }: { sourceName: FeatureSourceName; atomic: boolean }) {\n  //   if (atomic) {\n  //     this.gm.features.updateManager.withAtomicSourcesUpdate(() =>\n  //       this.actualChangeSource({ sourceName, atomic }),\n  //     );\n  //   } else {\n  //     this.actualChangeSource({ sourceName, atomic });\n  //   }\n  // }\n\n  changeSource({ sourceName, atomic }: { sourceName: FeatureSourceName; atomic: boolean }) {\n    if (this.source.id === sourceName) {\n      log.error(\n        `FeatureData.changeSource: feature \"${this.id}\" already has the source \"${sourceName}\"`,\n      );\n      return;\n    }\n\n    const source = this.gm.features.sources[sourceName];\n    if (!source) {\n      log.error(`FeatureData.changeSource: missing source \"${sourceName}\"`);\n      return;\n    }\n\n    const shapeGeoJson = this.getGeoJson();\n    if (!shapeGeoJson) {\n      log.error('FeatureData.changeSource: missing shape GeoJSON');\n      return;\n    }\n\n    this.removeGeoJson();\n    this.source = source;\n    this.addGeoJson(shapeGeoJson);\n\n    this.markers.forEach((markerData) => {\n      if (markerData.instance instanceof FeatureData) {\n        markerData.instance.changeSource({ sourceName, atomic });\n      }\n    });\n  }\n\n  fireFeatureUpdatedEvent({ mode }: { mode: EditModeName }) {\n    const payload: GmEditFeatureUpdatedEvent = {\n      name: `${GM_SYSTEM_PREFIX}:edit:feature_updated`,\n      level: 'system',\n      actionType: 'edit',\n      action: 'feature_updated',\n      mode,\n      sourceFeatures: [this],\n      targetFeatures: [this],\n      markerData: null,\n    };\n\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:edit`, payload);\n  }\n\n  delete() {\n    this.removeGeoJson();\n    this.removeMarkers();\n  }\n}\n","import type { GmGeofencingViolationEvent, GmHelperModeEvent } from '@/main.ts';\nimport { isGmEvent } from '@/utils/guards/events/index.ts';\nimport { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\n\nexport const isGmHelperEvent = (payload: unknown): payload is GmHelperModeEvent => {\n  return isGmEvent(payload) && payload.actionType === 'helper';\n};\n\nexport const isGmGeofencingViolationEvent = (\n  payload: unknown,\n): payload is GmGeofencingViolationEvent => {\n  return isGmEvent(payload) && payload.name === `${GM_SYSTEM_PREFIX}:helper:geofencing_violation`;\n};\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport type {\n  ActionOptions,\n  ActionSettings,\n  ActionType,\n  EventHandlers,\n  Geoman,\n  GmGeofencingViolationEvent,\n  ModeName,\n  SubActions,\n} from '@/main.ts';\nimport type { SnappingHelper } from '@/modes/helpers/snapping.ts';\nimport { isGmGeofencingViolationEvent } from '@/utils/guards/events/helper.ts';\nimport log from 'loglevel';\n\nexport abstract class BaseAction {\n  gm: Geoman;\n  abstract actionType: ActionType;\n  abstract mode: ModeName;\n  options: ActionOptions = {};\n  settings: ActionSettings = {};\n  actions: SubActions = {};\n  flags = {\n    featureCreateAllowed: true,\n    featureUpdateAllowed: true,\n    actionInProgress: false,\n  };\n\n  abstract eventHandlers: EventHandlers;\n\n  internalEventHandlers: EventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:helper`]: this.handleHelperEvent.bind(this),\n  };\n\n  constructor(gm: Geoman) {\n    this.gm = gm;\n  }\n\n  get snappingHelper(): SnappingHelper | null {\n    return (this.gm.actionInstances.helper__snapping || null) as SnappingHelper | null;\n  }\n\n  abstract onStartAction(): void;\n\n  abstract onEndAction(): void;\n\n  startAction() {\n    this.gm.events.bus.attachEvents(this.internalEventHandlers);\n    this.gm.events.bus.attachEvents(this.eventHandlers);\n    this.onStartAction();\n  }\n\n  endAction() {\n    this.onEndAction();\n    this.gm.events.bus.detachEvents(this.eventHandlers);\n    this.gm.events.bus.detachEvents(this.internalEventHandlers);\n  }\n\n  getOptionValue(name: string) {\n    const option = this.options[name];\n    if (!option) {\n      throw new Error(`Option ${name} not found`);\n    }\n\n    if (['toggle', 'hidden'].includes(option.type)) {\n      return option.value;\n    } else if (option.type === 'select') {\n      return option.value.value;\n    } else {\n      throw new Error(`Unknown option type: ${JSON.stringify(option)}`);\n    }\n  }\n\n  getSettingValue(name: string) {\n    if (name in this.settings) {\n      return this.settings[name];\n    }\n    return undefined;\n  }\n\n  applyOptionValue(name: string, value: boolean | string | number) {\n    const option = this.options[name];\n    if (!option) {\n      log.error('Option not found', name, value);\n      return;\n    }\n\n    if (option.type === 'toggle' && typeof value === 'boolean') {\n      option.value = value;\n    } else if (option.type === 'select') {\n      const choiceItemValue = option.choices.find((item) => item.value === value);\n      if (choiceItemValue) {\n        option.value = choiceItemValue;\n      }\n    } else if (option.type === 'hidden') {\n      option.value = value;\n    } else {\n      log.error(\"Can't apply option value\", name, value, option);\n    }\n  }\n\n  handleHelperEvent(event: GmGeofencingViolationEvent) {\n    if (isGmGeofencingViolationEvent(event)) {\n      return this.handleGeofencingViolationEvent(event);\n    }\n\n    return { next: true };\n  }\n\n  handleGeofencingViolationEvent(event: GmGeofencingViolationEvent) {\n    if (event.actionType === 'draw') {\n      this.flags.featureCreateAllowed = false;\n    } else if (event.actionType === 'edit') {\n      this.flags.featureUpdateAllowed = false;\n    }\n    return { next: true };\n  }\n}\n","import type {\n  GmDrawEvent,\n  GmDrawFreehandDrawerEvent,\n  GmDrawFreehandDrawerEventWithData,\n  GmDrawLineDrawerEvent,\n  GmDrawLineDrawerEventWithData,\n  GmDrawShapeEvent,\n  GmDrawShapeEventWithData,\n} from '@/types/index.ts';\nimport { isGmEvent } from '@/utils/guards/events/index.ts';\nimport { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\n\nexport const isGmDrawEvent = (payload: unknown): payload is GmDrawEvent => {\n  return isGmEvent(payload) && payload.actionType === 'draw';\n};\n\nexport const isGmDrawShapeEvent = (\n  payload: unknown,\n): payload is GmDrawShapeEvent | GmDrawShapeEventWithData => {\n  return (\n    isGmEvent(payload) &&\n    (payload.name === `${GM_SYSTEM_PREFIX}:draw:shape` ||\n      payload.name === `${GM_SYSTEM_PREFIX}:draw:shape_with_data`)\n  );\n};\n\nexport const isGmDrawLineDrawerEvent = (\n  payload: unknown,\n): payload is GmDrawLineDrawerEvent | GmDrawLineDrawerEventWithData => {\n  return isGmDrawShapeEvent(payload) && payload.variant === 'line_drawer';\n};\n\nexport const isGmDrawFreehandDrawerEvent = (\n  payload: unknown,\n): payload is GmDrawFreehandDrawerEvent | GmDrawFreehandDrawerEventWithData => {\n  return isGmDrawShapeEvent(payload) && payload.variant === 'freehand_drawer';\n};\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { SOURCES } from '@/core/features/constants.ts';\nimport { FeatureData } from '@/core/features/feature-data.ts';\nimport type {\n  ActionType,\n  DrawModeName,\n  EditModeName,\n  GeoJsonShapeFeature,\n  GmDrawShapeEvent,\n  GmDrawShapeEventWithData,\n  GmSystemEvent,\n  GmFeatureBeforeCreateEvent,\n  MarkerData,\n  NonEmptyArray,\n  ShapeName,\n} from '@/main.ts';\nimport { BaseAction } from '@/modes/base-action.ts';\nimport { isGmDrawLineDrawerEvent } from '@/utils/guards/events/draw.ts';\nimport log from 'loglevel';\n\nexport abstract class BaseDraw extends BaseAction {\n  actionType: ActionType = 'draw';\n  abstract mode: DrawModeName;\n  shape: ShapeName | null = null;\n  featureData: FeatureData | null = null;\n\n  saveFeature() {\n    // todo: check is it possible to avoid recreating a feature\n    // todo: check ellipse to fit all the rest shapes\n    if (this.featureData) {\n      const featureGeoJson = this.featureData.getGeoJson();\n      this.removeTmpFeature();\n      this.gm.features.createFeature({\n        sourceName: SOURCES.main,\n        shapeGeoJson: featureGeoJson,\n      });\n    } else {\n      log.error('BaseDraw.saveFeature: no featureData to save');\n    }\n  }\n\n  removeTmpFeature() {\n    if (this.featureData) {\n      if (!this.featureData.temporary) {\n        log.error('Not a temporary feature to remove', this.featureData);\n      }\n      this.gm.features.delete(this.featureData);\n      this.featureData = null;\n    }\n  }\n\n  fireBeforeFeatureCreate({\n    geoJsonFeatures,\n    forceMode = undefined,\n  }: {\n    geoJsonFeatures: NonEmptyArray<GeoJsonShapeFeature>;\n    forceMode?: EditModeName;\n  }) {\n    this.flags.featureCreateAllowed = true;\n\n    const payload: GmFeatureBeforeCreateEvent = {\n      name: `${GM_SYSTEM_PREFIX}:feature:before_create`,\n      level: 'system',\n      actionType: 'draw',\n      mode: forceMode || this.mode,\n      action: 'before_create',\n      geoJsonFeatures,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:${this.actionType}`, payload);\n  }\n\n  fireMarkerPointerStartEvent() {\n    if (!this.gm.markerPointer.marker || !this.shape) {\n      return;\n    }\n\n    const marker = this.gm.markerPointer.marker;\n    const payload: GmDrawShapeEventWithData = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n      level: 'system',\n      variant: null,\n      actionType: 'draw',\n      mode: this.shape,\n      action: 'start',\n      markerData: {\n        type: 'dom',\n        instance: marker,\n        position: {\n          coordinate: marker.getLngLat(),\n          path: [-1],\n        },\n      },\n      featureData: this.featureData,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, payload);\n  }\n\n  fireMarkerPointerUpdateEvent() {\n    if (!this.gm.markerPointer.marker || !this.shape) {\n      return;\n    }\n\n    const marker = this.gm.markerPointer.marker;\n    const payload: GmDrawShapeEventWithData = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n      level: 'system',\n      variant: null,\n      actionType: 'draw',\n      mode: this.shape,\n      action: 'update',\n      markerData: {\n        type: 'dom',\n        instance: marker,\n        position: {\n          coordinate: marker.getLngLat(),\n          path: [-1],\n        },\n      },\n      featureData: this.featureData,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, payload);\n  }\n\n  fireMarkerPointerFinishEvent() {\n    if (!this.shape) {\n      return;\n    }\n\n    const payload: GmDrawShapeEvent = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape`,\n      level: 'system',\n      variant: null,\n      actionType: 'draw',\n      mode: this.shape,\n      action: 'finish',\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, payload);\n  }\n\n  forwardLineDrawerEvent(payload: GmSystemEvent) {\n    if (!isGmDrawLineDrawerEvent(payload) || !this.shape) {\n      return { next: true };\n    }\n\n    if (payload.action === 'start' || payload.action === 'update') {\n      const eventData: GmDrawShapeEventWithData = {\n        name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n        level: 'system',\n        actionType: 'draw',\n        mode: this.shape,\n        variant: null,\n        action: payload.action,\n        featureData: payload.featureData,\n        markerData: payload.markerData,\n      };\n      this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, eventData);\n    } else if (payload.action === 'finish' || payload.action === 'cancel') {\n      const eventData: GmDrawShapeEvent = {\n        name: `${GM_SYSTEM_PREFIX}:draw:shape`,\n        level: 'system',\n        actionType: 'draw',\n        mode: this.shape,\n        variant: null,\n        action: payload.action,\n      };\n      this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, eventData);\n    }\n\n    return { next: true };\n  }\n\n  fireStartEvent(featureData: FeatureData, markerData: MarkerData | null = null) {\n    if (!this.shape) {\n      return;\n    }\n\n    const event: GmDrawShapeEventWithData = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n      level: 'system',\n      actionType: 'draw',\n      mode: this.shape,\n      variant: null,\n      action: 'start',\n      featureData,\n      markerData,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, event);\n  }\n\n  fireUpdateEvent(featureData: FeatureData, markerData: MarkerData | null = null) {\n    if (!this.shape) {\n      return;\n    }\n\n    const event: GmDrawShapeEventWithData = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n      level: 'system',\n      actionType: 'draw',\n      mode: this.shape,\n      variant: null,\n      action: 'update',\n      featureData,\n      markerData,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, event);\n  }\n\n  fireFinishEvent() {\n    if (!this.shape) {\n      return;\n    }\n\n    const event: GmDrawShapeEvent = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape`,\n      level: 'system',\n      actionType: 'draw',\n      mode: this.shape,\n      variant: null,\n      action: 'finish',\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, event);\n  }\n}\n","import circleMarker from '@/assets/images/controls/circle-marker.svg';\nimport { FeatureData } from '@/core/features/feature-data.ts';\nimport type {\n  DrawModeName,\n  GeoJsonShapeFeature,\n  LngLatTuple,\n  MapHandlerReturnData,\n  MarkerData,\n  ScreenPoint,\n  ShapeName,\n} from '@/main.ts';\n\nimport { BaseDraw } from '@/modes/draw/base.ts';\n\nimport { SOURCES } from '@/core/features/constants.ts';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\n\nexport abstract class BaseCircle extends BaseDraw {\n  mode: DrawModeName = 'circle';\n  shape: ShapeName = 'circle';\n  eventHandlers = {\n    mousemove: this.onMouseMove.bind(this),\n    click: this.onMouseClick.bind(this),\n  };\n  protected circleCenterPoint: ScreenPoint | null = null;\n  protected circleCenterLngLat: LngLatTuple | null = null;\n\n  onStartAction() {\n    this.gm.markerPointer.enable();\n  }\n\n  onEndAction() {\n    this.removeTmpFeature();\n    this.gm.markerPointer.disable();\n    this.fireFinishEvent();\n  }\n\n  abstract onMouseMove(event: BaseMapEvent): MapHandlerReturnData;\n\n  abstract onMouseClick(event: BaseMapEvent): MapHandlerReturnData;\n\n  getFeatureGeoJson(position: LngLatTuple): GeoJsonShapeFeature {\n    return {\n      type: 'Feature',\n      properties: {\n        shape: this.shape,\n      },\n      geometry: {\n        type: 'Point',\n        coordinates: position,\n      },\n    };\n  }\n\n  getControlMarkerData(): MarkerData | null {\n    const marker = this.gm.markerPointer.marker;\n    if (!marker) {\n      return null;\n    }\n\n    return {\n      type: 'dom',\n      instance: marker,\n      position: {\n        coordinate: marker.getLngLat(),\n        path: [-1],\n      },\n    };\n  }\n\n  protected createFeature(): FeatureData | null {\n    const featureData = this.gm.features.createFeature({\n      shapeGeoJson: this.getFeatureGeoJson(this.circleCenterLngLat || [0, 0]),\n      sourceName: SOURCES.temporary,\n    });\n\n    if (featureData && this.circleCenterLngLat) {\n      featureData.setShapeProperty('center', this.circleCenterLngLat);\n    }\n    return featureData;\n  }\n\n  protected createMarker() {\n    const element = document.createElement('div');\n    element.innerHTML = circleMarker;\n    const svgElement = element.firstChild as HTMLElement;\n    svgElement.style.color = '#278cda';\n    svgElement.style.width = '28px';\n    svgElement.style.height = '28px';\n    svgElement.style.pointerEvents = 'none';\n\n    return this.gm.mapAdapter.createDomMarker(\n      {\n        draggable: false,\n        anchor: 'center',\n        element: svgElement,\n      },\n      [0, 0],\n    );\n  }\n}\n","import type { DrawModeName, LngLatTuple, MapHandlerReturnData, ShapeName } from '@/main.ts';\nimport { BaseCircle } from '@/modes/draw/base-circle.ts';\nimport type { BaseMapPointerEvent } from '@mapLib/types/events.ts';\n\nexport class DrawCircleMarker extends BaseCircle {\n  mode: DrawModeName = 'circle_marker';\n  shape: ShapeName = 'circle_marker';\n\n  onStartAction() {\n    this.gm.markerPointer.enable({\n      customMarker: this.createMarker(),\n    });\n  }\n\n  onEndAction() {\n    this.fireMarkerPointerFinishEvent();\n    super.onEndAction();\n  }\n\n  onMouseMove(): MapHandlerReturnData {\n    this.fireMarkerPointerUpdateEvent();\n    return { next: true };\n  }\n\n  onMouseClick(event: BaseMapPointerEvent): MapHandlerReturnData {\n    const lngLat = this.gm.markerPointer.marker?.getLngLat() || event.lngLat.toArray();\n    this.fireBeforeFeatureCreate({ geoJsonFeatures: [this.getFeatureGeoJson(lngLat)] });\n\n    if (this.flags.featureCreateAllowed) {\n      this.featureData = this.createFeature();\n      this.circleCenterLngLat = lngLat;\n      this.circleCenterPoint = this.gm.mapAdapter.project(this.circleCenterLngLat);\n      this.updateFeaturePosition(this.circleCenterLngLat);\n      this.saveFeature();\n    }\n    return { next: false };\n  }\n\n  updateFeaturePosition(lngLat: LngLatTuple) {\n    if (!this.featureData) {\n      return;\n    }\n\n    const shapeGeoJson = this.getFeatureGeoJson(lngLat);\n    this.featureData.updateGeoJsonGeometry(shapeGeoJson.geometry);\n  }\n}\n","import { IS_PRO } from '@/core/constants.ts';\nimport { LOAD_TIMEOUT } from '@/core/features/constants.ts';\nimport { typedKeys } from '@/utils/typing.ts';\nimport { debounce, throttle } from 'lodash-es';\nimport log from 'loglevel';\n\nexport function augmentIfPro<T>(value: readonly T[]): readonly T[];\nexport function augmentIfPro<T extends Record<PropertyKey, unknown>>(value: T): Partial<T>;\nexport function augmentIfPro(value: unknown) {\n  if (!IS_PRO) {\n    return Array.isArray(value) ? [] : {};\n  }\n  return value;\n}\n\nexport const isTouchScreen = () => {\n  if (window.PointerEvent && 'maxTouchPoints' in navigator) {\n    if (navigator.maxTouchPoints > 0) {\n      return !window.matchMedia('(hover: hover)').matches;\n    }\n    return false;\n  }\n  if (matchMedia('(hover: none)').matches) {\n    return true;\n  }\n  if ('ontouchstart' in window) {\n    return true;\n  }\n  return (\n    'msMaxTouchPoints' in navigator &&\n    typeof navigator.msMaxTouchPoints === 'number' &&\n    navigator.msMaxTouchPoints > 0\n  );\n};\n\nexport const convertToThrottled = <T extends object>(\n  methods: T,\n  context: unknown,\n  wait: number = 10,\n) => {\n  const throttledMethods: T = { ...methods };\n\n  typedKeys(methods).forEach((key) => {\n    const method = methods[key];\n    if (typeof method === 'function') {\n      throttledMethods[key] = throttle(method.bind(context), wait, {\n        leading: true,\n        trailing: false,\n      }) as T[typeof key];\n    } else {\n      log.error('convertToThrottled: item is not a function', methods[key]);\n    }\n  });\n  return throttledMethods;\n};\n\nexport const convertToDebounced = <T extends object>(\n  methods: T,\n  context: unknown,\n  wait: number = 10,\n) => {\n  const debouncedMethods: T = { ...methods };\n\n  typedKeys(methods).forEach((key) => {\n    const method = methods[key];\n    if (typeof method === 'function') {\n      debouncedMethods[key] = debounce(method.bind(context), wait, {\n        leading: false,\n        trailing: true,\n      }) as T[typeof key];\n    } else {\n      log.error('convertToDebounced: item is not a function', methods[key]);\n    }\n  });\n  return debouncedMethods;\n};\n\nexport const withPromiseTimeoutRace = async (promise: Promise<unknown>, errorMessage?: string) => {\n  const defaultErrorMessage = 'Promise race timeout';\n\n  await Promise.race([\n    promise,\n    new Promise((_, reject) => {\n      setTimeout(\n        () =>\n          reject(\n            new Error(\n              `Timeout ${LOAD_TIMEOUT / 1000} seconds: ${errorMessage || defaultErrorMessage}`,\n            ),\n          ),\n        LOAD_TIMEOUT,\n      );\n    }),\n  ]);\n};\n","import { type Geoman } from '@/main.ts';\nimport type {\n  GmFwdEventNameWithPrefix,\n  GmFwdSystemEventNameWithPrefix,\n} from '@/types/events/forwarder/index.ts';\nimport type { GmEventName, GmPrefix } from '@/types/events/index.ts';\nimport type { FeatureId, FeatureSourceName } from '@/types/features.ts';\nimport type { GeoJsonImportFeature } from '@/types/index.ts';\nimport type { EventFor } from '@/types/map/events-map.ts';\nimport type { Feature } from 'geojson';\n\nexport type LngLatTuple = [number, number];\nexport type ScreenPoint = [number, number];\n\nexport const pointerEvents = [\n  'click',\n  'dblclick',\n  'mousedown',\n  'mouseup',\n  'mousemove',\n  'mouseenter',\n  'mouseleave',\n  'mouseover',\n  'mouseout',\n  'contextmenu',\n  'touchstart',\n  'touchend',\n  'touchmove',\n  'touchcancel',\n] as const;\n\nexport type PointerEventName = (typeof pointerEvents)[number];\n\nexport const baseMapEventNames = ['load'] as const;\n\nexport type BaseMapEventName = (typeof baseMapEventNames)[number];\n\nexport const gmServiceEventNames = ['loaded'] as const;\nexport type GmServiceEventName = (typeof gmServiceEventNames)[number];\nexport type GmServiceEventNameWithPrefix = `${GmPrefix}:${GmServiceEventName}`;\n\nexport type MapEventName = PointerEventName | BaseMapEventName;\n\nexport type AnyEventName =\n  | GmEventName\n  | MapEventName\n  | GmFwdEventNameWithPrefix\n  | GmFwdSystemEventNameWithPrefix\n  | GmServiceEventNameWithPrefix;\n\nexport type BaseEventListener<T extends string = AnyEventName> = (event: EventFor<T>) => void;\n\nexport type GeoJsonFeatureData = {\n  id: FeatureId | undefined;\n  sourceName: FeatureSourceName;\n  geoJson: GeoJsonImportFeature;\n};\n\nexport type MapTypes = {\n  maplibre: object;\n};\n\nexport type AnyMapInstance = MapTypes[keyof MapTypes];\n\nexport type BaseControlsPosition = 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\nexport type CursorType = 'move' | 'pointer' | 'grab' | 'crosshair' | '';\n\nexport type MapInstanceWithGeoman<T = AnyMapInstance> = {\n  gm: Geoman;\n} & T;\n\nexport type GeoJsonUniversalDiff = {\n  remove?: Array<FeatureId>;\n  add?: Array<Feature>;\n  update?: Array<Feature>;\n};\n\nexport type BaseFitBoundsOptions = {\n  padding?: number;\n};\n\nexport type AnchorPosition =\n  | 'center'\n  | 'top'\n  | 'bottom'\n  | 'left'\n  | 'right'\n  | 'top-left'\n  | 'top-right'\n  | 'bottom-left'\n  | 'bottom-right';\n\nexport type BaseDomMarkerOptions = {\n  element: HTMLElement;\n  draggable?: boolean;\n  anchor?: AnchorPosition;\n};\n\nexport type BasePopupOptions = {\n  offset: number;\n  closeOnClick: boolean;\n  closeButton: boolean;\n  focusAfterOpen: boolean;\n  anchor: AnchorPosition;\n  className: string;\n};\n\nexport interface MapWithOnceMethod {\n  once(type: string, listener: (ev: unknown) => void): this;\n  off(type: string, listener: (ev: unknown) => void): this;\n}\n\nexport const mapInteractions = [\n  'scrollZoom',\n  'boxZoom',\n  'dragRotate',\n  'dragPan',\n  'keyboard',\n  'doubleClickZoom',\n  'touchZoomRotate',\n  'touchPitch',\n] as const;\n\nexport type MapInteraction = (typeof mapInteractions)[number];\n\nexport type * from '@/types/map/layers.ts';\n","import type {\n  BaseMapEventName,\n  MapWithOnceMethod,\n  PartialLayerStyle,\n  PointerEventName,\n} from '@/main.ts';\nimport { baseMapEventNames, pointerEvents } from '@/types/map/index.ts';\nimport type { BaseMapEvent, BaseMapMouseEvent, BaseMapPointerEvent } from '@mapLib/types/events.ts';\nimport log from 'loglevel';\n\nexport function isPointerEventName(key: string): key is PointerEventName {\n  return pointerEvents.includes(key as PointerEventName);\n}\n\nexport function isBaseMapEventName(key: string): key is BaseMapEventName {\n  return baseMapEventNames.includes(key as BaseMapEventName);\n}\n\nexport const isMapWithOnceMethod = (map: unknown): map is MapWithOnceMethod => {\n  return !!(\n    map &&\n    typeof map === 'object' &&\n    'once' in map &&\n    typeof (map as MapWithOnceMethod).once === 'function'\n  );\n};\n\nexport const isMapPointerEvent = (\n  event: BaseMapEvent,\n  options: { warning: boolean } = { warning: false },\n): event is BaseMapPointerEvent => {\n  if (!event) {\n    if (options.warning) {\n      log.warn('Empty event', event);\n    }\n    return false;\n  }\n\n  const isCursorEvent =\n    typeof event === 'object' &&\n    'lngLat' in event &&\n    'point' in event &&\n    'type' in event &&\n    'originalEvent' in event &&\n    typeof event.type === 'string' &&\n    pointerEvents.includes(event.type as PointerEventName);\n\n  if (!isCursorEvent && options.warning) {\n    log.warn('Not a pointer event', event);\n  }\n\n  return isCursorEvent;\n};\n\nexport const isMapMouseEvent = (\n  event: BaseMapEvent,\n  options: { warning: boolean } = { warning: false },\n): event is BaseMapMouseEvent => {\n  return isMapPointerEvent(event, options) && !event.type.startsWith('touch');\n};\n\nexport const isMapTouchEvent = (\n  event: BaseMapEvent,\n  options: { warning: boolean } = { warning: false },\n): event is BaseMapMouseEvent => {\n  return isMapPointerEvent(event, options) && event.type.startsWith('touch');\n};\n\nexport const isPointerEventWithModifiers = (event: BaseMapPointerEvent) => {\n  return (\n    event.originalEvent.ctrlKey ||\n    event.originalEvent.shiftKey ||\n    event.originalEvent.altKey ||\n    event.originalEvent.metaKey\n  );\n};\n\nexport const isPartialLayer = (object: unknown): object is PartialLayerStyle => {\n  const allowedTypes = ['symbol', 'fill', 'line', 'circle'] as const satisfies Array<\n    PartialLayerStyle['type']\n  >;\n\n  return (\n    !!object &&\n    typeof object === 'object' &&\n    'type' in object &&\n    allowedTypes.includes(object.type as PartialLayerStyle['type'])\n  );\n};\n","import type { DrawModeName, LngLatTuple, MapHandlerReturnData, ShapeName } from '@/main.ts';\nimport { BaseCircle } from '@/modes/draw/base-circle.ts';\nimport { convertToThrottled } from '@/utils/behavior.ts';\nimport { allCoordinatesEqual, getGeoJsonCircle } from '@/utils/geojson.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\nimport type { BaseMapPointerEvent } from '@mapLib/types/events.ts';\n\nexport class DrawCircle extends BaseCircle {\n  mode: DrawModeName = 'circle';\n  shape: ShapeName = 'circle';\n\n  throttledMethods = convertToThrottled(\n    {\n      updateFeatureGeoJson: this.updateFeatureGeoJson,\n    },\n    this,\n    this.gm.options.settings.throttlingDelay,\n  );\n\n  onMouseClick(event: BaseMapPointerEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event)) {\n      return { next: true };\n    }\n    const lngLat: LngLatTuple = this.gm.markerPointer.marker?.getLngLat() || event.lngLat.toArray();\n\n    if (this.circleCenterPoint && this.circleCenterLngLat) {\n      this.fireBeforeFeatureCreate({\n        geoJsonFeatures: [this.getCircleGeoJson(this.circleCenterLngLat, lngLat)],\n      });\n\n      if (this.flags.featureCreateAllowed) {\n        this.saveCircleFeature(lngLat);\n        this.circleCenterLngLat = null;\n        this.circleCenterPoint = null;\n        this.fireFinishEvent();\n      }\n    } else {\n      this.fireBeforeFeatureCreate({ geoJsonFeatures: [this.getFeatureGeoJson(lngLat)] });\n\n      if (this.flags.featureCreateAllowed) {\n        this.circleCenterLngLat = lngLat;\n        this.circleCenterPoint = this.gm.mapAdapter.project(this.circleCenterLngLat);\n        this.featureData = this.createFeature();\n\n        const markerData = this.getControlMarkerData();\n        if (this.featureData && markerData) {\n          this.fireStartEvent(this.featureData, markerData);\n        }\n      }\n    }\n    return { next: false };\n  }\n\n  onMouseMove(): MapHandlerReturnData {\n    if (this.circleCenterLngLat && this.gm.markerPointer.marker) {\n      const markerLngLat = this.gm.markerPointer.marker.getLngLat();\n      this.fireBeforeFeatureCreate({\n        geoJsonFeatures: [this.getCircleGeoJson(this.circleCenterLngLat, markerLngLat)],\n      });\n\n      if (this.flags.featureCreateAllowed) {\n        this.throttledMethods.updateFeatureGeoJson(markerLngLat);\n      }\n    }\n\n    if (!this.circleCenterPoint) {\n      this.fireMarkerPointerUpdateEvent();\n    }\n\n    return { next: false };\n  }\n\n  updateFeatureGeoJson(rimLngLat: LngLatTuple) {\n    if (this.featureData && this.circleCenterLngLat) {\n      const featureGeoJson = this.getCircleGeoJson(this.circleCenterLngLat, rimLngLat);\n      this.featureData.updateGeoJsonGeometry(featureGeoJson.geometry);\n\n      const markerData = this.getControlMarkerData();\n      if (markerData) {\n        this.fireUpdateEvent(this.featureData, markerData);\n      }\n    }\n  }\n\n  saveCircleFeature(eventLngLat: LngLatTuple) {\n    // it's needed to have a custom logic for saving a circle\n    // for now circle is converted to a geojson polygon,\n\n    if (!this.circleCenterLngLat) {\n      return;\n    }\n\n    if (this.featureData) {\n      const lngLat = this.gm.markerPointer.marker?.getLngLat() || eventLngLat;\n      this.updateFeatureGeoJson(lngLat);\n      this.featureData.setShapeProperty('center', this.circleCenterLngLat);\n\n      if (this.isFeatureGeoJsonValid()) {\n        this.saveFeature();\n      } else {\n        this.removeTmpFeature();\n      }\n    }\n  }\n\n  isFeatureGeoJsonValid(): boolean {\n    if (!this.featureData) {\n      return false;\n    }\n\n    // for now only checks if all points aren't the same\n    return allCoordinatesEqual(this.featureData.getGeoJson());\n  }\n\n  getCircleGeoJson(center: LngLatTuple, endLngLat: LngLatTuple) {\n    const radius = this.gm.mapAdapter.getDistance(center, endLngLat);\n    const circleGeoJson = getGeoJsonCircle({ center, radius });\n\n    return {\n      ...circleGeoJson,\n      properties: {\n        shape: this.shape,\n      },\n    };\n  }\n}\n","import type { ActionType, HelperModeName } from '@/main.ts';\nimport { BaseAction } from '@/modes/base-action.ts';\n\nexport abstract class BaseHelper extends BaseAction {\n  actionType: ActionType = 'helper';\n  abstract mode: HelperModeName;\n}\n","import { BaseHelper } from '@/modes/helpers/base.ts';\nimport type {\n  AutoTraceHelperInterface,\n  PinHelperInterface,\n  SnapGuidesHelperInterface,\n} from '@/types/interfaces.ts';\n\nexport const isSnapGuidesHelper = (instance: unknown): instance is SnapGuidesHelperInterface => {\n  return (\n    !!instance &&\n    typeof instance === 'object' &&\n    instance instanceof BaseHelper &&\n    'removeSnapGuides' in instance &&\n    'updateSnapGuides' in instance &&\n    instance.mode === 'snap_guides' &&\n    typeof instance.removeSnapGuides === 'function' &&\n    typeof instance.updateSnapGuides === 'function'\n  );\n};\n\nexport const isAutoTraceHelper = (instance: unknown): instance is AutoTraceHelperInterface => {\n  return (\n    !!instance &&\n    typeof instance === 'object' &&\n    instance instanceof BaseHelper &&\n    'getShortestPath' in instance &&\n    instance.mode === 'auto_trace' &&\n    typeof instance.getShortestPath === 'function'\n  );\n};\n\nexport const isPinHelper = (instance: unknown): instance is PinHelperInterface => {\n  return (\n    !!instance &&\n    typeof instance === 'object' &&\n    instance instanceof BaseHelper &&\n    'getSharedMarkers' in instance &&\n    instance.mode === 'pin' &&\n    typeof instance.getSharedMarkers === 'function'\n  );\n};\n","// index.ts\nimport { bbox as turfBBox } from \"@turf/bbox\";\nimport { getCoords, getGeom } from \"@turf/invariant\";\nimport { polygon, multiPolygon, lineString } from \"@turf/helpers\";\nimport { clone } from \"@turf/clone\";\nfunction lineToPolygon(lines, options = {}) {\n  var _a, _b, _c;\n  var properties = options.properties;\n  var autoComplete = (_a = options.autoComplete) != null ? _a : true;\n  var orderCoords = (_b = options.orderCoords) != null ? _b : true;\n  var mutate = (_c = options.mutate) != null ? _c : false;\n  if (!mutate) {\n    lines = clone(lines);\n  }\n  switch (lines.type) {\n    case \"FeatureCollection\":\n      var coords = [];\n      lines.features.forEach(function(line) {\n        coords.push(\n          getCoords(lineStringToPolygon(line, {}, autoComplete, orderCoords))\n        );\n      });\n      return multiPolygon(coords, properties);\n    default:\n      return lineStringToPolygon(lines, properties, autoComplete, orderCoords);\n  }\n}\nfunction lineStringToPolygon(line, properties, autoComplete, orderCoords) {\n  properties = properties ? properties : line.type === \"Feature\" ? line.properties : {};\n  var geom = getGeom(line);\n  var coords = geom.coordinates;\n  var type = geom.type;\n  if (!coords.length) throw new Error(\"line must contain coordinates\");\n  switch (type) {\n    case \"LineString\":\n      if (autoComplete) coords = autoCompleteCoords(coords);\n      return polygon([coords], properties);\n    case \"MultiLineString\":\n      var multiCoords = [];\n      var largestArea = 0;\n      coords.forEach(function(coord) {\n        if (autoComplete) coord = autoCompleteCoords(coord);\n        if (orderCoords) {\n          var area = calculateArea(turfBBox(lineString(coord)));\n          if (area > largestArea) {\n            multiCoords.unshift(coord);\n            largestArea = area;\n          } else multiCoords.push(coord);\n        } else {\n          multiCoords.push(coord);\n        }\n      });\n      return polygon(multiCoords, properties);\n    default:\n      throw new Error(\"geometry type \" + type + \" is not supported\");\n  }\n}\nfunction autoCompleteCoords(coords) {\n  var first = coords[0];\n  var x1 = first[0];\n  var y1 = first[1];\n  var last = coords[coords.length - 1];\n  var x2 = last[0];\n  var y2 = last[1];\n  if (x1 !== x2 || y1 !== y2) {\n    coords.push(first);\n  }\n  return coords;\n}\nfunction calculateArea(bbox) {\n  var west = bbox[0];\n  var south = bbox[1];\n  var east = bbox[2];\n  var north = bbox[3];\n  return Math.abs(west - east) * Math.abs(south - north);\n}\nvar index_default = lineToPolygon;\nexport {\n  index_default as default,\n  lineToPolygon\n};\n//# sourceMappingURL=index.js.map","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { FeatureData } from '@/core/features/feature-data.ts';\nimport { BaseDomMarker } from '@/core/map/base/marker.ts';\nimport {\n  type DrawModeName,\n  type GeoJsonLineFeature,\n  type GeoJsonShapeFeature,\n  type Geoman,\n  type GmDrawLineDrawerEventWithData,\n  type GmSystemEvent,\n  type LineEventHandlerArguments,\n  type LngLatTuple,\n  type MapHandlerReturnData,\n  type MarkerData,\n  type MarkerId,\n  type ShapeName,\n  SOURCES,\n} from '@/main.ts';\nimport { BaseDraw } from '@/modes/draw/base.ts';\n\nimport { convertToThrottled } from '@/utils/behavior.ts';\nimport { getGeoJsonBounds, lngLatToGeoJsonPoint } from '@/utils/geojson.ts';\nimport { isGmHelperEvent } from '@/utils/guards/events/helper.ts';\nimport { isAutoTraceHelper, isSnapGuidesHelper } from '@/utils/guards/interfaces.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\nimport type { BaseMapEvent, BaseMapPointerEvent } from '@mapLib/types/events.ts';\nimport lineToPolygon from '@turf/line-to-polygon';\nimport type { Position } from 'geojson';\nimport log from 'loglevel';\n\ntype LineDrawerOptions = {\n  snappingMarkers: 'first' | 'last' | 'all' | 'none';\n  targetShape: Extract<ShapeName, 'line' | 'polygon'>;\n};\n\ntype MarkerInfo = {\n  index: number;\n  path: MarkerId | null;\n};\n\ntype MarkerHandler = ({\n  markerIndex,\n  shapeCoordinates,\n  geoJson,\n}: LineEventHandlerArguments) => void;\n\ninterface DrawerHandlers {\n  // when the line is closed to its beginning (polygon is finished)\n  firstMarkerClick: MarkerHandler | null;\n  // when the last marker is clicked (line is finished)\n  lastMarkerClick: MarkerHandler | null;\n  // any marker is clicked to analyse for special cases\n  nMarkerClick: MarkerHandler | null;\n}\n\nexport class LineDrawer extends BaseDraw {\n  mode: DrawModeName = 'line';\n  snappingKey = 'line_drawer';\n  drawOptions: LineDrawerOptions;\n  shapeLngLats: Array<LngLatTuple> = [];\n\n  throttledMethods = convertToThrottled(\n    {\n      onMouseMove: this.onMouseMove,\n    },\n    this,\n    this.gm.options.settings.throttlingDelay,\n  );\n\n  eventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:helper`]: this.handleGmHelperEvent.bind(this),\n    click: this.onMouseClick.bind(this),\n    mousemove: this.throttledMethods.onMouseMove.bind(this),\n  };\n\n  drawerEventHandlers: DrawerHandlers = {\n    firstMarkerClick: null,\n    lastMarkerClick: null,\n    nMarkerClick: null,\n  };\n\n  constructor(\n    gm: Geoman,\n    options: LineDrawerOptions = {\n      snappingMarkers: 'none',\n      targetShape: 'line',\n    },\n  ) {\n    super(gm);\n    this.drawOptions = options;\n  }\n\n  get snapGuidesInstance() {\n    const instance = this.gm.actionInstances.helper__snap_guides;\n    return isSnapGuidesHelper(instance) ? instance : null;\n  }\n\n  get autoTraceEnabled(): boolean {\n    return this.gm.options.controls.helper.auto_trace?.active || false;\n  }\n\n  get autoTraceHelperInstance() {\n    if (!this.autoTraceEnabled) {\n      return null;\n    }\n    return Object.values(this.gm.actionInstances).find(isAutoTraceHelper) || null;\n  }\n\n  onStartAction() {\n    this.gm.markerPointer.enable();\n  }\n\n  onEndAction() {\n    this.gm.markerPointer.disable();\n    this.endShape();\n    this.snapGuidesInstance?.removeSnapGuides();\n    this.clearDrawerHandlers();\n  }\n\n  clearDrawerHandlers() {\n    this.drawerEventHandlers.firstMarkerClick = null;\n    this.drawerEventHandlers.lastMarkerClick = null;\n    this.drawerEventHandlers.nMarkerClick = null;\n  }\n\n  handleGmHelperEvent(event: GmSystemEvent): MapHandlerReturnData {\n    if (!isGmHelperEvent(event)) {\n      log.error('LineDrawer.handleGmHelperEvent: invalid event', event);\n      return { next: true };\n    }\n\n    if (event.mode === 'snap_guides' && event.action === 'mode_start') {\n      this.updateSnapGuides();\n    }\n\n    return { next: true };\n  }\n\n  updateSnapGuides() {\n    if (this.snapGuidesInstance) {\n      const shapeGeoJson = this.featureData?.getGeoJson();\n      if (shapeGeoJson) {\n        // line drawer has a control marker at the end, so it should be removed\n        shapeGeoJson.geometry.coordinates.pop();\n      }\n\n      this.snapGuidesInstance.updateSnapGuides(\n        shapeGeoJson || null,\n        this.shapeLngLats.at(-1) || null,\n        true,\n      );\n    }\n  }\n\n  on<T extends keyof DrawerHandlers>(eventType: T, handler: DrawerHandlers[T]) {\n    this.drawerEventHandlers[eventType] = handler;\n  }\n\n  onMouseClick(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event, { warning: true })) {\n      return { next: true };\n    }\n    // we use a marker lngLat since it's auto adjusted when snapping is enabled\n    const lngLat = this.gm.markerPointer.marker?.getLngLat() || event.lngLat.toArray();\n\n    if (this.featureData) {\n      const markerInfo = this.getClickedMarkerInfo(event);\n      this.handleNextVertex(lngLat, markerInfo);\n    } else if (this.isFeatureAllowed(lngLatToGeoJsonPoint(lngLat))) {\n      this.startShape(lngLat);\n    }\n\n    this.updateSnapGuides();\n    return { next: true };\n  }\n\n  handleNextVertex(lngLat: LngLatTuple, clickedMarkerInfo: MarkerInfo) {\n    if (!this.featureData) {\n      log.error('LineDrawer.handleNextVertex: no featureData');\n      return;\n    }\n\n    const totalMarkersCount = this.featureData.markers.size;\n    const eventData = this.getMarkerClickEventData(clickedMarkerInfo.index);\n\n    if (clickedMarkerInfo.index < totalMarkersCount - 1) {\n      // a point should be added all cases except the last marker clicked (including -1 index)\n      this.addPoint(lngLat, clickedMarkerInfo);\n    }\n\n    if (clickedMarkerInfo.index === -1) {\n      return;\n    }\n\n    if (clickedMarkerInfo.index === 0) {\n      this.drawerEventHandlers.firstMarkerClick?.(eventData);\n    } else if (clickedMarkerInfo.index > 0 && clickedMarkerInfo.index === totalMarkersCount - 1) {\n      this.drawerEventHandlers.lastMarkerClick?.(eventData);\n    }\n\n    if (clickedMarkerInfo.index >= 0) {\n      this.drawerEventHandlers.nMarkerClick?.(eventData);\n    }\n  }\n\n  getMarkerClickEventData(markerIndex: number): LineEventHandlerArguments {\n    const featureGeoJson = this.getFeatureGeoJson({ withControlMarker: false });\n    return {\n      markerIndex,\n      shapeCoordinates: this.getShapeCoordinates({ withControlMarker: false }),\n      geoJson: featureGeoJson,\n      bounds: getGeoJsonBounds(featureGeoJson),\n    };\n  }\n\n  onMouseMove(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event, { warning: true })) {\n      return { next: true };\n    }\n\n    if (this.featureData && this.shapeLngLats.length) {\n      this.updateFeatureSource();\n    }\n    return { next: true };\n  }\n\n  startShape(startLngLat: LngLatTuple) {\n    this.shapeLngLats = [startLngLat];\n\n    this.featureData = this.gm.features.createFeature({\n      shapeGeoJson: this.getFeatureGeoJson({ withControlMarker: true }),\n      sourceName: SOURCES.temporary,\n    });\n\n    const markerData: MarkerData = {\n      type: 'dom',\n      instance: this.createMarker(startLngLat),\n      position: {\n        coordinate: startLngLat,\n        path: ['geometry', 'coordinates', 0],\n      },\n    };\n\n    if (this.featureData) {\n      this.featureData.markers.set(markerData.position.path.join('.'), markerData);\n\n      this.setSnapping();\n      this.fireStartEvent(this.featureData, markerData);\n    }\n    this.gm.mapAdapter.disableMapInteractions(['doubleClickZoom']);\n  }\n\n  endShape() {\n    const featureGeoJson = this.getFeatureGeoJson({ withControlMarker: false });\n\n    this.removeSnapping();\n    this.removeTmpFeature();\n    this.shapeLngLats = [];\n    this.gm.mapAdapter.enableMapInteractions(['doubleClickZoom']);\n    this.fireStopEvent(featureGeoJson);\n  }\n\n  setSnapping() {\n    if (!this.snappingHelper) {\n      return;\n    }\n    const snappingMarkers = this.drawOptions.snappingMarkers;\n\n    if (snappingMarkers === 'none') {\n      this.snappingHelper.setCustomSnappingCoordinates(this.snappingKey, []);\n    } else if (snappingMarkers === 'all' && this.shapeLngLats.length) {\n      this.snappingHelper.setCustomSnappingCoordinates(this.snappingKey, this.shapeLngLats);\n    } else if (snappingMarkers === 'first' && this.shapeLngLats.length) {\n      this.snappingHelper.setCustomSnappingCoordinates(this.snappingKey, [this.shapeLngLats[0]]);\n    } else if (snappingMarkers === 'last' && this.shapeLngLats.length) {\n      this.snappingHelper.setCustomSnappingCoordinates(this.snappingKey, [\n        this.shapeLngLats[this.shapeLngLats.length - 1],\n      ]);\n    } else {\n      log.error('LineDrawer.setSnapping: invalid data', snappingMarkers, this.shapeLngLats);\n    }\n  }\n\n  removeSnapping() {\n    if (!this.snappingHelper) {\n      return;\n    }\n    this.snappingHelper.clearCustomSnappingCoordinates(this.snappingKey);\n  }\n\n  getClickedMarkerInfo(event: BaseMapPointerEvent): MarkerInfo {\n    if (!this.featureData) {\n      return { index: -1, path: null };\n    }\n\n    let markerIndex = 0;\n    let markerPath: string | null = null;\n\n    try {\n      this.featureData.markers.forEach((markerData, key) => {\n        if (markerData.instance instanceof BaseDomMarker) {\n          const markerElement = markerData.instance.getElement() || null;\n          const eventTarget = event.originalEvent.target;\n          const eventElement = eventTarget instanceof Element ? eventTarget : null;\n\n          if (markerElement && markerElement.contains(eventElement)) {\n            markerPath = key;\n            throw new Error('stop');\n          }\n        }\n        markerIndex += 1;\n      });\n    } catch {\n      if (markerPath) {\n        return { index: markerIndex, path: markerPath };\n      }\n    }\n\n    return { index: -1, path: null };\n  }\n\n  addPoint(newLngLat: LngLatTuple, existingMarkerInfo: MarkerInfo) {\n    const featureData = this.featureData;\n    if (!featureData) {\n      log.error('LineDrawer.addPoint: no featureData');\n      return;\n    }\n\n    const addedLngLats = this.getAddedLngLats(newLngLat, existingMarkerInfo);\n    const featureGeoJson = this.getFeatureGeoJsonWithType({\n      withControlMarker: true,\n      coordinates: this.shapeLngLats.concat(addedLngLats),\n    });\n\n    if (this.isFeatureAllowed(featureGeoJson)) {\n      addedLngLats.forEach((lngLat) => {\n        this.shapeLngLats.push(lngLat);\n        const markerData = this.addMarker(lngLat, featureData);\n        this.fireUpdateEvent(featureData, markerData);\n      });\n      this.updateFeatureSource();\n    }\n  }\n\n  isFeatureAllowed(featureGeoJson: GeoJsonShapeFeature) {\n    if (this.gm.getActiveDrawModes().length) {\n      this.fireBeforeFeatureCreate({ geoJsonFeatures: [featureGeoJson] });\n      return this.flags.featureCreateAllowed;\n    }\n\n    return true;\n  }\n\n  getAddedLngLats(newLngLat: LngLatTuple, existingMarkerInfo: MarkerInfo) {\n    const featureData = this.featureData;\n    if (!featureData) {\n      log.error('LineDrawer.getCurrentLngLats: no featureData');\n      return [];\n    }\n\n    const targetLngLat = this.getMarkerInfoLngLat(existingMarkerInfo) || newLngLat;\n    const pathPositions = this.getAutoTracePath(targetLngLat);\n\n    return [...(pathPositions?.slice(1, -1) || []), targetLngLat];\n  }\n\n  getAutoTracePath(finishLngLat: LngLatTuple): Array<LngLatTuple> | null {\n    const previousLngLat = this.shapeLngLats.at(-1);\n    if (this.autoTraceEnabled && this.autoTraceHelperInstance && previousLngLat) {\n      const path = this.autoTraceHelperInstance.getShortestPath(previousLngLat, finishLngLat);\n      return path || null;\n    }\n    return null;\n  }\n\n  getMarkerInfoLngLat(markerInfo: MarkerInfo): LngLatTuple | null {\n    if (this.featureData && markerInfo.path) {\n      const markerData = this.featureData.markers.get(markerInfo.path);\n      if (markerData && markerData.type === 'dom') {\n        return markerData.instance.getLngLat();\n      } else {\n        log.error('LineDrawer.addPoint: no markerData', markerInfo);\n      }\n    }\n    return null;\n  }\n\n  addMarker(lngLat: LngLatTuple, featureData: FeatureData): MarkerData {\n    const markerData: MarkerData = {\n      type: 'dom',\n      instance: this.createMarker(lngLat),\n      position: {\n        coordinate: lngLat,\n        path: ['geometry', 'coordinates', this.shapeLngLats.length],\n      },\n    };\n\n    featureData.markers.set(markerData.position.path.join('.'), {\n      type: 'dom',\n      instance: markerData.instance,\n      position: {\n        coordinate: lngLat,\n        path: [],\n      },\n    });\n\n    return markerData;\n  }\n\n  createMarker(lngLat: LngLatTuple) {\n    return this.gm.mapAdapter.createDomMarker(\n      {\n        element: this.gm.createSvgMarkerElement('control', {\n          pointerEvents: 'auto',\n          cursor: 'pointer',\n        }),\n        anchor: 'center',\n      },\n      lngLat,\n    );\n  }\n\n  updateFeatureSource() {\n    if (!this.featureData) {\n      return;\n    }\n\n    this.featureData.updateGeoJsonGeometry(\n      this.getFeatureGeoJson({ withControlMarker: true }).geometry,\n    );\n\n    if (this.gm.markerPointer.marker) {\n      const markerData: MarkerData = {\n        type: 'dom',\n        instance: this.gm.markerPointer.marker,\n        position: {\n          coordinate: this.gm.markerPointer.marker.getLngLat(),\n          path: ['geometry', 'coordinates', this.shapeLngLats.length],\n        },\n      };\n\n      this.fireUpdateEvent(this.featureData, markerData);\n    }\n  }\n\n  getFeatureGeoJson({\n    withControlMarker,\n    coordinates = undefined,\n  }: {\n    withControlMarker: boolean;\n    coordinates?: Array<Position>;\n  }): GeoJsonLineFeature {\n    return {\n      type: 'Feature',\n      properties: {\n        shape: 'line',\n      },\n      geometry: {\n        type: 'LineString',\n        coordinates: coordinates || this.getShapeCoordinates({ withControlMarker }),\n      },\n    };\n  }\n\n  getFeatureGeoJsonWithType({\n    withControlMarker,\n    coordinates = undefined,\n  }: {\n    withControlMarker: boolean;\n    coordinates?: Array<Position>;\n  }) {\n    const featureGeoJson = this.getFeatureGeoJson({ withControlMarker, coordinates });\n\n    if (\n      this.drawOptions.targetShape === 'polygon' &&\n      featureGeoJson.geometry.coordinates.length > 3\n    ) {\n      return lineToPolygon(featureGeoJson, {\n        properties: featureGeoJson.properties,\n      }) as GeoJsonShapeFeature;\n    }\n\n    return featureGeoJson;\n  }\n\n  getShapeCoordinates({ withControlMarker }: { withControlMarker: boolean }): Array<LngLatTuple> {\n    const coordinates = [...this.shapeLngLats];\n\n    if (withControlMarker && this.gm.markerPointer.marker) {\n      coordinates.push(this.gm.markerPointer.marker.getLngLat());\n    }\n\n    return coordinates;\n  }\n\n  fireStartEvent(featureData: FeatureData, markerData: MarkerData) {\n    const payload: GmDrawLineDrawerEventWithData = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n      level: 'system',\n      actionType: 'draw',\n      mode: 'line',\n      variant: 'line_drawer',\n      action: 'start',\n      featureData,\n      markerData,\n    };\n\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, payload);\n  }\n\n  fireUpdateEvent(featureData: FeatureData, markerData: MarkerData) {\n    const payload: GmDrawLineDrawerEventWithData = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n      level: 'system',\n      actionType: 'draw',\n      mode: 'line',\n      variant: 'line_drawer',\n      action: 'update',\n      featureData,\n      markerData,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, payload);\n  }\n\n  fireStopEvent(featureGeoJson: GeoJsonLineFeature) {\n    const payload: GmDrawLineDrawerEventWithData = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n      level: 'system',\n      actionType: 'draw',\n      mode: 'line',\n      action: 'finish',\n      variant: 'line_drawer',\n      geoJsonFeature: featureGeoJson,\n      markerData: null,\n      featureData: null,\n    };\n\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, payload);\n  }\n}\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { SOURCES } from '@/core/features/constants.ts';\nimport type {\n  DrawModeName,\n  GeoJsonShapeFeature,\n  LineEventHandlerArguments,\n  ShapeName,\n} from '@/main.ts';\nimport { BaseDraw } from '@/modes/draw/base.ts';\nimport { LineDrawer } from '@/utils/draw/line-drawer.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\nimport type { Position } from 'geojson';\n\nexport class DrawLine extends BaseDraw {\n  mode: DrawModeName = 'line';\n  shape: ShapeName = 'line';\n  lineDrawer = new LineDrawer(this.gm, { snappingMarkers: 'first', targetShape: 'line' });\n  eventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:draw`]: this.forwardLineDrawerEvent.bind(this),\n    mousemove: this.onMouseMove.bind(this),\n  };\n\n  onStartAction(): void {\n    this.lineDrawer.startAction();\n    this.lineDrawer.on('nMarkerClick', this.lineFinished.bind(this));\n  }\n\n  onEndAction(): void {\n    this.lineDrawer.endAction();\n  }\n\n  onMouseMove(event: BaseMapEvent) {\n    if (!isMapPointerEvent(event)) {\n      return { next: true };\n    }\n\n    if (!this.lineDrawer.featureData) {\n      this.fireMarkerPointerUpdateEvent();\n    }\n    return { next: true };\n  }\n\n  lineFinished(event: LineEventHandlerArguments) {\n    this.lineDrawer.endShape();\n\n    let shapeCoordinates = event.shapeCoordinates;\n    if (event.markerIndex > 0) {\n      // cut the shape coordinates to the marker index\n      shapeCoordinates = shapeCoordinates.slice(0, event.markerIndex + 1);\n    }\n\n    if (shapeCoordinates.length < 2) {\n      // lines with less than 2 points are discarded\n      return null;\n    }\n\n    return this.gm.features.createFeature({\n      shapeGeoJson: this.getFeatureGeoJson(shapeCoordinates),\n      sourceName: SOURCES.main,\n    });\n  }\n\n  getFeatureGeoJson(shapeCoordinates: Array<Position>): GeoJsonShapeFeature {\n    return {\n      type: 'Feature',\n      properties: {\n        shape: this.shape,\n      },\n      geometry: {\n        type: 'LineString',\n        coordinates: shapeCoordinates,\n      },\n    };\n  }\n}\n","import { FeatureData } from '@/core/features/feature-data.ts';\nimport {\n  type DrawModeName,\n  type FeatureSourceName,\n  type GeoJsonShapeFeature,\n  type LngLatTuple,\n  type MapHandlerReturnData,\n  type ShapeName,\n  SOURCES,\n} from '@/main.ts';\nimport { BaseDraw } from '@/modes/draw/base.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\nimport type { BaseMapEvent, BaseMapPointerEvent } from '@mapLib/types/events.ts';\n\nexport class DrawMarker extends BaseDraw {\n  mode: DrawModeName = 'marker';\n  shape: ShapeName = 'marker';\n  eventHandlers = {\n    click: this.onMouseClick.bind(this),\n    mousemove: this.onMouseMove.bind(this),\n  };\n\n  onStartAction() {\n    const customMarker = this.createMarker();\n    this.gm.markerPointer.enable({ customMarker });\n    this.fireMarkerPointerStartEvent();\n  }\n\n  onEndAction() {\n    this.gm.markerPointer.disable();\n    this.fireMarkerPointerFinishEvent();\n  }\n\n  onMouseClick(event: BaseMapEvent): MapHandlerReturnData {\n    if (isMapPointerEvent(event)) {\n      this.featureData = this.createFeature(event);\n      if (this.featureData) {\n        this.saveFeature();\n      }\n    }\n    return { next: false };\n  }\n\n  onMouseMove(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event) || !this.gm.markerPointer.marker) {\n      return { next: true };\n    }\n    this.fireMarkerPointerUpdateEvent();\n    return { next: true };\n  }\n\n  createFeature(event: BaseMapPointerEvent): FeatureData | null {\n    const lngLat = this.gm.markerPointer.marker?.getLngLat() || event.lngLat.toArray();\n    const geoJson = this.getFeatureGeoJson(lngLat);\n\n    if (geoJson) {\n      this.fireBeforeFeatureCreate({ geoJsonFeatures: [geoJson] });\n\n      if (this.flags.featureCreateAllowed) {\n        return this.gm.features.createFeature({\n          shapeGeoJson: geoJson,\n          sourceName: SOURCES.temporary,\n        });\n      }\n    }\n    return null;\n  }\n\n  getFeatureGeoJson(lngLat: LngLatTuple): GeoJsonShapeFeature | null {\n    return {\n      type: 'Feature',\n      properties: {\n        shape: this.shape,\n      },\n      geometry: {\n        type: 'Point',\n        coordinates: lngLat,\n      },\n    };\n  }\n\n  protected createMarker(sourceName: FeatureSourceName = SOURCES.temporary) {\n    // Extract style properties from marker layer styles for the specified source\n    const markerStyles = this.gm.options.layerStyles.marker[sourceName];\n    const symbolLayer = markerStyles?.find((layer) => layer.type === 'symbol');\n\n    // Get icon-opacity from paint properties\n    const iconOpacity =\n      symbolLayer?.paint && 'icon-opacity' in symbolLayer.paint\n        ? (symbolLayer.paint['icon-opacity'] as number)\n        : undefined;\n\n    // Get icon-size from layout properties (default is 0.18 in marker.ts defaults)\n    const iconSize =\n      symbolLayer?.layout && 'icon-size' in symbolLayer.layout\n        ? (symbolLayer.layout['icon-size'] as number)\n        : undefined;\n\n    // Calculate pixel size based on icon-size (base size is 36px at icon-size: 0.18)\n    const baseSize = 36;\n    const defaultIconSize = 0.18;\n    const pixelSize =\n      iconSize !== undefined ? Math.round(baseSize * (iconSize / defaultIconSize)) : baseSize;\n    const sizeStr = `${pixelSize}px`;\n\n    const iconElement = this.gm.createSvgMarkerElement('default', {\n      width: sizeStr,\n      height: sizeStr,\n      pointerEvents: 'none',\n      ...(iconOpacity !== undefined && { opacity: String(iconOpacity) }),\n    });\n\n    return this.gm.mapAdapter.createDomMarker(\n      {\n        draggable: false,\n        anchor: 'bottom',\n        element: iconElement,\n      },\n      [0, 0],\n    );\n  }\n}\n","// index.ts\nimport { feature, featureCollection } from \"@turf/helpers\";\nimport { featureEach } from \"@turf/meta\";\nfunction combine(fc) {\n  var groups = {\n    MultiPoint: {\n      coordinates: [],\n      properties: []\n    },\n    MultiLineString: {\n      coordinates: [],\n      properties: []\n    },\n    MultiPolygon: {\n      coordinates: [],\n      properties: []\n    }\n  };\n  featureEach(fc, (feature2) => {\n    var _a;\n    switch ((_a = feature2.geometry) == null ? void 0 : _a.type) {\n      case \"Point\":\n        groups.MultiPoint.coordinates.push(feature2.geometry.coordinates);\n        groups.MultiPoint.properties.push(feature2.properties);\n        break;\n      case \"MultiPoint\":\n        groups.MultiPoint.coordinates.push(...feature2.geometry.coordinates);\n        groups.MultiPoint.properties.push(feature2.properties);\n        break;\n      case \"LineString\":\n        groups.MultiLineString.coordinates.push(feature2.geometry.coordinates);\n        groups.MultiLineString.properties.push(feature2.properties);\n        break;\n      case \"MultiLineString\":\n        groups.MultiLineString.coordinates.push(\n          ...feature2.geometry.coordinates\n        );\n        groups.MultiLineString.properties.push(feature2.properties);\n        break;\n      case \"Polygon\":\n        groups.MultiPolygon.coordinates.push(feature2.geometry.coordinates);\n        groups.MultiPolygon.properties.push(feature2.properties);\n        break;\n      case \"MultiPolygon\":\n        groups.MultiPolygon.coordinates.push(...feature2.geometry.coordinates);\n        groups.MultiPolygon.properties.push(feature2.properties);\n        break;\n      default:\n        break;\n    }\n  });\n  return featureCollection(\n    Object.keys(groups).filter(function(key) {\n      return groups[key].coordinates.length;\n    }).sort().map(function(key) {\n      var geometry = { type: key, coordinates: groups[key].coordinates };\n      var properties = { collectedProperties: groups[key].properties };\n      return feature(geometry, properties);\n    })\n  );\n}\nvar index_default = combine;\nexport {\n  combine,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","\nexport default function quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n","import quickselect from 'quickselect';\n\nexport default class RBush {\n    constructor(maxEntries = 9) {\n        // max entries in a node is 9 by default; min node fill is 40% for best performance\n        this._maxEntries = Math.max(4, maxEntries);\n        this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n        this.clear();\n    }\n\n    all() {\n        return this._all(this.data, []);\n    }\n\n    search(bbox) {\n        let node = this.data;\n        const result = [];\n\n        if (!intersects(bbox, node)) return result;\n\n        const toBBox = this.toBBox;\n        const nodesToSearch = [];\n\n        while (node) {\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                const childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf) result.push(child);\n                    else if (contains(bbox, childBBox)) this._all(child, result);\n                    else nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return result;\n    }\n\n    collides(bbox) {\n        let node = this.data;\n\n        if (!intersects(bbox, node)) return false;\n\n        const nodesToSearch = [];\n        while (node) {\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                const childBBox = node.leaf ? this.toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf || contains(bbox, childBBox)) return true;\n                    nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return false;\n    }\n\n    load(data) {\n        if (!(data && data.length)) return this;\n\n        if (data.length < this._minEntries) {\n            for (let i = 0; i < data.length; i++) {\n                this.insert(data[i]);\n            }\n            return this;\n        }\n\n        // recursively build the tree with the given data from scratch using OMT algorithm\n        let node = this._build(data.slice(), 0, data.length - 1, 0);\n\n        if (!this.data.children.length) {\n            // save as is if tree is empty\n            this.data = node;\n\n        } else if (this.data.height === node.height) {\n            // split root if trees have the same height\n            this._splitRoot(this.data, node);\n\n        } else {\n            if (this.data.height < node.height) {\n                // swap trees if inserted one is bigger\n                const tmpNode = this.data;\n                this.data = node;\n                node = tmpNode;\n            }\n\n            // insert the small tree into the large tree at appropriate level\n            this._insert(node, this.data.height - node.height - 1, true);\n        }\n\n        return this;\n    }\n\n    insert(item) {\n        if (item) this._insert(item, this.data.height - 1);\n        return this;\n    }\n\n    clear() {\n        this.data = createNode([]);\n        return this;\n    }\n\n    remove(item, equalsFn) {\n        if (!item) return this;\n\n        let node = this.data;\n        const bbox = this.toBBox(item);\n        const path = [];\n        const indexes = [];\n        let i, parent, goingUp;\n\n        // depth-first iterative tree traversal\n        while (node || path.length) {\n\n            if (!node) { // go up\n                node = path.pop();\n                parent = path[path.length - 1];\n                i = indexes.pop();\n                goingUp = true;\n            }\n\n            if (node.leaf) { // check current node\n                const index = findItem(item, node.children, equalsFn);\n\n                if (index !== -1) {\n                    // item found, remove the item and condense tree upwards\n                    node.children.splice(index, 1);\n                    path.push(node);\n                    this._condense(path);\n                    return this;\n                }\n            }\n\n            if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                path.push(node);\n                indexes.push(i);\n                i = 0;\n                parent = node;\n                node = node.children[0];\n\n            } else if (parent) { // go right\n                i++;\n                node = parent.children[i];\n                goingUp = false;\n\n            } else node = null; // nothing found\n        }\n\n        return this;\n    }\n\n    toBBox(item) { return item; }\n\n    compareMinX(a, b) { return a.minX - b.minX; }\n    compareMinY(a, b) { return a.minY - b.minY; }\n\n    toJSON() { return this.data; }\n\n    fromJSON(data) {\n        this.data = data;\n        return this;\n    }\n\n    _all(node, result) {\n        const nodesToSearch = [];\n        while (node) {\n            if (node.leaf) result.push(...node.children);\n            else nodesToSearch.push(...node.children);\n\n            node = nodesToSearch.pop();\n        }\n        return result;\n    }\n\n    _build(items, left, right, height) {\n\n        const N = right - left + 1;\n        let M = this._maxEntries;\n        let node;\n\n        if (N <= M) {\n            // reached leaf level; return leaf\n            node = createNode(items.slice(left, right + 1));\n            calcBBox(node, this.toBBox);\n            return node;\n        }\n\n        if (!height) {\n            // target height of the bulk-loaded tree\n            height = Math.ceil(Math.log(N) / Math.log(M));\n\n            // target number of root entries to maximize storage utilization\n            M = Math.ceil(N / Math.pow(M, height - 1));\n        }\n\n        node = createNode([]);\n        node.leaf = false;\n        node.height = height;\n\n        // split the items into M mostly square tiles\n\n        const N2 = Math.ceil(N / M);\n        const N1 = N2 * Math.ceil(Math.sqrt(M));\n\n        multiSelect(items, left, right, N1, this.compareMinX);\n\n        for (let i = left; i <= right; i += N1) {\n\n            const right2 = Math.min(i + N1 - 1, right);\n\n            multiSelect(items, i, right2, N2, this.compareMinY);\n\n            for (let j = i; j <= right2; j += N2) {\n\n                const right3 = Math.min(j + N2 - 1, right2);\n\n                // pack each entry recursively\n                node.children.push(this._build(items, j, right3, height - 1));\n            }\n        }\n\n        calcBBox(node, this.toBBox);\n\n        return node;\n    }\n\n    _chooseSubtree(bbox, node, level, path) {\n        while (true) {\n            path.push(node);\n\n            if (node.leaf || path.length - 1 === level) break;\n\n            let minArea = Infinity;\n            let minEnlargement = Infinity;\n            let targetNode;\n\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                const area = bboxArea(child);\n                const enlargement = enlargedArea(bbox, child) - area;\n\n                // choose entry with the least area enlargement\n                if (enlargement < minEnlargement) {\n                    minEnlargement = enlargement;\n                    minArea = area < minArea ? area : minArea;\n                    targetNode = child;\n\n                } else if (enlargement === minEnlargement) {\n                    // otherwise choose one with the smallest area\n                    if (area < minArea) {\n                        minArea = area;\n                        targetNode = child;\n                    }\n                }\n            }\n\n            node = targetNode || node.children[0];\n        }\n\n        return node;\n    }\n\n    _insert(item, level, isNode) {\n        const bbox = isNode ? item : this.toBBox(item);\n        const insertPath = [];\n\n        // find the best node for accommodating the item, saving all nodes along the path too\n        const node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n        // put the item into the node\n        node.children.push(item);\n        extend(node, bbox);\n\n        // split on node overflow; propagate upwards if necessary\n        while (level >= 0) {\n            if (insertPath[level].children.length > this._maxEntries) {\n                this._split(insertPath, level);\n                level--;\n            } else break;\n        }\n\n        // adjust bboxes along the insertion path\n        this._adjustParentBBoxes(bbox, insertPath, level);\n    }\n\n    // split overflowed node into two\n    _split(insertPath, level) {\n        const node = insertPath[level];\n        const M = node.children.length;\n        const m = this._minEntries;\n\n        this._chooseSplitAxis(node, m, M);\n\n        const splitIndex = this._chooseSplitIndex(node, m, M);\n\n        const newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n        newNode.height = node.height;\n        newNode.leaf = node.leaf;\n\n        calcBBox(node, this.toBBox);\n        calcBBox(newNode, this.toBBox);\n\n        if (level) insertPath[level - 1].children.push(newNode);\n        else this._splitRoot(node, newNode);\n    }\n\n    _splitRoot(node, newNode) {\n        // split root node\n        this.data = createNode([node, newNode]);\n        this.data.height = node.height + 1;\n        this.data.leaf = false;\n        calcBBox(this.data, this.toBBox);\n    }\n\n    _chooseSplitIndex(node, m, M) {\n        let index;\n        let minOverlap = Infinity;\n        let minArea = Infinity;\n\n        for (let i = m; i <= M - m; i++) {\n            const bbox1 = distBBox(node, 0, i, this.toBBox);\n            const bbox2 = distBBox(node, i, M, this.toBBox);\n\n            const overlap = intersectionArea(bbox1, bbox2);\n            const area = bboxArea(bbox1) + bboxArea(bbox2);\n\n            // choose distribution with minimum overlap\n            if (overlap < minOverlap) {\n                minOverlap = overlap;\n                index = i;\n\n                minArea = area < minArea ? area : minArea;\n\n            } else if (overlap === minOverlap) {\n                // otherwise choose distribution with minimum area\n                if (area < minArea) {\n                    minArea = area;\n                    index = i;\n                }\n            }\n        }\n\n        return index || M - m;\n    }\n\n    // sorts node children by the best axis for split\n    _chooseSplitAxis(node, m, M) {\n        const compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n        const compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n        const xMargin = this._allDistMargin(node, m, M, compareMinX);\n        const yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n        // if total distributions margin value is minimal for x, sort by minX,\n        // otherwise it's already sorted by minY\n        if (xMargin < yMargin) node.children.sort(compareMinX);\n    }\n\n    // total margin of all possible split distributions where each node is at least m full\n    _allDistMargin(node, m, M, compare) {\n        node.children.sort(compare);\n\n        const toBBox = this.toBBox;\n        const leftBBox = distBBox(node, 0, m, toBBox);\n        const rightBBox = distBBox(node, M - m, M, toBBox);\n        let margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n\n        for (let i = m; i < M - m; i++) {\n            const child = node.children[i];\n            extend(leftBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(leftBBox);\n        }\n\n        for (let i = M - m - 1; i >= m; i--) {\n            const child = node.children[i];\n            extend(rightBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(rightBBox);\n        }\n\n        return margin;\n    }\n\n    _adjustParentBBoxes(bbox, path, level) {\n        // adjust bboxes along the given tree path\n        for (let i = level; i >= 0; i--) {\n            extend(path[i], bbox);\n        }\n    }\n\n    _condense(path) {\n        // go through the path, removing empty nodes and updating bboxes\n        for (let i = path.length - 1, siblings; i >= 0; i--) {\n            if (path[i].children.length === 0) {\n                if (i > 0) {\n                    siblings = path[i - 1].children;\n                    siblings.splice(siblings.indexOf(path[i]), 1);\n\n                } else this.clear();\n\n            } else calcBBox(path[i], this.toBBox);\n        }\n    }\n}\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) return items.indexOf(item);\n\n    for (let i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) return i;\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) destNode = createNode(null);\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (let i = k; i < p; i++) {\n        const child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    const minX = Math.max(a.minX, b.minX);\n    const minY = Math.max(a.minY, b.minY);\n    const maxX = Math.min(a.maxX, b.maxX);\n    const maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    const stack = [left, right];\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) continue;\n\n        const mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n","// index.ts\nimport { earthRadius } from \"@turf/helpers\";\nimport { geomReduce } from \"@turf/meta\";\nfunction area(geojson) {\n  return geomReduce(\n    geojson,\n    (value, geom) => {\n      return value + calculateArea(geom);\n    },\n    0\n  );\n}\nfunction calculateArea(geom) {\n  let total = 0;\n  let i;\n  switch (geom.type) {\n    case \"Polygon\":\n      return polygonArea(geom.coordinates);\n    case \"MultiPolygon\":\n      for (i = 0; i < geom.coordinates.length; i++) {\n        total += polygonArea(geom.coordinates[i]);\n      }\n      return total;\n    case \"Point\":\n    case \"MultiPoint\":\n    case \"LineString\":\n    case \"MultiLineString\":\n      return 0;\n  }\n  return 0;\n}\nfunction polygonArea(coords) {\n  let total = 0;\n  if (coords && coords.length > 0) {\n    total += Math.abs(ringArea(coords[0]));\n    for (let i = 1; i < coords.length; i++) {\n      total -= Math.abs(ringArea(coords[i]));\n    }\n  }\n  return total;\n}\nvar FACTOR = earthRadius * earthRadius / 2;\nvar PI_OVER_180 = Math.PI / 180;\nfunction ringArea(coords) {\n  const coordsLength = coords.length - 1;\n  if (coordsLength <= 2) return 0;\n  let total = 0;\n  let i = 0;\n  while (i < coordsLength) {\n    const lower = coords[i];\n    const middle = coords[i + 1 === coordsLength ? 0 : i + 1];\n    const upper = coords[i + 2 >= coordsLength ? (i + 2) % coordsLength : i + 2];\n    const lowerX = lower[0] * PI_OVER_180;\n    const middleY = middle[1] * PI_OVER_180;\n    const upperX = upper[0] * PI_OVER_180;\n    total += (upperX - lowerX) * Math.sin(middleY);\n    i++;\n  }\n  return total * FACTOR;\n}\nvar index_default = area;\nexport {\n  area,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","export const epsilon = 1.1102230246251565e-16;\nexport const splitter = 134217729;\nexport const resulterrbound = (3 + 8 * epsilon) * epsilon;\n\n// fast_expansion_sum_zeroelim routine from oritinal code\nexport function sum(elen, e, flen, f, h) {\n    let Q, Qnew, hh, bvirt;\n    let enow = e[0];\n    let fnow = f[0];\n    let eindex = 0;\n    let findex = 0;\n    if ((fnow > enow) === (fnow > -enow)) {\n        Q = enow;\n        enow = e[++eindex];\n    } else {\n        Q = fnow;\n        fnow = f[++findex];\n    }\n    let hindex = 0;\n    if (eindex < elen && findex < flen) {\n        if ((fnow > enow) === (fnow > -enow)) {\n            Qnew = enow + Q;\n            hh = Q - (Qnew - enow);\n            enow = e[++eindex];\n        } else {\n            Qnew = fnow + Q;\n            hh = Q - (Qnew - fnow);\n            fnow = f[++findex];\n        }\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n        while (eindex < elen && findex < flen) {\n            if ((fnow > enow) === (fnow > -enow)) {\n                Qnew = Q + enow;\n                bvirt = Qnew - Q;\n                hh = Q - (Qnew - bvirt) + (enow - bvirt);\n                enow = e[++eindex];\n            } else {\n                Qnew = Q + fnow;\n                bvirt = Qnew - Q;\n                hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n                fnow = f[++findex];\n            }\n            Q = Qnew;\n            if (hh !== 0) {\n                h[hindex++] = hh;\n            }\n        }\n    }\n    while (eindex < elen) {\n        Qnew = Q + enow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (enow - bvirt);\n        enow = e[++eindex];\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    while (findex < flen) {\n        Qnew = Q + fnow;\n        bvirt = Qnew - Q;\n        hh = Q - (Qnew - bvirt) + (fnow - bvirt);\n        fnow = f[++findex];\n        Q = Qnew;\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    if (Q !== 0 || hindex === 0) {\n        h[hindex++] = Q;\n    }\n    return hindex;\n}\n\nexport function sum_three(alen, a, blen, b, clen, c, tmp, out) {\n    return sum(sum(alen, a, blen, b, tmp), tmp, clen, c, out);\n}\n\n// scale_expansion_zeroelim routine from oritinal code\nexport function scale(elen, e, b, h) {\n    let Q, sum, hh, product1, product0;\n    let bvirt, c, ahi, alo, bhi, blo;\n\n    c = splitter * b;\n    bhi = c - (c - b);\n    blo = b - bhi;\n    let enow = e[0];\n    Q = enow * b;\n    c = splitter * enow;\n    ahi = c - (c - enow);\n    alo = enow - ahi;\n    hh = alo * blo - (Q - ahi * bhi - alo * bhi - ahi * blo);\n    let hindex = 0;\n    if (hh !== 0) {\n        h[hindex++] = hh;\n    }\n    for (let i = 1; i < elen; i++) {\n        enow = e[i];\n        product1 = enow * b;\n        c = splitter * enow;\n        ahi = c - (c - enow);\n        alo = enow - ahi;\n        product0 = alo * blo - (product1 - ahi * bhi - alo * bhi - ahi * blo);\n        sum = Q + product0;\n        bvirt = sum - Q;\n        hh = Q - (sum - bvirt) + (product0 - bvirt);\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n        Q = product1 + sum;\n        hh = sum - (Q - product1);\n        if (hh !== 0) {\n            h[hindex++] = hh;\n        }\n    }\n    if (Q !== 0 || hindex === 0) {\n        h[hindex++] = Q;\n    }\n    return hindex;\n}\n\nexport function negate(elen, e) {\n    for (let i = 0; i < elen; i++) e[i] = -e[i];\n    return elen;\n}\n\nexport function estimate(elen, e) {\n    let Q = e[0];\n    for (let i = 1; i < elen; i++) Q += e[i];\n    return Q;\n}\n\nexport function vec(n) {\n    return new Float64Array(n);\n}\n","import {epsilon, splitter, resulterrbound, estimate, vec, sum} from './util.js';\n\nconst ccwerrboundA = (3 + 16 * epsilon) * epsilon;\nconst ccwerrboundB = (2 + 12 * epsilon) * epsilon;\nconst ccwerrboundC = (9 + 64 * epsilon) * epsilon * epsilon;\n\nconst B = vec(4);\nconst C1 = vec(8);\nconst C2 = vec(12);\nconst D = vec(16);\nconst u = vec(4);\n\nfunction orient2dadapt(ax, ay, bx, by, cx, cy, detsum) {\n    let acxtail, acytail, bcxtail, bcytail;\n    let bvirt, c, ahi, alo, bhi, blo, _i, _j, _0, s1, s0, t1, t0, u3;\n\n    const acx = ax - cx;\n    const bcx = bx - cx;\n    const acy = ay - cy;\n    const bcy = by - cy;\n\n    s1 = acx * bcy;\n    c = splitter * acx;\n    ahi = c - (c - acx);\n    alo = acx - ahi;\n    c = splitter * bcy;\n    bhi = c - (c - bcy);\n    blo = bcy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acy * bcx;\n    c = splitter * acy;\n    ahi = c - (c - acy);\n    alo = acy - ahi;\n    c = splitter * bcx;\n    bhi = c - (c - bcx);\n    blo = bcx - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    B[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    B[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    B[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    B[3] = u3;\n\n    let det = estimate(4, B);\n    let errbound = ccwerrboundB * detsum;\n    if (det >= errbound || -det >= errbound) {\n        return det;\n    }\n\n    bvirt = ax - acx;\n    acxtail = ax - (acx + bvirt) + (bvirt - cx);\n    bvirt = bx - bcx;\n    bcxtail = bx - (bcx + bvirt) + (bvirt - cx);\n    bvirt = ay - acy;\n    acytail = ay - (acy + bvirt) + (bvirt - cy);\n    bvirt = by - bcy;\n    bcytail = by - (bcy + bvirt) + (bvirt - cy);\n\n    if (acxtail === 0 && acytail === 0 && bcxtail === 0 && bcytail === 0) {\n        return det;\n    }\n\n    errbound = ccwerrboundC * detsum + resulterrbound * Math.abs(det);\n    det += (acx * bcytail + bcy * acxtail) - (acy * bcxtail + bcx * acytail);\n    if (det >= errbound || -det >= errbound) return det;\n\n    s1 = acxtail * bcy;\n    c = splitter * acxtail;\n    ahi = c - (c - acxtail);\n    alo = acxtail - ahi;\n    c = splitter * bcy;\n    bhi = c - (c - bcy);\n    blo = bcy - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acytail * bcx;\n    c = splitter * acytail;\n    ahi = c - (c - acytail);\n    alo = acytail - ahi;\n    c = splitter * bcx;\n    bhi = c - (c - bcx);\n    blo = bcx - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const C1len = sum(4, B, 4, u, C1);\n\n    s1 = acx * bcytail;\n    c = splitter * acx;\n    ahi = c - (c - acx);\n    alo = acx - ahi;\n    c = splitter * bcytail;\n    bhi = c - (c - bcytail);\n    blo = bcytail - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acy * bcxtail;\n    c = splitter * acy;\n    ahi = c - (c - acy);\n    alo = acy - ahi;\n    c = splitter * bcxtail;\n    bhi = c - (c - bcxtail);\n    blo = bcxtail - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const C2len = sum(C1len, C1, 4, u, C2);\n\n    s1 = acxtail * bcytail;\n    c = splitter * acxtail;\n    ahi = c - (c - acxtail);\n    alo = acxtail - ahi;\n    c = splitter * bcytail;\n    bhi = c - (c - bcytail);\n    blo = bcytail - bhi;\n    s0 = alo * blo - (s1 - ahi * bhi - alo * bhi - ahi * blo);\n    t1 = acytail * bcxtail;\n    c = splitter * acytail;\n    ahi = c - (c - acytail);\n    alo = acytail - ahi;\n    c = splitter * bcxtail;\n    bhi = c - (c - bcxtail);\n    blo = bcxtail - bhi;\n    t0 = alo * blo - (t1 - ahi * bhi - alo * bhi - ahi * blo);\n    _i = s0 - t0;\n    bvirt = s0 - _i;\n    u[0] = s0 - (_i + bvirt) + (bvirt - t0);\n    _j = s1 + _i;\n    bvirt = _j - s1;\n    _0 = s1 - (_j - bvirt) + (_i - bvirt);\n    _i = _0 - t1;\n    bvirt = _0 - _i;\n    u[1] = _0 - (_i + bvirt) + (bvirt - t1);\n    u3 = _j + _i;\n    bvirt = u3 - _j;\n    u[2] = _j - (u3 - bvirt) + (_i - bvirt);\n    u[3] = u3;\n    const Dlen = sum(C2len, C2, 4, u, D);\n\n    return D[Dlen - 1];\n}\n\nexport function orient2d(ax, ay, bx, by, cx, cy) {\n    const detleft = (ay - cy) * (bx - cx);\n    const detright = (ax - cx) * (by - cy);\n    const det = detleft - detright;\n\n    const detsum = Math.abs(detleft + detright);\n    if (Math.abs(det) >= ccwerrboundA * detsum) return det;\n\n    return -orient2dadapt(ax, ay, bx, by, cx, cy, detsum);\n}\n\nexport function orient2dfast(ax, ay, bx, by, cx, cy) {\n    return (ay - cy) * (bx - cx) - (ax - cx) * (by - cy);\n}\n","import { orient2d } from 'robust-predicates';\n\nfunction pointInPolygon(p, polygon) {\n    var i;\n    var ii;\n    var k = 0;\n    var f;\n    var u1;\n    var v1;\n    var u2;\n    var v2;\n    var currentP;\n    var nextP;\n\n    var x = p[0];\n    var y = p[1];\n\n    var numContours = polygon.length;\n    for (i = 0; i < numContours; i++) {\n        ii = 0;\n        var contour = polygon[i];\n        var contourLen = contour.length - 1;\n\n        currentP = contour[0];\n        if (currentP[0] !== contour[contourLen][0] &&\n            currentP[1] !== contour[contourLen][1]) {\n            throw new Error('First and last coordinates in a ring must be the same')\n        }\n\n        u1 = currentP[0] - x;\n        v1 = currentP[1] - y;\n\n        for (ii; ii < contourLen; ii++) {\n            nextP = contour[ii + 1];\n\n            u2 = nextP[0] - x;\n            v2 = nextP[1] - y;\n\n            if (v1 === 0 && v2 === 0) {\n                if ((u2 <= 0 && u1 >= 0) || (u1 <= 0 && u2 >= 0)) { return 0 }\n            } else if ((v2 >= 0 && v1 <= 0) || (v2 <= 0 && v1 >= 0)) {\n                f = orient2d(u1, u2, v1, v2, 0, 0);\n                if (f === 0) { return 0 }\n                if ((f > 0 && v2 > 0 && v1 <= 0) || (f < 0 && v2 <= 0 && v1 > 0)) { k++; }\n            }\n            currentP = nextP;\n            v1 = v2;\n            u1 = u2;\n        }\n    }\n\n    if (k % 2 === 0) { return false }\n    return true\n}\n\nexport { pointInPolygon as default };\n","// index.ts\nimport pip from \"point-in-polygon-hao\";\nimport { getCoord, getGeom } from \"@turf/invariant\";\nfunction booleanPointInPolygon(point, polygon, options = {}) {\n  if (!point) {\n    throw new Error(\"point is required\");\n  }\n  if (!polygon) {\n    throw new Error(\"polygon is required\");\n  }\n  const pt = getCoord(point);\n  const geom = getGeom(polygon);\n  const type = geom.type;\n  const bbox = polygon.bbox;\n  let polys = geom.coordinates;\n  if (bbox && inBBox(pt, bbox) === false) {\n    return false;\n  }\n  if (type === \"Polygon\") {\n    polys = [polys];\n  }\n  let result = false;\n  for (var i = 0; i < polys.length; ++i) {\n    const polyResult = pip(pt, polys[i]);\n    if (polyResult === 0) return options.ignoreBoundary ? false : true;\n    else if (polyResult) result = true;\n  }\n  return result;\n}\nfunction inBBox(pt, bbox) {\n  return bbox[0] <= pt[0] && bbox[1] <= pt[1] && bbox[2] >= pt[0] && bbox[3] >= pt[1];\n}\nvar index_default = booleanPointInPolygon;\nexport {\n  booleanPointInPolygon,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { flattenEach, featureEach } from \"@turf/meta\";\nimport { polygon as polygon2, featureCollection as featureCollection2 } from \"@turf/helpers\";\n\n// lib/geojson-polygon-self-intersections.ts\nimport rbush from \"rbush\";\nfunction geojsonPolygonSelfIntersections(feature, filterFn) {\n  if (feature.geometry.type !== \"Polygon\")\n    throw new Error(\"The input feature must be a Polygon\");\n  var coord = feature.geometry.coordinates;\n  var output = [];\n  var seen = {};\n  var allEdgesAsRbushTreeItems = [];\n  for (var ring0 = 0; ring0 < coord.length; ring0++) {\n    for (var edge0 = 0; edge0 < coord[ring0].length - 1; edge0++) {\n      allEdgesAsRbushTreeItems.push(rbushTreeItem(ring0, edge0));\n    }\n  }\n  var tree = new rbush();\n  tree.load(allEdgesAsRbushTreeItems);\n  for (var ringA = 0; ringA < coord.length; ringA++) {\n    for (var edgeA = 0; edgeA < coord[ringA].length - 1; edgeA++) {\n      var bboxOverlaps = tree.search(rbushTreeItem(ringA, edgeA));\n      bboxOverlaps.forEach(function(bboxIsect) {\n        var ring1 = bboxIsect.ring;\n        var edge1 = bboxIsect.edge;\n        ifIsectAddToOutput(ringA, edgeA, ring1, edge1);\n      });\n    }\n  }\n  return output;\n  function ifIsectAddToOutput(ring02, edge02, ring1, edge1) {\n    var start0 = coord[ring02][edge02];\n    var end0 = coord[ring02][edge02 + 1];\n    var start1 = coord[ring1][edge1];\n    var end1 = coord[ring1][edge1 + 1];\n    var isect = intersect(start0, end0, start1, end1);\n    if (isect === null) return;\n    var frac0;\n    var frac1;\n    if (end0[0] !== start0[0]) {\n      frac0 = (isect[0] - start0[0]) / (end0[0] - start0[0]);\n    } else {\n      frac0 = (isect[1] - start0[1]) / (end0[1] - start0[1]);\n    }\n    if (end1[0] !== start1[0]) {\n      frac1 = (isect[0] - start1[0]) / (end1[0] - start1[0]);\n    } else {\n      frac1 = (isect[1] - start1[1]) / (end1[1] - start1[1]);\n    }\n    if (frac0 >= 1 || frac0 <= 0 || frac1 >= 1 || frac1 <= 0) return;\n    var key = isect;\n    var unique = !seen[key.toString()];\n    if (unique) {\n      seen[key.toString()] = true;\n    }\n    if (filterFn) {\n      output.push(\n        filterFn(\n          isect,\n          ring02,\n          edge02,\n          start0,\n          end0,\n          frac0,\n          ring1,\n          edge1,\n          start1,\n          end1,\n          frac1,\n          unique\n        )\n      );\n    }\n  }\n  function rbushTreeItem(ring, edge) {\n    var start = coord[ring][edge];\n    var end = coord[ring][edge + 1];\n    var minX;\n    var maxX;\n    var minY;\n    var maxY;\n    if (start[0] < end[0]) {\n      minX = start[0];\n      maxX = end[0];\n    } else {\n      minX = end[0];\n      maxX = start[0];\n    }\n    if (start[1] < end[1]) {\n      minY = start[1];\n      maxY = end[1];\n    } else {\n      minY = end[1];\n      maxY = start[1];\n    }\n    return {\n      minX,\n      minY,\n      maxX,\n      maxY,\n      ring,\n      edge\n    };\n  }\n}\nfunction intersect(start0, end0, start1, end1) {\n  if (equalArrays(start0, start1) || equalArrays(start0, end1) || equalArrays(end0, start1) || equalArrays(end1, start1))\n    return null;\n  var x0 = start0[0], y0 = start0[1], x1 = end0[0], y1 = end0[1], x2 = start1[0], y2 = start1[1], x3 = end1[0], y3 = end1[1];\n  var denom = (x0 - x1) * (y2 - y3) - (y0 - y1) * (x2 - x3);\n  if (denom === 0) return null;\n  var x4 = ((x0 * y1 - y0 * x1) * (x2 - x3) - (x0 - x1) * (x2 * y3 - y2 * x3)) / denom;\n  var y4 = ((x0 * y1 - y0 * x1) * (y2 - y3) - (y0 - y1) * (x2 * y3 - y2 * x3)) / denom;\n  return [x4, y4];\n}\nfunction equalArrays(array1, array2) {\n  if (!array1 || !array2) return false;\n  if (array1.length !== array2.length) return false;\n  for (var i = 0, l = array1.length; i < l; i++) {\n    if (array1[i] instanceof Array && array2[i] instanceof Array) {\n      if (!equalArrays(array1[i], array2[i])) return false;\n    } else if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n// lib/simplepolygon.ts\nimport { area } from \"@turf/area\";\nimport { featureCollection, polygon } from \"@turf/helpers\";\nimport { booleanPointInPolygon } from \"@turf/boolean-point-in-polygon\";\nimport rbush2 from \"rbush\";\nfunction simplepolygon(feature) {\n  if (feature.type != \"Feature\")\n    throw new Error(\"The input must a geojson object of type Feature\");\n  if (feature.geometry === void 0 || feature.geometry == null)\n    throw new Error(\n      \"The input must a geojson object with a non-empty geometry\"\n    );\n  if (feature.geometry.type != \"Polygon\")\n    throw new Error(\"The input must be a geojson Polygon\");\n  var numRings = feature.geometry.coordinates.length;\n  var vertices = [];\n  for (var i = 0; i < numRings; i++) {\n    var ring = feature.geometry.coordinates[i];\n    if (!equalArrays2(ring[0], ring[ring.length - 1])) {\n      ring.push(ring[0]);\n    }\n    for (var j = 0; j < ring.length - 1; j++) {\n      vertices.push(ring[j]);\n    }\n  }\n  if (!isUnique(vertices))\n    throw new Error(\n      \"The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)\"\n    );\n  var numvertices = vertices.length;\n  var selfIsectsData = geojsonPolygonSelfIntersections(\n    feature,\n    function filterFn(isect, ring0, edge0, start0, end0, frac0, ring1, edge1, start1, end1, frac1, unique) {\n      return [\n        isect,\n        ring0,\n        edge0,\n        start0,\n        end0,\n        frac0,\n        ring1,\n        edge1,\n        start1,\n        end1,\n        frac1,\n        unique\n      ];\n    }\n  );\n  var numSelfIsect = selfIsectsData.length;\n  if (numSelfIsect == 0) {\n    var outputFeatureArray = [];\n    for (var i = 0; i < numRings; i++) {\n      outputFeatureArray.push(\n        polygon([feature.geometry.coordinates[i]], {\n          parent: -1,\n          winding: windingOfRing(feature.geometry.coordinates[i])\n        })\n      );\n    }\n    let output2 = featureCollection(outputFeatureArray);\n    determineParents(output2);\n    setNetWinding(output2);\n    return output2;\n  }\n  var pseudoVtxListByRingAndEdge = [];\n  var isectList = [];\n  for (var i = 0; i < numRings; i++) {\n    pseudoVtxListByRingAndEdge.push([]);\n    for (var j = 0; j < feature.geometry.coordinates[i].length - 1; j++) {\n      pseudoVtxListByRingAndEdge[i].push([\n        new PseudoVtx(\n          feature.geometry.coordinates[i][modulo(j + 1, feature.geometry.coordinates[i].length - 1)],\n          1,\n          [i, j],\n          [i, modulo(j + 1, feature.geometry.coordinates[i].length - 1)],\n          void 0\n        )\n      ]);\n      isectList.push(\n        new Isect(\n          feature.geometry.coordinates[i][j],\n          [i, modulo(j - 1, feature.geometry.coordinates[i].length - 1)],\n          [i, j],\n          void 0,\n          void 0,\n          false,\n          true\n        )\n      );\n    }\n  }\n  for (var i = 0; i < numSelfIsect; i++) {\n    pseudoVtxListByRingAndEdge[selfIsectsData[i][1]][selfIsectsData[i][2]].push(\n      new PseudoVtx(\n        selfIsectsData[i][0],\n        selfIsectsData[i][5],\n        [selfIsectsData[i][1], selfIsectsData[i][2]],\n        [selfIsectsData[i][6], selfIsectsData[i][7]],\n        void 0\n      )\n    );\n    if (selfIsectsData[i][11])\n      isectList.push(\n        new Isect(\n          selfIsectsData[i][0],\n          [selfIsectsData[i][1], selfIsectsData[i][2]],\n          [selfIsectsData[i][6], selfIsectsData[i][7]],\n          void 0,\n          void 0,\n          true,\n          true\n        )\n      );\n  }\n  var numIsect = isectList.length;\n  for (var i = 0; i < pseudoVtxListByRingAndEdge.length; i++) {\n    for (var j = 0; j < pseudoVtxListByRingAndEdge[i].length; j++) {\n      pseudoVtxListByRingAndEdge[i][j].sort(function(a, b) {\n        return a.param < b.param ? -1 : 1;\n      });\n    }\n  }\n  var allIsectsAsIsectRbushTreeItem = [];\n  for (var i = 0; i < numIsect; i++) {\n    allIsectsAsIsectRbushTreeItem.push({\n      minX: isectList[i].coord[0],\n      minY: isectList[i].coord[1],\n      maxX: isectList[i].coord[0],\n      maxY: isectList[i].coord[1],\n      index: i\n    });\n  }\n  var isectRbushTree = new rbush2();\n  isectRbushTree.load(allIsectsAsIsectRbushTreeItem);\n  for (var i = 0; i < pseudoVtxListByRingAndEdge.length; i++) {\n    for (var j = 0; j < pseudoVtxListByRingAndEdge[i].length; j++) {\n      for (var k = 0; k < pseudoVtxListByRingAndEdge[i][j].length; k++) {\n        let coordToFind;\n        if (k == pseudoVtxListByRingAndEdge[i][j].length - 1) {\n          coordToFind = pseudoVtxListByRingAndEdge[i][modulo(j + 1, feature.geometry.coordinates[i].length - 1)][0].coord;\n        } else {\n          coordToFind = pseudoVtxListByRingAndEdge[i][j][k + 1].coord;\n        }\n        var IsectRbushTreeItemFound = isectRbushTree.search({\n          minX: coordToFind[0],\n          minY: coordToFind[1],\n          maxX: coordToFind[0],\n          maxY: coordToFind[1]\n        })[0];\n        pseudoVtxListByRingAndEdge[i][j][k].nxtIsectAlongEdgeIn = IsectRbushTreeItemFound.index;\n      }\n    }\n  }\n  for (var i = 0; i < pseudoVtxListByRingAndEdge.length; i++) {\n    for (var j = 0; j < pseudoVtxListByRingAndEdge[i].length; j++) {\n      for (var k = 0; k < pseudoVtxListByRingAndEdge[i][j].length; k++) {\n        let coordToFind = pseudoVtxListByRingAndEdge[i][j][k].coord;\n        var IsectRbushTreeItemFound = isectRbushTree.search({\n          minX: coordToFind[0],\n          minY: coordToFind[1],\n          maxX: coordToFind[0],\n          maxY: coordToFind[1]\n        })[0];\n        var l = IsectRbushTreeItemFound.index;\n        if (l < numvertices) {\n          isectList[l].nxtIsectAlongRingAndEdge2 = pseudoVtxListByRingAndEdge[i][j][k].nxtIsectAlongEdgeIn;\n        } else {\n          if (equalArrays2(\n            isectList[l].ringAndEdge1,\n            pseudoVtxListByRingAndEdge[i][j][k].ringAndEdgeIn\n          )) {\n            isectList[l].nxtIsectAlongRingAndEdge1 = pseudoVtxListByRingAndEdge[i][j][k].nxtIsectAlongEdgeIn;\n          } else {\n            isectList[l].nxtIsectAlongRingAndEdge2 = pseudoVtxListByRingAndEdge[i][j][k].nxtIsectAlongEdgeIn;\n          }\n        }\n      }\n    }\n  }\n  var queue = [];\n  var i = 0;\n  for (var j = 0; j < numRings; j++) {\n    var leftIsect = i;\n    for (var k = 0; k < feature.geometry.coordinates[j].length - 1; k++) {\n      if (isectList[i].coord[0] < isectList[leftIsect].coord[0]) {\n        leftIsect = i;\n      }\n      i++;\n    }\n    var isectAfterLeftIsect = isectList[leftIsect].nxtIsectAlongRingAndEdge2;\n    for (var k = 0; k < isectList.length; k++) {\n      if (isectList[k].nxtIsectAlongRingAndEdge1 == leftIsect || isectList[k].nxtIsectAlongRingAndEdge2 == leftIsect) {\n        var isectBeforeLeftIsect = k;\n        break;\n      }\n    }\n    var windingAtIsect = isConvex(\n      [\n        isectList[isectBeforeLeftIsect].coord,\n        isectList[leftIsect].coord,\n        isectList[isectAfterLeftIsect].coord\n      ],\n      true\n    ) ? 1 : -1;\n    queue.push({ isect: leftIsect, parent: -1, winding: windingAtIsect });\n  }\n  queue.sort(function(a, b) {\n    return isectList[a.isect].coord > isectList[b.isect].coord ? -1 : 1;\n  });\n  var outputFeatureArray = [];\n  while (queue.length > 0) {\n    var popped = queue.pop();\n    var startIsect = popped.isect;\n    var currentOutputRingParent = popped.parent;\n    var currentOutputRingWinding = popped.winding;\n    var currentOutputRing = outputFeatureArray.length;\n    var currentOutputRingCoords = [isectList[startIsect].coord];\n    var currentIsect = startIsect;\n    if (isectList[startIsect].ringAndEdge1Walkable) {\n      var walkingRingAndEdge = isectList[startIsect].ringAndEdge1;\n      var nxtIsect = isectList[startIsect].nxtIsectAlongRingAndEdge1;\n    } else {\n      var walkingRingAndEdge = isectList[startIsect].ringAndEdge2;\n      var nxtIsect = isectList[startIsect].nxtIsectAlongRingAndEdge2;\n    }\n    while (!equalArrays2(isectList[startIsect].coord, isectList[nxtIsect].coord)) {\n      currentOutputRingCoords.push(isectList[nxtIsect].coord);\n      var nxtIsectInQueue = void 0;\n      for (var i = 0; i < queue.length; i++) {\n        if (queue[i].isect == nxtIsect) {\n          nxtIsectInQueue = i;\n          break;\n        }\n      }\n      if (nxtIsectInQueue != void 0) {\n        queue.splice(nxtIsectInQueue, 1);\n      }\n      if (equalArrays2(walkingRingAndEdge, isectList[nxtIsect].ringAndEdge1)) {\n        walkingRingAndEdge = isectList[nxtIsect].ringAndEdge2;\n        isectList[nxtIsect].ringAndEdge2Walkable = false;\n        if (isectList[nxtIsect].ringAndEdge1Walkable) {\n          var pushing = {\n            isect: nxtIsect\n          };\n          if (isConvex(\n            [\n              isectList[currentIsect].coord,\n              isectList[nxtIsect].coord,\n              isectList[isectList[nxtIsect].nxtIsectAlongRingAndEdge2].coord\n            ],\n            currentOutputRingWinding == 1\n          )) {\n            pushing.parent = currentOutputRingParent;\n            pushing.winding = -currentOutputRingWinding;\n          } else {\n            pushing.parent = currentOutputRing;\n            pushing.winding = currentOutputRingWinding;\n          }\n          queue.push(pushing);\n        }\n        currentIsect = nxtIsect;\n        nxtIsect = isectList[nxtIsect].nxtIsectAlongRingAndEdge2;\n      } else {\n        walkingRingAndEdge = isectList[nxtIsect].ringAndEdge1;\n        isectList[nxtIsect].ringAndEdge1Walkable = false;\n        if (isectList[nxtIsect].ringAndEdge2Walkable) {\n          var pushing = {\n            isect: nxtIsect\n          };\n          if (isConvex(\n            [\n              isectList[currentIsect].coord,\n              isectList[nxtIsect].coord,\n              isectList[isectList[nxtIsect].nxtIsectAlongRingAndEdge1].coord\n            ],\n            currentOutputRingWinding == 1\n          )) {\n            pushing.parent = currentOutputRingParent;\n            pushing.winding = -currentOutputRingWinding;\n          } else {\n            pushing.parent = currentOutputRing;\n            pushing.winding = currentOutputRingWinding;\n          }\n          queue.push(pushing);\n        }\n        currentIsect = nxtIsect;\n        nxtIsect = isectList[nxtIsect].nxtIsectAlongRingAndEdge1;\n      }\n    }\n    currentOutputRingCoords.push(isectList[nxtIsect].coord);\n    outputFeatureArray.push(\n      polygon([currentOutputRingCoords], {\n        index: currentOutputRing,\n        parent: currentOutputRingParent,\n        winding: currentOutputRingWinding,\n        netWinding: void 0\n      })\n    );\n  }\n  let output = featureCollection(outputFeatureArray);\n  determineParents(output);\n  setNetWinding(output);\n  function determineParents(output2) {\n    var featuresWithoutParent = [];\n    for (var i2 = 0; i2 < output2.features.length; i2++) {\n      if (output2.features[i2].properties.parent == -1)\n        featuresWithoutParent.push(i2);\n    }\n    if (featuresWithoutParent.length > 1) {\n      for (var i2 = 0; i2 < featuresWithoutParent.length; i2++) {\n        var parent = -1;\n        var parentArea = Infinity;\n        for (var j2 = 0; j2 < output2.features.length; j2++) {\n          if (featuresWithoutParent[i2] == j2) continue;\n          if (booleanPointInPolygon(\n            output2.features[featuresWithoutParent[i2]].geometry.coordinates[0][0],\n            output2.features[j2],\n            { ignoreBoundary: true }\n          )) {\n            if (area(output2.features[j2]) < parentArea) {\n              parent = j2;\n            }\n          }\n        }\n        output2.features[featuresWithoutParent[i2]].properties.parent = parent;\n      }\n    }\n  }\n  function setNetWinding(output2) {\n    for (var i2 = 0; i2 < output2.features.length; i2++) {\n      if (output2.features[i2].properties.parent == -1) {\n        var netWinding = output2.features[i2].properties.winding;\n        output2.features[i2].properties.netWinding = netWinding;\n        setNetWindingOfChildren(output2, i2, netWinding);\n      }\n    }\n  }\n  function setNetWindingOfChildren(output2, parent, ParentNetWinding) {\n    for (var i2 = 0; i2 < output2.features.length; i2++) {\n      if (output2.features[i2].properties.parent == parent) {\n        var netWinding = ParentNetWinding + output2.features[i2].properties.winding;\n        output2.features[i2].properties.netWinding = netWinding;\n        setNetWindingOfChildren(output2, i2, netWinding);\n      }\n    }\n  }\n  return output;\n}\nvar PseudoVtx = class {\n  // The next intersection when following the incomming edge (so not when following ringAndEdgeOut!)\n  // Constructor for (ring- or intersection-) pseudo-vertices.\n  constructor(coord, param, ringAndEdgeIn, ringAndEdgeOut, nxtIsectAlongEdgeIn) {\n    this.coord = coord;\n    this.param = param;\n    this.ringAndEdgeIn = ringAndEdgeIn;\n    this.ringAndEdgeOut = ringAndEdgeOut;\n    this.nxtIsectAlongEdgeIn = nxtIsectAlongEdgeIn;\n  }\n};\nvar Isect = class {\n  // Constructor for an intersection. There are two intersection-pseudo-vertices per self-intersection and one ring-pseudo-vertex per ring-vertex-intersection. Their labels 1 and 2 are not assigned a particular meaning but are permanent once given.\n  constructor(coord, ringAndEdge1, ringAndEdge2, nxtIsectAlongRingAndEdge1, nxtIsectAlongRingAndEdge2, ringAndEdge1Walkable, ringAndEdge2Walkable) {\n    this.coord = coord;\n    this.ringAndEdge1 = ringAndEdge1;\n    this.ringAndEdge2 = ringAndEdge2;\n    this.nxtIsectAlongRingAndEdge1 = nxtIsectAlongRingAndEdge1;\n    this.nxtIsectAlongRingAndEdge2 = nxtIsectAlongRingAndEdge2;\n    this.ringAndEdge1Walkable = ringAndEdge1Walkable;\n    this.ringAndEdge2Walkable = ringAndEdge2Walkable;\n  }\n};\nfunction isConvex(pts, righthanded) {\n  if (typeof righthanded === \"undefined\") righthanded = true;\n  if (pts.length != 3)\n    throw new Error(\"This function requires an array of three points [x,y]\");\n  var d = (pts[1][0] - pts[0][0]) * (pts[2][1] - pts[0][1]) - (pts[1][1] - pts[0][1]) * (pts[2][0] - pts[0][0]);\n  return d >= 0 == righthanded;\n}\nfunction windingOfRing(ring) {\n  var leftVtx = 0;\n  for (var i = 0; i < ring.length - 1; i++) {\n    if (ring[i][0] < ring[leftVtx][0]) leftVtx = i;\n  }\n  if (isConvex(\n    [\n      ring[modulo(leftVtx - 1, ring.length - 1)],\n      ring[leftVtx],\n      ring[modulo(leftVtx + 1, ring.length - 1)]\n    ],\n    true\n  )) {\n    var winding = 1;\n  } else {\n    var winding = -1;\n  }\n  return winding;\n}\nfunction equalArrays2(array1, array2) {\n  if (!array1 || !array2) return false;\n  if (array1.length != array2.length) return false;\n  for (var i = 0, l = array1.length; i < l; i++) {\n    if (array1[i] instanceof Array && array2[i] instanceof Array) {\n      if (!equalArrays2(array1[i], array2[i])) return false;\n    } else if (array1[i] != array2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction modulo(n, m) {\n  return (n % m + m) % m;\n}\nfunction isUnique(array) {\n  var u = {};\n  var isUnique2 = 1;\n  for (var i = 0, l = array.length; i < l; ++i) {\n    if (Object.prototype.hasOwnProperty.call(u, array[i].toString())) {\n      isUnique2 = 0;\n      break;\n    }\n    u[array[i].toString()] = 1;\n  }\n  return isUnique2;\n}\n\n// index.ts\nfunction unkinkPolygon(geojson) {\n  var features = [];\n  flattenEach(geojson, function(feature) {\n    if (feature.geometry.type !== \"Polygon\") return;\n    featureEach(simplepolygon(feature), function(poly) {\n      features.push(polygon2(poly.geometry.coordinates, feature.properties));\n    });\n  });\n  return featureCollection2(features);\n}\nvar index_default = unkinkPolygon;\nexport {\n  index_default as default,\n  unkinkPolygon\n};\n//# sourceMappingURL=index.js.map","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport {\n  type DrawModeName,\n  type LineEventHandlerArguments,\n  type ShapeName,\n  SOURCES,\n} from '@/main.ts';\nimport { BaseDraw } from '@/modes/draw/base.ts';\nimport { LineDrawer } from '@/utils/draw/line-drawer.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\nimport turfClone from '@turf/clone';\nimport combine from '@turf/combine';\nimport lineToPolygon from '@turf/line-to-polygon';\nimport unkinkPolygon from '@turf/unkink-polygon';\nimport type { Feature, MultiPolygon, Polygon } from 'geojson';\n\nexport class DrawPolygon extends BaseDraw {\n  mode: DrawModeName = 'polygon';\n  shape: ShapeName = 'polygon';\n  lineDrawer = new LineDrawer(this.gm, { snappingMarkers: 'first', targetShape: 'polygon' });\n  eventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:draw`]: this.forwardLineDrawerEvent.bind(this),\n    mousemove: this.onMouseMove.bind(this),\n  };\n\n  onEndAction(): void {\n    this.lineDrawer.endAction();\n  }\n\n  onStartAction(): void {\n    this.lineDrawer.startAction();\n    this.lineDrawer.on('firstMarkerClick', this.polygonFinished.bind(this));\n  }\n\n  onMouseMove(event: BaseMapEvent) {\n    if (!isMapPointerEvent(event)) {\n      return { next: true };\n    }\n\n    if (!this.lineDrawer.featureData) {\n      this.fireMarkerPointerUpdateEvent();\n    }\n    return { next: true };\n  }\n\n  polygonFinished(event: LineEventHandlerArguments) {\n    this.lineDrawer.endShape();\n\n    if (event.shapeCoordinates.length < 3) {\n      // polygons with less than 3 points are discarded\n      return;\n    }\n\n    const geoJsonPolygon = this.fixShapeGeoJson(lineToPolygon(event.geoJson));\n    if (!geoJsonPolygon) {\n      return;\n    }\n\n    this.gm.features.createFeature({\n      shapeGeoJson: {\n        ...geoJsonPolygon,\n        properties: {\n          // we don't need to have collected properties for a new polygon\n          // ...geoJsonPolygon.properties,\n          shape: this.shape,\n        },\n      },\n      sourceName: SOURCES.main,\n    });\n  }\n\n  fixShapeGeoJson(geoJsonPolygon: Feature<Polygon | MultiPolygon>) {\n    try {\n      const geoJson = turfClone(combine(unkinkPolygon(geoJsonPolygon)));\n      return geoJson.features[0] as Feature<Polygon | MultiPolygon>;\n    } catch {\n      return null;\n    }\n  }\n}\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { SOURCES } from '@/core/features/constants.ts';\nimport { FeatureData } from '@/core/features/feature-data.ts';\nimport type {\n  DrawModeName,\n  GeoJsonShapeFeature,\n  GmDrawShapeEvent,\n  GmDrawShapeEventWithData,\n  LngLatTuple,\n  MapHandlerReturnData,\n  MarkerData,\n  ShapeName,\n} from '@/main.ts';\n\nimport { BaseDraw } from '@/modes/draw/base.ts';\nimport { convertToThrottled } from '@/utils/behavior.ts';\nimport {\n  allCoordinatesEqual,\n  getBboxFromTwoCoords,\n  twoCoordsToGeoJsonRectangle,\n} from '@/utils/geojson.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\nimport type { BBox } from 'geojson';\n\nexport class DrawRectangle extends BaseDraw {\n  mode: DrawModeName = 'rectangle';\n  shape: ShapeName = 'rectangle';\n  startLngLat: LngLatTuple | null = null;\n\n  eventHandlers = {\n    mousemove: this.onMouseMove.bind(this),\n    click: this.onMouseClick.bind(this),\n  };\n  throttledMethods = convertToThrottled(\n    {\n      updateFeaturePosition: this.updateFeaturePosition,\n    },\n    this,\n    this.gm.options.settings.throttlingDelay,\n  );\n\n  onStartAction() {\n    this.gm.markerPointer.enable();\n  }\n\n  onEndAction() {\n    this.removeTmpFeature();\n    this.startLngLat = null;\n    this.gm.markerPointer.disable();\n    this.fireFinishEvent();\n  }\n\n  onMouseClick(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event, { warning: true })) {\n      return { next: false };\n    }\n\n    const lngLat = this.gm.markerPointer.marker?.getLngLat() || event.lngLat.toArray();\n\n    if (this.startLngLat) {\n      const geoJson = this.getFeatureGeoJson(getBboxFromTwoCoords(this.startLngLat, lngLat));\n      this.fireBeforeFeatureCreate({ geoJsonFeatures: [geoJson] });\n\n      if (this.flags.featureCreateAllowed) {\n        this.finishShape(lngLat);\n      }\n    } else {\n      const geoJson = this.getFeatureGeoJson(getBboxFromTwoCoords(lngLat, lngLat));\n      this.fireBeforeFeatureCreate({ geoJsonFeatures: [geoJson] });\n\n      if (this.flags.featureCreateAllowed) {\n        const featureData = this.startShape(lngLat);\n        if (featureData) {\n          const markerData = this.getControlMarkerData(['geometry', 'coordinates', 4]);\n          this.fireStartEvent(featureData, markerData);\n        }\n      }\n    }\n    return { next: false };\n  }\n\n  onMouseMove(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event, { warning: true })) {\n      return { next: false };\n    }\n\n    if (!this.startLngLat) {\n      this.fireMarkerPointerUpdateEvent();\n      return { next: false };\n    }\n\n    const lngLat = this.gm.markerPointer.marker?.getLngLat() || event.lngLat.toArray();\n    const bounds = getBboxFromTwoCoords(this.startLngLat, lngLat);\n\n    const geoJson = this.getFeatureGeoJson(bounds);\n    this.fireBeforeFeatureCreate({ geoJsonFeatures: [geoJson] });\n\n    if (this.flags.featureCreateAllowed) {\n      this.throttledMethods.updateFeaturePosition(bounds);\n    }\n    return { next: false };\n  }\n\n  startShape(lngLat: LngLatTuple) {\n    this.startLngLat = lngLat;\n    const bounds = getBboxFromTwoCoords(this.startLngLat, this.startLngLat);\n    this.featureData = this.createFeature(bounds);\n    return this.featureData;\n  }\n\n  finishShape(lngLat: LngLatTuple) {\n    if (this.startLngLat) {\n      const bounds = getBboxFromTwoCoords(this.startLngLat, lngLat);\n      this.throttledMethods.updateFeaturePosition(bounds);\n    }\n\n    if (this.featureData) {\n      if (this.isFeatureGeoJsonValid()) {\n        this.saveFeature();\n      } else {\n        this.removeTmpFeature();\n      }\n    }\n    this.startLngLat = null;\n    this.fireFinishEvent();\n  }\n\n  createFeature(bounds: BBox): FeatureData | null {\n    return this.gm.features.createFeature({\n      shapeGeoJson: this.getFeatureGeoJson(bounds),\n      sourceName: SOURCES.temporary,\n    });\n  }\n\n  isFeatureGeoJsonValid(): boolean {\n    if (!this.featureData) {\n      return false;\n    }\n\n    // for now only checks if all points aren't the same\n    return allCoordinatesEqual(this.featureData.getGeoJson());\n  }\n\n  getFeatureGeoJson(bounds: BBox): GeoJsonShapeFeature {\n    const rectangleGeoJson = twoCoordsToGeoJsonRectangle(\n      [bounds[0], bounds[1]],\n      [bounds[2], bounds[3]],\n    );\n\n    return {\n      ...rectangleGeoJson,\n      properties: {\n        shape: this.shape,\n      },\n    };\n  }\n\n  updateFeaturePosition(bounds: BBox) {\n    if (!this.featureData) {\n      return;\n    }\n\n    const rectangleData: GeoJsonShapeFeature = twoCoordsToGeoJsonRectangle(\n      [bounds[0], bounds[1]],\n      [bounds[2], bounds[3]],\n    );\n    this.featureData.updateGeoJsonGeometry(rectangleData.geometry);\n    const markerData = this.getControlMarkerData(['geometry', 'coordinates', 4]);\n    this.fireUpdateEvent(this.featureData, markerData);\n  }\n\n  getControlMarkerData(path: Array<string | number>): MarkerData | null {\n    const controlMarker = this.gm.markerPointer.marker;\n    if (!controlMarker) {\n      return null;\n    }\n\n    return {\n      type: 'dom',\n      instance: controlMarker,\n      position: {\n        coordinate: controlMarker.getLngLat(),\n        path,\n      },\n    };\n  }\n\n  fireStartEvent(featureData: FeatureData, markerData: MarkerData | null) {\n    const event: GmDrawShapeEventWithData = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n      level: 'system',\n      actionType: 'draw',\n      mode: this.shape,\n      variant: null,\n      action: 'start',\n      featureData,\n      markerData,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, event);\n  }\n\n  fireUpdateEvent(featureData: FeatureData, markerData: MarkerData | null) {\n    const event: GmDrawShapeEventWithData = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n      level: 'system',\n      actionType: 'draw',\n      mode: this.shape,\n      variant: null,\n      action: 'update',\n      featureData,\n      markerData,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, event);\n  }\n\n  fireFinishEvent() {\n    const event: GmDrawShapeEvent = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape`,\n      level: 'system',\n      actionType: 'draw',\n      mode: this.shape,\n      variant: null,\n      action: 'finish',\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, event);\n  }\n}\n","import type {\n  DrawModeName,\n  GeoJsonShapeFeature,\n  LngLatTuple,\n  MapHandlerReturnData,\n  ScreenPoint,\n  ShapeName,\n} from '@/main.ts';\nimport { BaseDraw } from '@/modes/draw/base.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\n\nimport { SOURCES } from '@/core/features/constants.ts';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\n\nexport class DrawTextMarker extends BaseDraw {\n  mode: DrawModeName = 'text_marker';\n  shape: ShapeName = 'text_marker';\n  textarea: HTMLTextAreaElement | null = null;\n  eventHandlers = {\n    click: this.onMouseClick.bind(this),\n    mousemove: this.onMouseMove.bind(this),\n  };\n\n  onStartAction() {\n    this.gm.markerPointer.enable({ invisibleMarker: true });\n  }\n\n  onEndAction() {\n    this.removeTextarea();\n    this.removeTmpFeature();\n    this.featureData = null;\n    this.gm.markerPointer.disable();\n    this.fireMarkerPointerFinishEvent();\n  }\n\n  onMouseMove(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event, { warning: true })) {\n      return { next: true };\n    }\n\n    this.fireMarkerPointerUpdateEvent();\n    return { next: true };\n  }\n\n  onMouseClick(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event, { warning: true })) {\n      return { next: true };\n    }\n\n    if (this.textarea) {\n      this.endShape();\n      this.gm.markerPointer.enable({ invisibleMarker: true, lngLat: event.lngLat.toArray() });\n      this.fireMarkerPointerUpdateEvent();\n    } else {\n      const lngLat = this.gm.markerPointer.marker?.getLngLat() || event.lngLat.toArray();\n      this.fireBeforeFeatureCreate({ geoJsonFeatures: [this.getFeatureGeoJson(lngLat)] });\n\n      if (this.flags.featureCreateAllowed) {\n        this.featureData = this.createFeature(lngLat);\n        this.gm.markerPointer.disable();\n        this.fireMarkerPointerFinishEvent();\n      }\n    }\n    return { next: false };\n  }\n\n  createFeature(lngLat: LngLatTuple) {\n    const point = this.gm.mapAdapter.project(lngLat);\n    this.createTextarea(point);\n    return this.gm.features.createFeature({\n      shapeGeoJson: this.getFeatureGeoJson(lngLat),\n      sourceName: SOURCES.temporary,\n    });\n  }\n\n  endShape() {\n    const text = this.textarea?.value || '';\n    this.removeTextarea();\n\n    if (text.trim()) {\n      this.updateFeatureSource(text);\n      this.saveFeature();\n    } else {\n      this.removeTmpFeature();\n    }\n  }\n\n  createTextarea(point: ScreenPoint) {\n    this.textarea = document.createElement('textarea');\n    this.textarea.style.position = 'absolute';\n    this.textarea.style.left = `${point[0]}px`;\n    this.textarea.style.top = `${point[1]}px`;\n    this.textarea.style.opacity = '0.7';\n    this.gm.mapAdapter.getContainer().appendChild(this.textarea);\n    this.textarea.focus();\n  }\n\n  removeTextarea() {\n    this.textarea?.remove();\n    this.textarea = null;\n  }\n\n  getFeatureGeoJson(lngLat: LngLatTuple): GeoJsonShapeFeature {\n    return {\n      type: 'Feature',\n      properties: {\n        shape: this.shape,\n        text: '',\n      },\n      geometry: {\n        type: 'Point',\n        coordinates: lngLat,\n      },\n    };\n  }\n\n  updateFeatureSource(text: string) {\n    if (!this.featureData) {\n      return;\n    }\n    this.featureData._updateAllProperties({ shape: this.shape, text });\n  }\n}\n","import type {\n  DrawModeName,\n  LngLatTuple,\n  MapHandlerReturnData,\n  ScreenPoint,\n  ShapeName,\n} from '@/types';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\nimport { BaseCircle } from './base-circle.ts';\nimport { convertToThrottled, isMapPointerEvent } from '@/main.ts';\nimport { allCoordinatesEqual, getEllipseParameters, getGeoJsonEllipse } from '@/utils/geojson.ts';\n\nexport class DrawEllipse extends BaseCircle {\n  mode: DrawModeName = 'ellipse';\n  shape: ShapeName = 'ellipse';\n\n  protected xSemiAxisPoint: ScreenPoint | null = null;\n  protected xSemiAxisLngLat: LngLatTuple | null = null;\n\n  throttledMethods = convertToThrottled(\n    {\n      updateFeatureGeoJson: this.updateFeatureGeoJson,\n    },\n    this,\n    this.gm.options.settings.throttlingDelay,\n  );\n\n  onMouseClick(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event)) {\n      return { next: true };\n    }\n    const lngLat: LngLatTuple = this.gm.markerPointer.marker?.getLngLat() || event.lngLat.toArray();\n\n    if (this.circleCenterLngLat && this.xSemiAxisLngLat) {\n      this.fireBeforeFeatureCreate({\n        geoJsonFeatures: [\n          this.getEllipseGeoJson(this.circleCenterLngLat, this.xSemiAxisLngLat, lngLat),\n        ],\n      });\n\n      if (this.flags.featureCreateAllowed) {\n        this.saveEllipseFeature(lngLat);\n        this.circleCenterLngLat = null;\n        this.circleCenterPoint = null;\n        this.xSemiAxisPoint = null;\n        this.xSemiAxisLngLat = null;\n        this.fireFinishEvent();\n      }\n    } else if (this.circleCenterLngLat) {\n      this.fireBeforeFeatureCreate({\n        geoJsonFeatures: [this.getEllipseGeoJson(this.circleCenterLngLat, lngLat)],\n      });\n\n      if (this.flags.featureCreateAllowed) {\n        this.xSemiAxisLngLat = lngLat;\n        this.xSemiAxisPoint = this.gm.mapAdapter.project(this.circleCenterLngLat);\n      }\n    } else {\n      this.fireBeforeFeatureCreate({ geoJsonFeatures: [this.getFeatureGeoJson(lngLat)] });\n\n      if (this.flags.featureCreateAllowed) {\n        this.circleCenterLngLat = lngLat;\n        this.circleCenterPoint = this.gm.mapAdapter.project(this.circleCenterLngLat);\n        this.featureData = this.createFeature();\n\n        const markerData = this.getControlMarkerData();\n        if (this.featureData && markerData) {\n          this.fireStartEvent(this.featureData, markerData);\n        }\n      }\n    }\n\n    return { next: false };\n  }\n\n  onMouseMove(): MapHandlerReturnData {\n    if (this.circleCenterLngLat && this.gm.markerPointer.marker) {\n      const markerLngLat = this.gm.markerPointer.marker.getLngLat();\n\n      this.fireBeforeFeatureCreate({\n        geoJsonFeatures: [\n          this.xSemiAxisLngLat\n            ? this.getEllipseGeoJson(this.circleCenterLngLat, this.xSemiAxisLngLat, markerLngLat)\n            : this.getEllipseGeoJson(this.circleCenterLngLat, markerLngLat),\n        ],\n      });\n\n      if (this.flags.featureCreateAllowed) {\n        this.throttledMethods.updateFeatureGeoJson(markerLngLat);\n      }\n    }\n\n    if (!this.circleCenterLngLat) {\n      this.fireMarkerPointerUpdateEvent();\n    }\n\n    return { next: false };\n  }\n\n  updateFeatureGeoJson(eventLngLat: LngLatTuple) {\n    if (!this.featureData || !this.circleCenterLngLat) {\n      return;\n    }\n\n    const featureGeoJson = this.xSemiAxisLngLat\n      ? this.getEllipseGeoJson(this.circleCenterLngLat, this.xSemiAxisLngLat, eventLngLat)\n      : this.getEllipseGeoJson(this.circleCenterLngLat, eventLngLat);\n    this.featureData.updateGeoJsonGeometry(featureGeoJson.geometry);\n\n    this.featureData._updateAllProperties({\n      shape: featureGeoJson.properties.shape,\n    });\n\n    const markerData = this.getControlMarkerData();\n    if (markerData) {\n      this.fireUpdateEvent(this.featureData, markerData);\n    }\n  }\n\n  saveEllipseFeature(eventLngLat: LngLatTuple) {\n    if (!this.circleCenterLngLat || !this.xSemiAxisLngLat) {\n      return;\n    }\n\n    if (this.featureData) {\n      const lngLat = this.gm.markerPointer.marker?.getLngLat() || eventLngLat;\n      this.updateFeatureGeoJson(lngLat);\n\n      const { xSemiAxis, ySemiAxis, angle } = getEllipseParameters({\n        center: this.circleCenterLngLat,\n        xSemiAxisLngLat: this.xSemiAxisLngLat,\n        rimLngLat: lngLat,\n      });\n\n      this.featureData.setShapeProperty('center', this.circleCenterLngLat);\n      this.featureData.setShapeProperty('xSemiAxis', xSemiAxis);\n      this.featureData.setShapeProperty('ySemiAxis', ySemiAxis);\n      this.featureData.setShapeProperty('angle', angle);\n\n      if (this.isFeatureGeoJsonValid()) {\n        this.saveFeature();\n      } else {\n        this.removeTmpFeature();\n      }\n    }\n  }\n\n  isFeatureGeoJsonValid(): boolean {\n    if (!this.featureData) {\n      return false;\n    }\n\n    // for now only checks if all points aren't the same\n    return allCoordinatesEqual(this.featureData.getGeoJson());\n  }\n\n  getEllipseGeoJson(center: LngLatTuple, xSemiAxisLngLat: LngLatTuple, rimLngLat?: LngLatTuple) {\n    const { xSemiAxis, ySemiAxis, angle } = getEllipseParameters({\n      center,\n      xSemiAxisLngLat,\n      rimLngLat,\n    });\n\n    return getGeoJsonEllipse({ center, xSemiAxis, ySemiAxis, angle });\n  }\n}\n","import type { DrawModeName, Geoman } from '@/main.ts';\nimport { BaseDraw } from '@/modes/draw/base.ts';\nimport { DrawCircleMarker } from '@/modes/draw/circle-marker.ts';\nimport { DrawCircle } from '@/modes/draw/circle.ts';\nimport { DrawLine } from '@/modes/draw/line.ts';\nimport { DrawMarker } from '@/modes/draw/marker.ts';\nimport { DrawPolygon } from '@/modes/draw/polygon.ts';\nimport { DrawRectangle } from '@/modes/draw/rectangle.ts';\nimport { DrawTextMarker } from '@/modes/draw/text-marker.ts';\nimport { DrawEllipse } from '@/modes/draw/ellipse.ts';\nimport log from 'loglevel';\n\ntype DrawClassConstructor = new (gm: Geoman) => BaseDraw;\ntype DrawClassMap = {\n  [K in DrawModeName]: DrawClassConstructor | null;\n};\n\nexport const drawClassMap: DrawClassMap = {\n  marker: DrawMarker,\n  ellipse: DrawEllipse,\n  circle: DrawCircle,\n  circle_marker: DrawCircleMarker,\n  text_marker: DrawTextMarker,\n  line: DrawLine,\n  rectangle: DrawRectangle,\n  polygon: DrawPolygon,\n  freehand: null,\n  custom_shape: null,\n} as const;\n\nexport const createDrawInstance = (gm: Geoman, shape: DrawModeName) => {\n  if (drawClassMap[shape]) {\n    return new drawClassMap[shape](gm);\n  }\n\n  log.error(`Draw \"${shape}\" is not available`);\n  return null;\n};\n","import type { GmEditEvent } from '@/types/index.ts';\nimport { isGmEvent } from '@/utils/guards/events/index.ts';\n\nexport const isGmEditEvent = (payload: unknown): payload is GmEditEvent => {\n  return isGmEvent(payload) && payload.actionType === 'edit';\n};\n","import {\n  type ActionType,\n  DRAW_MODES,\n  type DrawModeName,\n  type EditModeName,\n  type HelperModeName,\n  type ModeName,\n  type ModeType,\n} from '@/main.ts';\n\nimport { ACTION_TYPES, EDIT_MODES, HELPER_MODES, MODE_TYPES } from '@/modes/constants.ts';\n\nexport const isModeType = (name: string): name is ModeType => {\n  return MODE_TYPES.includes(name as ModeType);\n};\n\nexport const isActionType = (name: string): name is ActionType => {\n  return ACTION_TYPES.includes(name as ActionType);\n};\n\nexport const isDrawModeName = (name: string): name is DrawModeName => {\n  return DRAW_MODES.includes(name as DrawModeName);\n};\n\nexport const isEditModeName = (name: string): name is EditModeName => {\n  return EDIT_MODES.includes(name as EditModeName);\n};\n\nexport const isHelperModeName = (name: string): name is HelperModeName => {\n  return HELPER_MODES.includes(name as HelperModeName);\n};\n\nexport const isModeName = (name: string): name is ModeName => {\n  return isDrawModeName(name) || isEditModeName(name) || isHelperModeName(name);\n};\n\nexport { isGmDrawFreehandDrawerEvent } from '@/utils/guards/events/draw.ts';\nexport { isGmDrawLineDrawerEvent } from '@/utils/guards/events/draw.ts';\nexport { isGmDrawShapeEvent } from '@/utils/guards/events/draw.ts';\nexport { isGmDrawEvent } from '@/utils/guards/events/draw.ts';\nexport { isGmGeofencingViolationEvent } from '@/utils/guards/events/helper.ts';\nexport { isGmHelperEvent } from '@/utils/guards/events/helper.ts';\nexport { isGmEditEvent } from '@/utils/guards/events/edit.ts';\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { EventBus } from '@/core/events/bus.ts';\nimport { BaseEventListener } from '@/core/events/listeners/base.ts';\nimport type {\n  ActionInstanceKey,\n  EventHandlers,\n  Geoman,\n  GmDrawEvent,\n  GmSystemEvent,\n} from '@/main.ts';\nimport { BaseDraw } from '@/modes/draw/base.ts';\nimport { createDrawInstance } from '@/modes/draw/index.ts';\nimport { isGmDrawEvent } from '@/utils/guards/modes.ts';\nimport log from 'loglevel';\n\nexport class DrawEventListener extends BaseEventListener {\n  eventHandlers: EventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:draw`]: this.handleDrawEvent.bind(this),\n  };\n\n  constructor(gm: Geoman, bus: EventBus) {\n    super(gm);\n    bus.attachEvents(this.eventHandlers);\n  }\n\n  handleDrawEvent(payload: GmSystemEvent) {\n    if (!isGmDrawEvent(payload)) {\n      return { next: true };\n    }\n\n    const actionInstanceKey: ActionInstanceKey = `${payload.actionType}__${payload.mode}`;\n\n    if (payload.action === 'mode_start') {\n      this.trackExclusiveModes(payload);\n      this.start(actionInstanceKey, payload);\n      this.trackRelatedModes(payload);\n    } else if (payload.action === 'mode_end') {\n      this.trackRelatedModes(payload);\n      this.end(actionInstanceKey);\n    }\n\n    return { next: true };\n  }\n\n  start(actionInstanceKey: ActionInstanceKey, payload: GmDrawEvent) {\n    const actionInstance = createDrawInstance(this.gm, payload.mode);\n    if (!actionInstance) {\n      return;\n    }\n\n    if (actionInstanceKey in this.gm.actionInstances) {\n      log.error(`Action instance \"${actionInstanceKey}\" already exists`);\n    }\n\n    this.gm.actionInstances[actionInstanceKey] = actionInstance;\n    actionInstance.startAction();\n  }\n\n  end(actionInstanceKey: ActionInstanceKey) {\n    const actionInstance = this.gm.actionInstances[actionInstanceKey];\n    if (actionInstance instanceof BaseDraw) {\n      actionInstance.endAction();\n      delete this.gm.actionInstances[actionInstanceKey];\n    } else {\n      console.error(`Wrong action instance for draw event \"${actionInstanceKey}\":`, actionInstance);\n    }\n  }\n}\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { FeatureData } from '@/core/features/feature-data.ts';\nimport {\n  type ActionType,\n  type DrawModeName,\n  type EditModeName,\n  type FeatureSourceName,\n  type GeoJsonShapeFeature,\n  type GmDrawShapeEvent,\n  type GmDrawShapeEventWithData,\n  type GmEditFeatureEditEndEvent,\n  type GmEditFeatureEditStartEvent,\n  type GmEditFeatureRemovedEvent,\n  type GmEditFeatureUpdatedEvent,\n  type GmFeatureBeforeUpdateEvent,\n  type GmSystemEvent,\n  type MarkerData,\n  type NonEmptyArray,\n  type PointerEventName,\n  SHAPE_NAMES,\n} from '@/main.ts';\nimport { BaseAction } from '@/modes/base-action.ts';\nimport { isGmDrawLineDrawerEvent } from '@/utils/guards/events/draw.ts';\nimport { includesWithType } from '@/utils/typing.ts';\nimport type { BaseMapPointerEvent } from '@mapLib/types/events.ts';\nimport { isEqual } from 'lodash-es';\n\nexport abstract class BaseEdit extends BaseAction {\n  actionType: ActionType = 'edit';\n  abstract mode: EditModeName;\n  featureData: FeatureData | null = null;\n  cursorExcludedLayerIds: Array<string> = ['rectangle-line', 'polygon-line', 'circle-line'];\n  layerEventHandlersData: Array<{\n    eventName: PointerEventName;\n    layerId: string;\n    callback: () => void;\n  }> = [];\n\n  startAction() {\n    this.setEventsForLayers('mouseenter', this.setCursorToPointer.bind(this));\n    this.setEventsForLayers('mouseleave', this.setCursorToEmpty.bind(this));\n    super.startAction();\n  }\n\n  endAction() {\n    this.clearEventsForLayers();\n    super.endAction();\n  }\n\n  setCursorToPointer() {\n    if (this.flags.actionInProgress) {\n      return;\n    }\n    this.gm.mapAdapter.setCursor('pointer');\n  }\n\n  setCursorToEmpty() {\n    if (this.flags.actionInProgress) {\n      return;\n    }\n    this.gm.mapAdapter.setCursor('');\n  }\n\n  getFeatureByMouseEvent({\n    event,\n    sourceNames,\n  }: {\n    event: BaseMapPointerEvent;\n    sourceNames: Array<FeatureSourceName>;\n  }): FeatureData | null {\n    const featureData = this.gm.features.getFeatureByMouseEvent({\n      event,\n      sourceNames,\n    });\n\n    if (!featureData || featureData.getShapeProperty('disableEdit') === true) {\n      return null;\n    }\n    return featureData;\n  }\n\n  setEventsForLayers(eventName: PointerEventName, callback: () => void) {\n    const targetLayerIds = this.gm.features.layers\n      .map((layer) => layer.id)\n      .filter(\n        (layerId) => !this.cursorExcludedLayerIds.some((subName) => layerId.includes(subName)),\n      );\n\n    targetLayerIds.forEach((layerId) => {\n      this.gm.mapAdapter.on(eventName, layerId, callback);\n      this.layerEventHandlersData.push({ eventName, layerId, callback });\n    });\n  }\n\n  clearEventsForLayers() {\n    this.layerEventHandlersData.forEach(({ eventName, layerId, callback }) => {\n      this.gm.mapAdapter.off(eventName, layerId, callback);\n    });\n    this.layerEventHandlersData = [];\n  }\n\n  updateFeatureGeoJson({\n    featureData,\n    featureGeoJson,\n    forceMode = undefined,\n  }: {\n    featureData: FeatureData;\n    featureGeoJson: GeoJsonShapeFeature;\n    forceMode?: EditModeName;\n  }): boolean {\n    if (!this.flags.featureUpdateAllowed) {\n      // used for geofencing violations, other modes could be added in the future\n      return false;\n    }\n\n    featureData.updateGeoJsonGeometry(featureGeoJson.geometry);\n    if (!isEqual(featureData.getGeoJson().properties, featureGeoJson.properties)) {\n      featureData._updateAllProperties(featureGeoJson.properties);\n    }\n\n    this.fireFeatureUpdatedEvent({\n      sourceFeatures: [featureData],\n      targetFeatures: [featureData],\n      forceMode,\n    });\n\n    return true;\n  }\n\n  fireBeforeFeatureUpdate({\n    features,\n    geoJsonFeatures,\n    forceMode = undefined,\n  }: {\n    features: NonEmptyArray<FeatureData>;\n    geoJsonFeatures: NonEmptyArray<GeoJsonShapeFeature>;\n    forceMode?: EditModeName;\n  }) {\n    this.flags.featureUpdateAllowed = true;\n\n    const payload: GmFeatureBeforeUpdateEvent = {\n      name: `${GM_SYSTEM_PREFIX}:feature:before_update`,\n      level: 'system',\n      actionType: 'edit',\n      mode: forceMode || this.mode,\n      action: 'before_update',\n      features,\n      geoJsonFeatures,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:${this.actionType}`, payload);\n  }\n\n  fireFeatureUpdatedEvent({\n    sourceFeatures,\n    targetFeatures,\n    markerData = undefined,\n    forceMode = undefined,\n  }: {\n    sourceFeatures: NonEmptyArray<FeatureData>;\n    targetFeatures: NonEmptyArray<FeatureData>;\n    markerData?: MarkerData;\n    forceMode?: EditModeName;\n  }) {\n    const payload: GmEditFeatureUpdatedEvent = {\n      name: `${GM_SYSTEM_PREFIX}:edit:feature_updated`,\n      level: 'system',\n      actionType: 'edit',\n      action: 'feature_updated',\n      mode: forceMode || this.mode,\n      sourceFeatures,\n      targetFeatures,\n      markerData: markerData || null,\n    };\n\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:edit`, payload);\n  }\n\n  fireFeatureEditStartEvent({\n    feature,\n    forceMode = undefined,\n  }: {\n    feature: FeatureData;\n    forceMode?: EditModeName;\n  }) {\n    const payload: GmEditFeatureEditStartEvent = {\n      name: `${GM_SYSTEM_PREFIX}:edit:feature_edit_start`,\n      level: 'system',\n      actionType: 'edit',\n      action: 'feature_edit_start',\n      mode: forceMode || this.mode,\n      feature,\n    };\n\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:edit`, payload);\n  }\n\n  fireFeatureEditEndEvent({\n    feature,\n    forceMode = undefined,\n  }: {\n    feature: FeatureData;\n    forceMode?: EditModeName;\n  }) {\n    const payload: GmEditFeatureEditEndEvent = {\n      name: `${GM_SYSTEM_PREFIX}:edit:feature_edit_end`,\n      level: 'system',\n      actionType: 'edit',\n      action: 'feature_edit_end',\n      mode: forceMode || this.mode,\n      feature,\n    };\n\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:edit`, payload);\n  }\n\n  fireMarkerPointerUpdateEvent() {\n    if (!this.gm.markerPointer.marker) {\n      return;\n    }\n\n    const marker = this.gm.markerPointer.marker;\n    const payload: GmDrawShapeEventWithData = {\n      name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n      level: 'system',\n      variant: null,\n      actionType: 'draw',\n      mode: this.getLineDrawerMode(),\n      action: 'update',\n      markerData: {\n        type: 'dom',\n        instance: marker,\n        position: {\n          coordinate: marker.getLngLat(),\n          path: [-1],\n        },\n      },\n      featureData: null,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, payload);\n  }\n\n  forwardLineDrawerEvent(payload: GmSystemEvent) {\n    if (!isGmDrawLineDrawerEvent(payload) || !['cut', 'split'].includes(this.mode)) {\n      return { next: true };\n    }\n\n    if (payload.action === 'start' || payload.action === 'update') {\n      const eventData: GmDrawShapeEventWithData = {\n        name: `${GM_SYSTEM_PREFIX}:draw:shape_with_data`,\n        level: 'system',\n        actionType: 'draw',\n        mode: this.getLineDrawerMode(),\n        variant: null,\n        action: payload.action,\n        featureData: payload.featureData,\n        markerData: payload.markerData,\n      };\n      this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, eventData);\n    } else if (payload.action === 'finish' || payload.action === 'cancel') {\n      const eventData: GmDrawShapeEvent = {\n        name: `${GM_SYSTEM_PREFIX}:draw:shape`,\n        level: 'system',\n        actionType: 'draw',\n        mode: this.getLineDrawerMode(),\n        variant: null,\n        action: payload.action,\n      };\n      this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, eventData);\n    }\n\n    return { next: true };\n  }\n\n  fireFeatureRemovedEvent(featureData: FeatureData) {\n    if (includesWithType(featureData.shape, SHAPE_NAMES)) {\n      const payload: GmEditFeatureRemovedEvent = {\n        name: `${GM_SYSTEM_PREFIX}:edit:feature_removed`,\n        level: 'system',\n        actionType: 'edit',\n        mode: featureData.shape,\n        action: 'feature_removed',\n        featureData,\n      };\n      this.gm.events.fire(`${GM_SYSTEM_PREFIX}:edit`, payload);\n    }\n  }\n\n  getLineDrawerMode(): DrawModeName {\n    if (this.mode === 'cut') {\n      return 'polygon';\n    } else if (this.mode === 'split') {\n      return 'line';\n    }\n    return 'line';\n  }\n}\n","// index.ts\nimport { bbox } from \"@turf/bbox\";\nimport { point } from \"@turf/helpers\";\nfunction center(geojson, options = {}) {\n  const ext = bbox(geojson);\n  const x = (ext[0] + ext[2]) / 2;\n  const y = (ext[1] + ext[3]) / 2;\n  return point([x, y], options.properties, options);\n}\nvar index_default = center;\nexport {\n  center,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).jsts=e()}(this,(function(){\"use strict\";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function e(t,e,n){return e=u(e),function(t,e){if(e&&(\"object\"==typeof e||\"function\"==typeof e))return e;if(void 0!==e)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t)}(t,h()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function i(t,e,n){if(h())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var r=new(t.bind.apply(t,i));return n&&c(r,n.prototype),r}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,v(i.key),i)}}function s(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,\"prototype\",{writable:!1}),t}function a(t,e){var n=\"undefined\"!=typeof Symbol&&t[Symbol.iterator]||t[\"@@iterator\"];if(!n){if(Array.isArray(t)||(n=y(t))||e){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var s,a=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){o=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function o(){return o=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},o.apply(null,arguments)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function l(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,\"prototype\",{writable:!1}),e&&c(t,e)}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h=function(){return!!t})()}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function f(t,e,n,i){var r=o(u(1&i?t.prototype:t),e,n);return 2&i&&\"function\"==typeof r?function(t){return r.apply(n,t)}:r}function g(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(t){if(\"undefined\"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t[\"@@iterator\"])return Array.from(t)}(e)||y(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function v(t){var e=function(t,e){if(\"object\"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e);if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t,\"string\");return\"symbol\"==typeof e?e:e+\"\"}function y(e,n){if(e){if(\"string\"==typeof e)return t(e,n);var i={}.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}function d(t){var e=\"function\"==typeof Map?new Map:void 0;return d=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf(\"[native code]\")}catch(e){return\"function\"==typeof t}}(t))return t;if(\"function\"!=typeof t)throw new TypeError(\"Super expression must either be null or a function\");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return i(t,arguments,u(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,t)},d(t)}var _=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"getEndCapStyle\",value:function(){return this._endCapStyle}},{key:\"isSingleSided\",value:function(){return this._isSingleSided}},{key:\"setQuadrantSegments\",value:function(e){this._quadrantSegments=e,0===this._quadrantSegments&&(this._joinStyle=t.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=t.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),e<=0&&(this._quadrantSegments=1),this._joinStyle!==t.JOIN_ROUND&&(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS)}},{key:\"getJoinStyle\",value:function(){return this._joinStyle}},{key:\"setJoinStyle\",value:function(t){this._joinStyle=t}},{key:\"setSimplifyFactor\",value:function(t){this._simplifyFactor=t<0?0:t}},{key:\"getSimplifyFactor\",value:function(){return this._simplifyFactor}},{key:\"getQuadrantSegments\",value:function(){return this._quadrantSegments}},{key:\"setEndCapStyle\",value:function(t){this._endCapStyle=t}},{key:\"getMitreLimit\",value:function(){return this._mitreLimit}},{key:\"setMitreLimit\",value:function(t){this._mitreLimit=t}},{key:\"setSingleSided\",value:function(t){this._isSingleSided=t}}],[{key:\"constructor_\",value:function(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(i)}else if(4===arguments.length){var r=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(s),this.setJoinStyle(a),this.setMitreLimit(o)}}},{key:\"bufferDistanceError\",value:function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)}}])}();_.CAP_ROUND=1,_.CAP_FLAT=2,_.CAP_SQUARE=3,_.JOIN_ROUND=1,_.JOIN_MITRE=2,_.JOIN_BEVEL=3,_.DEFAULT_QUADRANT_SEGMENTS=8,_.DEFAULT_MITRE_LIMIT=5,_.DEFAULT_SIMPLIFY_FACTOR=.01;var p=function(t){function i(t){var r;return n(this,i),(r=e(this,i,[t])).name=Object.keys({Exception:i})[0],r}return l(i,t),s(i,[{key:\"toString\",value:function(){return this.message}}])}(d(Error)),m=function(t){function i(t){var r;return n(this,i),(r=e(this,i,[t])).name=Object.keys({IllegalArgumentException:i})[0],r}return l(i,t),s(i)}(p),k=function(){return s((function t(){n(this,t)}),[{key:\"filter\",value:function(t){}}])}();function x(){}function I(){}function E(){}var N,T,S,L,C,R,w,O,b=function(){return s((function t(){n(this,t)}),null,[{key:\"equalsWithTolerance\",value:function(t,e,n){return Math.abs(t-e)<=n}}])}(),M=function(){return s((function t(e,i){n(this,t),this.low=i||0,this.high=e||0}),null,[{key:\"toBinaryString\",value:function(t){var e,n=\"\";for(e=2147483648;e>0;e>>>=1)n+=(t.high&e)===e?\"1\":\"0\";for(e=2147483648;e>0;e>>>=1)n+=(t.low&e)===e?\"1\":\"0\";return n}}])}();function A(){}function P(){}A.NaN=NaN,A.isNaN=function(t){return Number.isNaN(t)},A.isInfinite=function(t){return!Number.isFinite(t)},A.MAX_VALUE=Number.MAX_VALUE,A.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,A.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,\"function\"==typeof Float64Array&&\"function\"==typeof Int32Array?(R=2146435072,w=new Float64Array(1),O=new Int32Array(w.buffer),A.doubleToLongBits=function(t){w[0]=t;var e=0|O[0],n=0|O[1];return(n&R)===R&&1048575&n&&0!==e&&(e=0,n=2146959360),new M(n,e)},A.longBitsToDouble=function(t){return O[0]=t.low,O[1]=t.high,w[0]}):(N=1023,T=Math.log2,S=Math.floor,L=Math.pow,C=function(){for(var t=53;t>0;t--){var e=L(2,t)-1;if(S(T(e))+1===t)return e}return 0}(),A.doubleToLongBits=function(t){var e,n,i,r,s,a,o,u,l;if(t<0||1/t===Number.NEGATIVE_INFINITY?(a=1<<31,t=-t):a=0,0===t)return new M(u=a,l=0);if(t===1/0)return new M(u=2146435072|a,l=0);if(t!=t)return new M(u=2146959360,l=0);if(r=0,l=0,(e=S(t))>1)if(e<=C)(r=S(T(e)))<=20?(l=0,u=e<<20-r&1048575):(l=e%(n=L(2,i=r-20))<<32-i,u=e/n&1048575);else for(i=e,l=0;0!==(i=S(n=i/2));)r++,l>>>=1,l|=(1&u)<<31,u>>>=1,n!==i&&(u|=524288);if(o=r+N,s=0===e,e=t-e,r<52&&0!==e)for(i=0;;){if((n=2*e)>=1?(e=n-1,s?(o--,s=!1):(i<<=1,i|=1,r++)):(e=n,s?0==--o&&(r++,s=!1):(i<<=1,r++)),20===r)u|=i,i=0;else if(52===r){l|=i;break}if(1===n){r<20?u|=i<<20-r:r<52&&(l|=i<<52-r);break}}return u|=o<<20,new M(u|=a,l)},A.longBitsToDouble=function(t){var e,n,i,r,s=t.high,a=t.low,o=s&1<<31?-1:1;for(i=((2146435072&s)>>20)-N,r=0,n=1<<19,e=1;e<=20;e++)s&n&&(r+=L(2,-e)),n>>>=1;for(n=1<<31,e=21;e<=52;e++)a&n&&(r+=L(2,-e)),n>>>=1;if(-1023===i){if(0===r)return 0*o;i=-1022}else{if(1024===i)return 0===r?o/0:NaN;r+=1}return o*r*L(2,i)});var D=function(t){function i(t){var r;return n(this,i),(r=e(this,i,[t])).name=Object.keys({RuntimeException:i})[0],r}return l(i,t),s(i)}(p),F=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,null,[{key:\"constructor_\",value:function(){if(0===arguments.length)D.constructor_.call(this);else if(1===arguments.length){var t=arguments[0];D.constructor_.call(this,t)}}}])}(D),G=function(){function t(){n(this,t)}return s(t,null,[{key:\"shouldNeverReachHere\",value:function(){if(0===arguments.length)t.shouldNeverReachHere(null);else if(1===arguments.length){var e=arguments[0];throw new F(\"Should never reach here\"+(null!==e?\": \"+e:\"\"))}}},{key:\"isTrue\",value:function(){if(1===arguments.length){var e=arguments[0];t.isTrue(e,null)}else if(2===arguments.length){var n=arguments[1];if(!arguments[0])throw null===n?new F:new F(n)}}},{key:\"equals\",value:function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];t.equals(e,n,null)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];if(!r.equals(i))throw new F(\"Expected \"+i+\" but encountered \"+r+(null!==s?\": \"+s:\"\"))}}}])}(),q=new ArrayBuffer(8),Y=new Float64Array(q),z=new Int32Array(q),X=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"getM\",value:function(){return A.NaN}},{key:\"setOrdinate\",value:function(e,n){switch(e){case t.X:this.x=n;break;case t.Y:this.y=n;break;case t.Z:this.setZ(n);break;default:throw new m(\"Invalid ordinate index: \"+e)}}},{key:\"equals2D\",value:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!b.equalsWithTolerance(this.x,e.x,n)&&!!b.equalsWithTolerance(this.y,e.y,n)}}},{key:\"setM\",value:function(e){throw new m(\"Invalid ordinate index: \"+t.M)}},{key:\"getZ\",value:function(){return this.z}},{key:\"getOrdinate\",value:function(e){switch(e){case t.X:return this.x;case t.Y:return this.y;case t.Z:return this.getZ()}throw new m(\"Invalid ordinate index: \"+e)}},{key:\"equals3D\",value:function(t){return this.x===t.x&&this.y===t.y&&(this.getZ()===t.getZ()||A.isNaN(this.getZ())&&A.isNaN(t.getZ()))}},{key:\"equals\",value:function(e){return e instanceof t&&this.equals2D(e)}},{key:\"equalInZ\",value:function(t,e){return b.equalsWithTolerance(this.getZ(),t.getZ(),e)}},{key:\"setX\",value:function(t){this.x=t}},{key:\"compareTo\",value:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0}},{key:\"getX\",value:function(){return this.x}},{key:\"setZ\",value:function(t){this.z=t}},{key:\"clone\",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return G.shouldNeverReachHere(\"this shouldn't happen because this class is Cloneable\"),null;throw t}}},{key:\"copy\",value:function(){return new t(this)}},{key:\"toString\",value:function(){return\"(\"+this.x+\", \"+this.y+\", \"+this.getZ()+\")\"}},{key:\"distance3D\",value:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.getZ()-t.getZ();return Math.sqrt(e*e+n*n+i*i)}},{key:\"getY\",value:function(){return this.y}},{key:\"setY\",value:function(t){this.y=t}},{key:\"distance\",value:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)}},{key:\"hashCode\",value:function(){var e=17;return e=37*(e=37*e+t.hashCode(this.x))+t.hashCode(this.y)}},{key:\"setCoordinate\",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}},{key:\"interfaces_\",get:function(){return[x,I,E]}}],[{key:\"constructor_\",value:function(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)t.constructor_.call(this,0,0);else if(1===arguments.length){var e=arguments[0];t.constructor_.call(this,e.x,e.y,e.getZ())}else if(2===arguments.length){var n=arguments[0],i=arguments[1];t.constructor_.call(this,n,i,t.NULL_ORDINATE)}else if(3===arguments.length){var r=arguments[0],s=arguments[1],a=arguments[2];this.x=r,this.y=s,this.z=a}}},{key:\"hashCode\",value:function(t){return Y[0]=t,z[0]^z[1]}}])}(),B=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"compare\",value:function(e,n){var i=t.compare(e.x,n.x);if(0!==i)return i;var r=t.compare(e.y,n.y);return 0!==r?r:this._dimensionsToTest<=2?0:t.compare(e.getZ(),n.getZ())}},{key:\"interfaces_\",get:function(){return[P]}}],[{key:\"constructor_\",value:function(){if(this._dimensionsToTest=2,0===arguments.length)t.constructor_.call(this,2);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new m(\"only 2 or 3 dimensions may be specified\");this._dimensionsToTest=e}}},{key:\"compare\",value:function(t,e){return t<e?-1:t>e?1:A.isNaN(t)?A.isNaN(e)?0:-1:A.isNaN(e)?1:0}}])}();X.DimensionalComparator=B,X.NULL_ORDINATE=A.NaN,X.X=0,X.Y=1,X.Z=2,X.M=3;var U=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"getArea\",value:function(){return this.getWidth()*this.getHeight()}},{key:\"equals\",value:function(e){if(!(e instanceof t))return!1;var n=e;return this.isNull()?n.isNull():this._maxx===n.getMaxX()&&this._maxy===n.getMaxY()&&this._minx===n.getMinX()&&this._miny===n.getMinY()}},{key:\"intersection\",value:function(e){if(this.isNull()||e.isNull()||!this.intersects(e))return new t;var n=this._minx>e._minx?this._minx:e._minx,i=this._miny>e._miny?this._miny:e._miny;return new t(n,this._maxx<e._maxx?this._maxx:e._maxx,i,this._maxy<e._maxy?this._maxy:e._maxy)}},{key:\"isNull\",value:function(){return this._maxx<this._minx}},{key:\"getMaxX\",value:function(){return this._maxx}},{key:\"covers\",value:function(){if(1===arguments.length){if(arguments[0]instanceof X){var e=arguments[0];return this.covers(e.x,e.y)}if(arguments[0]instanceof t){var n=arguments[0];return!this.isNull()&&!n.isNull()&&(n.getMinX()>=this._minx&&n.getMaxX()<=this._maxx&&n.getMinY()>=this._miny&&n.getMaxY()<=this._maxy)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return!this.isNull()&&(i>=this._minx&&i<=this._maxx&&r>=this._miny&&r<=this._maxy)}}},{key:\"intersects\",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];return!this.isNull()&&!e.isNull()&&!(e._minx>this._maxx||e._maxx<this._minx||e._miny>this._maxy||e._maxy<this._miny)}if(arguments[0]instanceof X){var n=arguments[0];return this.intersects(n.x,n.y)}}else if(2===arguments.length){if(arguments[0]instanceof X&&arguments[1]instanceof X){var i=arguments[0],r=arguments[1];return!this.isNull()&&(!((i.x<r.x?i.x:r.x)>this._maxx)&&(!((i.x>r.x?i.x:r.x)<this._minx)&&(!((i.y<r.y?i.y:r.y)>this._maxy)&&!((i.y>r.y?i.y:r.y)<this._miny))))}if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var s=arguments[0],a=arguments[1];return!this.isNull()&&!(s>this._maxx||s<this._minx||a>this._maxy||a<this._miny)}}}},{key:\"getMinY\",value:function(){return this._miny}},{key:\"getDiameter\",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return Math.sqrt(t*t+e*e)}},{key:\"getMinX\",value:function(){return this._minx}},{key:\"expandToInclude\",value:function(){if(1===arguments.length){if(arguments[0]instanceof X){var e=arguments[0];this.expandToInclude(e.x,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];if(n.isNull())return null;this.isNull()?(this._minx=n.getMinX(),this._maxx=n.getMaxX(),this._miny=n.getMinY(),this._maxy=n.getMaxY()):(n._minx<this._minx&&(this._minx=n._minx),n._maxx>this._maxx&&(this._maxx=n._maxx),n._miny<this._miny&&(this._miny=n._miny),n._maxy>this._maxy&&(this._maxy=n._maxy))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=r,this._maxy=r):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}}},{key:\"minExtent\",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e}},{key:\"getWidth\",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:\"compareTo\",value:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0}},{key:\"translate\",value:function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)}},{key:\"copy\",value:function(){return new t(this)}},{key:\"toString\",value:function(){return\"Env[\"+this._minx+\" : \"+this._maxx+\", \"+this._miny+\" : \"+this._maxy+\"]\"}},{key:\"setToNull\",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:\"disjoint\",value:function(t){return!(!this.isNull()&&!t.isNull())||(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}},{key:\"getHeight\",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:\"maxExtent\",value:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e}},{key:\"expandBy\",value:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:\"contains\",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];return this.covers(e)}if(arguments[0]instanceof X){var n=arguments[0];return this.covers(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.covers(i,r)}}},{key:\"centre\",value:function(){return this.isNull()?null:new X((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:\"init\",value:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof X){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this._minx=n._minx,this._maxx=n._maxx,this._miny=n._miny,this._maxy=n._maxy}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var s=arguments[0],a=arguments[1],o=arguments[2],u=arguments[3];s<a?(this._minx=s,this._maxx=a):(this._minx=a,this._maxx=s),o<u?(this._miny=o,this._maxy=u):(this._miny=u,this._maxy=o)}}},{key:\"getMaxY\",value:function(){return this._maxy}},{key:\"distance\",value:function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)}},{key:\"hashCode\",value:function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+X.hashCode(this._minx))+X.hashCode(this._maxx))+X.hashCode(this._miny))+X.hashCode(this._maxy)}},{key:\"interfaces_\",get:function(){return[x,E]}}],[{key:\"constructor_\",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof X){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i.x,r.x,i.y,r.y)}else if(4===arguments.length){var s=arguments[0],a=arguments[1],o=arguments[2],u=arguments[3];this.init(s,a,o,u)}}},{key:\"intersects\",value:function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2],a=arguments[3],o=Math.min(s.x,a.x),u=Math.max(s.x,a.x),l=Math.min(i.x,r.x),h=Math.max(i.x,r.x);return!(l>u)&&(!(h<o)&&(o=Math.min(s.y,a.y),u=Math.max(s.y,a.y),l=Math.min(i.y,r.y),h=Math.max(i.y,r.y),!(l>u)&&!(h<o)))}}}])}(),V=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"isGeometryCollection\",value:function(){return this.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION}},{key:\"getFactory\",value:function(){return this._factory}},{key:\"getGeometryN\",value:function(t){return this}},{key:\"getArea\",value:function(){return 0}},{key:\"isRectangle\",value:function(){return!1}},{key:\"equalsExact\",value:function(t){return this===t||this.equalsExact(t,0)}},{key:\"geometryChanged\",value:function(){this.apply(t.geometryChangedFilter)}},{key:\"geometryChangedAction\",value:function(){this._envelope=null}},{key:\"equalsNorm\",value:function(t){return null!==t&&this.norm().equalsExact(t.norm())}},{key:\"getLength\",value:function(){return 0}},{key:\"getNumGeometries\",value:function(){return 1}},{key:\"compareTo\",value:function(){var t;if(1===arguments.length){var e=arguments[0];return t=e,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return t=n,this.getTypeCode()!==t.getTypeCode()?this.getTypeCode()-t.getTypeCode():this.isEmpty()&&t.isEmpty()?0:this.isEmpty()?-1:t.isEmpty()?1:this.compareToSameClass(n,i)}}},{key:\"getUserData\",value:function(){return this._userData}},{key:\"getSRID\",value:function(){return this._SRID}},{key:\"getEnvelope\",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:\"checkNotGeometryCollection\",value:function(e){if(e.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION)throw new m(\"This method does not support GeometryCollection arguments\")}},{key:\"equal\",value:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n}},{key:\"norm\",value:function(){var t=this.copy();return t.normalize(),t}},{key:\"reverse\",value:function(){var t=this.reverseInternal();return null!=this.envelope&&(t.envelope=this.envelope.copy()),t.setSRID(this.getSRID()),t}},{key:\"copy\",value:function(){var t=this.copyInternal();return t.envelope=null==this._envelope?null:this._envelope.copy(),t._SRID=this._SRID,t._userData=this._userData,t}},{key:\"getPrecisionModel\",value:function(){return this._factory.getPrecisionModel()}},{key:\"getEnvelopeInternal\",value:function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new U(this._envelope)}},{key:\"setSRID\",value:function(t){this._SRID=t}},{key:\"setUserData\",value:function(t){this._userData=t}},{key:\"compare\",value:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),s=i.next(),a=r.compareTo(s);if(0!==a)return a}return n.hasNext()?1:i.hasNext()?-1:0}},{key:\"hashCode\",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:\"isEquivalentClass\",value:function(t){return this.getClass()===t.getClass()}},{key:\"isGeometryCollectionOrDerived\",value:function(){return this.getTypeCode()===t.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===t.TYPECODE_MULTIPOINT||this.getTypeCode()===t.TYPECODE_MULTILINESTRING||this.getTypeCode()===t.TYPECODE_MULTIPOLYGON}},{key:\"interfaces_\",get:function(){return[I,x,E]}},{key:\"getClass\",value:function(){return t}}],[{key:\"hasNonEmptyElements\",value:function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1}},{key:\"hasNullElements\",value:function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1}}])}();V.constructor_=function(t){t&&(this._envelope=null,this._userData=null,this._factory=t,this._SRID=t.getSRID())},V.TYPECODE_POINT=0,V.TYPECODE_MULTIPOINT=1,V.TYPECODE_LINESTRING=2,V.TYPECODE_LINEARRING=3,V.TYPECODE_MULTILINESTRING=4,V.TYPECODE_POLYGON=5,V.TYPECODE_MULTIPOLYGON=6,V.TYPECODE_GEOMETRYCOLLECTION=7,V.TYPENAME_POINT=\"Point\",V.TYPENAME_MULTIPOINT=\"MultiPoint\",V.TYPENAME_LINESTRING=\"LineString\",V.TYPENAME_LINEARRING=\"LinearRing\",V.TYPENAME_MULTILINESTRING=\"MultiLineString\",V.TYPENAME_POLYGON=\"Polygon\",V.TYPENAME_MULTIPOLYGON=\"MultiPolygon\",V.TYPENAME_GEOMETRYCOLLECTION=\"GeometryCollection\",V.geometryChangedFilter={get interfaces_(){return[k]},filter:function(t){t.geometryChangedAction()}};var H=function(){function t(){n(this,t)}return s(t,null,[{key:\"toLocationSymbol\",value:function(e){switch(e){case t.EXTERIOR:return\"e\";case t.BOUNDARY:return\"b\";case t.INTERIOR:return\"i\";case t.NONE:return\"-\"}throw new m(\"Unknown location value: \"+e)}}])}();H.INTERIOR=0,H.BOUNDARY=1,H.EXTERIOR=2,H.NONE=-1;var Z=function(){return s((function t(){n(this,t)}),[{key:\"add\",value:function(){}},{key:\"addAll\",value:function(){}},{key:\"isEmpty\",value:function(){}},{key:\"iterator\",value:function(){}},{key:\"size\",value:function(){}},{key:\"toArray\",value:function(){}},{key:\"remove\",value:function(){}}])}(),j=function(t){function i(t){var r;return n(this,i),(r=e(this,i,[t])).name=Object.keys({NoSuchElementException:i})[0],r}return l(i,t),s(i)}(p),W=function(t){function i(t){var r;return n(this,i),(r=e(this,i,[t])).name=Object.keys({UnsupportedOperationException:i})[0],r}return l(i,t),s(i)}(p),K=function(t){function i(){return n(this,i),e(this,i,arguments)}return l(i,t),s(i,[{key:\"contains\",value:function(){}}])}(Z),J=function(t){function i(t){var r;return n(this,i),(r=e(this,i)).map=new Map,t instanceof Z&&r.addAll(t),r}return l(i,t),s(i,[{key:\"contains\",value:function(t){var e=t.hashCode?t.hashCode():t;return!!this.map.has(e)}},{key:\"add\",value:function(t){var e=t.hashCode?t.hashCode():t;return!this.map.has(e)&&!!this.map.set(e,t)}},{key:\"addAll\",value:function(t){var e,n=a(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:\"remove\",value:function(){throw new W}},{key:\"size\",value:function(){return this.map.size}},{key:\"isEmpty\",value:function(){return 0===this.map.size}},{key:\"toArray\",value:function(){return Array.from(this.map.values())}},{key:\"iterator\",value:function(){return new Q(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])}(K),Q=function(){return s((function t(e){n(this,t),this.iterator=e.values();var i=this.iterator.next(),r=i.done,s=i.value;this.done=r,this.value=s}),[{key:\"next\",value:function(){if(this.done)throw new j;var t=this.value,e=this.iterator.next(),n=e.done,i=e.value;return this.done=n,this.value=i,t}},{key:\"hasNext\",value:function(){return!this.done}},{key:\"remove\",value:function(){throw new W}}])}(),$=function(){function t(){n(this,t)}return s(t,null,[{key:\"opposite\",value:function(e){return e===t.LEFT?t.RIGHT:e===t.RIGHT?t.LEFT:e}}])}();$.ON=0,$.LEFT=1,$.RIGHT=2;var tt=function(t){function i(t){var r;return n(this,i),(r=e(this,i,[t])).name=Object.keys({EmptyStackException:i})[0],r}return l(i,t),s(i)}(p),et=function(t){function i(t){var r;return n(this,i),(r=e(this,i,[t])).name=Object.keys({IndexOutOfBoundsException:i})[0],r}return l(i,t),s(i)}(p),nt=function(t){function i(){return n(this,i),e(this,i,arguments)}return l(i,t),s(i,[{key:\"get\",value:function(){}},{key:\"set\",value:function(){}},{key:\"isEmpty\",value:function(){}}])}(Z),it=function(t){function i(){var t;return n(this,i),(t=e(this,i)).array=[],t}return l(i,t),s(i,[{key:\"add\",value:function(t){return this.array.push(t),!0}},{key:\"get\",value:function(t){if(t<0||t>=this.size())throw new et;return this.array[t]}},{key:\"push\",value:function(t){return this.array.push(t),t}},{key:\"pop\",value:function(){if(0===this.array.length)throw new tt;return this.array.pop()}},{key:\"peek\",value:function(){if(0===this.array.length)throw new tt;return this.array[this.array.length-1]}},{key:\"empty\",value:function(){return 0===this.array.length}},{key:\"isEmpty\",value:function(){return this.empty()}},{key:\"search\",value:function(t){return this.array.indexOf(t)}},{key:\"size\",value:function(){return this.array.length}},{key:\"toArray\",value:function(){return this.array.slice()}}])}(nt);function rt(t,e){return t.interfaces_&&t.interfaces_.indexOf(e)>-1}var st=function(){return s((function t(e){n(this,t),this.str=e}),[{key:\"append\",value:function(t){this.str+=t}},{key:\"setCharAt\",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:\"toString\",value:function(){return this.str}}])}(),at=function(){function t(e){n(this,t),this.value=e}return s(t,[{key:\"intValue\",value:function(){return this.value}},{key:\"compareTo\",value:function(t){return this.value<t?-1:this.value>t?1:0}}],[{key:\"compare\",value:function(t,e){return t<e?-1:t>e?1:0}},{key:\"isNan\",value:function(t){return Number.isNaN(t)}},{key:\"valueOf\",value:function(e){return new t(e)}}])}(),ot=function(){return s((function t(){n(this,t)}),null,[{key:\"isWhitespace\",value:function(t){return t<=32&&t>=0||127===t}},{key:\"toUpperCase\",value:function(t){return t.toUpperCase()}}])}(),ut=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"le\",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<=t._lo}},{key:\"extractSignificantDigits\",value:function(e,n){var i=this.abs(),r=t.magnitude(i._hi),s=t.TEN.pow(r);(i=i.divide(s)).gt(t.TEN)?(i=i.divide(t.TEN),r+=1):i.lt(t.ONE)&&(i=i.multiply(t.TEN),r-=1);for(var a=r+1,o=new st,u=t.MAX_PRINT_DIGITS-1,l=0;l<=u;l++){e&&l===a&&o.append(\".\");var h=Math.trunc(i._hi);if(h<0)break;var c=!1,f=0;h>9?(c=!0,f=\"9\"):f=\"0\"+h,o.append(f),i=i.subtract(t.valueOf(h)).multiply(t.TEN),c&&i.selfAdd(t.TEN);var g=!0,v=t.magnitude(i._hi);if(v<0&&Math.abs(v)>=u-l&&(g=!1),!g)break}return n[0]=r,o.toString()}},{key:\"sqr\",value:function(){return this.multiply(this)}},{key:\"doubleValue\",value:function(){return this._hi+this._lo}},{key:\"subtract\",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return this.add(e.negate())}if(\"number\"==typeof arguments[0]){var n=arguments[0];return this.add(-n)}}},{key:\"equals\",value:function(){if(1===arguments.length&&arguments[0]instanceof t){var e=arguments[0];return this._hi===e._hi&&this._lo===e._lo}}},{key:\"isZero\",value:function(){return 0===this._hi&&0===this._lo}},{key:\"selfSubtract\",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e._hi,-e._lo)}if(\"number\"==typeof arguments[0]){var n=arguments[0];return this.isNaN()?this:this.selfAdd(-n,0)}}},{key:\"getSpecialNumberString\",value:function(){return this.isZero()?\"0.0\":this.isNaN()?\"NaN \":null}},{key:\"min\",value:function(t){return this.le(t)?this:t}},{key:\"selfDivide\",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];return this.selfDivide(e._hi,e._lo)}if(\"number\"==typeof arguments[0]){var n=arguments[0];return this.selfDivide(n,0)}}else if(2===arguments.length){var i,r,s,a,o=arguments[0],u=arguments[1],l=null,h=null,c=null,f=null;return s=this._hi/o,f=(l=(c=t.SPLIT*s)-(l=c-s))*(h=(f=t.SPLIT*o)-(h=f-o))-(a=s*o)+l*(r=o-h)+(i=s-l)*h+i*r,f=s+(c=(this._hi-a-f+this._lo-s*u)/o),this._hi=f,this._lo=s-f+c,this}}},{key:\"dump\",value:function(){return\"DD<\"+this._hi+\", \"+this._lo+\">\"}},{key:\"divide\",value:function(){if(arguments[0]instanceof t){var e,n,i,r,s=arguments[0],a=null,o=null,u=null,l=null;return e=(i=this._hi/s._hi)-(a=(u=t.SPLIT*i)-(a=u-i)),l=a*(o=(l=t.SPLIT*s._hi)-(o=l-s._hi))-(r=i*s._hi)+a*(n=s._hi-o)+e*o+e*n,new t(l=i+(u=(this._hi-r-l+this._lo-i*s._lo)/s._hi),i-l+u)}if(\"number\"==typeof arguments[0]){var h=arguments[0];return A.isNaN(h)?t.createNaN():t.copy(this).selfDivide(h,0)}}},{key:\"ge\",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>=t._lo}},{key:\"pow\",value:function(e){if(0===e)return t.valueOf(1);var n=new t(this),i=t.valueOf(1),r=Math.abs(e);if(r>1)for(;r>0;)r%2==1&&i.selfMultiply(n),(r/=2)>0&&(n=n.sqr());else i=n;return e<0?i.reciprocal():i}},{key:\"ceil\",value:function(){if(this.isNaN())return t.NaN;var e=Math.ceil(this._hi),n=0;return e===this._hi&&(n=Math.ceil(this._lo)),new t(e,n)}},{key:\"compareTo\",value:function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0}},{key:\"rint\",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:\"setValue\",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return this.init(e),this}if(\"number\"==typeof arguments[0]){var n=arguments[0];return this.init(n),this}}},{key:\"max\",value:function(t){return this.ge(t)?this:t}},{key:\"sqrt\",value:function(){if(this.isZero())return t.valueOf(0);if(this.isNegative())return t.NaN;var e=1/Math.sqrt(this._hi),n=this._hi*e,i=t.valueOf(n),r=this.subtract(i.sqr())._hi*(.5*e);return i.add(r)}},{key:\"selfAdd\",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];return this.selfAdd(e._hi,e._lo)}if(\"number\"==typeof arguments[0]){var n,i,r,s,a,o=arguments[0],u=null;return u=(r=this._hi+o)-(s=r-this._hi),i=(a=(u=o-s+(this._hi-u))+this._lo)+(r-(n=r+a)),this._hi=n+i,this._lo=i+(n-this._hi),this}}else if(2===arguments.length){var l,h,c,f,g=arguments[0],v=arguments[1],y=null,d=null,_=null;c=this._hi+g,h=this._lo+v,d=c-(_=c-this._hi),y=h-(f=h-this._lo);var p=(l=c+(_=(d=g-_+(this._hi-d))+h))+(_=(y=v-f+(this._lo-y))+(_+(c-l))),m=_+(l-p);return this._hi=p,this._lo=m,this}}},{key:\"selfMultiply\",value:function(){if(1===arguments.length){if(arguments[0]instanceof t){var e=arguments[0];return this.selfMultiply(e._hi,e._lo)}if(\"number\"==typeof arguments[0]){var n=arguments[0];return this.selfMultiply(n,0)}}else if(2===arguments.length){var i,r,s=arguments[0],a=arguments[1],o=null,u=null,l=null,h=null;o=(l=t.SPLIT*this._hi)-this._hi,h=t.SPLIT*s,o=l-o,i=this._hi-o,u=h-s;var c=(l=this._hi*s)+(h=o*(u=h-u)-l+o*(r=s-u)+i*u+i*r+(this._hi*a+this._lo*s)),f=h+(o=l-c);return this._hi=c,this._lo=f,this}}},{key:\"selfSqr\",value:function(){return this.selfMultiply(this)}},{key:\"floor\",value:function(){if(this.isNaN())return t.NaN;var e=Math.floor(this._hi),n=0;return e===this._hi&&(n=Math.floor(this._lo)),new t(e,n)}},{key:\"negate\",value:function(){return this.isNaN()?this:new t(-this._hi,-this._lo)}},{key:\"clone\",value:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}}},{key:\"multiply\",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return e.isNaN()?t.createNaN():t.copy(this).selfMultiply(e)}if(\"number\"==typeof arguments[0]){var n=arguments[0];return A.isNaN(n)?t.createNaN():t.copy(this).selfMultiply(n,0)}}},{key:\"isNaN\",value:function(){return A.isNaN(this._hi)}},{key:\"intValue\",value:function(){return Math.trunc(this._hi)}},{key:\"toString\",value:function(){var e=t.magnitude(this._hi);return e>=-3&&e<=20?this.toStandardNotation():this.toSciNotation()}},{key:\"toStandardNotation\",value:function(){var e=this.getSpecialNumberString();if(null!==e)return e;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!0,n),r=n[0]+1,s=i;if(\".\"===i.charAt(0))s=\"0\"+i;else if(r<0)s=\"0.\"+t.stringOfChar(\"0\",-r)+i;else if(-1===i.indexOf(\".\")){var a=r-i.length;s=i+t.stringOfChar(\"0\",a)+\".0\"}return this.isNegative()?\"-\"+s:s}},{key:\"reciprocal\",value:function(){var e,n,i,r,s=null,a=null,o=null,u=null;e=(i=1/this._hi)-(s=(o=t.SPLIT*i)-(s=o-i)),a=(u=t.SPLIT*this._hi)-this._hi;var l=i+(o=(1-(r=i*this._hi)-(u=s*(a=u-a)-r+s*(n=this._hi-a)+e*a+e*n)-i*this._lo)/this._hi);return new t(l,i-l+o)}},{key:\"toSciNotation\",value:function(){if(this.isZero())return t.SCI_NOT_ZERO;var e=this.getSpecialNumberString();if(null!==e)return e;var n=new Array(1).fill(null),i=this.extractSignificantDigits(!1,n),r=t.SCI_NOT_EXPONENT_CHAR+n[0];if(\"0\"===i.charAt(0))throw new IllegalStateException(\"Found leading zero: \"+i);var s=\"\";i.length>1&&(s=i.substring(1));var a=i.charAt(0)+\".\"+s;return this.isNegative()?\"-\"+a+r:a+r}},{key:\"abs\",value:function(){return this.isNaN()?t.NaN:this.isNegative()?this.negate():new t(this)}},{key:\"isPositive\",value:function(){return this._hi>0||0===this._hi&&this._lo>0}},{key:\"lt\",value:function(t){return this._hi<t._hi||this._hi===t._hi&&this._lo<t._lo}},{key:\"add\",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return t.copy(this).selfAdd(e)}if(\"number\"==typeof arguments[0]){var n=arguments[0];return t.copy(this).selfAdd(n)}}},{key:\"init\",value:function(){if(1===arguments.length){if(\"number\"==typeof arguments[0]){var e=arguments[0];this._hi=e,this._lo=0}else if(arguments[0]instanceof t){var n=arguments[0];this._hi=n._hi,this._lo=n._lo}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this._hi=i,this._lo=r}}},{key:\"gt\",value:function(t){return this._hi>t._hi||this._hi===t._hi&&this._lo>t._lo}},{key:\"isNegative\",value:function(){return this._hi<0||0===this._hi&&this._lo<0}},{key:\"trunc\",value:function(){return this.isNaN()?t.NaN:this.isPositive()?this.floor():this.ceil()}},{key:\"signum\",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:\"interfaces_\",get:function(){return[E,x,I]}}],[{key:\"constructor_\",value:function(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if(\"number\"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if(\"string\"==typeof arguments[0]){var i=arguments[0];t.constructor_.call(this,t.parse(i))}}else if(2===arguments.length){var r=arguments[0],s=arguments[1];this.init(r,s)}}},{key:\"determinant\",value:function(){if(\"number\"==typeof arguments[3]&&\"number\"==typeof arguments[2]&&\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];return t.determinant(t.valueOf(e),t.valueOf(n),t.valueOf(i),t.valueOf(r))}if(arguments[3]instanceof t&&arguments[2]instanceof t&&arguments[0]instanceof t&&arguments[1]instanceof t){var s=arguments[1],a=arguments[2],o=arguments[3];return arguments[0].multiply(o).selfSubtract(s.multiply(a))}}},{key:\"sqr\",value:function(e){return t.valueOf(e).selfMultiply(e)}},{key:\"valueOf\",value:function(){if(\"string\"==typeof arguments[0]){var e=arguments[0];return t.parse(e)}if(\"number\"==typeof arguments[0])return new t(arguments[0])}},{key:\"sqrt\",value:function(e){return t.valueOf(e).sqrt()}},{key:\"parse\",value:function(e){for(var n=0,i=e.length;ot.isWhitespace(e.charAt(n));)n++;var r=!1;if(n<i){var s=e.charAt(n);\"-\"!==s&&\"+\"!==s||(n++,\"-\"===s&&(r=!0))}for(var a=new t,o=0,u=0,l=0,h=!1;!(n>=i);){var c=e.charAt(n);if(n++,ot.isDigit(c)){var f=c-\"0\";a.selfMultiply(t.TEN),a.selfAdd(f),o++}else{if(\".\"!==c){if(\"e\"===c||\"E\"===c){var g=e.substring(n);try{l=at.parseInt(g)}catch(t){throw t instanceof NumberFormatException?new NumberFormatException(\"Invalid exponent \"+g+\" in string \"+e):t}break}throw new NumberFormatException(\"Unexpected character '\"+c+\"' at position \"+n+\" in string \"+e)}u=o,h=!0}}var v=a;h||(u=o);var y=o-u-l;if(0===y)v=a;else if(y>0){var d=t.TEN.pow(y);v=a.divide(d)}else if(y<0){var _=t.TEN.pow(-y);v=a.multiply(_)}return r?v.negate():v}},{key:\"createNaN\",value:function(){return new t(A.NaN,A.NaN)}},{key:\"copy\",value:function(e){return new t(e)}},{key:\"magnitude\",value:function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return 10*Math.pow(10,i)<=e&&(i+=1),i}},{key:\"stringOfChar\",value:function(t,e){for(var n=new st,i=0;i<e;i++)n.append(t);return n.toString()}}])}();ut.PI=new ut(3.141592653589793,12246467991473532e-32),ut.TWO_PI=new ut(6.283185307179586,24492935982947064e-32),ut.PI_2=new ut(1.5707963267948966,6123233995736766e-32),ut.E=new ut(2.718281828459045,14456468917292502e-32),ut.NaN=new ut(A.NaN,A.NaN),ut.EPS=123259516440783e-46,ut.SPLIT=134217729,ut.MAX_PRINT_DIGITS=32,ut.TEN=ut.valueOf(10),ut.ONE=ut.valueOf(1),ut.SCI_NOT_EXPONENT_CHAR=\"E\",ut.SCI_NOT_ZERO=\"0.0E0\";var lt=function(){function t(){n(this,t)}return s(t,null,[{key:\"orientationIndex\",value:function(e,n,i){var r=t.orientationIndexFilter(e,n,i);if(r<=1)return r;var s=ut.valueOf(n.x).selfAdd(-e.x),a=ut.valueOf(n.y).selfAdd(-e.y),o=ut.valueOf(i.x).selfAdd(-n.x),u=ut.valueOf(i.y).selfAdd(-n.y);return s.selfMultiply(u).selfSubtract(a.selfMultiply(o)).signum()}},{key:\"signOfDet2x2\",value:function(){if(arguments[3]instanceof ut&&arguments[2]instanceof ut&&arguments[0]instanceof ut&&arguments[1]instanceof ut){var t=arguments[1],e=arguments[2],n=arguments[3];return arguments[0].multiply(n).selfSubtract(t.multiply(e)).signum()}if(\"number\"==typeof arguments[3]&&\"number\"==typeof arguments[2]&&\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var i=arguments[0],r=arguments[1],s=arguments[2],a=arguments[3],o=ut.valueOf(i),u=ut.valueOf(r),l=ut.valueOf(s),h=ut.valueOf(a);return o.multiply(h).selfSubtract(u.multiply(l)).signum()}}},{key:\"intersection\",value:function(t,e,n,i){var r=new ut(t.y).selfSubtract(e.y),s=new ut(e.x).selfSubtract(t.x),a=new ut(t.x).selfMultiply(e.y).selfSubtract(new ut(e.x).selfMultiply(t.y)),o=new ut(n.y).selfSubtract(i.y),u=new ut(i.x).selfSubtract(n.x),l=new ut(n.x).selfMultiply(i.y).selfSubtract(new ut(i.x).selfMultiply(n.y)),h=s.multiply(l).selfSubtract(u.multiply(a)),c=o.multiply(a).selfSubtract(r.multiply(l)),f=r.multiply(u).selfSubtract(o.multiply(s)),g=h.selfDivide(f).doubleValue(),v=c.selfDivide(f).doubleValue();return A.isNaN(g)||A.isInfinite(g)||A.isNaN(v)||A.isInfinite(v)?null:new X(g,v)}},{key:\"orientationIndexFilter\",value:function(e,n,i){var r=null,s=(e.x-i.x)*(n.y-i.y),a=(e.y-i.y)*(n.x-i.x),o=s-a;if(s>0){if(a<=0)return t.signum(o);r=s+a}else{if(!(s<0))return t.signum(o);if(a>=0)return t.signum(o);r=-s-a}var u=t.DP_SAFE_EPSILON*r;return o>=u||-o>=u?t.signum(o):2}},{key:\"signum\",value:function(t){return t>0?1:t<0?-1:0}}])}();lt.DP_SAFE_EPSILON=1e-15;var ht=function(){return s((function t(){n(this,t)}),[{key:\"getM\",value:function(t){if(this.hasM()){var e=this.getDimension()-this.getMeasures();return this.getOrdinate(t,e)}return A.NaN}},{key:\"setOrdinate\",value:function(t,e,n){}},{key:\"getZ\",value:function(t){return this.hasZ()?this.getOrdinate(t,2):A.NaN}},{key:\"size\",value:function(){}},{key:\"getOrdinate\",value:function(t,e){}},{key:\"getCoordinate\",value:function(){}},{key:\"getCoordinateCopy\",value:function(t){}},{key:\"createCoordinate\",value:function(){}},{key:\"getDimension\",value:function(){}},{key:\"hasM\",value:function(){return this.getMeasures()>0}},{key:\"getX\",value:function(t){}},{key:\"hasZ\",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:\"getMeasures\",value:function(){return 0}},{key:\"expandEnvelope\",value:function(t){}},{key:\"copy\",value:function(){}},{key:\"getY\",value:function(t){}},{key:\"toCoordinateArray\",value:function(){}},{key:\"interfaces_\",get:function(){return[I]}}])}();ht.X=0,ht.Y=1,ht.Z=2,ht.M=3;var ct=function(){function t(){n(this,t)}return s(t,null,[{key:\"index\",value:function(t,e,n){return lt.orientationIndex(t,e,n)}},{key:\"isCCW\",value:function(){if(arguments[0]instanceof Array){var e=arguments[0],n=e.length-1;if(n<3)throw new m(\"Ring has fewer than 4 points, so orientation cannot be determined\");for(var i=e[0],r=0,s=1;s<=n;s++){var a=e[s];a.y>i.y&&(i=a,r=s)}var o=r;do{(o-=1)<0&&(o=n)}while(e[o].equals2D(i)&&o!==r);var u=r;do{u=(u+1)%n}while(e[u].equals2D(i)&&u!==r);var l=e[o],h=e[u];if(l.equals2D(i)||h.equals2D(i)||l.equals2D(h))return!1;var c=t.index(l,i,h);return 0===c?l.x>h.x:c>0}if(rt(arguments[0],ht)){var f=arguments[0],g=f.size()-1;if(g<3)throw new m(\"Ring has fewer than 4 points, so orientation cannot be determined\");for(var v=f.getCoordinate(0),y=0,d=1;d<=g;d++){var _=f.getCoordinate(d);_.y>v.y&&(v=_,y=d)}var p=null,k=y;do{(k-=1)<0&&(k=g),p=f.getCoordinate(k)}while(p.equals2D(v)&&k!==y);var x=null,I=y;do{I=(I+1)%g,x=f.getCoordinate(I)}while(x.equals2D(v)&&I!==y);if(p.equals2D(v)||x.equals2D(v)||p.equals2D(x))return!1;var E=t.index(p,v,x);return 0===E?p.x>x.x:E>0}}}])}();ct.CLOCKWISE=-1,ct.RIGHT=ct.CLOCKWISE,ct.COUNTERCLOCKWISE=1,ct.LEFT=ct.COUNTERCLOCKWISE,ct.COLLINEAR=0,ct.STRAIGHT=ct.COLLINEAR;var ft=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"getCoordinate\",value:function(){return this._minCoord}},{key:\"getRightmostSide\",value:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n}},{key:\"findRightmostEdgeAtVertex\",value:function(){var t=this._minDe.getEdge().getCoordinates();G.isTrue(this._minIndex>0&&this._minIndex<t.length,\"rightmost point expected to be interior vertex of edge\");var e=t[this._minIndex-1],n=t[this._minIndex+1],i=ct.index(this._minCoord,n,e),r=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&i===ct.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&i===ct.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)}},{key:\"getRightmostSideOfSegment\",value:function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=$.LEFT;return n[e].y<n[e+1].y&&(i=$.RIGHT),i}},{key:\"getEdge\",value:function(){return this._orientedDe}},{key:\"checkForRightmostCoordinate\",value:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])}},{key:\"findRightmostEdgeAtNode\",value:function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:\"findEdge\",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}G.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),\"inconsistency in rightmost processing\"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===$.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:\"constructor_\",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])}(),gt=function(t){function i(t,r){var s;return n(this,i),(s=e(this,i,[r?t+\" [ \"+r+\" ]\":t])).pt=r?new X(r):void 0,s.name=Object.keys({TopologyException:i})[0],s}return l(i,t),s(i,[{key:\"getCoordinate\",value:function(){return this.pt}}])}(D),vt=function(){return s((function t(){n(this,t),this.array=[]}),[{key:\"addLast\",value:function(t){this.array.push(t)}},{key:\"removeFirst\",value:function(){return this.array.shift()}},{key:\"isEmpty\",value:function(){return 0===this.array.length}}])}(),yt=function(t){function i(t){var r;return n(this,i),(r=e(this,i)).array=[],t instanceof Z&&r.addAll(t),r}return l(i,t),s(i,[{key:\"interfaces_\",get:function(){return[nt,Z]}},{key:\"ensureCapacity\",value:function(){}},{key:\"add\",value:function(t){return 1===arguments.length?this.array.push(t):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:\"clear\",value:function(){this.array=[]}},{key:\"addAll\",value:function(t){var e,n=a(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.array.push(i)}}catch(t){n.e(t)}finally{n.f()}}},{key:\"set\",value:function(t,e){var n=this.array[t];return this.array[t]=e,n}},{key:\"iterator\",value:function(){return new dt(this)}},{key:\"get\",value:function(t){if(t<0||t>=this.size())throw new et;return this.array[t]}},{key:\"isEmpty\",value:function(){return 0===this.array.length}},{key:\"sort\",value:function(t){t?this.array.sort((function(e,n){return t.compare(e,n)})):this.array.sort()}},{key:\"size\",value:function(){return this.array.length}},{key:\"toArray\",value:function(){return this.array.slice()}},{key:\"remove\",value:function(t){for(var e=0,n=this.array.length;e<n;e++)if(this.array[e]===t)return!!this.array.splice(e,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])}(nt),dt=function(){return s((function t(e){n(this,t),this.arrayList=e,this.position=0}),[{key:\"next\",value:function(){if(this.position===this.arrayList.size())throw new j;return this.arrayList.get(this.position++)}},{key:\"hasNext\",value:function(){return this.position<this.arrayList.size()}},{key:\"set\",value:function(t){return this.arrayList.set(this.position-1,t)}},{key:\"remove\",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])}(),_t=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"clearVisitedEdges\",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}}},{key:\"getRightmostCoordinate\",value:function(){return this._rightMostCoord}},{key:\"computeNodeDepth\",value:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new gt(\"unable to find edge to compute depths at \"+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var s=r.next();s.setVisited(!0),this.copySymDepths(s)}}},{key:\"computeDepth\",value:function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths($.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)}},{key:\"create\",value:function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:\"findResultEdges\",value:function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth($.RIGHT)>=1&&e.getDepth($.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}}},{key:\"computeDepths\",value:function(t){var e=new J,n=new vt,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var s=r.getEdges().iterator();s.hasNext();){var a=s.next().getSym();if(!a.isVisited()){var o=a.getNode();e.contains(o)||(n.addLast(o),e.add(o))}}}}},{key:\"compareTo\",value:function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0}},{key:\"getEnvelope\",value:function(){if(null===this._env){for(var t=new U,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this._env=t}return this._env}},{key:\"addReachable\",value:function(t){var e=new it;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}}},{key:\"copySymDepths\",value:function(t){var e=t.getSym();e.setDepth($.LEFT,t.getDepth($.RIGHT)),e.setDepth($.RIGHT,t.getDepth($.LEFT))}},{key:\"add\",value:function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this._dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}}},{key:\"getNodes\",value:function(){return this._nodes}},{key:\"getDirectedEdges\",value:function(){return this._dirEdgeList}},{key:\"interfaces_\",get:function(){return[x]}}],[{key:\"constructor_\",value:function(){this._finder=null,this._dirEdgeList=new yt,this._nodes=new yt,this._rightMostCoord=null,this._env=null,this._finder=new ft}}])}(),pt=function(){return s((function t(){n(this,t)}),null,[{key:\"intersection\",value:function(t,e,n,i){var r=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,o=t.y>e.y?t.y:e.y,u=n.x<i.x?n.x:i.x,l=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,c=n.y>i.y?n.y:i.y,f=((r>u?r:u)+(a<h?a:h))/2,g=((s>l?s:l)+(o<c?o:c))/2,v=t.x-f,y=t.y-g,d=e.x-f,_=e.y-g,p=n.x-f,m=n.y-g,k=i.x-f,x=i.y-g,I=y-_,E=d-v,N=v*_-d*y,T=m-x,S=k-p,L=p*x-k*m,C=I*S-T*E,R=(E*L-S*N)/C,w=(T*N-I*L)/C;return A.isNaN(R)||A.isInfinite(R)||A.isNaN(w)||A.isInfinite(w)?null:new X(R+f,w+g)}}])}(),mt=function(){return s((function t(){n(this,t)}),null,[{key:\"arraycopy\",value:function(t,e,n,i,r){for(var s=0,a=e;a<e+r;a++)n[i+s]=t[a],s++}},{key:\"getProperty\",value:function(t){return{\"line.separator\":\"\\n\"}[t]}}])}(),kt=function(){function t(){n(this,t)}return s(t,null,[{key:\"log10\",value:function(e){var n=Math.log(e);return A.isInfinite(n)||A.isNaN(n)?n:n/t.LOG_10}},{key:\"min\",value:function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r}},{key:\"clamp\",value:function(){if(\"number\"==typeof arguments[2]&&\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],s=arguments[2];return i<r?r:i>s?s:i}}},{key:\"wrap\",value:function(t,e){return t<0?e- -t%e:t%e}},{key:\"max\",value:function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return t>n&&(n=t),e>n&&(n=e),n}if(4===arguments.length){var i=arguments[1],r=arguments[2],s=arguments[3],a=arguments[0];return i>a&&(a=i),r>a&&(a=r),s>a&&(a=s),a}}},{key:\"average\",value:function(t,e){return(t+e)/2}}])}();kt.LOG_10=Math.log(10);var xt=function(){function t(){n(this,t)}return s(t,null,[{key:\"segmentToSegment\",value:function(e,n,i,r){if(e.equals(n))return t.pointToSegment(e,i,r);if(i.equals(r))return t.pointToSegment(r,e,n);var s=!1;if(U.intersects(e,n,i,r)){var a=(n.x-e.x)*(r.y-i.y)-(n.y-e.y)*(r.x-i.x);if(0===a)s=!0;else{var o=(e.y-i.y)*(r.x-i.x)-(e.x-i.x)*(r.y-i.y),u=((e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y))/a,l=o/a;(l<0||l>1||u<0||u>1)&&(s=!0)}}else s=!0;return s?kt.min(t.pointToSegment(e,i,r),t.pointToSegment(n,i,r),t.pointToSegment(i,e,n),t.pointToSegment(r,e,n)):0}},{key:\"pointToSegment\",value:function(t,e,n){if(e.x===n.x&&e.y===n.y)return t.distance(e);var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;if(r<=0)return t.distance(e);if(r>=1)return t.distance(n);var s=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(s)*Math.sqrt(i)}},{key:\"pointToLinePerpendicular\",value:function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)}},{key:\"pointToSegmentString\",value:function(e,n){if(0===n.length)throw new m(\"Line array must contain at least one vertex\");for(var i=e.distance(n[0]),r=0;r<n.length-1;r++){var s=t.pointToSegment(e,n[r],n[r+1]);s<i&&(i=s)}return i}}])}(),It=function(){return s((function t(){n(this,t)}),[{key:\"create\",value:function(){if(1===arguments.length)arguments[0]instanceof Array||rt(arguments[0],ht);else if(2===arguments.length);else if(3===arguments.length){var t=arguments[0],e=arguments[1];return this.create(t,e)}}}])}(),Et=function(){return s((function t(){n(this,t)}),[{key:\"filter\",value:function(t){}}])}(),Nt=function(){return s((function t(){n(this,t)}),null,[{key:\"ofLine\",value:function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new X;t.getCoordinate(0,i);for(var r=i.x,s=i.y,a=1;a<e;a++){t.getCoordinate(a,i);var o=i.x,u=i.y,l=o-r,h=u-s;n+=Math.sqrt(l*l+h*h),r=o,s=u}return n}}])}(),Tt=s((function t(){n(this,t)})),St=function(){function t(){n(this,t)}return s(t,null,[{key:\"copyCoord\",value:function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),s=0;s<r;s++)n.setOrdinate(i,s,t.getOrdinate(e,s))}},{key:\"isRing\",value:function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,ht.X)===t.getOrdinate(e-1,ht.X)&&t.getOrdinate(0,ht.Y)===t.getOrdinate(e-1,ht.Y))}},{key:\"scroll\",value:function(){if(2===arguments.length){if(rt(arguments[0],ht)&&Number.isInteger(arguments[1])){var e=arguments[0],n=arguments[1];t.scroll(e,n,t.isRing(e))}else if(rt(arguments[0],ht)&&arguments[1]instanceof X){var i=arguments[0],r=arguments[1],s=t.indexOf(r,i);if(s<=0)return null;t.scroll(i,s)}}else if(3===arguments.length){var a=arguments[0],o=arguments[1],u=arguments[2];if(o<=0)return null;for(var l=a.copy(),h=u?a.size()-1:a.size(),c=0;c<h;c++)for(var f=0;f<a.getDimension();f++)a.setOrdinate(c,f,l.getOrdinate((o+c)%h,f));if(u)for(var g=0;g<a.getDimension();g++)a.setOrdinate(h,g,a.getOrdinate(0,g))}}},{key:\"isEqual\",value:function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),r=0;r<n;r++)for(var s=0;s<i;s++){var a=t.getOrdinate(r,s),o=e.getOrdinate(r,s);if(t.getOrdinate(r,s)!==e.getOrdinate(r,s)&&(!A.isNaN(a)||!A.isNaN(o)))return!1}return!0}},{key:\"minCoordinateIndex\",value:function(){if(1===arguments.length){var e=arguments[0];return t.minCoordinateIndex(e,0,e.size()-1)}if(3===arguments.length){for(var n=arguments[0],i=arguments[2],r=-1,s=null,a=arguments[1];a<=i;a++){var o=n.getCoordinate(a);(null===s||s.compareTo(o)>0)&&(s=o,r=a)}return r}}},{key:\"extend\",value:function(e,n,i){var r=e.create(i,n.getDimension()),s=n.size();if(t.copy(n,0,r,0,s),s>0)for(var a=s;a<i;a++)t.copy(n,s-1,r,a,1);return r}},{key:\"reverse\",value:function(e){for(var n=e.size()-1,i=Math.trunc(n/2),r=0;r<=i;r++)t.swap(e,r,n-r)}},{key:\"swap\",value:function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}}},{key:\"copy\",value:function(e,n,i,r,s){for(var a=0;a<s;a++)t.copyCoord(e,n+a,i,r+a)}},{key:\"ensureValidRing\",value:function(e,n){var i=n.size();return 0===i?n:i<=3?t.createClosedRing(e,n,4):n.getOrdinate(0,ht.X)===n.getOrdinate(i-1,ht.X)&&n.getOrdinate(0,ht.Y)===n.getOrdinate(i-1,ht.Y)?n:t.createClosedRing(e,n,i+1)}},{key:\"indexOf\",value:function(t,e){for(var n=0;n<e.size();n++)if(t.x===e.getOrdinate(n,ht.X)&&t.y===e.getOrdinate(n,ht.Y))return n;return-1}},{key:\"createClosedRing\",value:function(e,n,i){var r=e.create(i,n.getDimension()),s=n.size();t.copy(n,0,r,0,s);for(var a=s;a<i;a++)t.copy(n,0,r,a,1);return r}},{key:\"minCoordinate\",value:function(t){for(var e=null,n=0;n<t.size();n++){var i=t.getCoordinate(n);(null===e||e.compareTo(i)>0)&&(e=i)}return e}}])}(),Lt=function(){function t(){n(this,t)}return s(t,null,[{key:\"toDimensionSymbol\",value:function(e){switch(e){case t.FALSE:return t.SYM_FALSE;case t.TRUE:return t.SYM_TRUE;case t.DONTCARE:return t.SYM_DONTCARE;case t.P:return t.SYM_P;case t.L:return t.SYM_L;case t.A:return t.SYM_A}throw new m(\"Unknown dimension value: \"+e)}},{key:\"toDimensionValue\",value:function(e){switch(ot.toUpperCase(e)){case t.SYM_FALSE:return t.FALSE;case t.SYM_TRUE:return t.TRUE;case t.SYM_DONTCARE:return t.DONTCARE;case t.SYM_P:return t.P;case t.SYM_L:return t.L;case t.SYM_A:return t.A}throw new m(\"Unknown dimension symbol: \"+e)}}])}();Lt.P=0,Lt.L=1,Lt.A=2,Lt.FALSE=-1,Lt.TRUE=-2,Lt.DONTCARE=-3,Lt.SYM_FALSE=\"F\",Lt.SYM_TRUE=\"T\",Lt.SYM_DONTCARE=\"*\",Lt.SYM_P=\"0\",Lt.SYM_L=\"1\",Lt.SYM_A=\"2\";var Ct=function(){return s((function t(){n(this,t)}),[{key:\"filter\",value:function(t){}}])}(),Rt=function(){return s((function t(){n(this,t)}),[{key:\"filter\",value:function(t,e){}},{key:\"isDone\",value:function(){}},{key:\"isGeometryChanged\",value:function(){}}])}(),wt=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"computeEnvelopeInternal\",value:function(){return this.isEmpty()?new U:this._points.expandEnvelope(new U)}},{key:\"isRing\",value:function(){return this.isClosed()&&this.isSimple()}},{key:\"getCoordinates\",value:function(){return this._points.toCoordinateArray()}},{key:\"copyInternal\",value:function(){return new i(this._points.copy(),this._factory)}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),e))return!1;return!0}return f(i,\"equalsExact\",this,1).apply(this,arguments)}},{key:\"normalize\",value:function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))){if(this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0){var n=this._points.copy();St.reverse(n),this._points=n}return null}}}},{key:\"getCoordinate\",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:\"getBoundaryDimension\",value:function(){return this.isClosed()?Lt.FALSE:0}},{key:\"isClosed\",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:\"reverseInternal\",value:function(){var t=this._points.copy();return St.reverse(t),this.getFactory().createLineString(t)}},{key:\"getEndPoint\",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:\"getTypeCode\",value:function(){return V.TYPECODE_LINESTRING}},{key:\"getDimension\",value:function(){return 1}},{key:\"getLength\",value:function(){return Nt.ofLine(this._points)}},{key:\"getNumPoints\",value:function(){return this._points.size()}},{key:\"compareToSameClass\",value:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var i=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}}},{key:\"apply\",value:function(){if(rt(arguments[0],Et))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(rt(arguments[0],Rt)){var n=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(n.filter(this._points,i),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],Ct)){arguments[0].filter(this)}else if(rt(arguments[0],k)){arguments[0].filter(this)}}},{key:\"getBoundary\",value:function(){throw new W}},{key:\"isEquivalentClass\",value:function(t){return t instanceof i}},{key:\"getCoordinateN\",value:function(t){return this._points.getCoordinate(t)}},{key:\"getGeometryType\",value:function(){return V.TYPENAME_LINESTRING}},{key:\"getCoordinateSequence\",value:function(){return this._points}},{key:\"isEmpty\",value:function(){return 0===this._points.size()}},{key:\"init\",value:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new m(\"Invalid number of points in LineString (found \"+t.size()+\" - must be 0 or >= 2)\");this._points=t}},{key:\"isCoordinate\",value:function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1}},{key:\"getStartPoint\",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:\"getPointN\",value:function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))}},{key:\"interfaces_\",get:function(){return[Tt]}}],[{key:\"constructor_\",value:function(){if(this._points=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];V.constructor_.call(this,e),this.init(t)}}}])}(V),Ot=s((function t(){n(this,t)})),bt=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"computeEnvelopeInternal\",value:function(){if(this.isEmpty())return new U;var t=new U;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t}},{key:\"getCoordinates\",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:\"copyInternal\",value:function(){return new i(this._coordinates.copy(),this._factory)}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return f(i,\"equalsExact\",this,1).apply(this,arguments)}},{key:\"normalize\",value:function(){}},{key:\"getCoordinate\",value:function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null}},{key:\"getBoundaryDimension\",value:function(){return Lt.FALSE}},{key:\"reverseInternal\",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:\"getTypeCode\",value:function(){return V.TYPECODE_POINT}},{key:\"getDimension\",value:function(){return 0}},{key:\"getNumPoints\",value:function(){return this.isEmpty()?0:1}},{key:\"getX\",value:function(){if(null===this.getCoordinate())throw new IllegalStateException(\"getX called on empty Point\");return this.getCoordinate().x}},{key:\"compareToSameClass\",value:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}}},{key:\"apply\",value:function(){if(rt(arguments[0],Et)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(rt(arguments[0],Rt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],Ct)){arguments[0].filter(this)}else if(rt(arguments[0],k)){arguments[0].filter(this)}}},{key:\"getBoundary\",value:function(){return this.getFactory().createGeometryCollection()}},{key:\"getGeometryType\",value:function(){return V.TYPENAME_POINT}},{key:\"getCoordinateSequence\",value:function(){return this._coordinates}},{key:\"getY\",value:function(){if(null===this.getCoordinate())throw new IllegalStateException(\"getY called on empty Point\");return this.getCoordinate().y}},{key:\"isEmpty\",value:function(){return 0===this._coordinates.size()}},{key:\"init\",value:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),G.isTrue(t.size()<=1),this._coordinates=t}},{key:\"isSimple\",value:function(){return!0}},{key:\"interfaces_\",get:function(){return[Ot]}}],[{key:\"constructor_\",value:function(){this._coordinates=null;var t=arguments[0],e=arguments[1];V.constructor_.call(this,e),this.init(t)}}])}(V),Mt=function(){function t(){n(this,t)}return s(t,null,[{key:\"ofRing\",value:function(){if(arguments[0]instanceof Array){var e=arguments[0];return Math.abs(t.ofRingSigned(e))}if(rt(arguments[0],ht)){var n=arguments[0];return Math.abs(t.ofRingSigned(n))}}},{key:\"ofRingSigned\",value:function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,s=t[i+1].y;e+=r*(t[i-1].y-s)}return e/2}if(rt(arguments[0],ht)){var a=arguments[0],o=a.size();if(o<3)return 0;var u=new X,l=new X,h=new X;a.getCoordinate(0,l),a.getCoordinate(1,h);var c=l.x;h.x-=c;for(var f=0,g=1;g<o-1;g++)u.y=l.y,l.x=h.x,l.y=h.y,a.getCoordinate(g+1,h),h.x-=c,f+=l.x*(u.y-h.y);return f/2}}}])}(),At=function(){return s((function t(){n(this,t)}),null,[{key:\"sort\",value:function(){var t=arguments,e=arguments[0];if(1===arguments.length)e.sort((function(t,e){return t.compareTo(e)}));else if(2===arguments.length)e.sort((function(e,n){return t[1].compare(e,n)}));else if(3===arguments.length){var n=e.slice(arguments[1],arguments[2]);n.sort();var i=e.slice(0,arguments[1]).concat(n,e.slice(arguments[2],e.length));e.splice(0,e.length);var r,s=a(i);try{for(s.s();!(r=s.n()).done;){var o=r.value;e.push(o)}}catch(t){s.e(t)}finally{s.f()}}else if(4===arguments.length){var u=e.slice(arguments[1],arguments[2]);u.sort((function(e,n){return t[3].compare(e,n)}));var l=e.slice(0,arguments[1]).concat(u,e.slice(arguments[2],e.length));e.splice(0,e.length);var h,c=a(l);try{for(c.s();!(h=c.n()).done;){var f=h.value;e.push(f)}}catch(t){c.e(t)}finally{c.f()}}}},{key:\"asList\",value:function(t){var e,n=new yt,i=a(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n.add(r)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:\"copyOf\",value:function(t,e){return t.slice(0,e)}}])}(),Pt=s((function t(){n(this,t)})),Dt=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"computeEnvelopeInternal\",value:function(){return this._shell.getEnvelopeInternal()}},{key:\"getCoordinates\",value:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this._holes.length;r++)for(var s=this._holes[r].getCoordinates(),a=0;a<s.length;a++)t[++e]=s[a];return t}},{key:\"getArea\",value:function(){var t=0;t+=Mt.ofRing(this._shell.getCoordinateSequence());for(var e=0;e<this._holes.length;e++)t-=Mt.ofRing(this._holes[e].getCoordinateSequence());return t}},{key:\"copyInternal\",value:function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<this._holes.length;n++)e[n]=this._holes[n].copy();return new i(t,e,this._factory)}},{key:\"isRectangle\",value:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var s=t.getX(0),a=t.getY(0),o=1;o<=4;o++){var u=t.getX(o),l=t.getY(o);if(u!==s===(l!==a))return!1;s=u,a=l}return!0}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this._shell,s=n._shell;if(!r.equalsExact(s,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!this._holes[a].equalsExact(n._holes[a],e))return!1;return!0}return f(i,\"equalsExact\",this,1).apply(this,arguments)}},{key:\"normalize\",value:function(){if(0===arguments.length){this._shell=this.normalized(this._shell,!0);for(var t=0;t<this._holes.length;t++)this._holes[t]=this.normalized(this._holes[t],!1);At.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=e.getCoordinateSequence(),r=St.minCoordinateIndex(i,0,i.size()-2);St.scroll(i,r,!0),ct.isCCW(i)===n&&St.reverse(i)}}},{key:\"getCoordinate\",value:function(){return this._shell.getCoordinate()}},{key:\"getNumInteriorRing\",value:function(){return this._holes.length}},{key:\"getBoundaryDimension\",value:function(){return 1}},{key:\"reverseInternal\",value:function(){for(var t=this.getExteriorRing().reverse(),e=new Array(this.getNumInteriorRing()).fill(null),n=0;n<e.length;n++)e[n]=this.getInteriorRingN(n).reverse();return this.getFactory().createPolygon(t,e)}},{key:\"getTypeCode\",value:function(){return V.TYPECODE_POLYGON}},{key:\"getDimension\",value:function(){return 2}},{key:\"getLength\",value:function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t}},{key:\"getNumPoints\",value:function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t}},{key:\"convexHull\",value:function(){return this.getExteriorRing().convexHull()}},{key:\"normalized\",value:function(t,e){var n=t.copy();return this.normalize(n,e),n}},{key:\"compareToSameClass\",value:function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[1],r=arguments[0],s=this._shell,a=r._shell,o=s.compareToSameClass(a,i);if(0!==o)return o;for(var u=this.getNumInteriorRing(),l=r.getNumInteriorRing(),h=0;h<u&&h<l;){var c=this.getInteriorRingN(h),f=r.getInteriorRingN(h),g=c.compareToSameClass(f,i);if(0!==g)return g;h++}return h<u?1:h<l?-1:0}}},{key:\"apply\",value:function(){if(rt(arguments[0],Et)){var t=arguments[0];this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(rt(arguments[0],Rt)){var n=arguments[0];if(this._shell.apply(n),!n.isDone())for(var i=0;i<this._holes.length&&(this._holes[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],Ct)){arguments[0].filter(this)}else if(rt(arguments[0],k)){var r=arguments[0];r.filter(this),this._shell.apply(r);for(var s=0;s<this._holes.length;s++)this._holes[s].apply(r)}}},{key:\"getBoundary\",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)}},{key:\"getGeometryType\",value:function(){return V.TYPENAME_POLYGON}},{key:\"getExteriorRing\",value:function(){return this._shell}},{key:\"isEmpty\",value:function(){return this._shell.isEmpty()}},{key:\"getInteriorRingN\",value:function(t){return this._holes[t]}},{key:\"interfaces_\",get:function(){return[Pt]}}],[{key:\"constructor_\",value:function(){this._shell=null,this._holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(V.constructor_.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),V.hasNullElements(e))throw new m(\"holes must not contain null elements\");if(t.isEmpty()&&V.hasNonEmptyElements(e))throw new m(\"shell is empty but holes are not\");this._shell=t,this._holes=e}}])}(V),Ft=function(t){function i(){return n(this,i),e(this,i,arguments)}return l(i,t),s(i)}(K),Gt=function(t){function i(t){var r;return n(this,i),(r=e(this,i)).array=[],t instanceof Z&&r.addAll(t),r}return l(i,t),s(i,[{key:\"contains\",value:function(t){var e,n=a(this.array);try{for(n.s();!(e=n.n()).done;){if(0===e.value.compareTo(t))return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:\"add\",value:function(t){if(this.contains(t))return!1;for(var e=0,n=this.array.length;e<n;e++){if(1===this.array[e].compareTo(t))return!!this.array.splice(e,0,t)}return this.array.push(t),!0}},{key:\"addAll\",value:function(t){var e,n=a(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.add(i)}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:\"remove\",value:function(){throw new W}},{key:\"size\",value:function(){return this.array.length}},{key:\"isEmpty\",value:function(){return 0===this.array.length}},{key:\"toArray\",value:function(){return this.array.slice()}},{key:\"iterator\",value:function(){return new qt(this.array)}}])}(Ft),qt=function(){return s((function t(e){n(this,t),this.array=e,this.position=0}),[{key:\"next\",value:function(){if(this.position===this.array.length)throw new j;return this.array[this.position++]}},{key:\"hasNext\",value:function(){return this.position<this.array.length}},{key:\"remove\",value:function(){throw new W}}])}(),Yt=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"computeEnvelopeInternal\",value:function(){for(var t=new U,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t}},{key:\"getGeometryN\",value:function(t){return this._geometries[t]}},{key:\"getCoordinates\",value:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var i=this._geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t}},{key:\"getArea\",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t}},{key:\"copyInternal\",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new i(t,this._factory)}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],e))return!1;return!0}return f(i,\"equalsExact\",this,1).apply(this,arguments)}},{key:\"normalize\",value:function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();At.sort(this._geometries)}},{key:\"getCoordinate\",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:\"getBoundaryDimension\",value:function(){for(var t=Lt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t}},{key:\"reverseInternal\",value:function(){for(var t=this._geometries.length,e=new yt(t),n=0;n<t;n++)e.add(this._geometries[n].reverse());return this.getFactory().buildGeometry(e)}},{key:\"getTypeCode\",value:function(){return V.TYPECODE_GEOMETRYCOLLECTION}},{key:\"getDimension\",value:function(){for(var t=Lt.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t}},{key:\"getLength\",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t}},{key:\"getNumPoints\",value:function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t}},{key:\"getNumGeometries\",value:function(){return this._geometries.length}},{key:\"compareToSameClass\",value:function(){if(1===arguments.length){var t=arguments[0],e=new Gt(At.asList(this._geometries)),n=new Gt(At.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[1],r=arguments[0],s=this.getNumGeometries(),a=r.getNumGeometries(),o=0;o<s&&o<a;){var u=this.getGeometryN(o),l=r.getGeometryN(o),h=u.compareToSameClass(l,i);if(0!==h)return h;o++}return o<s?1:o<a?-1:0}}},{key:\"apply\",value:function(){if(rt(arguments[0],Et))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(rt(arguments[0],Rt)){var n=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(this._geometries[i].apply(n),!n.isDone());i++);n.isGeometryChanged()&&this.geometryChanged()}else if(rt(arguments[0],Ct)){var r=arguments[0];r.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(r)}else if(rt(arguments[0],k)){var a=arguments[0];a.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(a)}}},{key:\"getBoundary\",value:function(){return V.checkNotGeometryCollection(this),G.shouldNeverReachHere(),null}},{key:\"getGeometryType\",value:function(){return V.TYPENAME_GEOMETRYCOLLECTION}},{key:\"isEmpty\",value:function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0}}],[{key:\"constructor_\",value:function(){if(this._geometries=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];if(V.constructor_.call(this,e),null===t&&(t=[]),V.hasNullElements(t))throw new m(\"geometries must not contain null elements\");this._geometries=t}}}])}(V),zt=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"copyInternal\",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new i(t,this._factory)}},{key:\"isValid\",value:function(){return!0}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&f(i,\"equalsExact\",this,1).call(this,t,e)}return f(i,\"equalsExact\",this,1).apply(this,arguments)}},{key:\"getCoordinate\",value:function(){if(1===arguments.length&&Number.isInteger(arguments[0])){var t=arguments[0];return this._geometries[t].getCoordinate()}return f(i,\"getCoordinate\",this,1).apply(this,arguments)}},{key:\"getBoundaryDimension\",value:function(){return Lt.FALSE}},{key:\"getTypeCode\",value:function(){return V.TYPECODE_MULTIPOINT}},{key:\"getDimension\",value:function(){return 0}},{key:\"getBoundary\",value:function(){return this.getFactory().createGeometryCollection()}},{key:\"getGeometryType\",value:function(){return V.TYPENAME_MULTIPOINT}},{key:\"interfaces_\",get:function(){return[Ot]}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];Yt.constructor_.call(this,t,e)}}])}(Yt),Xt=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"copyInternal\",value:function(){return new i(this._points.copy(),this._factory)}},{key:\"getBoundaryDimension\",value:function(){return Lt.FALSE}},{key:\"isClosed\",value:function(){return!!this.isEmpty()||f(i,\"isClosed\",this,1).call(this)}},{key:\"reverseInternal\",value:function(){var t=this._points.copy();return St.reverse(t),this.getFactory().createLinearRing(t)}},{key:\"getTypeCode\",value:function(){return V.TYPECODE_LINEARRING}},{key:\"validateConstruction\",value:function(){if(!this.isEmpty()&&!f(i,\"isClosed\",this,1).call(this))throw new m(\"Points of LinearRing do not form a closed linestring\");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<i.MINIMUM_VALID_SIZE)throw new m(\"Invalid number of points in LinearRing (found \"+this.getCoordinateSequence().size()+\" - must be 0 or >= 4)\")}},{key:\"getGeometryType\",value:function(){return V.TYPENAME_LINEARRING}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];wt.constructor_.call(this,t,e),this.validateConstruction()}}])}(wt);Xt.MINIMUM_VALID_SIZE=4;var Bt=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"setOrdinate\",value:function(t,e){switch(t){case i.X:this.x=e;break;case i.Y:this.y=e;break;default:throw new m(\"Invalid ordinate index: \"+t)}}},{key:\"getZ\",value:function(){return X.NULL_ORDINATE}},{key:\"getOrdinate\",value:function(t){switch(t){case i.X:return this.x;case i.Y:return this.y}throw new m(\"Invalid ordinate index: \"+t)}},{key:\"setZ\",value:function(t){throw new m(\"CoordinateXY dimension 2 does not support z-ordinate\")}},{key:\"copy\",value:function(){return new i(this)}},{key:\"toString\",value:function(){return\"(\"+this.x+\", \"+this.y+\")\"}},{key:\"setCoordinate\",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ()}}],[{key:\"constructor_\",value:function(){if(0===arguments.length)X.constructor_.call(this);else if(1===arguments.length){if(arguments[0]instanceof i){var t=arguments[0];X.constructor_.call(this,t.x,t.y)}else if(arguments[0]instanceof X){var e=arguments[0];X.constructor_.call(this,e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];X.constructor_.call(this,n,r,X.NULL_ORDINATE)}}}])}(X);Bt.X=0,Bt.Y=1,Bt.Z=-1,Bt.M=-1;var Ut=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"getM\",value:function(){return this._m}},{key:\"setOrdinate\",value:function(t,e){switch(t){case i.X:this.x=e;break;case i.Y:this.y=e;break;case i.M:this._m=e;break;default:throw new m(\"Invalid ordinate index: \"+t)}}},{key:\"setM\",value:function(t){this._m=t}},{key:\"getZ\",value:function(){return X.NULL_ORDINATE}},{key:\"getOrdinate\",value:function(t){switch(t){case i.X:return this.x;case i.Y:return this.y;case i.M:return this._m}throw new m(\"Invalid ordinate index: \"+t)}},{key:\"setZ\",value:function(t){throw new m(\"CoordinateXY dimension 2 does not support z-ordinate\")}},{key:\"copy\",value:function(){return new i(this)}},{key:\"toString\",value:function(){return\"(\"+this.x+\", \"+this.y+\" m=\"+this.getM()+\")\"}},{key:\"setCoordinate\",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:\"constructor_\",value:function(){if(this._m=null,0===arguments.length)X.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof i){var t=arguments[0];X.constructor_.call(this,t.x,t.y),this._m=t._m}else if(arguments[0]instanceof X){var e=arguments[0];X.constructor_.call(this,e.x,e.y),this._m=this.getM()}}else if(3===arguments.length){var n=arguments[0],r=arguments[1],s=arguments[2];X.constructor_.call(this,n,r,X.NULL_ORDINATE),this._m=s}}}])}(X);Ut.X=0,Ut.Y=1,Ut.Z=-1,Ut.M=2;var Vt=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"getM\",value:function(){return this._m}},{key:\"setOrdinate\",value:function(t,e){switch(t){case X.X:this.x=e;break;case X.Y:this.y=e;break;case X.Z:this.z=e;break;case X.M:this._m=e;break;default:throw new m(\"Invalid ordinate index: \"+t)}}},{key:\"setM\",value:function(t){this._m=t}},{key:\"getOrdinate\",value:function(t){switch(t){case X.X:return this.x;case X.Y:return this.y;case X.Z:return this.getZ();case X.M:return this.getM()}throw new m(\"Invalid ordinate index: \"+t)}},{key:\"copy\",value:function(){return new i(this)}},{key:\"toString\",value:function(){return\"(\"+this.x+\", \"+this.y+\", \"+this.getZ()+\" m=\"+this.getM()+\")\"}},{key:\"setCoordinate\",value:function(t){this.x=t.x,this.y=t.y,this.z=t.getZ(),this._m=t.getM()}}],[{key:\"constructor_\",value:function(){if(this._m=null,0===arguments.length)X.constructor_.call(this),this._m=0;else if(1===arguments.length){if(arguments[0]instanceof i){var t=arguments[0];X.constructor_.call(this,t),this._m=t._m}else if(arguments[0]instanceof X){var e=arguments[0];X.constructor_.call(this,e),this._m=this.getM()}}else if(4===arguments.length){var n=arguments[0],r=arguments[1],s=arguments[2],a=arguments[3];X.constructor_.call(this,n,r,s),this._m=a}}}])}(X),Ht=function(){function t(){n(this,t)}return s(t,null,[{key:\"measures\",value:function(t){return t instanceof Bt?0:t instanceof Ut||t instanceof Vt?1:0}},{key:\"dimension\",value:function(t){return t instanceof Bt?2:t instanceof Ut?3:t instanceof Vt?4:3}},{key:\"create\",value:function(){if(1===arguments.length){var e=arguments[0];return t.create(e,0)}if(2===arguments.length){var n=arguments[0],i=arguments[1];return 2===n?new Bt:3===n&&0===i?new X:3===n&&1===i?new Ut:4===n&&1===i?new Vt:new X}}}])}(),Zt=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"getCoordinate\",value:function(t){return this.get(t)}},{key:\"addAll\",value:function(){if(2===arguments.length&&\"boolean\"==typeof arguments[1]&&rt(arguments[0],Z)){for(var t=arguments[1],e=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e}return f(i,\"addAll\",this,1).apply(this,arguments)}},{key:\"clone\",value:function(){for(var t=f(i,\"clone\",this,1).call(this),e=0;e<this.size();e++)t.add(e,this.get(e).clone());return t}},{key:\"toCoordinateArray\",value:function(){if(0===arguments.length)return this.toArray(i.coordArrayType);if(1===arguments.length){if(arguments[0])return this.toArray(i.coordArrayType);for(var t=this.size(),e=new Array(t).fill(null),n=0;n<t;n++)e[n]=this.get(t-n-1);return e}}},{key:\"add\",value:function(){if(1===arguments.length){var t=arguments[0];return f(i,\"add\",this,1).call(this,t)}if(2===arguments.length){if(arguments[0]instanceof Array&&\"boolean\"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof X&&\"boolean\"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1)if(this.get(this.size()-1).equals2D(r))return null;f(i,\"add\",this,1).call(this,r)}else if(arguments[0]instanceof Object&&\"boolean\"==typeof arguments[1]){var s=arguments[0],a=arguments[1];return this.add(s,a),!0}}else if(3===arguments.length){if(\"boolean\"==typeof arguments[2]&&arguments[0]instanceof Array&&\"boolean\"==typeof arguments[1]){var o=arguments[0],u=arguments[1];if(arguments[2])for(var l=0;l<o.length;l++)this.add(o[l],u);else for(var h=o.length-1;h>=0;h--)this.add(o[h],u);return!0}if(\"boolean\"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof X){var c=arguments[0],g=arguments[1];if(!arguments[2]){var v=this.size();if(v>0){if(c>0)if(this.get(c-1).equals2D(g))return null;if(c<v)if(this.get(c).equals2D(g))return null}}f(i,\"add\",this,1).call(this,c,g)}}else if(4===arguments.length){var y=arguments[0],d=arguments[1],_=arguments[2],p=arguments[3],m=1;_>p&&(m=-1);for(var k=_;k!==p;k+=m)this.add(y[k],d);return!0}}},{key:\"closeRing\",value:function(){if(this.size()>0){var t=this.get(0).copy();this.add(t,!1)}}}],[{key:\"constructor_\",value:function(){if(0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}])}(yt);Zt.coordArrayType=new Array(0).fill(null);var jt=function(){function t(){n(this,t)}return s(t,null,[{key:\"isRing\",value:function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])}},{key:\"ptNotInList\",value:function(e,n){for(var i=0;i<e.length;i++){var r=e[i];if(t.indexOf(r,n)<0)return r}return null}},{key:\"scroll\",value:function(e,n){var i=t.indexOf(n,e);if(i<0)return null;var r=new Array(e.length).fill(null);mt.arraycopy(e,i,r,0,e.length-i),mt.arraycopy(e,0,r,e.length-i,i),mt.arraycopy(r,0,e,0,e.length)}},{key:\"equals\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],s=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++)if(0!==s.compare(i[a],r[a]))return!1;return!0}}},{key:\"intersection\",value:function(t,e){for(var n=new Zt,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()}},{key:\"measures\",value:function(t){if(null===t||0===t.length)return 0;var e,n=0,i=a(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n=Math.max(n,Ht.measures(r))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:\"hasRepeatedPoints\",value:function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1}},{key:\"removeRepeatedPoints\",value:function(e){return t.hasRepeatedPoints(e)?new Zt(e,!1).toCoordinateArray():e}},{key:\"reverse\",value:function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}}},{key:\"removeNull\",value:function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,s=0;s<t.length;s++)null!==t[s]&&(i[r++]=t[s]);return i}},{key:\"copyDeep\",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=t[n].copy();return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],s=arguments[2],a=arguments[3],o=arguments[4],u=0;u<o;u++)s[a+u]=i[r+u].copy()}},{key:\"isEqualReversed\",value:function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0}},{key:\"envelope\",value:function(t){for(var e=new U,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e}},{key:\"toCoordinateArray\",value:function(e){return e.toArray(t.coordArrayType)}},{key:\"dimension\",value:function(t){if(null===t||0===t.length)return 3;var e,n=0,i=a(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;n=Math.max(n,Ht.dimension(r))}}catch(t){i.e(t)}finally{i.f()}return n}},{key:\"atLeastNCoordinatesOrNothing\",value:function(t,e){return e.length>=t?e:[]}},{key:\"indexOf\",value:function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1}},{key:\"increasingDirection\",value:function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1}},{key:\"compare\",value:function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0}},{key:\"minCoordinate\",value:function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e}},{key:\"extract\",value:function(t,e,n){e=kt.clamp(e,0,t.length);var i=(n=kt.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var s=0,a=e;a<=n;a++)r[s++]=t[a];return r}}])}(),Wt=function(){return s((function t(){n(this,t)}),[{key:\"compare\",value:function(t,e){var n=t,i=e;return jt.compare(n,i)}},{key:\"interfaces_\",get:function(){return[P]}}])}(),Kt=function(){return s((function t(){n(this,t)}),[{key:\"compare\",value:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=jt.compare(n,i);return jt.isEqualReversed(n,i)?0:r}},{key:\"OLDcompare\",value:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=jt.increasingDirection(n),s=jt.increasingDirection(i),a=r>0?0:n.length-1,o=s>0?0:n.length-1,u=0;u<n.length;u++){var l=n[a].compareTo(i[o]);if(0!==l)return l;a+=r,o+=s}return 0}},{key:\"interfaces_\",get:function(){return[P]}}])}();jt.ForwardComparator=Wt,jt.BidirectionalComparator=Kt,jt.coordArrayType=new Array(0).fill(null);var Jt=function(){return s((function t(e){n(this,t),this.str=e}),[{key:\"append\",value:function(t){this.str+=t}},{key:\"setCharAt\",value:function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)}},{key:\"toString\",value:function(){return this.str}}])}(),Qt=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"getM\",value:function(t){return this.hasM()?this._coordinates[t].getM():A.NaN}},{key:\"setOrdinate\",value:function(t,e,n){switch(e){case ht.X:this._coordinates[t].x=n;break;case ht.Y:this._coordinates[t].y=n;break;default:this._coordinates[t].setOrdinate(e,n)}}},{key:\"getZ\",value:function(t){return this.hasZ()?this._coordinates[t].getZ():A.NaN}},{key:\"size\",value:function(){return this._coordinates.length}},{key:\"getOrdinate\",value:function(t,e){switch(e){case ht.X:return this._coordinates[t].x;case ht.Y:return this._coordinates[t].y;default:return this._coordinates[t].getOrdinate(e)}}},{key:\"getCoordinate\",value:function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0];arguments[1].setCoordinate(this._coordinates[e])}}},{key:\"getCoordinateCopy\",value:function(t){var e=this.createCoordinate();return e.setCoordinate(this._coordinates[t]),e}},{key:\"createCoordinate\",value:function(){return Ht.create(this.getDimension(),this.getMeasures())}},{key:\"getDimension\",value:function(){return this._dimension}},{key:\"getX\",value:function(t){return this._coordinates[t].x}},{key:\"getMeasures\",value:function(){return this._measures}},{key:\"expandEnvelope\",value:function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t}},{key:\"copy\",value:function(){for(var e=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++){var i=this.createCoordinate();i.setCoordinate(this._coordinates[n]),e[n]=i}return new t(e,this._dimension,this._measures)}},{key:\"toString\",value:function(){if(this._coordinates.length>0){var t=new Jt(17*this._coordinates.length);t.append(\"(\"),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(\", \"),t.append(this._coordinates[e]);return t.append(\")\"),t.toString()}return\"()\"}},{key:\"getY\",value:function(t){return this._coordinates[t].y}},{key:\"toCoordinateArray\",value:function(){return this._coordinates}},{key:\"interfaces_\",get:function(){return[ht,E]}}],[{key:\"constructor_\",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];t.constructor_.call(this,e,jt.dimension(e),jt.measures(e))}else if(Number.isInteger(arguments[0])){var n=arguments[0];this._coordinates=new Array(n).fill(null);for(var i=0;i<n;i++)this._coordinates[i]=new X}else if(rt(arguments[0],ht)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._measures=r.getMeasures(),this._coordinates=new Array(r.size()).fill(null);for(var s=0;s<this._coordinates.length;s++)this._coordinates[s]=r.getCoordinateCopy(s)}}else if(2===arguments.length){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var a=arguments[0],o=arguments[1];t.constructor_.call(this,a,o,jt.measures(a))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],l=arguments[1];this._coordinates=new Array(u).fill(null),this._dimension=l;for(var h=0;h<u;h++)this._coordinates[h]=Ht.create(l)}}else if(3===arguments.length)if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var c=arguments[0],f=arguments[1],g=arguments[2];this._dimension=f,this._measures=g,this._coordinates=null===c?new Array(0).fill(null):c}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var v=arguments[0],y=arguments[1],d=arguments[2];this._coordinates=new Array(v).fill(null),this._dimension=y,this._measures=d;for(var _=0;_<v;_++)this._coordinates[_]=this.createCoordinate()}}}])}(),$t=function(){function t(){n(this,t)}return s(t,[{key:\"readResolve\",value:function(){return t.instance()}},{key:\"create\",value:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Qt(arguments[0]);if(rt(arguments[0],ht))return new Qt(arguments[0])}else{if(2===arguments.length){var t=arguments[1];return t>3&&(t=3),t<2&&(t=2),new Qt(arguments[0],t)}if(3===arguments.length){var e=arguments[2],n=arguments[1]-e;return e>1&&(e=1),n>3&&(n=3),n<2&&(n=2),new Qt(arguments[0],n+e,e)}}}},{key:\"interfaces_\",get:function(){return[It,E]}}],[{key:\"instance\",value:function(){return t.instanceObject}}])}();$t.instanceObject=new $t;var te=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"copyInternal\",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new i(t,this._factory)}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&f(i,\"equalsExact\",this,1).call(this,t,e)}return f(i,\"equalsExact\",this,1).apply(this,arguments)}},{key:\"getBoundaryDimension\",value:function(){return 1}},{key:\"getTypeCode\",value:function(){return V.TYPECODE_MULTIPOLYGON}},{key:\"getDimension\",value:function(){return 2}},{key:\"getBoundary\",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new yt,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))}},{key:\"getGeometryType\",value:function(){return V.TYPENAME_MULTIPOLYGON}},{key:\"interfaces_\",get:function(){return[Pt]}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];Yt.constructor_.call(this,t,e)}}])}(Yt),ee=function(){return s((function t(){n(this,t)}),[{key:\"get\",value:function(){}},{key:\"put\",value:function(){}},{key:\"size\",value:function(){}},{key:\"values\",value:function(){}},{key:\"entrySet\",value:function(){}}])}(),ne=function(t){function i(){var t;return n(this,i),(t=e(this,i)).map=new Map,t}return l(i,t),s(i,[{key:\"get\",value:function(t){return this.map.get(t)||null}},{key:\"put\",value:function(t,e){return this.map.set(t,e),e}},{key:\"values\",value:function(){for(var t=new yt,e=this.map.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t}},{key:\"entrySet\",value:function(){var t=new J;return this.map.entries().forEach((function(e){return t.add(e)})),t}},{key:\"size\",value:function(){return this.map.size()}}])}(ee),ie=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"equals\",value:function(e){if(!(e instanceof t))return!1;var n=e;return this._modelType===n._modelType&&this._scale===n._scale}},{key:\"compareTo\",value:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return at.compare(n,i)}},{key:\"getScale\",value:function(){return this._scale}},{key:\"isFloating\",value:function(){return this._modelType===t.FLOATING||this._modelType===t.FLOATING_SINGLE}},{key:\"getType\",value:function(){return this._modelType}},{key:\"toString\",value:function(){var e=\"UNKNOWN\";return this._modelType===t.FLOATING?e=\"Floating\":this._modelType===t.FLOATING_SINGLE?e=\"Floating-Single\":this._modelType===t.FIXED&&(e=\"Fixed (Scale=\"+this.getScale()+\")\"),e}},{key:\"makePrecise\",value:function(){if(\"number\"==typeof arguments[0]){var e=arguments[0];return A.isNaN(e)||this._modelType===t.FLOATING_SINGLE?e:this._modelType===t.FIXED?Math.round(e*this._scale)/this._scale:e}if(arguments[0]instanceof X){var n=arguments[0];if(this._modelType===t.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}}},{key:\"getMaximumSignificantDigits\",value:function(){var e=16;return this._modelType===t.FLOATING?e=16:this._modelType===t.FLOATING_SINGLE?e=6:this._modelType===t.FIXED&&(e=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),e}},{key:\"setScale\",value:function(t){this._scale=Math.abs(t)}},{key:\"interfaces_\",get:function(){return[E,x]}}],[{key:\"constructor_\",value:function(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof re){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if(\"number\"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var i=arguments[0];this._modelType=i._modelType,this._scale=i._scale}}},{key:\"mostPrecise\",value:function(t,e){return t.compareTo(e)>=0?t:e}}])}(),re=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"readResolve\",value:function(){return t.nameToTypeMap.get(this._name)}},{key:\"toString\",value:function(){return this._name}},{key:\"interfaces_\",get:function(){return[E]}}],[{key:\"constructor_\",value:function(){this._name=null;var e=arguments[0];this._name=e,t.nameToTypeMap.put(e,this)}}])}();re.nameToTypeMap=new ne,ie.Type=re,ie.FIXED=new re(\"FIXED\"),ie.FLOATING=new re(\"FLOATING\"),ie.FLOATING_SINGLE=new re(\"FLOATING SINGLE\"),ie.maximumPreciseValue=9007199254740992;var se=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"copyInternal\",value:function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new i(t,this._factory)}},{key:\"equalsExact\",value:function(){if(2===arguments.length&&\"number\"==typeof arguments[1]&&arguments[0]instanceof V){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&f(i,\"equalsExact\",this,1).call(this,t,e)}return f(i,\"equalsExact\",this,1).apply(this,arguments)}},{key:\"getBoundaryDimension\",value:function(){return this.isClosed()?Lt.FALSE:0}},{key:\"isClosed\",value:function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0}},{key:\"getTypeCode\",value:function(){return V.TYPECODE_MULTILINESTRING}},{key:\"getDimension\",value:function(){return 1}},{key:\"getBoundary\",value:function(){throw new W}},{key:\"getGeometryType\",value:function(){return V.TYPENAME_MULTILINESTRING}},{key:\"interfaces_\",get:function(){return[Tt]}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];Yt.constructor_.call(this,t,e)}}])}(Yt),ae=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"createEmpty\",value:function(t){switch(t){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new m(\"Invalid dimension: \"+t)}}},{key:\"toGeometry\",value:function(t){return t.isNull()?this.createPoint():t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new X(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new X(t.getMinX(),t.getMinY()),new X(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new X(t.getMinX(),t.getMinY()),new X(t.getMinX(),t.getMaxY()),new X(t.getMaxX(),t.getMaxY()),new X(t.getMaxX(),t.getMinY()),new X(t.getMinX(),t.getMinY())]),null)}},{key:\"createLineString\",value:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(rt(arguments[0],ht))return new wt(arguments[0],this)}}},{key:\"createMultiLineString\",value:function(){return 0===arguments.length?new se(null,this):1===arguments.length?new se(arguments[0],this):void 0}},{key:\"buildGeometry\",value:function(e){for(var n=null,i=!1,r=!1,s=e.iterator();s.hasNext();){var a=s.next(),o=a.getTypeCode();null===n&&(n=o),o!==n&&(i=!0),a instanceof Yt&&(r=!0)}if(null===n)return this.createGeometryCollection();if(i||r)return this.createGeometryCollection(t.toGeometryArray(e));var u=e.iterator().next();if(e.size()>1){if(u instanceof Dt)return this.createMultiPolygon(t.toPolygonArray(e));if(u instanceof wt)return this.createMultiLineString(t.toLineStringArray(e));if(u instanceof bt)return this.createMultiPoint(t.toPointArray(e));G.shouldNeverReachHere(\"Unhandled geometry type: \"+u.getGeometryType())}return u}},{key:\"createMultiPointFromCoords\",value:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}},{key:\"createPoint\",value:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof X){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(rt(arguments[0],ht))return new bt(arguments[0],this)}}},{key:\"getCoordinateSequenceFactory\",value:function(){return this._coordinateSequenceFactory}},{key:\"createPolygon\",value:function(){if(0===arguments.length)return this.createPolygon(null,null);if(1===arguments.length){if(rt(arguments[0],ht)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Xt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){return new Dt(arguments[0],arguments[1],this)}}},{key:\"getSRID\",value:function(){return this._SRID}},{key:\"createGeometryCollection\",value:function(){return 0===arguments.length?new Yt(null,this):1===arguments.length?new Yt(arguments[0],this):void 0}},{key:\"getPrecisionModel\",value:function(){return this._precisionModel}},{key:\"createLinearRing\",value:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(rt(arguments[0],ht))return new Xt(arguments[0],this)}}},{key:\"createMultiPolygon\",value:function(){return 0===arguments.length?new te(null,this):1===arguments.length?new te(arguments[0],this):void 0}},{key:\"createMultiPoint\",value:function(){if(0===arguments.length)return new zt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new zt(arguments[0],this);if(rt(arguments[0],ht)){var t=arguments[0];if(null===t)return this.createMultiPoint(new Array(0).fill(null));for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=this.getCoordinateSequenceFactory().create(1,t.getDimension(),t.getMeasures());St.copy(t,n,i,0,1),e[n]=this.createPoint(i)}return this.createMultiPoint(e)}}}},{key:\"interfaces_\",get:function(){return[E]}}],[{key:\"constructor_\",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,0===arguments.length)t.constructor_.call(this,new ie,0);else if(1===arguments.length){if(rt(arguments[0],It)){var e=arguments[0];t.constructor_.call(this,new ie,0,e)}else if(arguments[0]instanceof ie){var n=arguments[0];t.constructor_.call(this,n,0,t.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];t.constructor_.call(this,i,r,t.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var s=arguments[0],a=arguments[1],o=arguments[2];this._precisionModel=s,this._coordinateSequenceFactory=o,this._SRID=a}}},{key:\"toMultiPolygonArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toGeometryArray\",value:function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"getDefaultCoordinateSequenceFactory\",value:function(){return $t.instance()}},{key:\"toMultiLineStringArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toLineStringArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toMultiPointArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toLinearRingArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toPointArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"toPolygonArray\",value:function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)}},{key:\"createPointFromInternalCoord\",value:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)}}])}(),oe=\"XY\",ue=\"XYZ\",le=\"XYM\",he=\"XYZM\",ce={POINT:\"Point\",LINE_STRING:\"LineString\",LINEAR_RING:\"LinearRing\",POLYGON:\"Polygon\",MULTI_POINT:\"MultiPoint\",MULTI_LINE_STRING:\"MultiLineString\",MULTI_POLYGON:\"MultiPolygon\",GEOMETRY_COLLECTION:\"GeometryCollection\",CIRCLE:\"Circle\"},fe=\"EMPTY\",ge=1,ve=2,ye=3,de=4,_e=5,pe=6;for(var me in ce)ce[me].toUpperCase();var ke=function(){return s((function t(e){n(this,t),this.wkt=e,this.index_=-1}),[{key:\"isAlpha_\",value:function(t){return t>=\"a\"&&t<=\"z\"||t>=\"A\"&&t<=\"Z\"}},{key:\"isNumeric_\",value:function(t,e){return t>=\"0\"&&t<=\"9\"||\".\"==t&&!(void 0!==e&&e)}},{key:\"isWhiteSpace_\",value:function(t){return\" \"==t||\"\\t\"==t||\"\\r\"==t||\"\\n\"==t}},{key:\"nextChar_\",value:function(){return this.wkt.charAt(++this.index_)}},{key:\"nextToken\",value:function(){var t,e=this.nextChar_(),n=this.index_,i=e;if(\"(\"==e)t=ve;else if(\",\"==e)t=_e;else if(\")\"==e)t=ye;else if(this.isNumeric_(e)||\"-\"==e)t=de,i=this.readNumber_();else if(this.isAlpha_(e))t=ge,i=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(\"\"!==e)throw new Error(\"Unexpected character: \"+e);t=pe}return{position:n,value:i,type:t}}},{key:\"readNumber_\",value:function(){var t,e=this.index_,n=!1,i=!1;do{\".\"==t?n=!0:\"e\"!=t&&\"E\"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!i&&(\"e\"==t||\"E\"==t)||i&&(\"-\"==t||\"+\"==t));return parseFloat(this.wkt.substring(e,this.index_--))}},{key:\"readText_\",value:function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}])}(),xe=function(){return s((function t(e,i){n(this,t),this.lexer_=e,this.token_,this.layout_=oe,this.factory=i}),[{key:\"consume_\",value:function(){this.token_=this.lexer_.nextToken()}},{key:\"isTokenType\",value:function(t){return this.token_.type==t}},{key:\"match\",value:function(t){var e=this.isTokenType(t);return e&&this.consume_(),e}},{key:\"parse\",value:function(){return this.consume_(),this.parseGeometry_()}},{key:\"parseGeometryLayout_\",value:function(){var t=oe,e=this.token_;if(this.isTokenType(ge)){var n=e.value;\"Z\"===n?t=ue:\"M\"===n?t=le:\"ZM\"===n&&(t=he),t!==oe&&this.consume_()}return t}},{key:\"parseGeometryCollectionText_\",value:function(){if(this.match(ve)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(_e));if(this.match(ye))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parsePointText_\",value:function(){if(this.match(ve)){var t=this.parsePoint_();if(this.match(ye))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:\"parseLineStringText_\",value:function(){if(this.match(ve)){var t=this.parsePointList_();if(this.match(ye))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parsePolygonText_\",value:function(){if(this.match(ve)){var t=this.parseLineStringTextList_();if(this.match(ye))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parseMultiPointText_\",value:function(){var t;if(this.match(ve)){if(t=this.token_.type==ve?this.parsePointTextList_():this.parsePointList_(),this.match(ye))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parseMultiLineStringText_\",value:function(){if(this.match(ve)){var t=this.parseLineStringTextList_();if(this.match(ye))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parseMultiPolygonText_\",value:function(){if(this.match(ve)){var t=this.parsePolygonTextList_();if(this.match(ye))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:\"parsePoint_\",value:function(){for(var t=[],e=this.layout_.length,n=0;n<e;++n){var i=this.token_;if(!this.match(de))break;t.push(i.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}},{key:\"parsePointList_\",value:function(){for(var t=[this.parsePoint_()];this.match(_e);)t.push(this.parsePoint_());return t}},{key:\"parsePointTextList_\",value:function(){for(var t=[this.parsePointText_()];this.match(_e);)t.push(this.parsePointText_());return t}},{key:\"parseLineStringTextList_\",value:function(){for(var t=[this.parseLineStringText_()];this.match(_e);)t.push(this.parseLineStringText_());return t}},{key:\"parsePolygonTextList_\",value:function(){for(var t=[this.parsePolygonText_()];this.match(_e);)t.push(this.parsePolygonText_());return t}},{key:\"isEmptyGeometry_\",value:function(){var t=this.isTokenType(ge)&&this.token_.value==fe;return t&&this.consume_(),t}},{key:\"formatErrorMessage_\",value:function(){return\"Unexpected `\"+this.token_.value+\"` at position \"+this.token_.position+\" in `\"+this.lexer_.wkt+\"`\"}},{key:\"parseGeometry_\",value:function(){var t=this.factory,e=function(t){return i(X,g(t))},n=function(n){var i=n.map((function(n){return t.createLinearRing(n.map(e))}));return i.length>1?t.createPolygon(i[0],i.slice(1)):t.createPolygon(i[0])},r=this.token_;if(this.match(ge)){var s=r.value;if(this.layout_=this.parseGeometryLayout_(),\"GEOMETRYCOLLECTION\"==s){var a=this.parseGeometryCollectionText_();return t.createGeometryCollection(a)}switch(s){case\"POINT\":var o=this.parsePointText_();return o?t.createPoint(i(X,g(o))):t.createPoint();case\"LINESTRING\":var u=this.parseLineStringText_().map(e);return t.createLineString(u);case\"LINEARRING\":var l=this.parseLineStringText_().map(e);return t.createLinearRing(l);case\"POLYGON\":var h=this.parsePolygonText_();return h&&0!==h.length?n(h):t.createPolygon();case\"MULTIPOINT\":var c=this.parseMultiPointText_();if(!c||0===c.length)return t.createMultiPoint();var f=c.map(e).map((function(e){return t.createPoint(e)}));return t.createMultiPoint(f);case\"MULTILINESTRING\":var v=this.parseMultiLineStringText_().map((function(n){return t.createLineString(n.map(e))}));return t.createMultiLineString(v);case\"MULTIPOLYGON\":var y=this.parseMultiPolygonText_();if(!y||0===y.length)return t.createMultiPolygon();var d=y.map(n);return t.createMultiPolygon(d);default:throw new Error(\"Invalid geometry type: \"+s)}}throw new Error(this.formatErrorMessage_())}}])}();function Ie(t){if(t.isEmpty())return\"\";var e=t.getCoordinate(),n=[e.x,e.y];return void 0===e.z||Number.isNaN(e.z)||n.push(e.z),void 0===e.m||Number.isNaN(e.m)||n.push(e.m),n.join(\" \")}function Ee(t){for(var e=t.getCoordinates().map((function(t){var e=[t.x,t.y];return void 0===t.z||Number.isNaN(t.z)||e.push(t.z),void 0===t.m||Number.isNaN(t.m)||e.push(t.m),e})),n=[],i=0,r=e.length;i<r;++i)n.push(e[i].join(\" \"));return n.join(\", \")}function Ne(t){var e=[];e.push(\"(\"+Ee(t.getExteriorRing())+\")\");for(var n=0,i=t.getNumInteriorRing();n<i;++n)e.push(\"(\"+Ee(t.getInteriorRingN(n))+\")\");return e.join(\", \")}var Te={Point:Ie,LineString:Ee,LinearRing:Ee,Polygon:Ne,MultiPoint:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push(\"(\"+Ie(t.getGeometryN(n))+\")\");return e.join(\", \")},MultiLineString:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push(\"(\"+Ee(t.getGeometryN(n))+\")\");return e.join(\", \")},MultiPolygon:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push(\"(\"+Ne(t.getGeometryN(n))+\")\");return e.join(\", \")},GeometryCollection:function(t){for(var e=[],n=0,i=t.getNumGeometries();n<i;++n)e.push(Se(t.getGeometryN(n)));return e.join(\", \")}};function Se(t){var e=t.getGeometryType(),n=Te[e];e=e.toUpperCase();var i=function(t){var e=\"\";if(t.isEmpty())return e;var n=t.getCoordinate();return void 0===n.z||Number.isNaN(n.z)||(e+=\"Z\"),void 0===n.m||Number.isNaN(n.m)||(e+=\"M\"),e}(t);return i.length>0&&(e+=\" \"+i),t.isEmpty()?e+\" \"+fe:e+\" (\"+n(t)+\")\"}var Le=function(){return s((function t(e){n(this,t),this.geometryFactory=e||new ae,this.precisionModel=this.geometryFactory.getPrecisionModel()}),[{key:\"read\",value:function(t){var e=new ke(t);return new xe(e,this.geometryFactory).parse()}},{key:\"write\",value:function(t){return Se(t)}}])}(),Ce=function(){return s((function t(e){n(this,t),this.parser=new Le(e)}),[{key:\"write\",value:function(t){return this.parser.write(t)}}],[{key:\"toLineString\",value:function(t,e){if(2!==arguments.length)throw new Error(\"Not implemented\");return\"LINESTRING ( \"+t.x+\" \"+t.y+\", \"+e.x+\" \"+e.y+\" )\"}}])}(),Re=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"getIndexAlongSegment\",value:function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]}},{key:\"getTopologySummary\",value:function(){var t=new Jt;return this.isEndPoint()&&t.append(\" endpoint\"),this._isProper&&t.append(\" proper\"),this.isCollinear()&&t.append(\" collinear\"),t.toString()}},{key:\"computeIntersection\",value:function(t,e,n,i){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=i,this._result=this.computeIntersect(t,e,n,i)}},{key:\"getIntersectionNum\",value:function(){return this._result}},{key:\"computeIntLineIndex\",value:function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}}},{key:\"isProper\",value:function(){return this.hasIntersection()&&this._isProper}},{key:\"setPrecisionModel\",value:function(t){this._precisionModel=t}},{key:\"isInteriorIntersection\",value:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}}},{key:\"getIntersection\",value:function(t){return this._intPt[t]}},{key:\"isEndPoint\",value:function(){return this.hasIntersection()&&!this._isProper}},{key:\"hasIntersection\",value:function(){return this._result!==t.NO_INTERSECTION}},{key:\"getEdgeDistance\",value:function(e,n){return t.computeEdgeDistance(this._intPt[n],this._inputLines[e][0],this._inputLines[e][1])}},{key:\"isCollinear\",value:function(){return this._result===t.COLLINEAR_INTERSECTION}},{key:\"toString\",value:function(){return Ce.toLineString(this._inputLines[0][0],this._inputLines[0][1])+\" - \"+Ce.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:\"getEndpoint\",value:function(t,e){return this._inputLines[t][e]}},{key:\"isIntersection\",value:function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1}},{key:\"getIntersectionAlongSegment\",value:function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]}}],[{key:\"constructor_\",value:function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new X,this._intPt[1]=new X,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:\"computeEdgeDistance\",value:function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),s=-1;if(t.equals(e))s=0;else if(t.equals(n))s=i>r?i:r;else{var a=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);0!==(s=i>r?a:o)||t.equals(e)||(s=Math.max(a,o))}return G.isTrue(!(0===s&&!t.equals(e)),\"Bad distance calculation\"),s}},{key:\"nonRobustComputeEdgeDistance\",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y,s=Math.sqrt(i*i+r*r);return G.isTrue(!(0===s&&!t.equals(e)),\"Invalid distance calculation\"),s}}])}();Re.DONT_INTERSECT=0,Re.DO_INTERSECT=1,Re.COLLINEAR=2,Re.NO_INTERSECTION=0,Re.POINT_INTERSECTION=1,Re.COLLINEAR_INTERSECTION=2;var we=function(t){function i(){return n(this,i),e(this,i)}return l(i,t),s(i,[{key:\"isInSegmentEnvelopes\",value:function(t){var e=new U(this._inputLines[0][0],this._inputLines[0][1]),n=new U(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)}},{key:\"computeIntersection\",value:function(){if(3!==arguments.length)return f(i,\"computeIntersection\",this,1).apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,U.intersects(e,n,t)&&0===ct.index(e,n,t)&&0===ct.index(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=Re.POINT_INTERSECTION,null;this._result=Re.NO_INTERSECTION}},{key:\"intersection\",value:function(t,e,n,r){var s=this.intersectionSafe(t,e,n,r);return this.isInSegmentEnvelopes(s)||(s=new X(i.nearestEndpoint(t,e,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(s),s}},{key:\"checkDD\",value:function(t,e,n,i,r){var s=lt.intersection(t,e,n,i),a=this.isInSegmentEnvelopes(s);mt.out.println(\"DD in env = \"+a+\"  --------------------- \"+s),r.distance(s)>1e-4&&mt.out.println(\"Distance = \"+r.distance(s))}},{key:\"intersectionSafe\",value:function(t,e,n,r){var s=pt.intersection(t,e,n,r);return null===s&&(s=i.nearestEndpoint(t,e,n,r)),s}},{key:\"computeCollinearIntersection\",value:function(t,e,n,i){var r=U.intersects(t,e,n),s=U.intersects(t,e,i),a=U.intersects(n,i,t),o=U.intersects(n,i,e);return r&&s?(this._intPt[0]=n,this._intPt[1]=i,Re.COLLINEAR_INTERSECTION):a&&o?(this._intPt[0]=t,this._intPt[1]=e,Re.COLLINEAR_INTERSECTION):r&&a?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||s||o?Re.COLLINEAR_INTERSECTION:Re.POINT_INTERSECTION):r&&o?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||a?Re.COLLINEAR_INTERSECTION:Re.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=t,!i.equals(t)||r||o?Re.COLLINEAR_INTERSECTION:Re.POINT_INTERSECTION):s&&o?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||r||a?Re.COLLINEAR_INTERSECTION:Re.POINT_INTERSECTION):Re.NO_INTERSECTION}},{key:\"computeIntersect\",value:function(t,e,n,i){if(this._isProper=!1,!U.intersects(t,e,n,i))return Re.NO_INTERSECTION;var r=ct.index(t,e,n),s=ct.index(t,e,i);if(r>0&&s>0||r<0&&s<0)return Re.NO_INTERSECTION;var a=ct.index(n,i,t),o=ct.index(n,i,e);return a>0&&o>0||a<0&&o<0?Re.NO_INTERSECTION:0===r&&0===s&&0===a&&0===o?this.computeCollinearIntersection(t,e,n,i):(0===r||0===s||0===a||0===o?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this._intPt[0]=e:0===r?this._intPt[0]=new X(n):0===s?this._intPt[0]=new X(i):0===a?this._intPt[0]=new X(t):0===o&&(this._intPt[0]=new X(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,i)),Re.POINT_INTERSECTION)}}],[{key:\"nearestEndpoint\",value:function(t,e,n,i){var r=t,s=xt.pointToSegment(t,n,i),a=xt.pointToSegment(e,n,i);return a<s&&(s=a,r=e),(a=xt.pointToSegment(n,t,e))<s&&(s=a,r=n),(a=xt.pointToSegment(i,t,e))<s&&(s=a,r=i),r}}])}(Re),Oe=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"countSegment\",value:function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this._p.x>=n&&this._p.x<=i&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=ct.index(t,e,this._p);if(r===ct.COLLINEAR)return this._isPointOnSegment=!0,null;e.y<t.y&&(r=-r),r===ct.LEFT&&this._crossingCount++}}},{key:\"isPointInPolygon\",value:function(){return this.getLocation()!==H.EXTERIOR}},{key:\"getLocation\",value:function(){return this._isPointOnSegment?H.BOUNDARY:this._crossingCount%2==1?H.INTERIOR:H.EXTERIOR}},{key:\"isOnSegment\",value:function(){return this._isPointOnSegment}}],[{key:\"constructor_\",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}},{key:\"locatePointInRing\",value:function(){if(arguments[0]instanceof X&&rt(arguments[1],ht)){for(var e=arguments[1],n=new t(arguments[0]),i=new X,r=new X,s=1;s<e.size();s++)if(e.getCoordinate(s,i),e.getCoordinate(s-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof X&&arguments[1]instanceof Array){for(var a=arguments[1],o=new t(arguments[0]),u=1;u<a.length;u++){var l=a[u],h=a[u-1];if(o.countSegment(l,h),o.isOnSegment())return o.getLocation()}return o.getLocation()}}}])}(),be=function(){function t(){n(this,t)}return s(t,null,[{key:\"isOnLine\",value:function(){if(arguments[0]instanceof X&&rt(arguments[1],ht)){for(var t=arguments[0],e=arguments[1],n=new we,i=new X,r=new X,s=e.size(),a=1;a<s;a++)if(e.getCoordinate(a-1,i),e.getCoordinate(a,r),n.computeIntersection(t,i,r),n.hasIntersection())return!0;return!1}if(arguments[0]instanceof X&&arguments[1]instanceof Array){for(var o=arguments[0],u=arguments[1],l=new we,h=1;h<u.length;h++){var c=u[h-1],f=u[h];if(l.computeIntersection(o,c,f),l.hasIntersection())return!0}return!1}}},{key:\"locateInRing\",value:function(t,e){return Oe.locatePointInRing(t,e)}},{key:\"isInRing\",value:function(e,n){return t.locateInRing(e,n)!==H.EXTERIOR}}])}(),Me=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"setAllLocations\",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t}},{key:\"isNull\",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==H.NONE)return!1;return!0}},{key:\"setAllLocationsIfNull\",value:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===H.NONE&&(this.location[e]=t)}},{key:\"isLine\",value:function(){return 1===this.location.length}},{key:\"merge\",value:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[$.ON]=this.location[$.ON],e[$.LEFT]=H.NONE,e[$.RIGHT]=H.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===H.NONE&&n<t.location.length&&(this.location[n]=t.location[n])}},{key:\"getLocations\",value:function(){return this.location}},{key:\"flip\",value:function(){if(this.location.length<=1)return null;var t=this.location[$.LEFT];this.location[$.LEFT]=this.location[$.RIGHT],this.location[$.RIGHT]=t}},{key:\"toString\",value:function(){var t=new st;return this.location.length>1&&t.append(H.toLocationSymbol(this.location[$.LEFT])),t.append(H.toLocationSymbol(this.location[$.ON])),this.location.length>1&&t.append(H.toLocationSymbol(this.location[$.RIGHT])),t.toString()}},{key:\"setLocations\",value:function(t,e,n){this.location[$.ON]=t,this.location[$.LEFT]=e,this.location[$.RIGHT]=n}},{key:\"get\",value:function(t){return t<this.location.length?this.location[t]:H.NONE}},{key:\"isArea\",value:function(){return this.location.length>1}},{key:\"isAnyNull\",value:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===H.NONE)return!0;return!1}},{key:\"setLocation\",value:function(){if(1===arguments.length){var t=arguments[0];this.setLocation($.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}}},{key:\"init\",value:function(t){this.location=new Array(t).fill(null),this.setAllLocations(H.NONE)}},{key:\"isEqualOnSide\",value:function(t,e){return this.location[e]===t.location[e]}},{key:\"allPositionsEqual\",value:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0}}],[{key:\"constructor_\",value:function(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[$.ON]=n}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var r=0;r<this.location.length;r++)this.location[r]=i.location[r]}}else if(3===arguments.length){var s=arguments[0],a=arguments[1],o=arguments[2];this.init(3),this.location[$.ON]=s,this.location[$.LEFT]=a,this.location[$.RIGHT]=o}}}])}(),Ae=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"getGeometryCount\",value:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t}},{key:\"setAllLocations\",value:function(t,e){this.elt[t].setAllLocations(e)}},{key:\"isNull\",value:function(t){return this.elt[t].isNull()}},{key:\"setAllLocationsIfNull\",value:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}}},{key:\"isLine\",value:function(t){return this.elt[t].isLine()}},{key:\"merge\",value:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Me(t.elt[e]):this.elt[e].merge(t.elt[e])}},{key:\"flip\",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:\"getLocation\",value:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get($.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}}},{key:\"toString\",value:function(){var t=new st;return null!==this.elt[0]&&(t.append(\"A:\"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(\" B:\"),t.append(this.elt[1].toString())),t.toString()}},{key:\"isArea\",value:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}}},{key:\"isAnyNull\",value:function(t){return this.elt[t].isAnyNull()}},{key:\"setLocation\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation($.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}}},{key:\"isEqualOnSide\",value:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)}},{key:\"allPositionsEqual\",value:function(t,e){return this.elt[t].allPositionsEqual(e)}},{key:\"toLine\",value:function(t){this.elt[t].isArea()&&(this.elt[t]=new Me(this.elt[t].location[0]))}}],[{key:\"constructor_\",value:function(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Me(e),this.elt[1]=new Me(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new Me(n.elt[0]),this.elt[1]=new Me(n.elt[1])}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.elt[0]=new Me(H.NONE),this.elt[1]=new Me(H.NONE),this.elt[i].setLocation(r)}else if(3===arguments.length){var s=arguments[0],a=arguments[1],o=arguments[2];this.elt[0]=new Me(s,a,o),this.elt[1]=new Me(s,a,o)}else if(4===arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2],c=arguments[3];this.elt[0]=new Me(H.NONE,H.NONE,H.NONE),this.elt[1]=new Me(H.NONE,H.NONE,H.NONE),this.elt[u].setLocations(l,h,c)}}},{key:\"toLineLabel\",value:function(e){for(var n=new t(H.NONE),i=0;i<2;i++)n.setLocation(i,e.getLocation(i));return n}}])}(),Pe=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"computeRing\",value:function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=ct.isCCW(this._ring.getCoordinates())}},{key:\"isIsolated\",value:function(){return 1===this._label.getGeometryCount()}},{key:\"computePoints\",value:function(t){this._startDe=t;var e=t,n=!0;do{if(null===e)throw new gt(\"Found null DirectedEdge\");if(e.getEdgeRing()===this)throw new gt(\"Directed Edge visited twice during ring-building at \"+e.getCoordinate());this._edges.add(e);var i=e.getLabel();G.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)}},{key:\"getLinearRing\",value:function(){return this._ring}},{key:\"getCoordinate\",value:function(t){return this._pts.get(t)}},{key:\"computeMaxNodeDegree\",value:function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2}},{key:\"addPoints\",value:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var s=r;s<i.length;s++)this._pts.add(i[s])}else{var a=i.length-2;n&&(a=i.length-1);for(var o=a;o>=0;o--)this._pts.add(i[o])}}},{key:\"isHole\",value:function(){return this._isHole}},{key:\"setInResult\",value:function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)}},{key:\"containsPoint\",value:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!be.isInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1}return!0}},{key:\"addHole\",value:function(t){this._holes.add(t)}},{key:\"isShell\",value:function(){return null===this._shell}},{key:\"getLabel\",value:function(){return this._label}},{key:\"getEdges\",value:function(){return this._edges}},{key:\"getMaxNodeDegree\",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:\"getShell\",value:function(){return this._shell}},{key:\"mergeLabel\",value:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,$.RIGHT);if(n===H.NONE)return null;if(this._label.getLocation(e)===H.NONE)return this._label.setLocation(e,n),null}}},{key:\"setShell\",value:function(t){this._shell=t,null!==t&&t.addHole(this)}},{key:\"toPolygon\",value:function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)}}],[{key:\"constructor_\",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new yt,this._pts=new yt,this._label=new Ae(H.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new yt,this._geometryFactory=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}}}])}(),De=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"setEdgeRing\",value:function(t,e){t.setMinEdgeRing(e)}},{key:\"getNext\",value:function(t){return t.getNextMin()}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];Pe.constructor_.call(this,t,e)}}])}(Pe),Fe=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"buildMinimalRings\",value:function(){var t=new yt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new De(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t}},{key:\"setEdgeRing\",value:function(t,e){t.setEdgeRing(e)}},{key:\"linkDirectedEdgesForMinimalEdgeRings\",value:function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)}},{key:\"getNext\",value:function(t){return t.getNext()}}],[{key:\"constructor_\",value:function(){var t=arguments[0],e=arguments[1];Pe.constructor_.call(this,t,e)}}])}(Pe),Ge=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"setVisited\",value:function(t){this._isVisited=t}},{key:\"setInResult\",value:function(t){this._isInResult=t}},{key:\"isCovered\",value:function(){return this._isCovered}},{key:\"isCoveredSet\",value:function(){return this._isCoveredSet}},{key:\"setLabel\",value:function(t){this._label=t}},{key:\"getLabel\",value:function(){return this._label}},{key:\"setCovered\",value:function(t){this._isCovered=t,this._isCoveredSet=!0}},{key:\"updateIM\",value:function(t){G.isTrue(this._label.getGeometryCount()>=2,\"found partial label\"),this.computeIM(t)}},{key:\"isInResult\",value:function(){return this._isInResult}},{key:\"isVisited\",value:function(){return this._isVisited}}],[{key:\"constructor_\",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}}}])}(),qe=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"isIncidentEdgeInResult\",value:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1}},{key:\"isIsolated\",value:function(){return 1===this._label.getGeometryCount()}},{key:\"getCoordinate\",value:function(){return this._coord}},{key:\"print\",value:function(t){t.println(\"node \"+this._coord+\" lbl: \"+this._label)}},{key:\"computeIM\",value:function(t){}},{key:\"computeMergedLocation\",value:function(t,e){var n=H.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==H.BOUNDARY&&(n=i)}return n}},{key:\"setLabel\",value:function(){if(2!==arguments.length||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return f(i,\"setLabel\",this,1).apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new Ae(t,e):this._label.setLocation(t,e)}},{key:\"getEdges\",value:function(){return this._edges}},{key:\"mergeLabel\",value:function(){if(arguments[0]instanceof i){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ae)for(var e=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(e,n);this._label.getLocation(n)===H.NONE&&this._label.setLocation(n,r)}}},{key:\"add\",value:function(t){this._edges.insert(t),t.setNode(this)}},{key:\"setLabelBoundary\",value:function(t){if(null===this._label)return null;var e=H.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case H.BOUNDARY:n=H.INTERIOR;break;case H.INTERIOR:default:n=H.BOUNDARY}this._label.setLocation(t,n)}}],[{key:\"constructor_\",value:function(){this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new Ae(0,H.NONE)}}])}(Ge),Ye=function(t){function i(){return n(this,i),e(this,i,arguments)}return l(i,t),s(i)}(ee);function ze(t){return null==t?0:t.color}function Xe(t){return null==t?null:t.parent}function Be(t,e){null!==t&&(t.color=e)}function Ue(t){return null==t?null:t.left}function Ve(t){return null==t?null:t.right}var He=function(t){function i(){var t;return n(this,i),(t=e(this,i)).root_=null,t.size_=0,t}return l(i,t),s(i,[{key:\"get\",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null}},{key:\"put\",value:function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(i>0)){var s=r.value;return r.value=e,s}r=r.right}}while(null!==r);var a={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null}},{key:\"fixAfterInsertion\",value:function(t){var e;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)Xe(t)===Ue(Xe(Xe(t)))?1===ze(e=Ve(Xe(Xe(t))))?(Be(Xe(t),0),Be(e,0),Be(Xe(Xe(t)),1),t=Xe(Xe(t))):(t===Ve(Xe(t))&&(t=Xe(t),this.rotateLeft(t)),Be(Xe(t),0),Be(Xe(Xe(t)),1),this.rotateRight(Xe(Xe(t)))):1===ze(e=Ue(Xe(Xe(t))))?(Be(Xe(t),0),Be(e,0),Be(Xe(Xe(t)),1),t=Xe(Xe(t))):(t===Ue(Xe(t))&&(t=Xe(t),this.rotateRight(t)),Be(Xe(t),0),Be(Xe(Xe(t)),1),this.rotateLeft(Xe(Xe(t))));this.root_.color=0}},{key:\"values\",value:function(){var t=new yt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=i.successor(e));)t.add(e.value);return t}},{key:\"entrySet\",value:function(){var t=new J,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=i.successor(e));)t.add(e);return t}},{key:\"rotateLeft\",value:function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}}},{key:\"rotateRight\",value:function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}}},{key:\"getFirstEntry\",value:function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t}},{key:\"size\",value:function(){return this.size_}},{key:\"containsKey\",value:function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return!0;e=e.right}}return!1}}],[{key:\"successor\",value:function(t){var e;if(null===t)return null;if(null!==t.right){for(e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e}}])}(Ye),Ze=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"find\",value:function(t){return this.nodeMap.get(t)}},{key:\"addNode\",value:function(){if(arguments[0]instanceof X){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof qe){var n=arguments[0],i=this.nodeMap.get(n.getCoordinate());return null===i?(this.nodeMap.put(n.getCoordinate(),n),n):(i.mergeLabel(n),i)}}},{key:\"print\",value:function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}}},{key:\"iterator\",value:function(){return this.nodeMap.values().iterator()}},{key:\"values\",value:function(){return this.nodeMap.values()}},{key:\"getBoundaryNodes\",value:function(t){for(var e=new yt,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===H.BOUNDARY&&e.add(i)}return e}},{key:\"add\",value:function(t){var e=t.getCoordinate();this.addNode(e).add(t)}}],[{key:\"constructor_\",value:function(){this.nodeMap=new He,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}}])}(),je=function(){function t(){n(this,t)}return s(t,null,[{key:\"isNorthern\",value:function(e){return e===t.NE||e===t.NW}},{key:\"isOpposite\",value:function(t,e){return t!==e&&2===(t-e+4)%4}},{key:\"commonHalfPlane\",value:function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n}},{key:\"isInHalfPlane\",value:function(e,n){return n===t.SE?e===t.SE||e===t.SW:e===n||e===n+1}},{key:\"quadrant\",value:function(){if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var e=arguments[0],n=arguments[1];if(0===e&&0===n)throw new m(\"Cannot compute the quadrant for point ( \"+e+\", \"+n+\" )\");return e>=0?n>=0?t.NE:t.SE:n>=0?t.NW:t.SW}if(arguments[0]instanceof X&&arguments[1]instanceof X){var i=arguments[0],r=arguments[1];if(r.x===i.x&&r.y===i.y)throw new m(\"Cannot compute the quadrant for two identical points \"+i);return r.x>=i.x?r.y>=i.y?t.NE:t.SE:r.y>=i.y?t.NW:t.SW}}}])}();je.NE=0,je.NW=1,je.SW=2,je.SE=3;var We=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"compareDirection\",value:function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:ct.index(t._p0,t._p1,this._p1)}},{key:\"getDy\",value:function(){return this._dy}},{key:\"getCoordinate\",value:function(){return this._p0}},{key:\"setNode\",value:function(t){this._node=t}},{key:\"print\",value:function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),i=n.lastIndexOf(\".\"),r=n.substring(i+1);t.print(\"  \"+r+\": \"+this._p0+\" - \"+this._p1+\" \"+this._quadrant+\":\"+e+\"   \"+this._label)}},{key:\"compareTo\",value:function(t){var e=t;return this.compareDirection(e)}},{key:\"getDirectedCoordinate\",value:function(){return this._p1}},{key:\"getDx\",value:function(){return this._dx}},{key:\"getLabel\",value:function(){return this._label}},{key:\"getEdge\",value:function(){return this._edge}},{key:\"getQuadrant\",value:function(){return this._quadrant}},{key:\"getNode\",value:function(){return this._node}},{key:\"toString\",value:function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(\".\");return\"  \"+e.substring(n+1)+\": \"+this._p0+\" - \"+this._p1+\" \"+this._quadrant+\":\"+t+\"   \"+this._label}},{key:\"computeLabel\",value:function(t){}},{key:\"init\",value:function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=je.quadrant(this._dx,this._dy),G.isTrue(!(0===this._dx&&0===this._dy),\"EdgeEnd with identical endpoints found\")}},{key:\"interfaces_\",get:function(){return[x]}}],[{key:\"constructor_\",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var e=arguments[0];this._edge=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];t.constructor_.call(this,n,i,r,null)}else if(4===arguments.length){var s=arguments[0],a=arguments[1],o=arguments[2],u=arguments[3];t.constructor_.call(this,s),this.init(a,o),this._label=u}}}])}(),Ke=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"getNextMin\",value:function(){return this._nextMin}},{key:\"getDepth\",value:function(t){return this._depth[t]}},{key:\"setVisited\",value:function(t){this._isVisited=t}},{key:\"computeDirectedLabel\",value:function(){this._label=new Ae(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:\"getNext\",value:function(){return this._next}},{key:\"setDepth\",value:function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new gt(\"assigned depths do not match\",this.getCoordinate());this._depth[t]=e}},{key:\"isInteriorAreaEdge\",value:function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,$.LEFT)===H.INTERIOR&&this._label.getLocation(e,$.RIGHT)===H.INTERIOR||(t=!1);return t}},{key:\"setNextMin\",value:function(t){this._nextMin=t}},{key:\"print\",value:function(t){f(i,\"print\",this,1).call(this,t),t.print(\" \"+this._depth[$.LEFT]+\"/\"+this._depth[$.RIGHT]),t.print(\" (\"+this.getDepthDelta()+\")\"),this._isInResult&&t.print(\" inResult\")}},{key:\"setMinEdgeRing\",value:function(t){this._minEdgeRing=t}},{key:\"isLineEdge\",value:function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,H.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,H.EXTERIOR);return t&&e&&n}},{key:\"setEdgeRing\",value:function(t){this._edgeRing=t}},{key:\"getMinEdgeRing\",value:function(){return this._minEdgeRing}},{key:\"getDepthDelta\",value:function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t}},{key:\"setInResult\",value:function(t){this._isInResult=t}},{key:\"getSym\",value:function(){return this._sym}},{key:\"isForward\",value:function(){return this._isForward}},{key:\"getEdge\",value:function(){return this._edge}},{key:\"printEdge\",value:function(t){this.print(t),t.print(\" \"),this._isForward?this._edge.print(t):this._edge.printReverse(t)}},{key:\"setSym\",value:function(t){this._sym=t}},{key:\"setVisitedEdge\",value:function(t){this.setVisited(t),this._sym.setVisited(t)}},{key:\"setEdgeDepths\",value:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===$.LEFT&&(i=-1);var r=$.opposite(t),s=e+n*i;this.setDepth(t,e),this.setDepth(r,s)}},{key:\"getEdgeRing\",value:function(){return this._edgeRing}},{key:\"isInResult\",value:function(){return this._isInResult}},{key:\"setNext\",value:function(t){this._next=t}},{key:\"isVisited\",value:function(){return this._isVisited}}],[{key:\"constructor_\",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(We.constructor_.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}},{key:\"depthFactor\",value:function(t,e){return t===H.EXTERIOR&&e===H.INTERIOR?1:t===H.INTERIOR&&e===H.EXTERIOR?-1:0}}])}(We),Je=function(){return s((function t(){n(this,t)}),[{key:\"createNode\",value:function(t){return new qe(t,null)}}])}(),Qe=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"printEdges\",value:function(t){t.println(\"Edges:\");for(var e=0;e<this._edges.size();e++){t.println(\"edge \"+e+\":\");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}}},{key:\"find\",value:function(t){return this._nodes.find(t)}},{key:\"addNode\",value:function(){if(arguments[0]instanceof qe){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof X){var e=arguments[0];return this._nodes.addNode(e)}}},{key:\"getNodeIterator\",value:function(){return this._nodes.iterator()}},{key:\"linkResultDirectedEdges\",value:function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}}},{key:\"debugPrintln\",value:function(t){mt.out.println(t)}},{key:\"isBoundaryNode\",value:function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===H.BOUNDARY}},{key:\"linkAllDirectedEdges\",value:function(){for(var t=this._nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}}},{key:\"matchInSameDirection\",value:function(t,e,n,i){return!!t.equals(n)&&(ct.index(t,e,i)===ct.COLLINEAR&&je.quadrant(t,e)===je.quadrant(n,i))}},{key:\"getEdgeEnds\",value:function(){return this._edgeEndList}},{key:\"debugPrint\",value:function(t){mt.out.print(t)}},{key:\"getEdgeIterator\",value:function(){return this._edges.iterator()}},{key:\"findEdgeInSameDirection\",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null}},{key:\"insertEdge\",value:function(t){this._edges.add(t)}},{key:\"findEdgeEnd\",value:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null}},{key:\"addEdges\",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var i=new Ke(n,!0),r=new Ke(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}}},{key:\"add\",value:function(t){this._nodes.add(t),this._edgeEndList.add(t)}},{key:\"getNodes\",value:function(){return this._nodes.values()}},{key:\"findEdge\",value:function(t,e){for(var n=0;n<this._edges.size();n++){var i=this._edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null}}],[{key:\"constructor_\",value:function(){if(this._edges=new yt,this._nodes=null,this._edgeEndList=new yt,0===arguments.length)this._nodes=new Ze(new Je);else if(1===arguments.length){var t=arguments[0];this._nodes=new Ze(t)}}},{key:\"linkResultDirectedEdges\",value:function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}}}])}(),$e=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"sortShellsAndHoles\",value:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}}},{key:\"computePolygons\",value:function(t){for(var e=new yt,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this._geometryFactory);e.add(i)}return e}},{key:\"placeFreeHoles\",value:function(e,n){for(var i=n.iterator();i.hasNext();){var r=i.next();if(null===r.getShell()){var s=t.findEdgeRingContaining(r,e);if(null===s)throw new gt(\"unable to assign hole to a shell\",r.getCoordinate(0));r.setShell(s)}}}},{key:\"buildMinimalEdgeRings\",value:function(t,e,n){for(var i=new yt,r=t.iterator();r.hasNext();){var s=r.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var a=s.buildMinimalRings(),o=this.findShell(a);null!==o?(this.placePolygonHoles(o,a),e.add(o)):n.addAll(a)}else i.add(s)}return i}},{key:\"buildMaximalEdgeRings\",value:function(t){for(var e=new yt,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Fe(i,this._geometryFactory);e.add(r),r.setInResult()}}return e}},{key:\"placePolygonHoles\",value:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}}},{key:\"getPolygons\",value:function(){return this.computePolygons(this._shellList)}},{key:\"findShell\",value:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return G.isTrue(e<=1,\"found two shells in MinimalEdgeRing list\"),n}},{key:\"add\",value:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Qe.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new yt,s=this.buildMinimalEdgeRings(i,this._shellList,r);this.sortShellsAndHoles(s,this._shellList,r),this.placeFreeHoles(this._shellList,r)}}}],[{key:\"constructor_\",value:function(){this._geometryFactory=null,this._shellList=new yt;var t=arguments[0];this._geometryFactory=t}},{key:\"findEdgeRingContaining\",value:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),s=null,a=null,o=e.iterator();o.hasNext();){var u=o.next(),l=u.getLinearRing(),h=l.getEnvelopeInternal();if(!h.equals(i)&&h.contains(i)){r=jt.ptNotInList(n.getCoordinates(),l.getCoordinates());var c=!1;be.isInRing(r,l.getCoordinates())&&(c=!0),c&&(null===s||a.contains(h))&&(a=(s=u).getLinearRing().getEnvelopeInternal())}}return s}}])}(),tn=function(){return s((function t(){n(this,t)}),[{key:\"getBounds\",value:function(){}}])}(),en=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"getItem\",value:function(){return this._item}},{key:\"getBounds\",value:function(){return this._bounds}},{key:\"interfaces_\",get:function(){return[tn,E]}}],[{key:\"constructor_\",value:function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}}])}(),nn=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"poll\",value:function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t}},{key:\"size\",value:function(){return this._size}},{key:\"reorder\",value:function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)}},{key:\"clear\",value:function(){this._size=0,this._items.clear()}},{key:\"peek\",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:\"isEmpty\",value:function(){return 0===this._size}},{key:\"add\",value:function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)}}],[{key:\"constructor_\",value:function(){this._size=null,this._items=null,this._size=0,this._items=new yt,this._items.add(null)}}])}(),rn=function(){return s((function t(){n(this,t)}),[{key:\"insert\",value:function(t,e){}},{key:\"remove\",value:function(t,e){}},{key:\"query\",value:function(){}}])}(),sn=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"getLevel\",value:function(){return this._level}},{key:\"size\",value:function(){return this._childBoundables.size()}},{key:\"getChildBoundables\",value:function(){return this._childBoundables}},{key:\"addChildBoundable\",value:function(t){G.isTrue(null===this._bounds),this._childBoundables.add(t)}},{key:\"isEmpty\",value:function(){return this._childBoundables.isEmpty()}},{key:\"getBounds\",value:function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds}},{key:\"interfaces_\",get:function(){return[tn,E]}}],[{key:\"constructor_\",value:function(){if(this._childBoundables=new yt,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}}}])}(),an={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return an.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?At.sort(n,e):At.sort(n);for(var i=t.iterator(),r=0,s=n.length;r<s;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new yt;return e.add(t),e}},on=function(){function t(){n(this,t)}return s(t,null,[{key:\"maxDistance\",value:function(e,n,i,r,s,a,o,u){var l=t.distance(e,n,s,a);return l=Math.max(l,t.distance(e,n,o,u)),l=Math.max(l,t.distance(i,r,s,a)),l=Math.max(l,t.distance(i,r,o,u))}},{key:\"distance\",value:function(t,e,n,i){var r=n-t,s=i-e;return Math.sqrt(r*r+s*s)}},{key:\"maximumDistance\",value:function(e,n){var i=Math.min(e.getMinX(),n.getMinX()),r=Math.min(e.getMinY(),n.getMinY()),s=Math.max(e.getMaxX(),n.getMaxX()),a=Math.max(e.getMaxY(),n.getMaxY());return t.distance(i,r,s,a)}},{key:\"minMaxDistance\",value:function(e,n){var i=e.getMinX(),r=e.getMinY(),s=e.getMaxX(),a=e.getMaxY(),o=n.getMinX(),u=n.getMinY(),l=n.getMaxX(),h=n.getMaxY(),c=t.maxDistance(i,r,i,a,o,u,o,h);return c=Math.min(c,t.maxDistance(i,r,i,a,o,u,l,u)),c=Math.min(c,t.maxDistance(i,r,i,a,l,h,o,h)),c=Math.min(c,t.maxDistance(i,r,i,a,l,h,l,u)),c=Math.min(c,t.maxDistance(i,r,s,r,o,u,o,h)),c=Math.min(c,t.maxDistance(i,r,s,r,o,u,l,u)),c=Math.min(c,t.maxDistance(i,r,s,r,l,h,o,h)),c=Math.min(c,t.maxDistance(i,r,s,r,l,h,l,u)),c=Math.min(c,t.maxDistance(s,a,i,a,o,u,o,h)),c=Math.min(c,t.maxDistance(s,a,i,a,o,u,l,u)),c=Math.min(c,t.maxDistance(s,a,i,a,l,h,o,h)),c=Math.min(c,t.maxDistance(s,a,i,a,l,h,l,u)),c=Math.min(c,t.maxDistance(s,a,s,r,o,u,o,h)),c=Math.min(c,t.maxDistance(s,a,s,r,o,u,l,u)),c=Math.min(c,t.maxDistance(s,a,s,r,l,h,o,h)),c=Math.min(c,t.maxDistance(s,a,s,r,l,h,l,u))}}])}(),un=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"maximumDistance\",value:function(){return on.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:\"expandToQueue\",value:function(e,n){var i=t.isComposite(this._boundable1),r=t.isComposite(this._boundable2);if(i&&r)return t.area(this._boundable1)>t.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,e,n),null):(this.expand(this._boundable2,this._boundable1,!0,e,n),null);if(i)return this.expand(this._boundable1,this._boundable2,!1,e,n),null;if(r)return this.expand(this._boundable2,this._boundable1,!0,e,n),null;throw new m(\"neither boundable is composite\")}},{key:\"isLeaves\",value:function(){return!(t.isComposite(this._boundable1)||t.isComposite(this._boundable2))}},{key:\"compareTo\",value:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0}},{key:\"expand\",value:function(e,n,i,r,s){for(var a=e.getChildBoundables().iterator();a.hasNext();){var o=a.next(),u=null;(u=i?new t(n,o,this._itemDistance):new t(o,n,this._itemDistance)).getDistance()<s&&r.add(u)}}},{key:\"getBoundable\",value:function(t){return 0===t?this._boundable1:this._boundable2}},{key:\"getDistance\",value:function(){return this._distance}},{key:\"distance\",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:\"interfaces_\",get:function(){return[x]}}],[{key:\"constructor_\",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()}},{key:\"area\",value:function(t){return t.getBounds().getArea()}},{key:\"isComposite\",value:function(t){return t instanceof sn}}])}(),ln=function(){return s((function t(){n(this,t)}),[{key:\"visitItem\",value:function(t){}}])}(),hn=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"queryInternal\",value:function(){if(rt(arguments[2],ln)&&arguments[0]instanceof Object&&arguments[1]instanceof sn)for(var t=arguments[0],e=arguments[2],n=arguments[1].getChildBoundables(),i=0;i<n.size();i++){var r=n.get(i);this.getIntersectsOp().intersects(r.getBounds(),t)&&(r instanceof sn?this.queryInternal(t,r,e):r instanceof en?e.visitItem(r.getItem()):G.shouldNeverReachHere())}else if(rt(arguments[2],nt)&&arguments[0]instanceof Object&&arguments[1]instanceof sn)for(var s=arguments[0],a=arguments[2],o=arguments[1].getChildBoundables(),u=0;u<o.size();u++){var l=o.get(u);this.getIntersectsOp().intersects(l.getBounds(),s)&&(l instanceof sn?this.queryInternal(s,l,a):l instanceof en?a.add(l.getItem()):G.shouldNeverReachHere())}}},{key:\"getNodeCapacity\",value:function(){return this._nodeCapacity}},{key:\"lastNode\",value:function(t){return t.get(t.size()-1)}},{key:\"size\",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof sn?t+=this.size(n):n instanceof en&&(t+=1)}return t}}},{key:\"removeItem\",value:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof en&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)}},{key:\"itemsTree\",value:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new yt:t}if(1===arguments.length){for(var e=arguments[0],n=new yt,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof sn){var s=this.itemsTree(r);null!==s&&n.add(s)}else r instanceof en?n.add(r.getItem()):G.shouldNeverReachHere()}return n.size()<=0?null:n}}},{key:\"insert\",value:function(t,e){G.isTrue(!this._built,\"Cannot insert items into an STR packed R-tree after it has been built.\"),this._itemBoundables.add(new en(t,e))}},{key:\"boundablesAtLevel\",value:function(){if(1===arguments.length){var t=arguments[0],e=new yt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(G.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof sn?this.boundablesAtLevel(n,a,r):(G.isTrue(a instanceof en),-1===n&&r.add(a))}return null}}},{key:\"query\",value:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new yt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.queryInternal(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.queryInternal(n,this._root,i)}}},{key:\"build\",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:\"getRoot\",value:function(){return this.build(),this._root}},{key:\"remove\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=this.removeItem(i,r);if(s)return!0;for(var a=null,o=i.getChildBoundables().iterator();o.hasNext();){var u=o.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&(u instanceof sn&&(s=this.remove(n,u,r)))){a=u;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}}},{key:\"createHigherLevels\",value:function(t,e){G.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)}},{key:\"depth\",value:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof sn){var i=this.depth(n);i>t&&(t=i)}}return t+1}}},{key:\"createParentBoundables\",value:function(t,e){G.isTrue(!t.isEmpty());var n=new yt;n.add(this.createNode(e));var i=new yt(t);an.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var s=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(s)}return n}},{key:\"isEmpty\",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:\"interfaces_\",get:function(){return[E]}}],[{key:\"constructor_\",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new yt,this._nodeCapacity=null,0===arguments.length)t.constructor_.call(this,t.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var e=arguments[0];G.isTrue(e>1,\"Node capacity must be greater than 1\"),this._nodeCapacity=e}}},{key:\"compareDoubles\",value:function(t,e){return t>e?1:t<e?-1:0}}])}();hn.IntersectsOp=function(){},hn.DEFAULT_NODE_CAPACITY=10;var cn=function(){return s((function t(){n(this,t)}),[{key:\"distance\",value:function(t,e){}}])}(),fn=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"createParentBoundablesFromVerticalSlices\",value:function(t,e){G.isTrue(t.length>0);for(var n=new yt,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n}},{key:\"nearestNeighbourK\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.nearestNeighbourK(t,A.POSITIVE_INFINITY,e)}if(3===arguments.length){var n=arguments[0],r=arguments[2],s=arguments[1],a=new nn;a.add(n);for(var o=new nn;!a.isEmpty()&&s>=0;){var u=a.poll(),l=u.getDistance();if(l>=s)break;if(u.isLeaves())if(o.size()<r)o.add(u);else o.peek().getDistance()>l&&(o.poll(),o.add(u)),s=o.peek().getDistance();else u.expandToQueue(a,s)}return i.getItems(o)}}},{key:\"createNode\",value:function(t){return new gn(t)}},{key:\"size\",value:function(){return 0===arguments.length?f(i,\"size\",this,1).call(this):f(i,\"size\",this,1).apply(this,arguments)}},{key:\"insert\",value:function(){if(!(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof U))return f(i,\"insert\",this,1).apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;f(i,\"insert\",this,1).call(this,t,e)}},{key:\"getIntersectsOp\",value:function(){return i.intersectsOp}},{key:\"verticalSlices\",value:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),s=0;s<e;s++){i[s]=new yt;for(var a=0;r.hasNext()&&a<n;){var o=r.next();i[s].add(o),a++}}return i}},{key:\"query\",value:function(){if(1===arguments.length){var t=arguments[0];return f(i,\"query\",this,1).call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];f(i,\"query\",this,1).call(this,e,n)}}},{key:\"getComparator\",value:function(){return i.yComparator}},{key:\"createParentBoundablesFromVerticalSlice\",value:function(t,e){return f(i,\"createParentBoundables\",this,1).call(this,t,e)}},{key:\"remove\",value:function(){if(2===arguments.length&&arguments[1]instanceof Object&&arguments[0]instanceof U){var t=arguments[0],e=arguments[1];return f(i,\"remove\",this,1).call(this,t,e)}return f(i,\"remove\",this,1).apply(this,arguments)}},{key:\"depth\",value:function(){return 0===arguments.length?f(i,\"depth\",this,1).call(this):f(i,\"depth\",this,1).apply(this,arguments)}},{key:\"createParentBoundables\",value:function(t,e){G.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new yt(t);an.sort(r,i.xComparator);var s=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(s,e)}},{key:\"nearestNeighbour\",value:function(){if(1===arguments.length){if(rt(arguments[0],cn)){var t=arguments[0];if(this.isEmpty())return null;var e=new un(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof un){var n=arguments[0],i=A.POSITIVE_INFINITY,r=null,s=new nn;for(s.add(n);!s.isEmpty()&&i>0;){var a=s.poll(),o=a.getDistance();if(o>=i)break;a.isLeaves()?(i=o,r=a):a.expandToQueue(s,i)}return null===r?null:[r.getBoundable(0).getItem(),r.getBoundable(1).getItem()]}}else{if(2===arguments.length){var u=arguments[0],l=arguments[1];if(this.isEmpty()||u.isEmpty())return null;var h=new un(this.getRoot(),u.getRoot(),l);return this.nearestNeighbour(h)}if(3===arguments.length){var c=arguments[2],f=new en(arguments[0],arguments[1]),g=new un(this.getRoot(),f,c);return this.nearestNeighbour(g)[0]}if(4===arguments.length){var v=arguments[2],y=arguments[3],d=new en(arguments[0],arguments[1]),_=new un(this.getRoot(),d,v);return this.nearestNeighbourK(_,y)}}}},{key:\"isWithinDistance\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=A.POSITIVE_INFINITY,i=new nn;for(i.add(t);!i.isEmpty();){var r=i.poll(),s=r.getDistance();if(s>e)return!1;if(r.maximumDistance()<=e)return!0;if(r.isLeaves()){if((n=s)<=e)return!0}else r.expandToQueue(i,n)}return!1}if(3===arguments.length){var a=arguments[0],o=arguments[1],u=arguments[2],l=new un(this.getRoot(),a.getRoot(),o);return this.isWithinDistance(l,u)}}},{key:\"interfaces_\",get:function(){return[rn,E]}}],[{key:\"constructor_\",value:function(){if(0===arguments.length)i.constructor_.call(this,i.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];hn.constructor_.call(this,t)}}},{key:\"centreX\",value:function(t){return i.avg(t.getMinX(),t.getMaxX())}},{key:\"avg\",value:function(t,e){return(t+e)/2}},{key:\"getItems\",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;!t.isEmpty();){var i=t.poll();e[n]=i.getBoundable(0).getItem(),n++}return e}},{key:\"centreY\",value:function(t){return i.avg(t.getMinY(),t.getMaxY())}}])}(hn),gn=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"computeBounds\",value:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new U(n.getBounds()):t.expandToInclude(n.getBounds())}return t}}],[{key:\"constructor_\",value:function(){var t=arguments[0];sn.constructor_.call(this,t)}}])}(sn);fn.STRtreeNode=gn,fn.xComparator=new(function(){return s((function t(){n(this,t)}),[{key:\"interfaces_\",get:function(){return[P]}},{key:\"compare\",value:function(t,e){return hn.compareDoubles(fn.centreX(t.getBounds()),fn.centreX(e.getBounds()))}}])}()),fn.yComparator=new(function(){return s((function t(){n(this,t)}),[{key:\"interfaces_\",get:function(){return[P]}},{key:\"compare\",value:function(t,e){return hn.compareDoubles(fn.centreY(t.getBounds()),fn.centreY(e.getBounds()))}}])}()),fn.intersectsOp=new(function(){return s((function t(){n(this,t)}),[{key:\"interfaces_\",get:function(){return[IntersectsOp]}},{key:\"intersects\",value:function(t,e){return t.intersects(e)}}])}()),fn.DEFAULT_NODE_CAPACITY=10;var vn=function(){function t(){n(this,t)}return s(t,null,[{key:\"relativeSign\",value:function(t,e){return t<e?-1:t>e?1:0}},{key:\"compare\",value:function(e,n,i){if(n.equals2D(i))return 0;var r=t.relativeSign(n.x,i.x),s=t.relativeSign(n.y,i.y);switch(e){case 0:return t.compareValue(r,s);case 1:return t.compareValue(s,r);case 2:return t.compareValue(s,-r);case 3:return t.compareValue(-r,s);case 4:return t.compareValue(-r,-s);case 5:return t.compareValue(-s,-r);case 6:return t.compareValue(-s,r);case 7:return t.compareValue(r,-s)}return G.shouldNeverReachHere(\"invalid octant value\"),0}},{key:\"compareValue\",value:function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0}}])}(),yn=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"getCoordinate\",value:function(){return this.coord}},{key:\"print\",value:function(t){t.print(this.coord),t.print(\" seg # = \"+this.segmentIndex)}},{key:\"compareTo\",value:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:this._isInterior?e._isInterior?vn.compare(this._segmentOctant,this.coord,e.coord):1:-1}},{key:\"isEndPoint\",value:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t}},{key:\"toString\",value:function(){return this.segmentIndex+\":\"+this.coord.toString()}},{key:\"isInterior\",value:function(){return this._isInterior}},{key:\"interfaces_\",get:function(){return[x]}}],[{key:\"constructor_\",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._segString=t,this.coord=new X(e),this.segmentIndex=n,this._segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}}])}(),dn=function(){return s((function t(){n(this,t)}),[{key:\"hasNext\",value:function(){}},{key:\"next\",value:function(){}},{key:\"remove\",value:function(){}}])}(),_n=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"getSplitCoordinates\",value:function(){var t=new Zt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()}},{key:\"addCollapsedNodes\",value:function(){var t=new yt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}}},{key:\"createSplitEdgePts\",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2;if(2===n)return[new X(t.coord),new X(e.coord)];var i=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),a=0;s[a++]=new X(t.coord);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)s[a++]=this._edge.getCoordinate(o);return r&&(s[a]=new X(e.coord)),s}},{key:\"print\",value:function(t){t.println(\"Intersections:\");for(var e=this.iterator();e.hasNext();){e.next().print(t)}}},{key:\"findCollapsesFromExistingVertices\",value:function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e);this._edge.getCoordinate(e+1);var i=this._edge.getCoordinate(e+2);n.equals2D(i)&&t.add(at.valueOf(e+1))}}},{key:\"addEdgeCoordinates\",value:function(t,e,n){var i=this.createSplitEdgePts(t,e);n.add(i,!1)}},{key:\"iterator\",value:function(){return this._nodeMap.values().iterator()}},{key:\"addSplitEdges\",value:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}},{key:\"findCollapseIndex\",value:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)}},{key:\"findCollapsesFromInsertedNodes\",value:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(at.valueOf(e[0])),i=r}}},{key:\"getEdge\",value:function(){return this._edge}},{key:\"addEndpoints\",value:function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)}},{key:\"createSplitEdge\",value:function(t,e){var n=this.createSplitEdgePts(t,e);return new xn(n,this._edge.getData())}},{key:\"add\",value:function(t,e){var n=new yn(this._edge,t,e,this._edge.getSegmentOctant(e)),i=this._nodeMap.get(n);return null!==i?(G.isTrue(i.coord.equals2D(t),\"Found equal nodes with different coordinates\"),i):(this._nodeMap.put(n,n),n)}},{key:\"checkSplitEdgesCorrectness\",value:function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new D(\"bad split edge start point at \"+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new D(\"bad split edge end point at \"+r)}}],[{key:\"constructor_\",value:function(){this._nodeMap=new He,this._edge=null;var t=arguments[0];this._edge=t}}])}(),pn=function(){function t(){n(this,t)}return s(t,null,[{key:\"octant\",value:function(){if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var e=arguments[0],n=arguments[1];if(0===e&&0===n)throw new m(\"Cannot compute the octant for point ( \"+e+\", \"+n+\" )\");var i=Math.abs(e),r=Math.abs(n);return e>=0?n>=0?i>=r?0:1:i>=r?7:6:n>=0?i>=r?3:2:i>=r?4:5}if(arguments[0]instanceof X&&arguments[1]instanceof X){var s=arguments[0],a=arguments[1],o=a.x-s.x,u=a.y-s.y;if(0===o&&0===u)throw new m(\"Cannot compute the octant for two identical points \"+s);return t.octant(o,u)}}}])}(),mn=function(){return s((function t(){n(this,t)}),[{key:\"getCoordinates\",value:function(){}},{key:\"size\",value:function(){}},{key:\"getCoordinate\",value:function(t){}},{key:\"isClosed\",value:function(){}},{key:\"setData\",value:function(t){}},{key:\"getData\",value:function(){}}])}(),kn=function(){return s((function t(){n(this,t)}),[{key:\"addIntersection\",value:function(t,e){}},{key:\"interfaces_\",get:function(){return[mn]}}])}(),xn=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"getCoordinates\",value:function(){return this._pts}},{key:\"size\",value:function(){return this._pts.length}},{key:\"getCoordinate\",value:function(t){return this._pts[t]}},{key:\"isClosed\",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:\"getSegmentOctant\",value:function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))}},{key:\"setData\",value:function(t){this._data=t}},{key:\"safeOctant\",value:function(t,e){return t.equals2D(e)?0:pn.octant(t,e)}},{key:\"getData\",value:function(){return this._data}},{key:\"addIntersection\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[1],i=arguments[3],r=new X(arguments[0].getIntersection(i));this.addIntersection(r,n)}}},{key:\"toString\",value:function(){return Ce.toLineString(new Qt(this._pts))}},{key:\"getNodeList\",value:function(){return this._nodeList}},{key:\"addIntersectionNode\",value:function(t,e){var n=e,i=n+1;if(i<this._pts.length){var r=this._pts[i];t.equals2D(r)&&(n=i)}return this._nodeList.add(t,n)}},{key:\"addIntersections\",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}},{key:\"interfaces_\",get:function(){return[kn]}}],[{key:\"constructor_\",value:function(){this._nodeList=new _n(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}},{key:\"getNodedSubstrings\",value:function(){if(1===arguments.length){var e=arguments[0],n=new yt;return t.getNodedSubstrings(e,n),n}if(2===arguments.length)for(var i=arguments[1],r=arguments[0].iterator();r.hasNext();){r.next().getNodeList().addSplitEdges(i)}}}])}(),In=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"minX\",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:\"orientationIndex\",value:function(){if(arguments[0]instanceof t){var e=arguments[0],n=ct.index(this.p0,this.p1,e.p0),i=ct.index(this.p0,this.p1,e.p1);return n>=0&&i>=0||n<=0&&i<=0?Math.max(n,i):0}if(arguments[0]instanceof X){var r=arguments[0];return ct.index(this.p0,this.p1,r)}}},{key:\"toGeometry\",value:function(t){return t.createLineString([this.p0,this.p1])}},{key:\"isVertical\",value:function(){return this.p0.x===this.p1.x}},{key:\"equals\",value:function(e){if(!(e instanceof t))return!1;var n=e;return this.p0.equals(n.p0)&&this.p1.equals(n.p1)}},{key:\"intersection\",value:function(t){var e=new we;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null}},{key:\"project\",value:function(){if(arguments[0]instanceof X){var e=arguments[0];if(e.equals(this.p0)||e.equals(this.p1))return new X(e);var n=this.projectionFactor(e),i=new X;return i.x=this.p0.x+n*(this.p1.x-this.p0.x),i.y=this.p0.y+n*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof t){var r=arguments[0],s=this.projectionFactor(r.p0),a=this.projectionFactor(r.p1);if(s>=1&&a>=1)return null;if(s<=0&&a<=0)return null;var o=this.project(r.p0);s<0&&(o=this.p0),s>1&&(o=this.p1);var u=this.project(r.p1);return a<0&&(u=this.p0),a>1&&(u=this.p1),new t(o,u)}}},{key:\"normalize\",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:\"angle\",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:\"getCoordinate\",value:function(t){return 0===t?this.p0:this.p1}},{key:\"distancePerpendicular\",value:function(t){return xt.pointToLinePerpendicular(t,this.p0,this.p1)}},{key:\"minY\",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:\"midPoint\",value:function(){return t.midPoint(this.p0,this.p1)}},{key:\"projectionFactor\",value:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return i<=0?A.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i}},{key:\"closestPoints\",value:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=A.MAX_VALUE,r=null,s=this.closestPoint(t.p0);i=s.distance(t.p0),n[0]=s,n[1]=t.p0;var a=this.closestPoint(t.p1);(r=a.distance(t.p1))<i&&(i=r,n[0]=a,n[1]=t.p1);var o=t.closestPoint(this.p0);(r=o.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=o);var u=t.closestPoint(this.p1);return(r=u.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=u),n}},{key:\"closestPoint\",value:function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1}},{key:\"maxX\",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:\"getLength\",value:function(){return this.p0.distance(this.p1)}},{key:\"compareTo\",value:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)}},{key:\"reverse\",value:function(){var t=this.p0;this.p0=this.p1,this.p1=t}},{key:\"equalsTopo\",value:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)}},{key:\"lineIntersection\",value:function(t){return pt.intersection(this.p0,this.p1,t.p0,t.p1)}},{key:\"maxY\",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:\"pointAlongOffset\",value:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,s=this.p1.y-this.p0.y,a=Math.sqrt(r*r+s*s),o=0,u=0;if(0!==e){if(a<=0)throw new IllegalStateException(\"Cannot compute offset from zero-length line segment\");o=e*r/a,u=e*s/a}return new X(n-u,i+o)}},{key:\"setCoordinates\",value:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}}},{key:\"segmentFraction\",value:function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||A.isNaN(e))&&(e=1),e}},{key:\"toString\",value:function(){return\"LINESTRING( \"+this.p0.x+\" \"+this.p0.y+\", \"+this.p1.x+\" \"+this.p1.y+\")\"}},{key:\"isHorizontal\",value:function(){return this.p0.y===this.p1.y}},{key:\"reflect\",value:function(t){var e=this.p1.getY()-this.p0.getY(),n=this.p0.getX()-this.p1.getX(),i=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),r=e*e+n*n,s=e*e-n*n,a=t.getX(),o=t.getY();return new X((-s*a-2*e*n*o-2*e*i)/r,(s*o-2*e*n*a-2*n*i)/r)}},{key:\"distance\",value:function(){if(arguments[0]instanceof t){var e=arguments[0];return xt.segmentToSegment(this.p0,this.p1,e.p0,e.p1)}if(arguments[0]instanceof X){var n=arguments[0];return xt.pointToSegment(n,this.p0,this.p1)}}},{key:\"pointAlong\",value:function(t){var e=new X;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e}},{key:\"hashCode\",value:function(){var t=A.doubleToLongBits(this.p0.x);t^=31*A.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=A.doubleToLongBits(this.p1.x);return n^=31*A.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))}},{key:\"interfaces_\",get:function(){return[x,E]}}],[{key:\"constructor_\",value:function(){if(this.p0=null,this.p1=null,0===arguments.length)t.constructor_.call(this,new X,new X);else if(1===arguments.length){var e=arguments[0];t.constructor_.call(this,e.p0,e.p1)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.p0=n,this.p1=i}else if(4===arguments.length){var r=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3];t.constructor_.call(this,new X(r,s),new X(a,o))}}},{key:\"midPoint\",value:function(t,e){return new X((t.x+e.x)/2,(t.y+e.y)/2)}}])}(),En=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"overlap\",value:function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[3];arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}],[{key:\"constructor_\",value:function(){this._overlapSeg1=new In,this._overlapSeg2=new In}}])}(),Nn=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"getLineSegment\",value:function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]}},{key:\"computeSelect\",value:function(t,e,n,i){var r=this._pts[e],s=this._pts[n];if(n-e==1)return i.select(this,e),null;if(!t.intersects(r,s))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,i),a<n&&this.computeSelect(t,a,n,i)}},{key:\"getCoordinates\",value:function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t}},{key:\"computeOverlaps\",value:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.computeOverlaps(this._start,this._end,t,t._start,t._end,e)}else if(6===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3],a=arguments[4],o=arguments[5];if(i-n==1&&a-s==1)return o.overlap(this,n,r,s),null;if(!this.overlaps(n,i,r,s,a))return null;var u=Math.trunc((n+i)/2),l=Math.trunc((s+a)/2);n<u&&(s<l&&this.computeOverlaps(n,u,r,s,l,o),l<a&&this.computeOverlaps(n,u,r,l,a,o)),u<i&&(s<l&&this.computeOverlaps(u,i,r,s,l,o),l<a&&this.computeOverlaps(u,i,r,l,a,o))}}},{key:\"setId\",value:function(t){this._id=t}},{key:\"select\",value:function(t,e){this.computeSelect(t,this._start,this._end,e)}},{key:\"getEnvelope\",value:function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new U(t,e)}return this._env}},{key:\"overlaps\",value:function(t,e,n,i,r){return U.intersects(this._pts[t],this._pts[e],n._pts[i],n._pts[r])}},{key:\"getEndIndex\",value:function(){return this._end}},{key:\"getStartIndex\",value:function(){return this._start}},{key:\"getContext\",value:function(){return this._context}},{key:\"getId\",value:function(){return this._id}}],[{key:\"constructor_\",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=i}}])}(),Tn=function(){function t(){n(this,t)}return s(t,null,[{key:\"findChainEnd\",value:function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=je.quadrant(t[n],t[n+1]),r=e+1;r<t.length;){if(!t[r-1].equals2D(t[r]))if(je.quadrant(t[r-1],t[r])!==i)break;r++}return r-1}},{key:\"getChains\",value:function(){if(1===arguments.length){var e=arguments[0];return t.getChains(e,null)}if(2===arguments.length){var n=arguments[0],i=arguments[1],r=new yt,s=0;do{var a=t.findChainEnd(n,s),o=new Nn(n,s,a,i);r.add(o),s=a}while(s<n.length-1);return r}}}])}(),Sn=function(){return s((function t(){n(this,t)}),[{key:\"computeNodes\",value:function(t){}},{key:\"getNodedSubstrings\",value:function(){}}])}(),Ln=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"setSegmentIntersector\",value:function(t){this._segInt=t}},{key:\"interfaces_\",get:function(){return[Sn]}}],[{key:\"constructor_\",value:function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}}])}(),Cn=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"getMonotoneChains\",value:function(){return this._monoChains}},{key:\"getNodedSubstrings\",value:function(){return xn.getNodedSubstrings(this._nodedSegStrings)}},{key:\"getIndex\",value:function(){return this._index}},{key:\"add\",value:function(t){for(var e=Tn.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}}},{key:\"computeNodes\",value:function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()}},{key:\"intersectChains\",value:function(){for(var t=new Rn(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this._index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:\"constructor_\",value:function(){if(this._monoChains=new yt,this._index=new fn,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];Ln.constructor_.call(this,t)}}}])}(Ln),Rn=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"overlap\",value:function(){if(4!==arguments.length)return f(i,\"overlap\",this,1).apply(this,arguments);var t=arguments[1],e=arguments[2],n=arguments[3],r=arguments[0].getContext(),s=e.getContext();this._si.processIntersections(r,t,s,n)}}],[{key:\"constructor_\",value:function(){this._si=null;var t=arguments[0];this._si=t}}])}(En);Cn.SegmentOverlapAction=Rn;var wn=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"isDeletable\",value:function(t,e,n,i){var r=this._inputLine[t],s=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(r,s,a)&&(!!this.isShallow(r,s,a,i)&&this.isShallowSampled(r,s,t,n,i))}},{key:\"deleteShallowConcavities\",value:function(){for(var e=1,n=this.findNextNonDeletedIndex(e),i=this.findNextNonDeletedIndex(n),r=!1;i<this._inputLine.length;){var s=!1;this.isDeletable(e,n,i,this._distanceTol)&&(this._isDeleted[n]=t.DELETE,s=!0,r=!0),e=s?i:n,n=this.findNextNonDeletedIndex(e),i=this.findNextNonDeletedIndex(n)}return r}},{key:\"isShallowConcavity\",value:function(t,e,n,i){return ct.index(t,e,n)===this._angleOrientation&&xt.pointToSegment(e,t,n)<i}},{key:\"isShallowSampled\",value:function(e,n,i,r,s){var a=Math.trunc((r-i)/t.NUM_PTS_TO_CHECK);a<=0&&(a=1);for(var o=i;o<r;o+=a)if(!this.isShallow(e,n,this._inputLine[o],s))return!1;return!0}},{key:\"isConcave\",value:function(t,e,n){var i=ct.index(t,e,n)===this._angleOrientation;return i}},{key:\"simplify\",value:function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=ct.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()}},{key:\"findNextNonDeletedIndex\",value:function(e){for(var n=e+1;n<this._inputLine.length&&this._isDeleted[n]===t.DELETE;)n++;return n}},{key:\"isShallow\",value:function(t,e,n,i){return xt.pointToSegment(e,t,n)<i}},{key:\"collapseLine\",value:function(){for(var e=new Zt,n=0;n<this._inputLine.length;n++)this._isDeleted[n]!==t.DELETE&&e.add(this._inputLine[n]);return e.toCoordinateArray()}}],[{key:\"constructor_\",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=ct.COUNTERCLOCKWISE;var t=arguments[0];this._inputLine=t}},{key:\"simplify\",value:function(e,n){return new t(e).simplify(n)}}])}();wn.INIT=0,wn.DELETE=1,wn.KEEP=1,wn.NUM_PTS_TO_CHECK=10;var On=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"getCoordinates\",value:function(){return this._ptList.toArray(t.COORDINATE_ARRAY_TYPE)}},{key:\"setPrecisionModel\",value:function(t){this._precisionModel=t}},{key:\"addPt\",value:function(t){var e=new X(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)}},{key:\"reverse\",value:function(){}},{key:\"addPts\",value:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var i=t.length-1;i>=0;i--)this.addPt(t[i])}},{key:\"isRedundant\",value:function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance}},{key:\"toString\",value:function(){return(new ae).createLineString(this.getCoordinates()).toString()}},{key:\"closeRing\",value:function(){if(this._ptList.size()<1)return null;var t=new X(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)}},{key:\"setMinimumVertexDistance\",value:function(t){this._minimimVertexDistance=t}}],[{key:\"constructor_\",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new yt}}])}();On.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var bn=function(){function t(){n(this,t)}return s(t,null,[{key:\"toDegrees\",value:function(t){return 180*t/Math.PI}},{key:\"normalize\",value:function(e){for(;e>Math.PI;)e-=t.PI_TIMES_2;for(;e<=-Math.PI;)e+=t.PI_TIMES_2;return e}},{key:\"angle\",value:function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}}},{key:\"isAcute\",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0}},{key:\"isObtuse\",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)<0}},{key:\"interiorAngle\",value:function(e,n,i){var r=t.angle(n,e),s=t.angle(n,i);return Math.abs(s-r)}},{key:\"normalizePositive\",value:function(e){if(e<0){for(;e<0;)e+=t.PI_TIMES_2;e>=t.PI_TIMES_2&&(e=0)}else{for(;e>=t.PI_TIMES_2;)e-=t.PI_TIMES_2;e<0&&(e=0)}return e}},{key:\"angleBetween\",value:function(e,n,i){var r=t.angle(n,e),s=t.angle(n,i);return t.diff(r,s)}},{key:\"diff\",value:function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n}},{key:\"toRadians\",value:function(t){return t*Math.PI/180}},{key:\"getTurn\",value:function(e,n){var i=Math.sin(n-e);return i>0?t.COUNTERCLOCKWISE:i<0?t.CLOCKWISE:t.NONE}},{key:\"angleBetweenOriented\",value:function(e,n,i){var r=t.angle(n,e),s=t.angle(n,i)-r;return s<=-Math.PI?s+t.PI_TIMES_2:s>Math.PI?s-t.PI_TIMES_2:s}}])}();bn.PI_TIMES_2=2*Math.PI,bn.PI_OVER_2=Math.PI/2,bn.PI_OVER_4=Math.PI/4,bn.COUNTERCLOCKWISE=ct.COUNTERCLOCKWISE,bn.CLOCKWISE=ct.CLOCKWISE,bn.NONE=ct.COLLINEAR;var Mn=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"addNextSegment\",value:function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=ct.index(this._s0,this._s1,this._s2),i=n===ct.CLOCKWISE&&this._side===$.LEFT||n===ct.COUNTERCLOCKWISE&&this._side===$.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)}},{key:\"addLineEndCap\",value:function(t,e){var n=new In(t,e),i=new In;this.computeOffsetSegment(n,$.LEFT,this._distance,i);var r=new In;this.computeOffsetSegment(n,$.RIGHT,this._distance,r);var s=e.x-t.x,a=e.y-t.y,o=Math.atan2(a,s);switch(this._bufParams.getEndCapStyle()){case _.CAP_ROUND:this._segList.addPt(i.p1),this.addDirectedFillet(e,o+Math.PI/2,o-Math.PI/2,ct.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case _.CAP_FLAT:this._segList.addPt(i.p1),this._segList.addPt(r.p1);break;case _.CAP_SQUARE:var u=new X;u.x=Math.abs(this._distance)*Math.cos(o),u.y=Math.abs(this._distance)*Math.sin(o);var l=new X(i.p1.x+u.x,i.p1.y+u.y),h=new X(r.p1.x+u.x,r.p1.y+u.y);this._segList.addPt(l),this._segList.addPt(h)}}},{key:\"getCoordinates\",value:function(){return this._segList.getCoordinates()}},{key:\"addMitreJoin\",value:function(t,e,n,i){var r=pt.intersection(e.p0,e.p1,n.p0,n.p1);if(null!==r&&(i<=0?1:r.distance(t)/Math.abs(i))<=this._bufParams.getMitreLimit())return this._segList.addPt(r),null;this.addLimitedMitreJoin(e,n,i,this._bufParams.getMitreLimit())}},{key:\"addOutsideTurn\",value:function(e,n){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*t.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===_.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===_.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(n&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,e,this._distance),this._segList.addPt(this._offset1.p0))}},{key:\"createSquare\",value:function(t){this._segList.addPt(new X(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new X(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new X(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new X(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()}},{key:\"addSegments\",value:function(t,e){this._segList.addPts(t,e)}},{key:\"addFirstSegment\",value:function(){this._segList.addPt(this._offset1.p0)}},{key:\"addCornerFillet\",value:function(t,e,n,i,r){var s=e.x-t.x,a=e.y-t.y,o=Math.atan2(a,s),u=n.x-t.x,l=n.y-t.y,h=Math.atan2(l,u);i===ct.CLOCKWISE?o<=h&&(o+=2*Math.PI):o>=h&&(o-=2*Math.PI),this._segList.addPt(e),this.addDirectedFillet(t,o,h,i,r),this._segList.addPt(n)}},{key:\"addLastSegment\",value:function(){this._segList.addPt(this._offset1.p1)}},{key:\"initSideSegments\",value:function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)}},{key:\"addLimitedMitreJoin\",value:function(t,e,n,i){var r=this._seg0.p1,s=bn.angle(r,this._seg0.p0),a=bn.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,o=bn.normalize(s+a),u=bn.normalize(o+Math.PI),l=i*n,h=n-l*Math.abs(Math.sin(a)),c=r.x+l*Math.cos(u),f=r.y+l*Math.sin(u),g=new X(c,f),v=new In(r,g),y=v.pointAlongOffset(1,h),d=v.pointAlongOffset(1,-h);this._side===$.LEFT?(this._segList.addPt(y),this._segList.addPt(d)):(this._segList.addPt(d),this._segList.addPt(y))}},{key:\"addDirectedFillet\",value:function(t,e,n,i,r){var s=i===ct.CLOCKWISE?-1:1,a=Math.abs(e-n),o=Math.trunc(a/this._filletAngleQuantum+.5);if(o<1)return null;for(var u=a/o,l=new X,h=0;h<o;h++){var c=e+s*h*u;l.x=t.x+r*Math.cos(c),l.y=t.y+r*Math.sin(c),this._segList.addPt(l)}}},{key:\"computeOffsetSegment\",value:function(t,e,n,i){var r=e===$.LEFT?1:-1,s=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,o=Math.sqrt(s*s+a*a),u=r*n*s/o,l=r*n*a/o;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u}},{key:\"addInsideTurn\",value:function(e,n){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*t.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new X((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var r=new X((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:\"createCircle\",value:function(t){var e=new X(t.x+this._distance,t.y);this._segList.addPt(e),this.addDirectedFillet(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:\"addBevelJoin\",value:function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)}},{key:\"init\",value:function(e){this._distance=e,this._maxCurveSegmentError=e*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new On,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(e*t.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:\"addCollinear\",value:function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===_.JOIN_BEVEL||this._bufParams.getJoinStyle()===_.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,ct.CLOCKWISE,this._distance))}},{key:\"closeRing\",value:function(){this._segList.closeRing()}},{key:\"hasNarrowConcaveAngle\",value:function(){return this._hasNarrowConcaveAngle}}],[{key:\"constructor_\",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new In,this._seg1=new In,this._offset0=new In,this._offset1=new In,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],i=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new we,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===_.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(i)}}])}();Mn.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Mn.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Mn.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Mn.MAX_CLOSING_SEG_LEN_FACTOR=80;var An=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"getOffsetCurve\",value:function(t,e){if(this._distance=e,0===e)return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var s=r.getCoordinates();return n&&jt.reverse(s),s}},{key:\"computeSingleSidedBufferCurve\",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var r=wn.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],$.LEFT),n.addFirstSegment();for(var a=s-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{n.addSegments(t,!1);var o=wn.simplify(t,i),u=o.length-1;n.initSideSegments(o[0],o[1],$.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(o[l],!0)}n.addLastSegment(),n.closeRing()}},{key:\"computeRingBufferCurve\",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);e===$.RIGHT&&(i=-i);var r=wn.simplify(t,i),s=r.length-1;n.initSideSegments(r[s-1],r[0],e);for(var a=1;a<=s;a++){var o=1!==a;n.addNextSegment(r[a],o)}n.closeRing()}},{key:\"computeLineBufferCurve\",value:function(t,e){var n=this.simplifyTolerance(this._distance),i=wn.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],$.LEFT);for(var s=2;s<=r;s++)e.addNextSegment(i[s],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var a=wn.simplify(t,-n),o=a.length-1;e.initSideSegments(a[o],a[o-1],$.LEFT);for(var u=o-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()}},{key:\"computePointCurve\",value:function(t,e){switch(this._bufParams.getEndCapStyle()){case _.CAP_ROUND:e.createCircle(t);break;case _.CAP_SQUARE:e.createSquare(t)}}},{key:\"getLineCurve\",value:function(t,e){if(this._distance=e,this.isLineOffsetEmpty(e))return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()}},{key:\"getBufferParameters\",value:function(){return this._bufParams}},{key:\"simplifyTolerance\",value:function(t){return t*this._bufParams.getSimplifyFactor()}},{key:\"getRingCurve\",value:function(e,n,i){if(this._distance=i,e.length<=2)return this.getLineCurve(e,i);if(0===i)return t.copyCoordinates(e);var r=this.getSegGen(i);return this.computeRingBufferCurve(e,n,r),r.getCoordinates()}},{key:\"computeOffsetCurve\",value:function(t,e,n){var i=this.simplifyTolerance(this._distance);if(e){var r=wn.simplify(t,-i),s=r.length-1;n.initSideSegments(r[s],r[s-1],$.LEFT),n.addFirstSegment();for(var a=s-2;a>=0;a--)n.addNextSegment(r[a],!0)}else{var o=wn.simplify(t,i),u=o.length-1;n.initSideSegments(o[0],o[1],$.LEFT),n.addFirstSegment();for(var l=2;l<=u;l++)n.addNextSegment(o[l],!0)}n.addLastSegment()}},{key:\"isLineOffsetEmpty\",value:function(t){return 0===t||t<0&&!this._bufParams.isSingleSided()}},{key:\"getSegGen\",value:function(t){return new Mn(this._precisionModel,this._bufParams,t)}}],[{key:\"constructor_\",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}},{key:\"copyCoordinates\",value:function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new X(t[n]);return e}}])}(),Pn=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"findStabbedSegments\",value:function(){if(1===arguments.length){for(var t=arguments[0],e=new yt,n=this._subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(rt(arguments[2],nt)&&arguments[0]instanceof X&&arguments[1]instanceof Ke)for(var s=arguments[0],a=arguments[1],o=arguments[2],u=a.getEdge().getCoordinates(),l=0;l<u.length-1;l++){if(this._seg.p0=u[l],this._seg.p1=u[l+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<s.x||this._seg.isHorizontal()||s.y<this._seg.p0.y||s.y>this._seg.p1.y||ct.index(this._seg.p0,this._seg.p1,s)===ct.RIGHT)){var h=a.getDepth($.LEFT);this._seg.p0.equals(u[l])||(h=a.getDepth($.RIGHT));var c=new Dn(this._seg,h);o.add(c)}}else if(rt(arguments[2],nt)&&arguments[0]instanceof X&&rt(arguments[1],nt))for(var f=arguments[0],g=arguments[2],v=arguments[1].iterator();v.hasNext();){var y=v.next();y.isForward()&&this.findStabbedSegments(f,y,g)}}},{key:\"getDepth\",value:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:an.min(e)._leftDepth}}],[{key:\"constructor_\",value:function(){this._subgraphs=null,this._seg=new In;var t=arguments[0];this._subgraphs=t}}])}(),Dn=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"compareTo\",value:function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!==(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)}},{key:\"compareX\",value:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)}},{key:\"toString\",value:function(){return this._upwardSeg.toString()}},{key:\"interfaces_\",get:function(){return[x]}}],[{key:\"constructor_\",value:function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new In(t),this._leftDepth=e}}])}();Pn.DepthSegment=Dn;var Fn=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,null,[{key:\"constructor_\",value:function(){p.constructor_.call(this,\"Projective point not representable on the Cartesian plane.\")}}])}(p),Gn=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"getY\",value:function(){var t=this.y/this.w;if(A.isNaN(t)||A.isInfinite(t))throw new Fn;return t}},{key:\"getX\",value:function(){var t=this.x/this.w;if(A.isNaN(t)||A.isInfinite(t))throw new Fn;return t}},{key:\"getCoordinate\",value:function(){var t=new X;return t.x=this.getX(),t.y=this.getY(),t}}],[{key:\"constructor_\",value:function(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.x=n,this.y=i,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],s=arguments[1];this.x=r.y*s.w-s.y*r.w,this.y=s.x*r.w-r.x*s.w,this.w=r.x*s.y-s.x*r.y}else if(arguments[0]instanceof X&&arguments[1]instanceof X){var a=arguments[0],o=arguments[1];this.x=a.y-o.y,this.y=o.x-a.x,this.w=a.x*o.y-o.x*a.y}}else if(3===arguments.length){var u=arguments[0],l=arguments[1],h=arguments[2];this.x=u,this.y=l,this.w=h}else if(4===arguments.length){var c=arguments[0],f=arguments[1],g=arguments[2],v=arguments[3],y=c.y-f.y,d=f.x-c.x,_=c.x*f.y-f.x*c.y,p=g.y-v.y,m=v.x-g.x,k=g.x*v.y-v.x*g.y;this.x=d*k-m*_,this.y=p*_-y*k,this.w=y*m-p*d}}}])}(),qn=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"area\",value:function(){return t.area(this.p0,this.p1,this.p2)}},{key:\"signedArea\",value:function(){return t.signedArea(this.p0,this.p1,this.p2)}},{key:\"interpolateZ\",value:function(e){if(null===e)throw new m(\"Supplied point is null.\");return t.interpolateZ(e,this.p0,this.p1,this.p2)}},{key:\"longestSideLength\",value:function(){return t.longestSideLength(this.p0,this.p1,this.p2)}},{key:\"isAcute\",value:function(){return t.isAcute(this.p0,this.p1,this.p2)}},{key:\"circumcentre\",value:function(){return t.circumcentre(this.p0,this.p1,this.p2)}},{key:\"area3D\",value:function(){return t.area3D(this.p0,this.p1,this.p2)}},{key:\"centroid\",value:function(){return t.centroid(this.p0,this.p1,this.p2)}},{key:\"inCentre\",value:function(){return t.inCentre(this.p0,this.p1,this.p2)}}],[{key:\"constructor_\",value:function(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}},{key:\"area\",value:function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)}},{key:\"signedArea\",value:function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2}},{key:\"det\",value:function(t,e,n,i){return t*i-e*n}},{key:\"interpolateZ\",value:function(t,e,n,i){var r=e.x,s=e.y,a=n.x-r,o=i.x-r,u=n.y-s,l=i.y-s,h=a*l-o*u,c=t.x-r,f=t.y-s,g=(l*c-o*f)/h,v=(-u*c+a*f)/h;return e.getZ()+g*(n.getZ()-e.getZ())+v*(i.getZ()-e.getZ())}},{key:\"longestSideLength\",value:function(t,e,n){var i=t.distance(e),r=e.distance(n),s=n.distance(t),a=i;return r>a&&(a=r),s>a&&(a=s),a}},{key:\"circumcentreDD\",value:function(t,e,n){var i=ut.valueOf(t.x).subtract(n.x),r=ut.valueOf(t.y).subtract(n.y),s=ut.valueOf(e.x).subtract(n.x),a=ut.valueOf(e.y).subtract(n.y),o=ut.determinant(i,r,s,a).multiply(2),u=i.sqr().add(r.sqr()),l=s.sqr().add(a.sqr()),h=ut.determinant(r,u,a,l),c=ut.determinant(i,u,s,l),f=ut.valueOf(n.x).subtract(h.divide(o)).doubleValue(),g=ut.valueOf(n.y).add(c.divide(o)).doubleValue();return new X(f,g)}},{key:\"isAcute\",value:function(t,e,n){return!!bn.isAcute(t,e,n)&&(!!bn.isAcute(e,n,t)&&!!bn.isAcute(n,t,e))}},{key:\"circumcentre\",value:function(e,n,i){var r=i.x,s=i.y,a=e.x-r,o=e.y-s,u=n.x-r,l=n.y-s,h=2*t.det(a,o,u,l),c=t.det(o,a*a+o*o,l,u*u+l*l),f=t.det(a,a*a+o*o,u,u*u+l*l);return new X(r-c/h,s+f/h)}},{key:\"perpendicularBisector\",value:function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new Gn(t.x+n/2,t.y+i/2,1),s=new Gn(t.x-i+n/2,t.y+n+i/2,1);return new Gn(r,s)}},{key:\"angleBisector\",value:function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),s=n.x-t.x,a=n.y-t.y;return new X(t.x+r*s,t.y+r*a)}},{key:\"area3D\",value:function(t,e,n){var i=e.x-t.x,r=e.y-t.y,s=e.getZ()-t.getZ(),a=n.x-t.x,o=n.y-t.y,u=n.getZ()-t.getZ(),l=r*u-s*o,h=s*a-i*u,c=i*o-r*a,f=l*l+h*h+c*c,g=Math.sqrt(f)/2;return g}},{key:\"centroid\",value:function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new X(i,r)}},{key:\"inCentre\",value:function(t,e,n){var i=e.distance(n),r=t.distance(n),s=t.distance(e),a=i+r+s,o=(i*t.x+r*e.x+s*n.x)/a,u=(i*t.y+r*e.y+s*n.y)/a;return new X(o,u)}}])}(),Yn=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"addRingSide\",value:function(t,e,n,i,r){if(0===e&&t.length<Xt.MINIMUM_VALID_SIZE)return null;var s=i,a=r;t.length>=Xt.MINIMUM_VALID_SIZE&&ct.isCCW(t)&&(s=r,a=i,n=$.opposite(n));var o=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(o,s,a)}},{key:\"addRingBothSides\",value:function(t,e){this.addRingSide(t,e,$.LEFT,H.EXTERIOR,H.INTERIOR),this.addRingSide(t,e,$.RIGHT,H.INTERIOR,H.EXTERIOR)}},{key:\"addPoint\",value:function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,H.EXTERIOR,H.INTERIOR)}},{key:\"addPolygon\",value:function(t){var e=this._distance,n=$.LEFT;this._distance<0&&(e=-this._distance,n=$.RIGHT);var i=t.getExteriorRing(),r=jt.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&r.length<3)return null;this.addRingSide(r,e,n,H.EXTERIOR,H.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),o=jt.removeRepeatedPoints(a.getCoordinates());this._distance>0&&this.isErodedCompletely(a,-this._distance)||this.addRingSide(o,e,$.opposite(n),H.INTERIOR,H.EXTERIOR)}}},{key:\"isTriangleErodedCompletely\",value:function(t,e){var n=new qn(t[0],t[1],t[2]),i=n.inCentre();return xt.pointToSegment(i,n.p0,n.p1)<Math.abs(e)}},{key:\"addLineString\",value:function(t){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var e=jt.removeRepeatedPoints(t.getCoordinates());if(jt.isRing(e)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(e,this._distance);else{var n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,H.EXTERIOR,H.INTERIOR)}}},{key:\"addCurve\",value:function(t,e,n){if(null===t||t.length<2)return null;var i=new xn(t,new Ae(0,H.BOUNDARY,e,n));this._curveList.add(i)}},{key:\"getCurves\",value:function(){return this.add(this._inputGeom),this._curveList}},{key:\"add\",value:function(t){if(t.isEmpty())return null;if(t instanceof Dt)this.addPolygon(t);else if(t instanceof wt)this.addLineString(t);else if(t instanceof bt)this.addPoint(t);else if(t instanceof zt)this.addCollection(t);else if(t instanceof se)this.addCollection(t);else if(t instanceof te)this.addCollection(t);else{if(!(t instanceof Yt))throw new W(t.getGeometryType());this.addCollection(t)}}},{key:\"isErodedCompletely\",value:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r}},{key:\"addCollection\",value:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}}}],[{key:\"constructor_\",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new yt;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n}}])}(),zn=function(){return s((function t(){n(this,t)}),[{key:\"locate\",value:function(t){}}])}(),Xn=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"next\",value:function(){if(this._atStart)return this._atStart=!1,t.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new j;var e=this._parent.getGeometryN(this._index++);return e instanceof Yt?(this._subcollectionIterator=new t(e),this._subcollectionIterator.next()):e}},{key:\"remove\",value:function(){throw new W(this.getClass().getName())}},{key:\"hasNext\",value:function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:\"interfaces_\",get:function(){return[dn]}}],[{key:\"constructor_\",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}},{key:\"isAtomic\",value:function(t){return!(t instanceof Yt)}}])}(),Bn=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"locate\",value:function(e){return t.locate(e,this._geom)}},{key:\"interfaces_\",get:function(){return[zn]}}],[{key:\"constructor_\",value:function(){this._geom=null;var t=arguments[0];this._geom=t}},{key:\"locatePointInPolygon\",value:function(e,n){if(n.isEmpty())return H.EXTERIOR;var i=n.getExteriorRing(),r=t.locatePointInRing(e,i);if(r!==H.INTERIOR)return r;for(var s=0;s<n.getNumInteriorRing();s++){var a=n.getInteriorRingN(s),o=t.locatePointInRing(e,a);if(o===H.BOUNDARY)return H.BOUNDARY;if(o===H.INTERIOR)return H.EXTERIOR}return H.INTERIOR}},{key:\"locatePointInRing\",value:function(t,e){return e.getEnvelopeInternal().intersects(t)?be.locateInRing(t,e.getCoordinates()):H.EXTERIOR}},{key:\"containsPointInPolygon\",value:function(e,n){return H.EXTERIOR!==t.locatePointInPolygon(e,n)}},{key:\"locateInGeometry\",value:function(e,n){if(n instanceof Dt)return t.locatePointInPolygon(e,n);if(n instanceof Yt)for(var i=new Xn(n);i.hasNext();){var r=i.next();if(r!==n){var s=t.locateInGeometry(e,r);if(s!==H.EXTERIOR)return s}}return H.EXTERIOR}},{key:\"isContained\",value:function(e,n){return H.EXTERIOR!==t.locate(e,n)}},{key:\"locate\",value:function(e,n){return n.isEmpty()?H.EXTERIOR:n.getEnvelopeInternal().intersects(e)?t.locateInGeometry(e,n):H.EXTERIOR}}])}(),Un=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"getNextCW\",value:function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)}},{key:\"propagateSideLabels\",value:function(t){for(var e=H.NONE,n=this.iterator();n.hasNext();){var i=n.next().getLabel();i.isArea(t)&&i.getLocation(t,$.LEFT)!==H.NONE&&(e=i.getLocation(t,$.LEFT))}if(e===H.NONE)return null;for(var r=e,s=this.iterator();s.hasNext();){var a=s.next(),o=a.getLabel();if(o.getLocation(t,$.ON)===H.NONE&&o.setLocation(t,$.ON,r),o.isArea(t)){var u=o.getLocation(t,$.LEFT),l=o.getLocation(t,$.RIGHT);if(l!==H.NONE){if(l!==r)throw new gt(\"side location conflict\",a.getCoordinate());u===H.NONE&&G.shouldNeverReachHere(\"found single null side (at \"+a.getCoordinate()+\")\"),r=u}else G.isTrue(o.getLocation(t,$.LEFT)===H.NONE,\"found single null side\"),o.setLocation(t,$.RIGHT,r),o.setLocation(t,$.LEFT,r)}}}},{key:\"getCoordinate\",value:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null}},{key:\"print\",value:function(t){mt.out.println(\"EdgeEndStar:   \"+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}}},{key:\"isAreaLabelsConsistent\",value:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:\"checkAreaLabelsConsistent\",value:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,$.LEFT);G.isTrue(i!==H.NONE,\"Found unlabelled area edge\");for(var r=i,s=this.iterator();s.hasNext();){var a=s.next().getLabel();G.isTrue(a.isArea(t),\"Found non-area edge\");var o=a.getLocation(t,$.LEFT),u=a.getLocation(t,$.RIGHT);if(o===u)return!1;if(u!==r)return!1;r=o}return!0}},{key:\"findIndex\",value:function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++){if(this._edgeList.get(e)===t)return e}return-1}},{key:\"iterator\",value:function(){return this.getEdges().iterator()}},{key:\"getEdges\",value:function(){return null===this._edgeList&&(this._edgeList=new yt(this._edgeMap.values())),this._edgeList}},{key:\"getLocation\",value:function(t,e,n){return this._ptInAreaLocation[t]===H.NONE&&(this._ptInAreaLocation[t]=Bn.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]}},{key:\"toString\",value:function(){var t=new st;t.append(\"EdgeEndStar:   \"+this.getCoordinate()),t.append(\"\\n\");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append(\"\\n\")}return t.toString()}},{key:\"computeEdgeEndLabels\",value:function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}}},{key:\"computeLabelling\",value:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next().getLabel(),r=0;r<2;r++)i.isLine(r)&&i.getLocation(r)===H.BOUNDARY&&(e[r]=!0);for(var s=this.iterator();s.hasNext();)for(var a=s.next(),o=a.getLabel(),u=0;u<2;u++)if(o.isAnyNull(u)){var l=H.NONE;if(e[u])l=H.EXTERIOR;else{var h=a.getCoordinate();l=this.getLocation(u,h,t)}o.setAllLocationsIfNull(u,l)}}},{key:\"getDegree\",value:function(){return this._edgeMap.size()}},{key:\"insertEdgeEnd\",value:function(t,e){this._edgeMap.put(t,e),this._edgeList=null}}],[{key:\"constructor_\",value:function(){this._edgeMap=new He,this._edgeList=null,this._ptInAreaLocation=[H.NONE,H.NONE]}}])}(),Vn=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"linkResultDirectedEdges\",value:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var r=this._resultAreaEdgeList.get(i),s=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;e=s,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new gt(\"no outgoing dirEdge found\",this.getCoordinate());G.isTrue(t.isInResult(),\"unable to link last incoming dirEdge\"),e.setNext(t)}}},{key:\"insert\",value:function(t){var e=t;this.insertEdgeEnd(e,e)}},{key:\"getRightmostEdge\",value:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),s=i.getQuadrant();return je.isNorthern(r)&&je.isNorthern(s)?n:je.isNorthern(r)||je.isNorthern(s)?0!==n.getDy()?n:0!==i.getDy()?i:(G.shouldNeverReachHere(\"found two horizontal edges incident on node\"),null):i}},{key:\"print\",value:function(t){mt.out.println(\"DirectedEdgeStar: \"+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print(\"out \"),n.print(t),t.println(),t.print(\"in \"),n.getSym().print(t),t.println()}}},{key:\"getResultAreaEdges\",value:function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new yt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList}},{key:\"updateLabelling\",value:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}}},{key:\"linkAllDirectedEdges\",value:function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var i=this._edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)}},{key:\"computeDepths\",value:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth($.LEFT),i=t.getDepth($.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new gt(\"depth mismatch at \"+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[1],a=arguments[2],o=arguments[0];o<s;o++){var u=this._edgeList.get(o);u.setEdgeDepths($.RIGHT,a),a=u.getDepth($.LEFT)}return a}}},{key:\"mergeSymLabels\",value:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}}},{key:\"linkMinimalDirectedEdges\",value:function(t){for(var e=null,n=null,i=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var s=this._resultAreaEdgeList.get(r),a=s.getSym();switch(null===e&&s.getEdgeRing()===t&&(e=s),i){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;n.setNextMin(s),i=this._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(G.isTrue(null!==e,\"found null for first outgoing dirEdge\"),G.isTrue(e.getEdgeRing()===t,\"unable to link last incoming dirEdge\"),n.setNextMin(e))}},{key:\"getOutgoingDegree\",value:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){e.next().isInResult()&&t++}return t}if(1===arguments.length){for(var n=arguments[0],i=0,r=this.iterator();r.hasNext();){r.next().getEdgeRing()===n&&i++}return i}}},{key:\"getLabel\",value:function(){return this._label}},{key:\"findCoveredLineEdges\",value:function(){for(var t=H.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=H.INTERIOR;break}if(i.isInResult()){t=H.EXTERIOR;break}}}if(t===H.NONE)return null;for(var r=t,s=this.iterator();s.hasNext();){var a=s.next(),o=a.getSym();a.isLineEdge()?a.getEdge().setCovered(r===H.INTERIOR):(a.isInResult()&&(r=H.EXTERIOR),o.isInResult()&&(r=H.INTERIOR))}}},{key:\"computeLabelling\",value:function(t){f(i,\"computeLabelling\",this,1).call(this,t),this._label=new Ae(H.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),r=0;r<2;r++){var s=n.getLocation(r);s!==H.INTERIOR&&s!==H.BOUNDARY||this._label.setLocation(r,H.INTERIOR)}}}],[{key:\"constructor_\",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])}(Un),Hn=function(t){function i(){return n(this,i),e(this,i)}return l(i,t),s(i,[{key:\"createNode\",value:function(t){return new qe(t,new Vn)}}])}(Je),Zn=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"compareTo\",value:function(e){var n=e;return t.compareOriented(this._pts,this._orientation,n._pts,n._orientation)}},{key:\"interfaces_\",get:function(){return[x]}}],[{key:\"constructor_\",value:function(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)}},{key:\"orientation\",value:function(t){return 1===jt.increasingDirection(t)}},{key:\"compareOriented\",value:function(t,e,n,i){for(var r=e?1:-1,s=i?1:-1,a=e?t.length:-1,o=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var h=t[u].compareTo(n[l]);if(0!==h)return h;var c=(u+=r)===a,f=(l+=s)===o;if(c&&!f)return-1;if(!c&&f)return 1;if(c&&f)return 0}}}])}(),jn=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"print\",value:function(t){t.print(\"MULTILINESTRING ( \");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(\",\"),t.print(\"(\");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(\",\"),t.print(i[r].x+\" \"+i[r].y);t.println(\")\")}t.print(\")  \")}},{key:\"addAll\",value:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())}},{key:\"findEdgeIndex\",value:function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1}},{key:\"iterator\",value:function(){return this._edges.iterator()}},{key:\"getEdges\",value:function(){return this._edges}},{key:\"get\",value:function(t){return this._edges.get(t)}},{key:\"findEqualEdge\",value:function(t){var e=new Zn(t.getCoordinates());return this._ocaMap.get(e)}},{key:\"add\",value:function(t){this._edges.add(t);var e=new Zn(t.getCoordinates());this._ocaMap.put(e,t)}}],[{key:\"constructor_\",value:function(){this._edges=new yt,this._ocaMap=new He}}])}(),Wn=function(){return s((function t(){n(this,t)}),[{key:\"processIntersections\",value:function(t,e,n,i){}},{key:\"isDone\",value:function(){}}])}(),Kn=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"isTrivialIntersection\",value:function(e,n,i,r){if(e===i&&1===this._li.getIntersectionNum()){if(t.isAdjacentSegments(n,r))return!0;if(e.isClosed()){var s=e.size()-1;if(0===n&&r===s||0===r&&n===s)return!0}}return!1}},{key:\"getProperIntersectionPoint\",value:function(){return this._properIntersectionPoint}},{key:\"hasProperInteriorIntersection\",value:function(){return this._hasProperInterior}},{key:\"getLineIntersector\",value:function(){return this._li}},{key:\"hasProperIntersection\",value:function(){return this._hasProper}},{key:\"processIntersections\",value:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],a=n.getCoordinates()[i],o=n.getCoordinates()[i+1];this._li.computeIntersection(r,s,a,o),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:\"hasIntersection\",value:function(){return this._hasIntersection}},{key:\"isDone\",value:function(){return!1}},{key:\"hasInteriorIntersection\",value:function(){return this._hasInterior}},{key:\"interfaces_\",get:function(){return[Wn]}}],[{key:\"constructor_\",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}},{key:\"isAdjacentSegments\",value:function(t,e){return 1===Math.abs(t-e)}}])}(),Jn=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"getSegmentIndex\",value:function(){return this.segmentIndex}},{key:\"getCoordinate\",value:function(){return this.coord}},{key:\"print\",value:function(t){t.print(this.coord),t.print(\" seg # = \"+this.segmentIndex),t.println(\" dist = \"+this.dist)}},{key:\"compareTo\",value:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)}},{key:\"isEndPoint\",value:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t}},{key:\"toString\",value:function(){return this.coord+\" seg # = \"+this.segmentIndex+\" dist = \"+this.dist}},{key:\"getDistance\",value:function(){return this.dist}},{key:\"compare\",value:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0}},{key:\"interfaces_\",get:function(){return[x]}}],[{key:\"constructor_\",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new X(t),this.segmentIndex=e,this.dist=n}}])}(),Qn=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"print\",value:function(t){t.println(\"Intersections:\");for(var e=this.iterator();e.hasNext();){e.next().print(t)}}},{key:\"iterator\",value:function(){return this._nodeMap.values().iterator()}},{key:\"addSplitEdges\",value:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}}},{key:\"addEndpoints\",value:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)}},{key:\"createSplitEdge\",value:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var s=new Array(n).fill(null),a=0;s[a++]=new X(t.coord);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)s[a++]=this.edge.pts[o];return r&&(s[a]=e.coord),new ri(s,new Ae(this.edge._label))}},{key:\"add\",value:function(t,e,n){var i=new Jn(t,e,n),r=this._nodeMap.get(i);return null!==r?r:(this._nodeMap.put(i,i),i)}},{key:\"isIntersection\",value:function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1}}],[{key:\"constructor_\",value:function(){this._nodeMap=new He,this.edge=null;var t=arguments[0];this.edge=t}}])}(),$n=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"isIntersects\",value:function(){return!this.isDisjoint()}},{key:\"isCovers\",value:function(){return(t.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])||t.isTrue(this._matrix[H.INTERIOR][H.BOUNDARY])||t.isTrue(this._matrix[H.BOUNDARY][H.INTERIOR])||t.isTrue(this._matrix[H.BOUNDARY][H.BOUNDARY]))&&this._matrix[H.EXTERIOR][H.INTERIOR]===Lt.FALSE&&this._matrix[H.EXTERIOR][H.BOUNDARY]===Lt.FALSE}},{key:\"isCoveredBy\",value:function(){return(t.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])||t.isTrue(this._matrix[H.INTERIOR][H.BOUNDARY])||t.isTrue(this._matrix[H.BOUNDARY][H.INTERIOR])||t.isTrue(this._matrix[H.BOUNDARY][H.BOUNDARY]))&&this._matrix[H.INTERIOR][H.EXTERIOR]===Lt.FALSE&&this._matrix[H.BOUNDARY][H.EXTERIOR]===Lt.FALSE}},{key:\"set\",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this._matrix[n][i]=Lt.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],a=arguments[2];this._matrix[r][s]=a}}},{key:\"isContains\",value:function(){return t.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&this._matrix[H.EXTERIOR][H.INTERIOR]===Lt.FALSE&&this._matrix[H.EXTERIOR][H.BOUNDARY]===Lt.FALSE}},{key:\"setAtLeast\",value:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,Lt.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],s=arguments[1],a=arguments[2];this._matrix[r][s]<a&&(this._matrix[r][s]=a)}}},{key:\"setAtLeastIfValid\",value:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)}},{key:\"isWithin\",value:function(){return t.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&this._matrix[H.INTERIOR][H.EXTERIOR]===Lt.FALSE&&this._matrix[H.BOUNDARY][H.EXTERIOR]===Lt.FALSE}},{key:\"isTouches\",value:function(e,n){return e>n?this.isTouches(n,e):(e===Lt.A&&n===Lt.A||e===Lt.L&&n===Lt.L||e===Lt.L&&n===Lt.A||e===Lt.P&&n===Lt.A||e===Lt.P&&n===Lt.L)&&(this._matrix[H.INTERIOR][H.INTERIOR]===Lt.FALSE&&(t.isTrue(this._matrix[H.INTERIOR][H.BOUNDARY])||t.isTrue(this._matrix[H.BOUNDARY][H.INTERIOR])||t.isTrue(this._matrix[H.BOUNDARY][H.BOUNDARY])))}},{key:\"isOverlaps\",value:function(e,n){return e===Lt.P&&n===Lt.P||e===Lt.A&&n===Lt.A?t.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&t.isTrue(this._matrix[H.INTERIOR][H.EXTERIOR])&&t.isTrue(this._matrix[H.EXTERIOR][H.INTERIOR]):e===Lt.L&&n===Lt.L&&(1===this._matrix[H.INTERIOR][H.INTERIOR]&&t.isTrue(this._matrix[H.INTERIOR][H.EXTERIOR])&&t.isTrue(this._matrix[H.EXTERIOR][H.INTERIOR]))}},{key:\"isEquals\",value:function(e,n){return e===n&&(t.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&this._matrix[H.INTERIOR][H.EXTERIOR]===Lt.FALSE&&this._matrix[H.BOUNDARY][H.EXTERIOR]===Lt.FALSE&&this._matrix[H.EXTERIOR][H.INTERIOR]===Lt.FALSE&&this._matrix[H.EXTERIOR][H.BOUNDARY]===Lt.FALSE)}},{key:\"toString\",value:function(){for(var t=new Jt(\"123456789\"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,Lt.toDimensionSymbol(this._matrix[e][n]));return t.toString()}},{key:\"setAll\",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this._matrix[e][n]=t}},{key:\"get\",value:function(t,e){return this._matrix[t][e]}},{key:\"transpose\",value:function(){var t=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=t,t=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=t,t=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=t,this}},{key:\"matches\",value:function(e){if(9!==e.length)throw new m(\"Should be length 9: \"+e);for(var n=0;n<3;n++)for(var i=0;i<3;i++)if(!t.matches(this._matrix[n][i],e.charAt(3*n+i)))return!1;return!0}},{key:\"add\",value:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))}},{key:\"isDisjoint\",value:function(){return this._matrix[H.INTERIOR][H.INTERIOR]===Lt.FALSE&&this._matrix[H.INTERIOR][H.BOUNDARY]===Lt.FALSE&&this._matrix[H.BOUNDARY][H.INTERIOR]===Lt.FALSE&&this._matrix[H.BOUNDARY][H.BOUNDARY]===Lt.FALSE}},{key:\"isCrosses\",value:function(e,n){return e===Lt.P&&n===Lt.L||e===Lt.P&&n===Lt.A||e===Lt.L&&n===Lt.A?t.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&t.isTrue(this._matrix[H.INTERIOR][H.EXTERIOR]):e===Lt.L&&n===Lt.P||e===Lt.A&&n===Lt.P||e===Lt.A&&n===Lt.L?t.isTrue(this._matrix[H.INTERIOR][H.INTERIOR])&&t.isTrue(this._matrix[H.EXTERIOR][H.INTERIOR]):e===Lt.L&&n===Lt.L&&0===this._matrix[H.INTERIOR][H.INTERIOR]}},{key:\"interfaces_\",get:function(){return[I]}}],[{key:\"constructor_\",value:function(){if(this._matrix=null,0===arguments.length)this._matrix=Array(3).fill().map((function(){return Array(3)})),this.setAll(Lt.FALSE);else if(1===arguments.length)if(\"string\"==typeof arguments[0]){var e=arguments[0];t.constructor_.call(this),this.set(e)}else if(arguments[0]instanceof t){var n=arguments[0];t.constructor_.call(this),this._matrix[H.INTERIOR][H.INTERIOR]=n._matrix[H.INTERIOR][H.INTERIOR],this._matrix[H.INTERIOR][H.BOUNDARY]=n._matrix[H.INTERIOR][H.BOUNDARY],this._matrix[H.INTERIOR][H.EXTERIOR]=n._matrix[H.INTERIOR][H.EXTERIOR],this._matrix[H.BOUNDARY][H.INTERIOR]=n._matrix[H.BOUNDARY][H.INTERIOR],this._matrix[H.BOUNDARY][H.BOUNDARY]=n._matrix[H.BOUNDARY][H.BOUNDARY],this._matrix[H.BOUNDARY][H.EXTERIOR]=n._matrix[H.BOUNDARY][H.EXTERIOR],this._matrix[H.EXTERIOR][H.INTERIOR]=n._matrix[H.EXTERIOR][H.INTERIOR],this._matrix[H.EXTERIOR][H.BOUNDARY]=n._matrix[H.EXTERIOR][H.BOUNDARY],this._matrix[H.EXTERIOR][H.EXTERIOR]=n._matrix[H.EXTERIOR][H.EXTERIOR]}}},{key:\"matches\",value:function(){if(Number.isInteger(arguments[0])&&\"string\"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return n===Lt.SYM_DONTCARE||(n===Lt.SYM_TRUE&&(e>=0||e===Lt.TRUE)||(n===Lt.SYM_FALSE&&e===Lt.FALSE||(n===Lt.SYM_P&&e===Lt.P||(n===Lt.SYM_L&&e===Lt.L||n===Lt.SYM_A&&e===Lt.A))))}if(\"string\"==typeof arguments[0]&&\"string\"==typeof arguments[1]){var i=arguments[1];return new t(arguments[0]).matches(i)}}},{key:\"isTrue\",value:function(t){return t>=0||t===Lt.TRUE}}])}(),ti=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"size\",value:function(){return this._size}},{key:\"addAll\",value:function(t){return null===t||0===t.length?null:(this.ensureCapacity(this._size+t.length),mt.arraycopy(t,0,this._data,this._size,t.length),void(this._size+=t.length))}},{key:\"ensureCapacity\",value:function(t){if(t<=this._data.length)return null;var e=Math.max(t,2*this._data.length);this._data=At.copyOf(this._data,e)}},{key:\"toArray\",value:function(){var t=new Array(this._size).fill(null);return mt.arraycopy(this._data,0,t,0,this._size),t}},{key:\"add\",value:function(t){this.ensureCapacity(this._size+1),this._data[this._size]=t,++this._size}}],[{key:\"constructor_\",value:function(){if(this._data=null,this._size=0,0===arguments.length)t.constructor_.call(this,10);else if(1===arguments.length){var e=arguments[0];this._data=new Array(e).fill(null)}}}])}(),ei=function(){function t(){n(this,t)}return s(t,[{key:\"getChainStartIndices\",value:function(t){var e=0,n=new ti(Math.trunc(t.length/2));n.add(e);do{var i=this.findChainEnd(t,e);n.add(i),e=i}while(e<t.length-1);return n.toArray()}},{key:\"findChainEnd\",value:function(t,e){for(var n=je.quadrant(t[e],t[e+1]),i=e+1;i<t.length;){if(je.quadrant(t[i-1],t[i])!==n)break;i++}return i-1}},{key:\"OLDgetChainStartIndices\",value:function(e){var n=0,i=new yt;i.add(n);do{var r=this.findChainEnd(e,n);i.add(r),n=r}while(n<e.length-1);return t.toIntArray(i)}}],[{key:\"toIntArray\",value:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e}}])}(),ni=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"getCoordinates\",value:function(){return this.pts}},{key:\"getMaxX\",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n}},{key:\"getMinX\",value:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n}},{key:\"computeIntersectsForChain\",value:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],s=arguments[1],a=arguments[2],o=arguments[3],u=arguments[4],l=arguments[5];if(s-r==1&&u-o==1)return l.addIntersections(this.e,r,a.e,o),null;if(!this.overlaps(r,s,a,o,u))return null;var h=Math.trunc((r+s)/2),c=Math.trunc((o+u)/2);r<h&&(o<c&&this.computeIntersectsForChain(r,h,a,o,c,l),c<u&&this.computeIntersectsForChain(r,h,a,c,u,l)),h<s&&(o<c&&this.computeIntersectsForChain(h,s,a,o,c,l),c<u&&this.computeIntersectsForChain(h,s,a,c,u,l))}}},{key:\"overlaps\",value:function(t,e,n,i,r){return U.intersects(this.pts[t],this.pts[e],n.pts[i],n.pts[r])}},{key:\"getStartIndexes\",value:function(){return this.startIndex}},{key:\"computeIntersects\",value:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)}}],[{key:\"constructor_\",value:function(){this.e=null,this.pts=null,this.startIndex=null;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new ei;this.startIndex=e.getChainStartIndices(this.pts)}}])}(),ii=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"getDepth\",value:function(t,e){return this._depth[t][e]}},{key:\"setDepth\",value:function(t,e,n){this._depth[t][e]=n}},{key:\"isNull\",value:function(){if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(this._depth[e][n]!==t.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this._depth[i][1]===t.NULL_VALUE}if(2===arguments.length){var r=arguments[0],s=arguments[1];return this._depth[r][s]===t.NULL_VALUE}}},{key:\"normalize\",value:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this._depth[t][n]>e&&(i=1),this._depth[t][n]=i}}}},{key:\"getDelta\",value:function(t){return this._depth[t][$.RIGHT]-this._depth[t][$.LEFT]}},{key:\"getLocation\",value:function(t,e){return this._depth[t][e]<=0?H.EXTERIOR:H.INTERIOR}},{key:\"toString\",value:function(){return\"A: \"+this._depth[0][1]+\",\"+this._depth[0][2]+\" B: \"+this._depth[1][1]+\",\"+this._depth[1][2]}},{key:\"add\",value:function(){if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var i=1;i<3;i++){var r=e.getLocation(n,i);r!==H.EXTERIOR&&r!==H.INTERIOR||(this.isNull(n,i)?this._depth[n][i]=t.depthAtLocation(r):this._depth[n][i]+=t.depthAtLocation(r))}else if(3===arguments.length){var s=arguments[0],a=arguments[1];arguments[2]===H.INTERIOR&&this._depth[s][a]++}}}],[{key:\"constructor_\",value:function(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE}},{key:\"depthAtLocation\",value:function(e){return e===H.EXTERIOR?0:e===H.INTERIOR?1:t.NULL_VALUE}}])}();ii.NULL_VALUE=-1;var ri=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"getDepth\",value:function(){return this._depth}},{key:\"getCollapsedEdge\",value:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new i(t,Ae.toLineLabel(this._label))}},{key:\"isIsolated\",value:function(){return this._isIsolated}},{key:\"getCoordinates\",value:function(){return this.pts}},{key:\"setIsolated\",value:function(t){this._isIsolated=t}},{key:\"setName\",value:function(t){this._name=t}},{key:\"equals\",value:function(t){if(!(t instanceof i))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,s=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(e.pts[a])||(n=!1),this.pts[a].equals2D(e.pts[--s])||(r=!1),!n&&!r)return!1;return!0}},{key:\"getCoordinate\",value:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}}},{key:\"print\",value:function(t){t.print(\"edge \"+this._name+\": \"),t.print(\"LINESTRING (\");for(var e=0;e<this.pts.length;e++)e>0&&t.print(\",\"),t.print(this.pts[e].x+\" \"+this.pts[e].y);t.print(\")  \"+this._label+\" \"+this._depthDelta)}},{key:\"computeIM\",value:function(t){i.updateIM(this._label,t)}},{key:\"isCollapsed\",value:function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))}},{key:\"isClosed\",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:\"getMaximumSegmentIndex\",value:function(){return this.pts.length-1}},{key:\"getDepthDelta\",value:function(){return this._depthDelta}},{key:\"getNumPoints\",value:function(){return this.pts.length}},{key:\"printReverse\",value:function(t){t.print(\"edge \"+this._name+\": \");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+\" \");t.println(\"\")}},{key:\"getMonotoneChainEdge\",value:function(){return null===this._mce&&(this._mce=new ni(this)),this._mce}},{key:\"getEnvelope\",value:function(){if(null===this._env){this._env=new U;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env}},{key:\"addIntersection\",value:function(t,e,n,i){var r=new X(t.getIntersection(i)),s=e,a=t.getEdgeDistance(n,i),o=s+1;if(o<this.pts.length){var u=this.pts[o];r.equals2D(u)&&(s=o,a=0)}this.eiList.add(r,s,a)}},{key:\"toString\",value:function(){var t=new Jt;t.append(\"edge \"+this._name+\": \"),t.append(\"LINESTRING (\");for(var e=0;e<this.pts.length;e++)e>0&&t.append(\",\"),t.append(this.pts[e].x+\" \"+this.pts[e].y);return t.append(\")  \"+this._label+\" \"+this._depthDelta),t.toString()}},{key:\"isPointwiseEqual\",value:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0}},{key:\"setDepthDelta\",value:function(t){this._depthDelta=t}},{key:\"getEdgeIntersectionList\",value:function(){return this.eiList}},{key:\"addIntersections\",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)}}],[{key:\"constructor_\",value:function(){if(this.pts=null,this._env=null,this.eiList=new Qn(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new ii,this._depthDelta=0,1===arguments.length){var t=arguments[0];i.constructor_.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this._label=n}}},{key:\"updateIM\",value:function(){if(!(2===arguments.length&&arguments[1]instanceof $n&&arguments[0]instanceof Ae))return f(i,\"updateIM\",this).apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,$.ON),t.getLocation(1,$.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,$.LEFT),t.getLocation(1,$.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,$.RIGHT),t.getLocation(1,$.RIGHT),2))}}])}(Ge),si=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"setWorkingPrecisionModel\",value:function(t){this._workingPrecisionModel=t}},{key:\"insertUniqueEdge\",value:function(e){var n=this._edgeList.findEqualEdge(e);if(null!==n){var i=n.getLabel(),r=e.getLabel();n.isPointwiseEqual(e)||(r=new Ae(e.getLabel())).flip(),i.merge(r);var s=t.depthDelta(r),a=n.getDepthDelta()+s;n.setDepthDelta(a)}else this._edgeList.add(e),e.setDepthDelta(t.depthDelta(e.getLabel()))}},{key:\"buildSubgraphs\",value:function(t,e){for(var n=new yt,i=t.iterator();i.hasNext();){var r=i.next(),s=r.getRightmostCoordinate(),a=new Pn(n).getDepth(s);r.computeDepth(a),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}}},{key:\"createSubgraphs\",value:function(t){for(var e=new yt,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new _t;r.create(i),e.add(r)}}return an.sort(e,an.reverseOrder()),e}},{key:\"createEmptyResultGeometry\",value:function(){return this._geomFact.createPolygon()}},{key:\"getNoder\",value:function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Cn,n=new we;return n.setPrecisionModel(t),e.setSegmentIntersector(new Kn(n)),e}},{key:\"buffer\",value:function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var i=new An(n,this._bufParams),r=new Yn(t,e,i).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,n),this._graph=new Qe(new Hn),this._graph.addEdges(this._edgeList.getEdges());var s=this.createSubgraphs(this._graph),a=new $e(this._geomFact);this.buildSubgraphs(s,a);var o=a.getPolygons();return o.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(o)}},{key:\"computeNodedEdges\",value:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),s=r.getCoordinates();if(2!==s.length||!s[0].equals2D(s[1])){var a=r.getData(),o=new ri(r.getCoordinates(),new Ae(a));this.insertUniqueEdge(o)}}}},{key:\"setNoder\",value:function(t){this._workingNoder=t}}],[{key:\"constructor_\",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new jn;var t=arguments[0];this._bufParams=t}},{key:\"depthDelta\",value:function(t){var e=t.getLocation(0,$.LEFT),n=t.getLocation(0,$.RIGHT);return e===H.INTERIOR&&n===H.EXTERIOR?1:e===H.EXTERIOR&&n===H.INTERIOR?-1:0}},{key:\"convertSegStrings\",value:function(t){for(var e=new ae,n=new yt;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)}}])}(),ai=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"rescale\",value:function(){if(rt(arguments[0],Z))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],i=0;i<n.length;i++)n[i].x=n[i].x/this._scaleFactor+this._offsetX,n[i].y=n[i].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&mt.out.println(n)}}},{key:\"scale\",value:function(){if(rt(arguments[0],Z)){for(var t=arguments[0],e=new yt(t.size()),n=t.iterator();n.hasNext();){var i=n.next();e.add(new xn(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],s=new Array(r.length).fill(null),a=0;a<r.length;a++)s[a]=new X(Math.round((r[a].x-this._offsetX)*this._scaleFactor),Math.round((r[a].y-this._offsetY)*this._scaleFactor),r[a].getZ());return jt.removeRepeatedPoints(s)}}},{key:\"isIntegerPrecision\",value:function(){return 1===this._scaleFactor}},{key:\"getNodedSubstrings\",value:function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t}},{key:\"computeNodes\",value:function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)}},{key:\"interfaces_\",get:function(){return[Sn]}}],[{key:\"constructor_\",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var e=arguments[0],n=arguments[1];t.constructor_.call(this,e,n,0,0)}else if(4===arguments.length){var i=arguments[0],r=arguments[1];this._noder=i,this._scaleFactor=r,this._isScaled=!this.isIntegerPrecision()}}}])}(),oi=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"checkEndPtVertexIntersections\",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],i=arguments[1].iterator();i.hasNext();)for(var r=i.next().getCoordinates(),s=1;s<r.length-1;s++)if(r[s].equals(n))throw new D(\"found endpt/interior pt intersection at index \"+s+\" :pt \"+n)}},{key:\"checkInteriorIntersections\",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],s=arguments[1],a=r.getCoordinates(),o=s.getCoordinates(),u=0;u<a.length-1;u++)for(var l=0;l<o.length-1;l++)this.checkInteriorIntersections(r,u,s,l);else if(4===arguments.length){var h=arguments[0],c=arguments[1],f=arguments[2],g=arguments[3];if(h===f&&c===g)return null;var v=h.getCoordinates()[c],y=h.getCoordinates()[c+1],d=f.getCoordinates()[g],_=f.getCoordinates()[g+1];if(this._li.computeIntersection(v,y,d,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,v,y)||this.hasInteriorIntersection(this._li,d,_)))throw new D(\"found non-noded intersection at \"+v+\"-\"+y+\" and \"+d+\"-\"+_)}}},{key:\"checkValid\",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:\"checkCollapses\",value:function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),i=0;i<n.length-2;i++)this.checkCollapse(n[i],n[i+1],n[i+2])}},{key:\"hasInteriorIntersection\",value:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1}},{key:\"checkCollapse\",value:function(e,n,i){if(e.equals(i))throw new D(\"found non-noded collapse at \"+t.fact.createLineString([e,n,i]))}}],[{key:\"constructor_\",value:function(){this._li=new we,this._segStrings=null;var t=arguments[0];this._segStrings=t}}])}();oi.fact=new ae;var ui=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"intersectsScaled\",value:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),s=Math.max(t.y,e.y),a=this._maxx<n||this._minx>i||this._maxy<r||this._miny>s;if(a)return!1;var o=this.intersectsToleranceSquare(t,e);return G.isTrue(!(a&&o),\"Found bad envelope test\"),o}},{key:\"initCorners\",value:function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new X(this._maxx,this._maxy),this._corner[1]=new X(this._minx,this._maxy),this._corner[2]=new X(this._minx,this._miny),this._corner[3]=new X(this._maxx,this._miny)}},{key:\"intersects\",value:function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:\"scale\",value:function(t){return Math.round(t*this._scaleFactor)}},{key:\"getCoordinate\",value:function(){return this._originalPt}},{key:\"copyScaled\",value:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)}},{key:\"getSafeEnvelope\",value:function(){if(null===this._safeEnv){var e=t.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new U(this._originalPt.x-e,this._originalPt.x+e,this._originalPt.y-e,this._originalPt.y+e)}return this._safeEnv}},{key:\"intersectsPixelClosure\",value:function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:\"intersectsToleranceSquare\",value:function(t,e){var n=!1,i=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!n||!i)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))}},{key:\"addSnappedNode\",value:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)}}],[{key:\"constructor_\",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new m(\"Scale factor must be non-zero\");1!==e&&(this._pt=new X(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new X,this._p1Scaled=new X),this.initCorners(this._pt)}}])}();ui.SAFE_ENV_EXPANSION_FACTOR=.75;var li=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"select\",value:function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[1];arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment)}}}],[{key:\"constructor_\",value:function(){this.selectedSegment=new In}}])}(),hi=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"snap\",value:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],i=arguments[1],r=arguments[2],a=e.getSafeEnvelope(),o=new ci(e,i,r);return this._index.query(a,new(function(){return s((function t(){n(this,t)}),[{key:\"interfaces_\",get:function(){return[ln]}},{key:\"visitItem\",value:function(t){t.select(a,o)}}])}())),o.isNodeAdded()}}}],[{key:\"constructor_\",value:function(){this._index=null;var t=arguments[0];this._index=t}}])}(),ci=function(t){function i(){var t;return n(this,i),t=e(this,i),i.constructor_.apply(t,arguments),t}return l(i,t),s(i,[{key:\"isNodeAdded\",value:function(){return this._isNodeAdded}},{key:\"select\",value:function(){if(!(2===arguments.length&&Number.isInteger(arguments[1])&&arguments[0]instanceof Nn))return f(i,\"select\",this,1).apply(this,arguments);var t=arguments[1],e=arguments[0].getContext();if(this._parentEdge===e&&(t===this._hotPixelVertexIndex||t+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(e,t)}}],[{key:\"constructor_\",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}}])}(li);hi.HotPixelSnapAction=ci;var fi=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"processIntersections\",value:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],s=t.getCoordinates()[e+1],a=n.getCoordinates()[i],o=n.getCoordinates()[i+1];if(this._li.computeIntersection(r,s,a,o),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,i,1)}}},{key:\"isDone\",value:function(){return!1}},{key:\"getInteriorIntersections\",value:function(){return this._interiorIntersections}},{key:\"interfaces_\",get:function(){return[Wn]}}],[{key:\"constructor_\",value:function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new yt}}])}(),gi=function(){return s((function t(){n(this,t),t.constructor_.apply(this,arguments)}),[{key:\"checkCorrectness\",value:function(t){var e=xn.getNodedSubstrings(t),n=new oi(e);try{n.checkValid()}catch(t){if(!(t instanceof p))throw t;t.printStackTrace()}}},{key:\"getNodedSubstrings\",value:function(){return xn.getNodedSubstrings(this._nodedSegStrings)}},{key:\"snapRound\",value:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)}},{key:\"findInteriorIntersections\",value:function(t,e){var n=new fi(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()}},{key:\"computeVertexSnaps\",value:function(){if(rt(arguments[0],Z))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof xn)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var s=new ui(i[r],this._scaleFactor,this._li);this._pointSnapper.snap(s,n,r)&&n.addIntersection(i[r],r)}}},{key:\"computeNodes\",value:function(t){this._nodedSegStrings=t,this._noder=new Cn,this._pointSnapper=new hi(this._noder.getIndex()),this.snapRound(t,this._li)}},{key:\"computeIntersectionSnaps\",value:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new ui(n,this._scaleFactor,this._li);this._pointSnapper.snap(i)}}},{key:\"interfaces_\",get:function(){return[Sn]}}],[{key:\"constructor_\",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new we,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}}])}(),vi=function(){function t(){n(this,t),t.constructor_.apply(this,arguments)}return s(t,[{key:\"bufferFixedPrecision\",value:function(t){var e=new ai(new gi(new ie(1)),t.getScale()),n=new si(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)}},{key:\"bufferReducedPrecision\",value:function(){if(0===arguments.length){for(var e=t.MAX_PRECISION_DIGITS;e>=0;e--){try{this.bufferReducedPrecision(e)}catch(t){if(!(t instanceof gt))throw t;this._saveException=t}if(null!==this._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],i=t.precisionScaleFactor(this._argGeom,this._distance,n),r=new ie(i);this.bufferFixedPrecision(r)}}},{key:\"computeGeometry\",value:function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===ie.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()}},{key:\"setQuadrantSegments\",value:function(t){this._bufParams.setQuadrantSegments(t)}},{key:\"bufferOriginalPrecision\",value:function(){try{var t=new si(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof D))throw t;this._saveException=t}}},{key:\"getResultGeometry\",value:function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry}},{key:\"setEndCapStyle\",value:function(t){this._bufParams.setEndCapStyle(t)}}],[{key:\"constructor_\",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new _,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}}},{key:\"bufferOp\",value:function(){if(2===arguments.length){var e=arguments[1];return new t(arguments[0]).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof V&&\"number\"==typeof arguments[1]){var n=arguments[1],i=arguments[2],r=new t(arguments[0]);return r.setQuadrantSegments(i),r.getResultGeometry(n)}if(arguments[2]instanceof _&&arguments[0]instanceof V&&\"number\"==typeof arguments[1]){var s=arguments[1];return new t(arguments[0],arguments[2]).getResultGeometry(s)}}else if(4===arguments.length){var a=arguments[1],o=arguments[2],u=arguments[3],l=new t(arguments[0]);return l.setQuadrantSegments(o),l.setEndCapStyle(u),l.getResultGeometry(a)}}},{key:\"precisionScaleFactor\",value:function(t,e,n){var i=t.getEnvelopeInternal(),r=kt.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),s=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,s)}}])}();vi.CAP_ROUND=_.CAP_ROUND,vi.CAP_BUTT=_.CAP_FLAT,vi.CAP_FLAT=_.CAP_FLAT,vi.CAP_SQUARE=_.CAP_SQUARE,vi.MAX_PRECISION_DIGITS=12;var yi=[\"Point\",\"MultiPoint\",\"LineString\",\"MultiLineString\",\"Polygon\",\"MultiPolygon\"],di=function(){return s((function t(e){n(this,t),this.geometryFactory=e||new ae}),[{key:\"read\",value:function(t){var e,n=(e=\"string\"==typeof t?JSON.parse(t):t).type;if(!_i[n])throw new Error(\"Unknown GeoJSON type: \"+e.type);return-1!==yi.indexOf(n)?_i[n].call(this,e.coordinates):\"GeometryCollection\"===n?_i[n].call(this,e.geometries):_i[n].call(this,e)}},{key:\"write\",value:function(t){var e=t.getGeometryType();if(!pi[e])throw new Error(\"Geometry is not supported\");return pi[e].call(this,t)}}])}(),_i={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!_i[i])throw new Error(\"Unknown GeoJSON type: \"+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=_i.bbox.call(this,t.bbox)),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.call(this,t.bbox)),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(i(X,g(r)))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new X(t[0],t[1]),new X(t[2],t[1]),new X(t[2],t[3]),new X(t[0],t[3]),new X(t[0],t[1])])},Point:function(t){var e=i(X,g(t));return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_i.Point.call(this,t[n]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=_i.coordinates.call(this,t);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(_i.LineString.call(this,t[n]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=_i.coordinates.call(this,t[0]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var s=t[r],a=_i.coordinates.call(this,s),o=this.geometryFactory.createLinearRing(a);i.push(o)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(_i.Polygon.call(this,i))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},pi={coordinate:function(t){var e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e},Point:function(t){return{type:\"Point\",coordinates:pi.coordinate.call(this,t.getCoordinate())}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=pi.Point.call(this,i);e.push(r.coordinates)}return{type:\"MultiPoint\",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(pi.coordinate.call(this,r))}return{type:\"LineString\",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=pi.LineString.call(this,i);e.push(r.coordinates)}return{type:\"MultiLineString\",coordinates:e}},Polygon:function(t){var e=[],n=pi.LineString.call(this,t._shell);e.push(n.coordinates);for(var i=0;i<t._holes.length;++i){var r=t._holes[i],s=pi.LineString.call(this,r);e.push(s.coordinates)}return{type:\"Polygon\",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=pi.Polygon.call(this,i);e.push(r.coordinates)}return{type:\"MultiPolygon\",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var i=t._geometries[n],r=i.getGeometryType();e.push(pi[r].call(this,i))}return{type:\"GeometryCollection\",geometries:e}}};return{BufferOp:vi,GeoJSONReader:function(){return s((function t(e){n(this,t),this.parser=new di(e||new ae)}),[{key:\"read\",value:function(t){return this.parser.read(t)}}])}(),GeoJSONWriter:function(){return s((function t(){n(this,t),this.parser=new di(this.geometryFactory)}),[{key:\"write\",value:function(t){return this.parser.write(t)}}])}()}}));\n//# sourceMappingURL=jsts.min.js.map\n","// Adds floating point numbers with twice the normal precision.\n// Reference: J. R. Shewchuk, Adaptive Precision Floating-Point Arithmetic and\n// Fast Robust Geometric Predicates, Discrete & Computational Geometry 18(3)\n// 305363 (1997).\n// Code adapted from GeographicLib by Charles F. F. Karney,\n// http://geographiclib.sourceforge.net/\n\nexport default function() {\n  return new Adder;\n}\n\nfunction Adder() {\n  this.reset();\n}\n\nAdder.prototype = {\n  constructor: Adder,\n  reset: function() {\n    this.s = // rounded value\n    this.t = 0; // exact error\n  },\n  add: function(y) {\n    add(temp, y, this.t);\n    add(this, temp.s, this.s);\n    if (this.s) this.t += temp.t;\n    else this.s = temp.t;\n  },\n  valueOf: function() {\n    return this.s;\n  }\n};\n\nvar temp = new Adder;\n\nfunction add(adder, a, b) {\n  var x = adder.s = a + b,\n      bv = x - a,\n      av = x - bv;\n  adder.t = (a - av) + (b - bv);\n}\n","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n","export default function noop() {}\n","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n","import adder from \"./adder\";\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math\";\nimport noop from \"./noop\";\nimport stream from \"./stream\";\n\nexport var areaRingSum = adder();\n\nvar areaSum = adder(),\n    lambda00,\n    phi00,\n    lambda0,\n    cosPhi0,\n    sinPhi0;\n\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum.reset();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnolis\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nexport default function(object) {\n  areaSum.reset();\n  stream(object, areaStream);\n  return areaSum * 2;\n}\n","import {asin, atan2, cos, sin, sqrt} from \"./math\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n","import adder from \"./adder\";\nimport {areaStream, areaRingSum} from \"./area\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace, spherical} from \"./cartesian\";\nimport {abs, degrees, epsilon, radians} from \"./math\";\nimport stream from \"./stream\";\n\nvar lambda0, phi0, lambda1, phi1, // bounds\n    lambda2, // previous lambda-coordinate\n    lambda00, phi00, // first point\n    p0, // previous 3D point\n    deltaSum = adder(),\n    ranges,\n    range;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: boundsLineStart,\n  lineEnd: boundsLineEnd,\n  polygonStart: function() {\n    boundsStream.point = boundsRingPoint;\n    boundsStream.lineStart = boundsRingStart;\n    boundsStream.lineEnd = boundsRingEnd;\n    deltaSum.reset();\n    areaStream.polygonStart();\n  },\n  polygonEnd: function() {\n    areaStream.polygonEnd();\n    boundsStream.point = boundsPoint;\n    boundsStream.lineStart = boundsLineStart;\n    boundsStream.lineEnd = boundsLineEnd;\n    if (areaRingSum < 0) lambda0 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n    else if (deltaSum > epsilon) phi1 = 90;\n    else if (deltaSum < -epsilon) phi0 = -90;\n    range[0] = lambda0, range[1] = lambda1;\n  }\n};\n\nfunction boundsPoint(lambda, phi) {\n  ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n}\n\nfunction linePoint(lambda, phi) {\n  var p = cartesian([lambda * radians, phi * radians]);\n  if (p0) {\n    var normal = cartesianCross(p0, p),\n        equatorial = [normal[1], -normal[0], 0],\n        inflection = cartesianCross(equatorial, normal);\n    cartesianNormalizeInPlace(inflection);\n    inflection = spherical(inflection);\n    var delta = lambda - lambda2,\n        sign = delta > 0 ? 1 : -1,\n        lambdai = inflection[0] * degrees * sign,\n        phii,\n        antimeridian = abs(delta) > 180;\n    if (antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = inflection[1] * degrees;\n      if (phii > phi1) phi1 = phii;\n    } else if (lambdai = (lambdai + 360) % 360 - 180, antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = -inflection[1] * degrees;\n      if (phii < phi0) phi0 = phii;\n    } else {\n      if (phi < phi0) phi0 = phi;\n      if (phi > phi1) phi1 = phi;\n    }\n    if (antimeridian) {\n      if (lambda < lambda2) {\n        if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n      } else {\n        if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n      }\n    } else {\n      if (lambda1 >= lambda0) {\n        if (lambda < lambda0) lambda0 = lambda;\n        if (lambda > lambda1) lambda1 = lambda;\n      } else {\n        if (lambda > lambda2) {\n          if (angle(lambda0, lambda) > angle(lambda0, lambda1)) lambda1 = lambda;\n        } else {\n          if (angle(lambda, lambda1) > angle(lambda0, lambda1)) lambda0 = lambda;\n        }\n      }\n    }\n  } else {\n    ranges.push(range = [lambda0 = lambda, lambda1 = lambda]);\n  }\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n  p0 = p, lambda2 = lambda;\n}\n\nfunction boundsLineStart() {\n  boundsStream.point = linePoint;\n}\n\nfunction boundsLineEnd() {\n  range[0] = lambda0, range[1] = lambda1;\n  boundsStream.point = boundsPoint;\n  p0 = null;\n}\n\nfunction boundsRingPoint(lambda, phi) {\n  if (p0) {\n    var delta = lambda - lambda2;\n    deltaSum.add(abs(delta) > 180 ? delta + (delta > 0 ? 360 : -360) : delta);\n  } else {\n    lambda00 = lambda, phi00 = phi;\n  }\n  areaStream.point(lambda, phi);\n  linePoint(lambda, phi);\n}\n\nfunction boundsRingStart() {\n  areaStream.lineStart();\n}\n\nfunction boundsRingEnd() {\n  boundsRingPoint(lambda00, phi00);\n  areaStream.lineEnd();\n  if (abs(deltaSum) > epsilon) lambda0 = -(lambda1 = 180);\n  range[0] = lambda0, range[1] = lambda1;\n  p0 = null;\n}\n\n// Finds the left-right distance between two longitudes.\n// This is almost the same as (lambda1 - lambda0 + 360) % 360, except that we want\n// the distance between 180 to be 360.\nfunction angle(lambda0, lambda1) {\n  return (lambda1 -= lambda0) < 0 ? lambda1 + 360 : lambda1;\n}\n\nfunction rangeCompare(a, b) {\n  return a[0] - b[0];\n}\n\nfunction rangeContains(range, x) {\n  return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n}\n\nexport default function(feature) {\n  var i, n, a, b, merged, deltaMax, delta;\n\n  phi1 = lambda1 = -(lambda0 = phi0 = Infinity);\n  ranges = [];\n  stream(feature, boundsStream);\n\n  // First, sort ranges by their minimum longitudes.\n  if (n = ranges.length) {\n    ranges.sort(rangeCompare);\n\n    // Then, merge any ranges that overlap.\n    for (i = 1, a = ranges[0], merged = [a]; i < n; ++i) {\n      b = ranges[i];\n      if (rangeContains(a, b[0]) || rangeContains(a, b[1])) {\n        if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n        if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n      } else {\n        merged.push(a = b);\n      }\n    }\n\n    // Finally, find the largest gap between the merged ranges.\n    // The final bounding box will be the inverse of this gap.\n    for (deltaMax = -Infinity, n = merged.length - 1, i = 0, a = merged[n]; i <= n; a = b, ++i) {\n      b = merged[i];\n      if ((delta = angle(a[1], b[0])) > deltaMax) deltaMax = delta, lambda0 = b[0], lambda1 = a[1];\n    }\n  }\n\n  ranges = range = null;\n\n  return lambda0 === Infinity || phi0 === Infinity\n      ? [[NaN, NaN], [NaN, NaN]]\n      : [[lambda0, phi0], [lambda1, phi1]];\n}\n","export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n","import compose from \"./compose\";\nimport {asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math\";\n\nfunction rotationIdentity(lambda, phi) {\n  return [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    return lambda += deltaLambda, [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n","import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian\";\nimport constant from \"./constant\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math\";\nimport {rotateRadians} from \"./rotation\";\n\n// Generates a circle centered at [0, 0], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(6),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n","import noop from \"../noop\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y) {\n      line.push([x, y]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n","export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n","import {abs, epsilon} from \"./math\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n","import pointEqual from \"../pointEqual\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    // If the first and last points of a segment are coincident, then treat as a\n    // closed ring. TODO if all rings are closed, then the winding order of the\n    // exterior ring should be checked.\n    if (pointEqual(p0, p1)) {\n      stream.lineStart();\n      for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n      stream.lineEnd();\n      return;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","export default function(arrays) {\n  var n = arrays.length,\n      m,\n      i = -1,\n      j = 0,\n      merged,\n      array;\n\n  while (++i < n) j += arrays[i].length;\n  merged = new Array(j);\n\n  while (--n >= 0) {\n    array = arrays[n];\n    m = array.length;\n    while (--m >= 0) {\n      merged[--j] = array[m];\n    }\n  }\n\n  return merged;\n}\n","import {abs, epsilon} from \"../math\";\nimport clipBuffer from \"./buffer\";\nimport clipLine from \"./line\";\nimport clipPolygon from \"./polygon\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygons polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport function clipExtent(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipPolygon(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n\nexport default function() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 960,\n      y1 = 500,\n      cache,\n      cacheStream,\n      clip;\n\n  return clip = {\n    stream: function(stream) {\n      return cache && cacheStream === stream ? cache : cache = clipExtent(x0, y0, x1, y1)(cacheStream = stream);\n    },\n    extent: function(_) {\n      return arguments.length ? (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1], cache = cacheStream = null, clip) : [[x0, y0], [x1, y1]];\n    }\n  };\n}\n","import adder from \"./adder\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian\";\nimport {asin, atan2, cos, epsilon, pi, quarterPi, sin, tau} from \"./math\";\n\nvar sum = adder();\n\nexport default function(polygon, point) {\n  var lambda = point[0],\n      phi = point[1],\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  sum.reset();\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = point0[0],\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = point1[0],\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the points meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon) ^ (winding & 1);\n}\n","import adder from \"./adder\";\nimport {abs, atan2, cos, radians, sin, sqrt} from \"./math\";\nimport noop from \"./noop\";\nimport stream from \"./stream\";\n\nvar lengthSum = adder(),\n    lambda0,\n    sinPhi0,\n    cosPhi0;\n\nvar lengthStream = {\n  sphere: noop,\n  point: noop,\n  lineStart: lengthLineStart,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop\n};\n\nfunction lengthLineStart() {\n  lengthStream.point = lengthPointFirst;\n  lengthStream.lineEnd = lengthLineEnd;\n}\n\nfunction lengthLineEnd() {\n  lengthStream.point = lengthStream.lineEnd = noop;\n}\n\nfunction lengthPointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, sinPhi0 = sin(phi), cosPhi0 = cos(phi);\n  lengthStream.point = lengthPoint;\n}\n\nfunction lengthPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var sinPhi = sin(phi),\n      cosPhi = cos(phi),\n      delta = abs(lambda - lambda0),\n      cosDelta = cos(delta),\n      sinDelta = sin(delta),\n      x = cosPhi * sinDelta,\n      y = cosPhi0 * sinPhi - sinPhi0 * cosPhi * cosDelta,\n      z = sinPhi0 * sinPhi + cosPhi0 * cosPhi * cosDelta;\n  lengthSum.add(atan2(sqrt(x * x + y * y), z));\n  lambda0 = lambda, sinPhi0 = sinPhi, cosPhi0 = cosPhi;\n}\n\nexport default function(object) {\n  lengthSum.reset();\n  stream(object, lengthStream);\n  return +lengthSum;\n}\n","export default function(x) {\n  return x;\n}\n","import adder from \"../adder\";\nimport {abs} from \"../math\";\nimport noop from \"../noop\";\n\nvar areaSum = adder(),\n    areaRingSum = adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum.reset();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum.reset();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n","import noop from \"../noop\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n","import adder from \"../adder\";\nimport {sqrt} from \"../math\";\nimport noop from \"../noop\";\n\nvar lengthSum = adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum.reset();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n","import clipBuffer from \"./buffer\";\nimport clipPolygon from \"./polygon\";\nimport {epsilon, halfPi} from \"../math\";\nimport polygonContains from \"../polygonContains\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(rotate, sink) {\n    var line = clipLine(sink),\n        rotatedStart = rotate.invert(start[0], start[1]),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, rotatedStart);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipPolygon(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      var point = rotate(lambda, phi);\n      if (pointVisible(lambda = point[0], phi = point[1])) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      var point = rotate(lambda, phi);\n      line.point(point[0], point[1]);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      var point = rotate(lambda, phi);\n      ringSink.point(point[0], point[1]);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n","import clip from \"./index\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n","import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian\";\nimport {circleStream} from \"../circle\";\nimport {abs, cos, epsilon, pi, sqrt} from \"../math\";\nimport pointEqual from \"../pointEqual\";\nimport clip from \"./index\";\n\nexport default function(radius, delta) {\n  var cr = cos(radius),\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        // Handle degeneracies.\n        // TODO ignore if not clipping polygons.\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2)) {\n            point1[0] += epsilon;\n            point1[1] += epsilon;\n            v = visible(point1[0], point1[1]);\n          }\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1]);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1  n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n","export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n","import {default as geoStream} from \"../stream\";\nimport boundsStream from \"../path/bounds\";\n\nexport function fitExtent(projection, extent, object) {\n  var w = extent[1][0] - extent[0][0],\n      h = extent[1][1] - extent[0][1],\n      clip = projection.clipExtent && projection.clipExtent();\n\n  projection\n      .scale(150)\n      .translate([0, 0]);\n\n  if (clip != null) projection.clipExtent(null);\n\n  geoStream(object, projection.stream(boundsStream));\n\n  var b = boundsStream.result(),\n      k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n      x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n      y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n\n  if (clip != null) projection.clipExtent(clip);\n\n  return projection\n      .scale(k * 150)\n      .translate([x, y]);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n","import {cartesian} from \"../cartesian\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math\";\nimport {transformer} from \"../transform\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n","import clipAntimeridian from \"../clip/antimeridian\";\nimport clipCircle from \"../clip/circle\";\nimport {clipExtent} from \"../clip/extent\";\nimport compose from \"../compose\";\nimport identity from \"../identity\";\nimport {degrees, radians, sqrt} from \"../math\";\nimport {rotateRadians} from \"../rotation\";\nimport {transformer} from \"../transform\";\nimport {fitExtent, fitSize} from \"./fit\";\nimport resample from \"./resample\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      dx, dy, lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, projectRotate, // rotate\n      theta = null, preclip = clipAntimeridian, // clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // clip extent\n      delta2 = 0.5, projectResample = resample(projectTransform, delta2), // precision\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    point = projectRotate(point[0] * radians, point[1] * radians);\n    return [point[0] * k + dx, dy - point[1] * k];\n  }\n\n  function invert(point) {\n    point = projectRotate.invert((point[0] - dx) / k, (dy - point[1]) / k);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  function projectTransform(x, y) {\n    return x = project(x, y), [x[0] * k + dx, dy - x[1] * k];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(preclip(rotate, projectResample(postclip(cacheStream = stream))));\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians, 6 * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipExtent(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  function recenter() {\n    projectRotate = compose(rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma), project);\n    var center = project(lambda, phi);\n    dx = x - center[0] * k;\n    dy = y + center[1] * k;\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n","import {asin, atan2, cos, sin, sqrt} from \"../math\";\n\nexport function azimuthalRaw(scale) {\n  return function(x, y) {\n    var cx = cos(x),\n        cy = cos(y),\n        k = scale(cx * cy);\n    return [\n      k * cy * sin(x),\n      k * sin(y)\n    ];\n  }\n}\n\nexport function azimuthalInvert(angle) {\n  return function(x, y) {\n    var z = sqrt(x * x + y * y),\n        c = angle(z),\n        sc = sin(c),\n        cc = cos(c);\n    return [\n      atan2(x * sc, z * cc),\n      asin(z && y * sc / z)\n    ];\n  }\n}\n","import {asin, sqrt} from \"../math\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal\";\nimport projection from \"./index\";\n\nexport var azimuthalEqualAreaRaw = azimuthalRaw(function(cxcy) {\n  return sqrt(2 / (1 + cxcy));\n});\n\nazimuthalEqualAreaRaw.invert = azimuthalInvert(function(z) {\n  return 2 * asin(z / 2);\n});\n\nexport default function() {\n  return projection(azimuthalEqualAreaRaw)\n      .scale(124.75)\n      .clipAngle(180 - 1e-3);\n}\n","import {acos, sin} from \"../math\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal\";\nimport projection from \"./index\";\n\nexport var azimuthalEquidistantRaw = azimuthalRaw(function(c) {\n  return (c = acos(c)) && c / sin(c);\n});\n\nazimuthalEquidistantRaw.invert = azimuthalInvert(function(z) {\n  return z;\n});\n\nexport default function() {\n  return projection(azimuthalEquidistantRaw)\n      .scale(79.4188)\n      .clipAngle(180 - 1e-3);\n}\n","import projection from \"./index\";\n\nexport function equirectangularRaw(lambda, phi) {\n  return [lambda, phi];\n}\n\nequirectangularRaw.invert = equirectangularRaw;\n\nexport default function() {\n  return projection(equirectangularRaw)\n      .scale(152.63);\n}\n","// index.js\nimport { center } from \"@turf/center\";\nimport jsts from \"@turf/jsts\";\nimport { geomEach, featureEach } from \"@turf/meta\";\nimport { geoAzimuthalEquidistant } from \"d3-geo\";\nimport {\n  feature,\n  featureCollection,\n  radiansToLength,\n  lengthToRadians,\n  earthRadius\n} from \"@turf/helpers\";\nvar { BufferOp, GeoJSONReader, GeoJSONWriter } = jsts;\nfunction buffer(geojson, radius, options) {\n  options = options || {};\n  var units = options.units || \"kilometers\";\n  var steps = options.steps || 8;\n  if (!geojson) throw new Error(\"geojson is required\");\n  if (typeof options !== \"object\") throw new Error(\"options must be an object\");\n  if (typeof steps !== \"number\") throw new Error(\"steps must be an number\");\n  if (radius === void 0) throw new Error(\"radius is required\");\n  if (steps <= 0) throw new Error(\"steps must be greater than 0\");\n  var results = [];\n  switch (geojson.type) {\n    case \"GeometryCollection\":\n      geomEach(geojson, function(geometry) {\n        var buffered = bufferFeature(geometry, radius, units, steps);\n        if (buffered) results.push(buffered);\n      });\n      return featureCollection(results);\n    case \"FeatureCollection\":\n      featureEach(geojson, function(feature2) {\n        var multiBuffered = bufferFeature(feature2, radius, units, steps);\n        if (multiBuffered) {\n          featureEach(multiBuffered, function(buffered) {\n            if (buffered) results.push(buffered);\n          });\n        }\n      });\n      return featureCollection(results);\n  }\n  return bufferFeature(geojson, radius, units, steps);\n}\nfunction bufferFeature(geojson, radius, units, steps) {\n  var properties = geojson.properties || {};\n  var geometry = geojson.type === \"Feature\" ? geojson.geometry : geojson;\n  if (geometry.type === \"GeometryCollection\") {\n    var results = [];\n    geomEach(geojson, function(geometry2) {\n      var buffered2 = bufferFeature(geometry2, radius, units, steps);\n      if (buffered2) results.push(buffered2);\n    });\n    return featureCollection(results);\n  }\n  var projection = defineProjection(geometry);\n  var projected = {\n    type: geometry.type,\n    coordinates: projectCoords(geometry.coordinates, projection)\n  };\n  var reader = new GeoJSONReader();\n  var geom = reader.read(projected);\n  var distance = radiansToLength(lengthToRadians(radius, units), \"meters\");\n  var buffered = BufferOp.bufferOp(geom, distance, steps);\n  var writer = new GeoJSONWriter();\n  buffered = writer.write(buffered);\n  if (coordsIsNaN(buffered.coordinates)) return void 0;\n  var result = {\n    type: buffered.type,\n    coordinates: unprojectCoords(buffered.coordinates, projection)\n  };\n  return feature(result, properties);\n}\nfunction coordsIsNaN(coords) {\n  if (Array.isArray(coords[0])) return coordsIsNaN(coords[0]);\n  return isNaN(coords[0]);\n}\nfunction projectCoords(coords, proj) {\n  if (typeof coords[0] !== \"object\") return proj(coords);\n  return coords.map(function(coord) {\n    return projectCoords(coord, proj);\n  });\n}\nfunction unprojectCoords(coords, proj) {\n  if (typeof coords[0] !== \"object\") return proj.invert(coords);\n  return coords.map(function(coord) {\n    return unprojectCoords(coord, proj);\n  });\n}\nfunction defineProjection(geojson) {\n  var coords = center(geojson).geometry.coordinates;\n  var rotation = [-coords[0], -coords[1]];\n  return geoAzimuthalEquidistant().rotate(rotation).scale(earthRadius);\n}\nvar index_default = buffer;\nexport {\n  buffer,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","class TinyQueue {\n    constructor(data = [], compare = defaultCompare) {\n        this.data = data;\n        this.length = this.data.length;\n        this.compare = compare;\n\n        if (this.length > 0) {\n            for (let i = (this.length >> 1) - 1; i >= 0; i--) this._down(i);\n        }\n    }\n\n    push(item) {\n        this.data.push(item);\n        this.length++;\n        this._up(this.length - 1);\n    }\n\n    pop() {\n        if (this.length === 0) return undefined;\n\n        const top = this.data[0];\n        const bottom = this.data.pop();\n        this.length--;\n\n        if (this.length > 0) {\n            this.data[0] = bottom;\n            this._down(0);\n        }\n\n        return top;\n    }\n\n    peek() {\n        return this.data[0];\n    }\n\n    _up(pos) {\n        const {data, compare} = this;\n        const item = data[pos];\n\n        while (pos > 0) {\n            const parent = (pos - 1) >> 1;\n            const current = data[parent];\n            if (compare(item, current) >= 0) break;\n            data[pos] = current;\n            pos = parent;\n        }\n\n        data[pos] = item;\n    }\n\n    _down(pos) {\n        const {data, compare} = this;\n        const halfLength = this.length >> 1;\n        const item = data[pos];\n\n        while (pos < halfLength) {\n            let left = (pos << 1) + 1;\n            let best = data[left];\n            const right = left + 1;\n\n            if (right < this.length && compare(data[right], best) < 0) {\n                left = right;\n                best = data[right];\n            }\n            if (compare(best, item) >= 0) break;\n\n            data[pos] = best;\n            pos = left;\n        }\n\n        data[pos] = item;\n    }\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nfunction checkWhichEventIsLeft (e1, e2) {\n    if (e1.p.x > e2.p.x) return 1\n    if (e1.p.x < e2.p.x) return -1\n\n    if (e1.p.y !== e2.p.y) return e1.p.y > e2.p.y ? 1 : -1\n    return 1\n}\n\nfunction checkWhichSegmentHasRightEndpointFirst (seg1, seg2) {\n    if (seg1.rightSweepEvent.p.x > seg2.rightSweepEvent.p.x) return 1\n    if (seg1.rightSweepEvent.p.x < seg2.rightSweepEvent.p.x) return -1\n\n    if (seg1.rightSweepEvent.p.y !== seg2.rightSweepEvent.p.y) return seg1.rightSweepEvent.p.y < seg2.rightSweepEvent.p.y ? 1 : -1\n    return 1\n}\n\nclass Event {\n\n    constructor (p, featureId, ringId, eventId) {\n        this.p = {\n            x: p[0],\n            y: p[1]\n        };\n        this.featureId = featureId;\n        this.ringId = ringId;\n        this.eventId = eventId;\n\n        this.otherEvent = null;\n        this.isLeftEndpoint = null;\n    }\n\n    isSamePoint (eventToCheck) {\n        return this.p.x === eventToCheck.p.x && this.p.y === eventToCheck.p.y\n    }\n}\n\nfunction fillEventQueue (geojson, eventQueue) {\n    if (geojson.type === 'FeatureCollection') {\n        const features = geojson.features;\n        for (let i = 0; i < features.length; i++) {\n            processFeature(features[i], eventQueue);\n        }\n    } else {\n        processFeature(geojson, eventQueue);\n    }\n}\n\nlet featureId = 0;\nlet ringId = 0;\nlet eventId = 0;\nfunction processFeature (featureOrGeometry, eventQueue) {\n    const geom = featureOrGeometry.type === 'Feature' ? featureOrGeometry.geometry : featureOrGeometry;\n    let coords = geom.coordinates;\n    // standardise the input\n    if (geom.type === 'Polygon' || geom.type === 'MultiLineString') coords = [coords];\n    if (geom.type === 'LineString') coords = [[coords]];\n\n    for (let i = 0; i < coords.length; i++) {\n        for (let ii = 0; ii < coords[i].length; ii++) {\n            let currentP = coords[i][ii][0];\n            let nextP = null;\n            ringId = ringId + 1;\n            for (let iii = 0; iii < coords[i][ii].length - 1; iii++) {\n                nextP = coords[i][ii][iii + 1];\n\n                const e1 = new Event(currentP, featureId, ringId, eventId);\n                const e2 = new Event(nextP, featureId, ringId, eventId + 1);\n\n                e1.otherEvent = e2;\n                e2.otherEvent = e1;\n\n                if (checkWhichEventIsLeft(e1, e2) > 0) {\n                    e2.isLeftEndpoint = true;\n                    e1.isLeftEndpoint = false;\n                } else {\n                    e1.isLeftEndpoint = true;\n                    e2.isLeftEndpoint = false;\n                }\n                eventQueue.push(e1);\n                eventQueue.push(e2);\n\n                currentP = nextP;\n                eventId = eventId + 1;\n            }\n        }\n    }\n    featureId = featureId + 1;\n}\n\nclass Segment {\n\n    constructor (event) {\n        this.leftSweepEvent = event;\n        this.rightSweepEvent = event.otherEvent;\n    }\n}\n\nfunction testSegmentIntersect (seg1, seg2) {\n    if (seg1 === null || seg2 === null) return false\n\n    if (seg1.leftSweepEvent.ringId === seg2.leftSweepEvent.ringId &&\n        (seg1.rightSweepEvent.isSamePoint(seg2.leftSweepEvent) ||\n        seg1.rightSweepEvent.isSamePoint(seg2.leftSweepEvent) ||\n        seg1.rightSweepEvent.isSamePoint(seg2.rightSweepEvent) ||\n        seg1.leftSweepEvent.isSamePoint(seg2.leftSweepEvent) ||\n        seg1.leftSweepEvent.isSamePoint(seg2.rightSweepEvent))) return false\n\n    const x1 = seg1.leftSweepEvent.p.x;\n    const y1 = seg1.leftSweepEvent.p.y;\n    const x2 = seg1.rightSweepEvent.p.x;\n    const y2 = seg1.rightSweepEvent.p.y;\n    const x3 = seg2.leftSweepEvent.p.x;\n    const y3 = seg2.leftSweepEvent.p.y;\n    const x4 = seg2.rightSweepEvent.p.x;\n    const y4 = seg2.rightSweepEvent.p.y;\n\n    const denom = ((y4 - y3) * (x2 - x1)) - ((x4 - x3) * (y2 - y1));\n    const numeA = ((x4 - x3) * (y1 - y3)) - ((y4 - y3) * (x1 - x3));\n    const numeB = ((x2 - x1) * (y1 - y3)) - ((y2 - y1) * (x1 - x3));\n\n    if (denom === 0) {\n        if (numeA === 0 && numeB === 0) return false\n        return false\n    }\n\n    const uA = numeA / denom;\n    const uB = numeB / denom;\n\n    if (uA >= 0 && uA <= 1 && uB >= 0 && uB <= 1) {\n        const x = x1 + (uA * (x2 - x1));\n        const y = y1 + (uA * (y2 - y1));\n        return [x, y]\n    }\n    return false\n}\n\n// import {debugEventAndSegments, debugRemovingSegment} from './debug'\n\nfunction runCheck (eventQueue, ignoreSelfIntersections) {\n    ignoreSelfIntersections = ignoreSelfIntersections ? ignoreSelfIntersections : false;\n\n    const intersectionPoints = [];\n    const outQueue = new TinyQueue([], checkWhichSegmentHasRightEndpointFirst);\n\n    while (eventQueue.length) {\n        const event = eventQueue.pop();\n        if (event.isLeftEndpoint) {\n            // debugEventAndSegments(event.p, outQueue.data)\n            const segment = new Segment(event);\n            for (let i = 0; i < outQueue.data.length; i++) {\n                const otherSeg = outQueue.data[i];\n                if (ignoreSelfIntersections) {\n                    if (otherSeg.leftSweepEvent.featureId === event.featureId) continue\n                }\n                const intersection = testSegmentIntersect(segment, otherSeg);\n                if (intersection !== false) intersectionPoints.push(intersection);\n            }\n            outQueue.push(segment);\n        } else if (event.isLeftEndpoint === false) {\n            outQueue.pop();\n            // const seg = outQueue.pop()\n            // debugRemovingSegment(event.p, seg)\n        }\n    }\n    return intersectionPoints\n}\n\nfunction sweeplineIntersections (geojson, ignoreSelfIntersections) {\n    const eventQueue = new TinyQueue([], checkWhichEventIsLeft);\n    fillEventQueue(geojson, eventQueue);\n    return runCheck(eventQueue, ignoreSelfIntersections)\n}\n\nexport default sweeplineIntersections;\n","// index.ts\nimport { feature, featureCollection, point } from \"@turf/helpers\";\n\n// lib/sweepline-intersections-export.ts\nimport lib from \"sweepline-intersections\";\nvar sweeplineIntersections = lib;\n\n// index.ts\nfunction lineIntersect(line1, line2, options = {}) {\n  const { removeDuplicates = true, ignoreSelfIntersections = true } = options;\n  let features = [];\n  if (line1.type === \"FeatureCollection\")\n    features = features.concat(line1.features);\n  else if (line1.type === \"Feature\") features.push(line1);\n  else if (line1.type === \"LineString\" || line1.type === \"Polygon\" || line1.type === \"MultiLineString\" || line1.type === \"MultiPolygon\") {\n    features.push(feature(line1));\n  }\n  if (line2.type === \"FeatureCollection\")\n    features = features.concat(line2.features);\n  else if (line2.type === \"Feature\") features.push(line2);\n  else if (line2.type === \"LineString\" || line2.type === \"Polygon\" || line2.type === \"MultiLineString\" || line2.type === \"MultiPolygon\") {\n    features.push(feature(line2));\n  }\n  const intersections = sweeplineIntersections(\n    featureCollection(features),\n    ignoreSelfIntersections\n  );\n  let results = [];\n  if (removeDuplicates) {\n    const unique = {};\n    intersections.forEach((intersection) => {\n      const key = intersection.join(\",\");\n      if (!unique[key]) {\n        unique[key] = true;\n        results.push(intersection);\n      }\n    });\n  } else {\n    results = intersections;\n  }\n  return featureCollection(results.map((r) => point(r)));\n}\nvar index_default = lineIntersect;\nexport {\n  index_default as default,\n  lineIntersect\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { getCoords } from \"@turf/invariant\";\nfunction booleanClockwise(line) {\n  const ring = getCoords(line);\n  let sum = 0;\n  let i = 1;\n  let prev;\n  let cur;\n  while (i < ring.length) {\n    prev = cur || ring[0];\n    cur = ring[i];\n    sum += (cur[0] - prev[0]) * (cur[1] + prev[1]);\n    i++;\n  }\n  return sum > 0;\n}\nvar index_default = booleanClockwise;\nexport {\n  booleanClockwise,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { clone } from \"@turf/clone\";\nimport { booleanClockwise } from \"@turf/boolean-clockwise\";\nimport { geomEach, featureEach } from \"@turf/meta\";\nimport { getCoords } from \"@turf/invariant\";\nimport { featureCollection, isObject } from \"@turf/helpers\";\nfunction rewind(geojson, options = {}) {\n  var _a, _b;\n  options = options || {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  const mutate = (_a = options.mutate) != null ? _a : false;\n  const reverse = (_b = options.reverse) != null ? _b : false;\n  if (!geojson) throw new Error(\"<geojson> is required\");\n  if (typeof reverse !== \"boolean\")\n    throw new Error(\"<reverse> must be a boolean\");\n  if (typeof mutate !== \"boolean\")\n    throw new Error(\"<mutate> must be a boolean\");\n  if (!mutate && geojson.type !== \"Point\" && geojson.type !== \"MultiPoint\") {\n    geojson = clone(geojson);\n  }\n  const results = [];\n  switch (geojson.type) {\n    case \"GeometryCollection\":\n      geomEach(geojson, function(geometry) {\n        rewindFeature(geometry, reverse);\n      });\n      return geojson;\n    case \"FeatureCollection\":\n      featureEach(geojson, function(feature) {\n        const rewoundFeature = rewindFeature(feature, reverse);\n        featureEach(rewoundFeature, function(result) {\n          results.push(result);\n        });\n      });\n      return featureCollection(results);\n  }\n  return rewindFeature(geojson, reverse);\n}\nfunction rewindFeature(geojson, reverse) {\n  const type = geojson.type === \"Feature\" ? geojson.geometry.type : geojson.type;\n  switch (type) {\n    case \"GeometryCollection\":\n      geomEach(geojson, function(geometry) {\n        rewindFeature(geometry, reverse);\n      });\n      return geojson;\n    case \"LineString\":\n      rewindLineString(getCoords(geojson), reverse);\n      return geojson;\n    case \"Polygon\":\n      rewindPolygon(getCoords(geojson), reverse);\n      return geojson;\n    case \"MultiLineString\":\n      getCoords(geojson).forEach(function(lineCoords) {\n        rewindLineString(lineCoords, reverse);\n      });\n      return geojson;\n    case \"MultiPolygon\":\n      getCoords(geojson).forEach(function(lineCoords) {\n        rewindPolygon(lineCoords, reverse);\n      });\n      return geojson;\n    case \"Point\":\n    case \"MultiPoint\":\n      return geojson;\n  }\n}\nfunction rewindLineString(coords, reverse) {\n  if (booleanClockwise(coords) === reverse) coords.reverse();\n}\nfunction rewindPolygon(coords, reverse) {\n  if (booleanClockwise(coords[0]) !== reverse) {\n    coords[0].reverse();\n  }\n  for (let i = 1; i < coords.length; i++) {\n    if (booleanClockwise(coords[i]) === reverse) {\n      coords[i].reverse();\n    }\n  }\n}\nvar index_default = rewind;\nexport {\n  index_default as default,\n  rewind\n};\n//# sourceMappingURL=index.js.map","import { Geoman, type MapInstanceWithGeoman } from '@/main.ts';\nimport type * as geojsonUtils from '@/utils/geojson.ts';\nimport type {\n  Feature,\n  Geometry,\n  LineString,\n  MultiLineString,\n  MultiPoint,\n  MultiPolygon,\n  Point,\n  Polygon,\n} from 'geojson';\n\n// Base interface for all event results\nexport interface BaseEventResult {\n  listenerIsAttached: boolean;\n  shape?: string | null;\n  feature?: boolean;\n  features?: boolean;\n  originalFeature?: boolean;\n  originalFeatures?: boolean;\n  featureId?: number | string | undefined;\n}\n\n// Define a type for window.customData that allows for any property\n// but still provides type checking for known properties\nexport interface CustomData {\n  rawEventResults?: { [key: string]: unknown };\n  eventResults?: { [key: string]: BaseEventResult };\n  map?: MapInstanceWithGeoman;\n}\n\ndeclare global {\n  interface Window {\n    geoman: Geoman;\n    customData: CustomData;\n    geomanUtils: typeof geojsonUtils;\n    turf?: {\n      bbox?: (geoJson: unknown) => [number, number, number, number];\n    };\n  }\n}\n\nexport const pointBasedGeometryType: Array<Geometry['type']> = ['Point', 'MultiPoint'];\nexport type PointBasedGeometryType = (typeof pointBasedGeometryType)[number];\n\nexport const lineBasedGeometryType: Array<Geometry['type']> = [\n  'LineString',\n  'MultiLineString',\n  'Polygon',\n  'MultiPolygon',\n];\nexport type LineBasedGeometryType = (typeof lineBasedGeometryType)[number];\n\nexport const pointBasedFeatures = ['marker', 'circle_marker', 'text_marker'];\nexport type PointBasedFeature = (typeof pointBasedFeatures)[number];\n\nexport const lineBasedFeatures = ['circle', 'line', 'rectangle', 'polygon'];\nexport type LineBasedFeature = (typeof lineBasedFeatures)[number];\n\nexport const isPointBasedGeoJsonFeature = (\n  feature: Feature,\n): feature is Feature<Point | MultiPoint> => {\n  return pointBasedGeometryType.includes(feature.geometry.type);\n};\n\nexport const isLineBasedGeoJsonFeature = (\n  feature: Feature,\n): feature is Feature<LineString | MultiLineString | Polygon | MultiPolygon> => {\n  return lineBasedGeometryType.includes(feature.geometry.type);\n};\n","import { FeatureData } from '@/core/features/feature-data.ts';\nimport {\n  type AnyMapInstance,\n  BaseMapAdapter,\n  type FeatureId,\n  type GeoJsonImportFeature,\n  type GeoJsonShapeFeature,\n  type LngLatTuple,\n  type LngLatDiff,\n} from '@/main.ts';\nimport {\n  eachCoordinateWithPath,\n  getAllGeoJsonCoordinates,\n  getGeoJsonFirstPoint,\n} from '@/utils/geojson.ts';\nimport { booleanPointInPolygon } from '@turf/boolean-point-in-polygon';\nimport buffer from '@turf/buffer';\nimport distance from '@turf/distance';\nimport lineIntersect from '@turf/line-intersect';\nimport rewind from '@turf/rewind';\nimport type { Feature, GeoJSON, MultiPolygon, Polygon, Position } from 'geojson';\nimport { cloneDeep } from 'lodash-es';\nimport { isLineBasedGeoJsonFeature, isPointBasedGeoJsonFeature } from '@tests/types.ts';\n\nexport const moveGeoJson = (geoJson: GeoJsonShapeFeature, lngLatDiff: LngLatDiff) => {\n  eachCoordinateWithPath(geoJson, (position) => {\n    const lngLat = position.coordinate;\n    lngLat[0] += lngLatDiff.lng;\n    lngLat[1] += lngLatDiff.lat;\n  });\n\n  return geoJson;\n};\n\nexport const getBufferedOuterPolygon = (\n  mapAdapter: BaseMapAdapter<AnyMapInstance>,\n  polygonGeoJson: Feature<Polygon | MultiPolygon>,\n): Feature<Polygon | MultiPolygon> | null => {\n  const FRACTION = 10e-5;\n  const bounds = mapAdapter.getBounds();\n  const widthMeters = distance(bounds[0], bounds[1], { units: 'meters' });\n\n  return buffer(polygonGeoJson, widthMeters * FRACTION, { units: 'meters' }) || null;\n};\n\nexport const getMovedGeoJson = (featureData: FeatureData, lngLatDiff: LngLatDiff) => {\n  const featureGeoJson = cloneDeep(featureData.getGeoJson() as GeoJsonShapeFeature);\n  moveGeoJson(featureGeoJson, lngLatDiff);\n  return featureGeoJson;\n};\n\nexport const moveFeatureData = (featureData: FeatureData, lngLatDiff: LngLatDiff): void => {\n  const featureGeoJson = getMovedGeoJson(featureData, lngLatDiff);\n  const shapeCenter = featureData.getShapeProperty('center');\n  if (shapeCenter) {\n    featureData.setShapeProperty('center', shapeCenter[0] + lngLatDiff.lng);\n    featureData.setShapeProperty('center', shapeCenter[1] + lngLatDiff.lat);\n  }\n  // Set the updated data back to the source\n  featureData.updateGeoJsonGeometry(featureGeoJson.geometry);\n};\n\nexport const getAllFeatureCoordinates = (featureData: FeatureData): Array<Position> => {\n  const shapeGeoJson = featureData.getGeoJson() as GeoJSON;\n  return getAllGeoJsonCoordinates(shapeGeoJson);\n};\n\nexport const allFeaturePointsInPolygon = (\n  featureGeoJson: Feature,\n  containerGeoJson: Feature<Polygon | MultiPolygon>,\n): boolean => {\n  try {\n    eachCoordinateWithPath(featureGeoJson, (position) => {\n      if (!booleanPointInPolygon(position.coordinate, containerGeoJson)) {\n        throw new Error('stop');\n      }\n    });\n  } catch {\n    return false;\n  }\n\n  return true;\n};\n\nexport const isGeoJsonFeatureInPolygon = (\n  featureGeoJson: Feature,\n  containerGeoJson: Feature<Polygon | MultiPolygon>,\n): boolean => {\n  const allPointsInPolygon = allFeaturePointsInPolygon(featureGeoJson, containerGeoJson);\n  if (isPointBasedGeoJsonFeature(featureGeoJson)) {\n    return allPointsInPolygon;\n  }\n\n  if (allPointsInPolygon && isLineBasedGeoJsonFeature(featureGeoJson)) {\n    return !lineIntersect(featureGeoJson, containerGeoJson, { ignoreSelfIntersections: true })\n      .features.length;\n  }\n  return false;\n};\n\nexport const getFeatureFirstPoint = (featureData: FeatureData): LngLatTuple | null => {\n  const shapeGeoJson = featureData.getGeoJson();\n  if (typeof shapeGeoJson !== 'object') {\n    return null;\n  }\n\n  return getGeoJsonFirstPoint(shapeGeoJson);\n};\n\nexport const fixGeoJsonFeature = (feature: GeoJsonImportFeature): GeoJsonImportFeature | null => {\n  if (isLineBasedGeoJsonFeature(feature)) {\n    const resultFeature = rewind(feature, { mutate: false });\n    if (resultFeature.type === 'Feature' && isLineBasedGeoJsonFeature(resultFeature)) {\n      return {\n        ...resultFeature,\n        properties: feature.properties || {},\n      };\n    }\n  }\n\n  if (isPointBasedGeoJsonFeature(feature)) {\n    return feature;\n  }\n\n  return null;\n};\n\nexport const getCustomFeatureId = (\n  featureGeoJson: Feature,\n  idPropertyName: string,\n): FeatureId | null => {\n  const featureId = featureGeoJson.properties?.[idPropertyName];\n  if (typeof featureId === 'string' || typeof featureId === 'number') {\n    return featureId;\n  }\n  return null;\n};\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { SOURCES } from '@/core/features/constants.ts';\nimport { FeatureData } from '@/core/features/feature-data.ts';\nimport type {\n  EditModeName,\n  FeatureShape,\n  GeoJsonShapeFeature,\n  GmSystemEvent,\n  LngLatTuple,\n  MapHandlerReturnData,\n} from '@/main.ts';\nimport { BaseEdit } from '@/modes/edit/base.ts';\nimport { convertToThrottled } from '@/utils/behavior.ts';\nimport { getFeatureFirstPoint, getMovedGeoJson } from '@/utils/features.ts';\nimport {\n  getGeoJsonCircle,\n  getGeoJsonEllipse,\n  getGeoJsonFirstPoint,\n  getLngLatDiff,\n} from '@/utils/geojson.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\nimport type { Feature, Polygon } from 'geojson';\nimport { isEqual } from 'lodash-es';\nimport log from 'loglevel';\n\ntype UpdateShapeHandler = (\n  featureData: FeatureData,\n  lngLatStart: LngLatTuple,\n  lngLatEnd: LngLatTuple,\n) => GeoJsonShapeFeature | null;\n\nexport abstract class BaseDrag extends BaseEdit {\n  mode: EditModeName = 'drag';\n  previousLngLat: LngLatTuple | null = null;\n\n  pointBasedShapes: Array<FeatureShape> = ['marker', 'circle_marker', 'text_marker'];\n\n  throttledMethods = convertToThrottled(\n    {\n      onMouseMove: this.onMouseMove,\n    },\n    this,\n    this.gm.options.settings.throttlingDelay,\n  );\n\n  eventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:edit`]: this.handleGmEdit.bind(this),\n\n    mousedown: this.onMouseDown.bind(this),\n    touchstart: this.onMouseDown.bind(this),\n\n    mousemove: this.throttledMethods.onMouseMove.bind(this),\n    touchmove: this.throttledMethods.onMouseMove.bind(this),\n\n    mouseup: this.onMouseUp.bind(this),\n    touchend: this.onMouseUp.bind(this),\n  };\n\n  getUpdatedGeoJsonHandlers: { [key in FeatureShape]?: UpdateShapeHandler } = {\n    marker: this.moveSource.bind(this),\n    ellipse: this.moveEllipse.bind(this),\n    circle: this.moveCircle.bind(this),\n    circle_marker: this.moveSource.bind(this),\n    text_marker: this.moveSource.bind(this),\n    line: this.moveSource.bind(this),\n    rectangle: this.moveSource.bind(this),\n    polygon: this.moveSource.bind(this),\n  };\n\n  onMouseDown(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event)) {\n      return { next: true };\n    }\n    const featureData = this.getFeatureByMouseEvent({ event, sourceNames: [SOURCES.main] });\n\n    if (featureData && this.getUpdatedGeoJsonHandlers[featureData.shape]) {\n      this.featureData = featureData;\n      this.featureData.changeSource({ sourceName: SOURCES.temporary, atomic: true });\n      this.gm.mapAdapter.setDragPan(false);\n\n      this.snappingHelper?.addExcludedFeature(this.featureData);\n      // Fire dragstart BEFORE setting actionInProgress and aligning shapes.\n      // This ensures correct internal event ordering: dragstart -> drag -> dragend.\n      // alignShapeCenterWithControlMarker calls onMouseMove which can fire drag events,\n      // so dragstart must be fired first.\n      this.fireFeatureEditStartEvent({ feature: this.featureData, forceMode: 'drag' });\n      this.flags.actionInProgress = true;\n      if (this.isPointBasedShape()) {\n        this.alignShapeCenterWithControlMarker(this.featureData, event);\n      }\n      return { next: false };\n    }\n    return { next: true };\n  }\n\n  onMouseUp(event: BaseMapEvent): MapHandlerReturnData {\n    if (!this.featureData || !isMapPointerEvent(event, { warning: true })) {\n      return { next: true };\n    }\n\n    this.snappingHelper?.clearExcludedFeatures();\n    this.featureData.changeSource({ sourceName: SOURCES.main, atomic: true });\n\n    this.previousLngLat = null;\n    this.gm.mapAdapter.setDragPan(true);\n    this.fireFeatureEditEndEvent({ feature: this.featureData, forceMode: 'drag' });\n    this.flags.actionInProgress = false;\n    this.featureData = null;\n    return { next: true };\n  }\n\n  onMouseMove(event: BaseMapEvent): MapHandlerReturnData {\n    if (!this.flags.actionInProgress || !isMapPointerEvent(event, { warning: true })) {\n      return { next: true };\n    }\n\n    if (this.featureData) {\n      // marker pointer is automatically enabled when the drag starts\n      // see \"relatedModes\" in options\n      const endLngLat = this.gm.markerPointer.marker?.getLngLat() || event.lngLat.toArray();\n      this.moveFeature(this.featureData, endLngLat);\n    }\n    return { next: false };\n  }\n\n  isPointBasedShape(): boolean {\n    // snapping should be enabled only for point based geometries\n    // but shape markers provide its own snapping too\n    return !!this.featureData && this.pointBasedShapes.includes(this.featureData.shape);\n  }\n\n  abstract handleGmEdit(event: GmSystemEvent): MapHandlerReturnData;\n\n  alignShapeCenterWithControlMarker(featureData: FeatureData, event: BaseMapEvent) {\n    const shapeLngLat = getFeatureFirstPoint(featureData);\n    if (shapeLngLat) {\n      this.gm.markerPointer.marker?.setLngLat(shapeLngLat);\n      this.onMouseMove(event); // align control marker and feature center\n    }\n  }\n\n  moveFeature(featureData: FeatureData, newLngLat: LngLatTuple) {\n    if (!this.flags.actionInProgress) {\n      return;\n    }\n\n    if (!this.previousLngLat) {\n      this.previousLngLat = newLngLat;\n      return;\n    }\n\n    const shapeUpdateMethod = this.getUpdatedGeoJsonHandlers[featureData.shape];\n    if (shapeUpdateMethod) {\n      const updatedGeoJson = shapeUpdateMethod(featureData, this.previousLngLat, newLngLat);\n      if (!updatedGeoJson) {\n        log.error('BaseDrag.moveFeature: invalid updatedGeoJson', featureData);\n        return;\n      }\n\n      this.fireBeforeFeatureUpdate({\n        features: [featureData],\n        geoJsonFeatures: [updatedGeoJson],\n        forceMode: 'drag',\n      });\n\n      const isUpdated = this.updateFeatureGeoJson({\n        featureData,\n        featureGeoJson: updatedGeoJson,\n        forceMode: 'drag',\n      });\n      if (!isEqual(featureData.getGeoJson().properties, updatedGeoJson.properties)) {\n        featureData._updateAllProperties(updatedGeoJson.properties);\n      }\n\n      if (isUpdated) {\n        this.previousLngLat = newLngLat;\n      }\n    }\n  }\n\n  moveSource(featureData: FeatureData, oldLngLat: LngLatTuple, newLngLat: LngLatTuple) {\n    const lngLatDiff = getLngLatDiff(oldLngLat, newLngLat);\n    // moveFeatureData(featureData, lngLatDiff);\n    return getMovedGeoJson(featureData, lngLatDiff);\n  }\n\n  moveEllipse(\n    featureData: FeatureData,\n    oldLngLat: LngLatTuple,\n    newLngLat: LngLatTuple,\n  ): GeoJsonShapeFeature | null {\n    if (featureData.shape !== 'ellipse') {\n      log.error('BaseDrag.moveCircle: invalid shape type', featureData);\n      return null;\n    }\n\n    const oldCenter = featureData.getShapeProperty('center');\n    const xSemiAxis = featureData.getShapeProperty('xSemiAxis');\n    const ySemiAxis = featureData.getShapeProperty('ySemiAxis');\n    const angle = featureData.getShapeProperty('angle');\n\n    if (\n      !Array.isArray(oldCenter) ||\n      typeof xSemiAxis !== 'number' ||\n      typeof ySemiAxis !== 'number' ||\n      typeof angle !== 'number'\n    ) {\n      log.error(\n        'BaseDrag.moveEllipse: missing center, xSemiAxis, ySemiAxis or angle in the featureData',\n        featureData,\n      );\n      return null;\n    }\n\n    const lngLatDiff = getLngLatDiff(oldLngLat, newLngLat);\n\n    const newCenterCoords: LngLatTuple = [\n      oldCenter[0] + lngLatDiff.lng,\n      oldCenter[1] + lngLatDiff.lat,\n    ];\n\n    return getGeoJsonEllipse({\n      center: newCenterCoords,\n      xSemiAxis,\n      ySemiAxis,\n      angle,\n    });\n  }\n\n  moveCircle(\n    featureData: FeatureData,\n    oldLngLat: LngLatTuple,\n    newLngLat: LngLatTuple,\n  ): GeoJsonShapeFeature | null {\n    if (featureData.shape !== 'circle') {\n      log.error('BaseDrag.moveCircle: invalid shape type', featureData);\n      return null;\n    }\n\n    const shapeCenter = featureData.getShapeProperty('center');\n    if (!Array.isArray(shapeCenter)) {\n      log.error('BaseDrag.moveCircle: missing center in the featureData', featureData);\n      return null;\n    }\n\n    const geoJson = featureData.getGeoJson() as Feature<Polygon>;\n    const lngLatDiff = getLngLatDiff(oldLngLat, newLngLat);\n    const circleRimLngLat = getGeoJsonFirstPoint(geoJson);\n    if (!circleRimLngLat) {\n      log.error('BaseDrag.moveCircle: missing center circleRimLngLat');\n      return null;\n    }\n\n    const newCenterCoords: LngLatTuple = [\n      shapeCenter[0] + lngLatDiff.lng,\n      shapeCenter[1] + lngLatDiff.lat,\n    ];\n    featureData.setShapeProperty('center', newCenterCoords);\n\n    const circlePolygon = getGeoJsonCircle({\n      center: newCenterCoords,\n      radius: this.gm.mapAdapter.getDistance(shapeCenter, circleRimLngLat),\n    });\n\n    return {\n      type: 'Feature',\n      properties: {\n        shape: 'circle',\n      },\n      geometry: circlePolygon.geometry,\n    };\n  }\n}\n","const UNIT_SYSTEMS = {\n  imperial: 'en-US',\n  metric: 'nb-NO',\n} as const;\n\nconst UNITS = {\n  distance: {\n    metric: [\n      { range: [0, 1], unit: 'cm', factor: 100 },\n      { range: [1, 10000], unit: 'm', factor: 1 },\n      { range: [10000, Infinity], unit: 'km', factor: 0.001 },\n    ],\n    imperial: [\n      { range: [0, 0.3048], factor: 39.3701, unit: 'in' },\n      { range: [0.3048, 1609.344], factor: 3.28084, unit: 'ft' },\n      { range: [1609.344, Infinity], factor: 0.000621371, unit: 'mi' },\n    ],\n  },\n  area: {\n    metric: [\n      { range: [0, 1], unit: 'cm', factor: 10000 },\n      { range: [1, 10000], unit: 'm', factor: 1 },\n      { range: [100000, Infinity], unit: 'km', factor: 0.000001 },\n    ],\n    imperial: [\n      { range: [0, 0.092903], factor: 1550.0031, unit: 'in' },\n      { range: [0.092903, 4046.856], factor: 10.7639, unit: 'ft' },\n      { range: [4046.856, 2_589_988], factor: 0.000247105, unit: 'ac' },\n      { range: [2_589_988, Infinity], factor: 3.861e-7, unit: 'mi' },\n    ],\n  },\n} as const;\n\nconst IMPERIAL_REGIONS = new Set(['US', 'LR', 'MM', 'GB', 'UK', 'IE']);\n\nexport const isImperialByBrowser = () => {\n  const loc = new Intl.Locale(navigator.language);\n  return IMPERIAL_REGIONS.has(loc.region || '--');\n};\n\nexport type NumberFormatOptions = {\n  units: 'imperial' | 'metric';\n  minimumFractionDigits?: number;\n  maximumFractionDigits?: number;\n};\n\nexport const toMod = (num: number, mod: number) => ((num % mod) + mod) % mod;\n\nexport const formatNumber = (num: number, options: NumberFormatOptions): string => {\n  return new Intl.NumberFormat(UNIT_SYSTEMS[options.units], {\n    minimumFractionDigits: options.minimumFractionDigits ?? 0,\n    maximumFractionDigits: options.maximumFractionDigits ?? 2,\n  }).format(num);\n};\n\nexport const formatDistance = (num: number, options: NumberFormatOptions): string => {\n  const ranges = UNITS.distance[options.units];\n  const range = ranges.find((item) => num >= item.range[0] && num < item.range[1]);\n\n  if (range) {\n    return `${formatNumber(num * range.factor, options)} ${range.unit}`;\n  }\n\n  return formatNumber(num, options);\n};\n\nexport const formatArea = (num: number, options: NumberFormatOptions): string => {\n  const ranges = UNITS.area[options.units];\n  const range = ranges.find((item) => num >= item.range[0] && num < item.range[1]);\n\n  if (range) {\n    return `${formatNumber(num * range.factor, options)} ${range.unit}`;\n  }\n\n  return formatNumber(num, options);\n};\n","import {\n  type EditModeName,\n  type FeatureShape,\n  type GeoJsonShapeFeature,\n  type GmEditMarkerEvent,\n  type GmEditMarkerMoveEvent,\n  type GmSystemEvent,\n  type LngLatTuple,\n  type MapHandlerReturnData,\n  type MarkerData,\n  SOURCES,\n} from '@/main.ts';\nimport { BaseDrag } from '@/modes/edit/base-drag.ts';\nimport { getFeatureFirstPoint } from '@/utils/features.ts';\nimport {\n  ellipseSteps,\n  findCoordinateIndices,\n  getGeoJsonCircle,\n  getGeoJsonCoordinatesCount,\n  getGeoJsonEllipse,\n  isLineStringFeature,\n  isMultiPolygonFeature,\n  isPolygonFeature,\n  removeVertexFromGeoJsonFeature,\n  twoCoordsToGeoJsonRectangle,\n} from '@/utils/geojson.ts';\nimport { isGmEditEvent } from '@/utils/guards/modes.ts';\nimport { toMod } from '@/utils/number.ts';\nimport type { Feature, LineString, MultiPolygon, Polygon } from 'geojson';\nimport { cloneDeep, get } from 'lodash-es';\nimport log from 'loglevel';\nimport { isSnapGuidesHelper } from '@/utils/guards/interfaces.ts';\n\ntype UpdateShapeHandler = (event: GmEditMarkerMoveEvent) => GeoJsonShapeFeature | null;\n\nexport class EditChange extends BaseDrag {\n  mode: EditModeName = 'change';\n  cutVertexShapeTypes: Array<FeatureShape> = ['line', 'polygon', 'rectangle'];\n  markerData: MarkerData | null = null;\n\n  shapeUpdateHandlers: { [key in FeatureShape]?: UpdateShapeHandler } = {\n    marker: this.updateSingleVertex.bind(this),\n    circle: this.updateCircle.bind(this),\n    circle_marker: this.updateSingleVertex.bind(this),\n    ellipse: this.updateEllipse.bind(this),\n    text_marker: this.updateSingleVertex.bind(this),\n    line: this.updateSingleVertex.bind(this),\n    rectangle: this.updateRectangle.bind(this),\n    polygon: this.updateSingleVertex.bind(this),\n  };\n\n  get snapGuidesInstance() {\n    const instance = this.gm.actionInstances.helper__snap_guides;\n    return isSnapGuidesHelper(instance) ? instance : null;\n  }\n\n  onStartAction() {\n    // ...\n  }\n\n  onEndAction() {\n    this.snapGuidesInstance?.removeSnapGuides();\n  }\n\n  handleGmEdit(event: GmSystemEvent): MapHandlerReturnData {\n    if (!isGmEditEvent(event)) {\n      return { next: true };\n    }\n\n    if (event.action === 'marker_move' && event.lngLatStart && event.markerData) {\n      if (event.markerData.type === 'vertex') {\n        this.moveVertex(event);\n        return { next: false };\n      } else if (event.lngLatEnd) {\n        this.moveSource(event.featureData, event.lngLatStart, event.lngLatEnd);\n        return { next: false };\n      }\n    }\n\n    if (event.action === 'marker_right_click') {\n      this.cutVertex(event);\n      this.fireFeatureEditEndEvent({ feature: event.featureData });\n    } else if (event.action === 'edge_marker_click') {\n      this.insertVertex(event);\n    } else if (event.action === 'marker_captured') {\n      this.setCursorToPointer();\n      event.featureData.changeSource({ sourceName: SOURCES.temporary, atomic: true });\n      this.flags.actionInProgress = true;\n      this.fireFeatureEditStartEvent({ feature: event.featureData });\n    } else if (event.action === 'marker_released') {\n      this.markerData = null;\n      this.snapGuidesInstance?.removeSnapGuides();\n      event.featureData.changeSource({ sourceName: SOURCES.main, atomic: true });\n      this.fireFeatureEditEndEvent({ feature: event.featureData });\n      this.flags.actionInProgress = false;\n    }\n\n    return { next: true };\n  }\n\n  moveVertex(event: GmEditMarkerMoveEvent) {\n    if (!this.markerData) {\n      this.markerData = event.markerData || null;\n      this.snapGuidesInstance?.updateSnapGuides(event.featureData.getGeoJson(), event.lngLatStart);\n    }\n\n    const featureData = event.featureData;\n    const shape = featureData.shape;\n    const updatedGeoJson = this.shapeUpdateHandlers[shape]?.(event) || null;\n\n    if (updatedGeoJson) {\n      this.fireBeforeFeatureUpdate({\n        features: [featureData],\n        geoJsonFeatures: [updatedGeoJson],\n      });\n\n      this.updateFeatureGeoJson({ featureData, featureGeoJson: updatedGeoJson });\n    } else {\n      log.error('EditChange.moveVertex: invalid geojson', updatedGeoJson, event);\n    }\n  }\n\n  cutVertex(event: GmEditMarkerEvent) {\n    const featureData = event.featureData;\n    if (event.markerData.type !== 'vertex') {\n      return;\n    }\n\n    if (!this.cutVertexShapeTypes.includes(featureData.shape)) {\n      return;\n    }\n\n    let featureUpdated = false;\n    type CutFeature = Feature<LineString | Polygon | MultiPolygon>;\n    const geoJson = featureData.getGeoJson() as CutFeature;\n    const marker = event.markerData.instance;\n\n    if (isLineStringFeature(geoJson)) {\n      if (getGeoJsonCoordinatesCount(geoJson) <= 2) {\n        this.gm.features.delete(featureData);\n        return;\n      }\n    } else if (isMultiPolygonFeature(geoJson)) {\n      if (getGeoJsonCoordinatesCount(geoJson) <= 3) {\n        this.gm.features.delete(featureData);\n        return;\n      }\n    } else if (isPolygonFeature(geoJson)) {\n      if (getGeoJsonCoordinatesCount(geoJson) <= 3) {\n        this.gm.features.delete(featureData);\n        return;\n      }\n    }\n\n    const markerPosition = getFeatureFirstPoint(marker);\n    if (markerPosition) {\n      featureUpdated = removeVertexFromGeoJsonFeature(geoJson, markerPosition);\n    }\n\n    if (featureUpdated) {\n      featureData.convertToPolygon(); // if possible\n      featureData.updateGeoJsonGeometry(geoJson.geometry);\n      this.fireFeatureUpdatedEvent({\n        sourceFeatures: [featureData],\n        targetFeatures: [featureData],\n        markerData: event.markerData,\n      });\n    } else {\n      log.error('EditChange.cutVertex: feature not updated', event);\n    }\n  }\n\n  insertVertex(event: GmEditMarkerEvent) {\n    if (event.markerData.type !== 'edge') {\n      return;\n    }\n\n    type InsertFeature = Feature<LineString | Polygon | MultiPolygon>;\n    const geoJson = event.featureData.getGeoJson() as InsertFeature;\n\n    const coordinatesPath = event.markerData.segment.end.path;\n    const insertIndex = coordinatesPath.pop();\n    const coordinates = get(geoJson, coordinatesPath) as Array<LngLatTuple>;\n\n    if (typeof insertIndex === 'number') {\n      coordinates.splice(insertIndex, 0, [...event.markerData.position.coordinate]);\n      event.featureData.updateGeoJsonGeometry(geoJson.geometry);\n      event.featureData.convertToPolygon(); // if possible\n      this.fireFeatureUpdatedEvent({\n        sourceFeatures: [event.featureData],\n        targetFeatures: [event.featureData],\n        markerData: event.markerData,\n      });\n    }\n  }\n\n  updateSingleVertex({ featureData, lngLatEnd, markerData }: GmEditMarkerMoveEvent) {\n    const geoJson = cloneDeep(featureData.getGeoJson() as GeoJsonShapeFeature);\n    const coordPath = cloneDeep(markerData.position.path);\n    const coordIndex = coordPath.pop();\n    const coordinates = get(geoJson, coordPath) as Array<LngLatTuple>;\n\n    if (Array.isArray(coordinates) && typeof coordIndex === 'number') {\n      coordinates[coordIndex] = [...lngLatEnd];\n      if (coordIndex === 0 && featureData.shape === 'polygon') {\n        coordinates[coordinates.length - 1] = [...lngLatEnd];\n      }\n    } else {\n      log.error('BaseDrag.moveSingleVertex: invalid coordinates', geoJson, coordPath);\n    }\n\n    return geoJson;\n  }\n\n  updateCircle({ featureData, lngLatEnd }: GmEditMarkerMoveEvent): GeoJsonShapeFeature | null {\n    const shapeCenter = featureData.getShapeProperty('center');\n\n    if (featureData.shape !== 'circle' || !shapeCenter) {\n      log.error('BaseDrag.moveCircle: invalid shape type / missing center', featureData);\n      return null;\n    }\n\n    const circlePolygon = getGeoJsonCircle({\n      center: shapeCenter,\n      radius: this.gm.mapAdapter.getDistance(shapeCenter, lngLatEnd),\n    });\n\n    return {\n      type: 'Feature',\n      properties: {\n        shape: 'circle',\n      },\n      geometry: circlePolygon.geometry,\n    };\n  }\n\n  updateEllipse(args: GmEditMarkerMoveEvent): GeoJsonShapeFeature | null {\n    const { featureData, lngLatEnd, markerData } = args;\n    if (featureData.shape !== 'ellipse') {\n      log.error('EditChange.updateEllipse: invalid shape type', featureData);\n      return null;\n    }\n\n    const center = featureData.getShapeProperty('center');\n    let xSemiAxis = featureData.getShapeProperty('xSemiAxis');\n    let ySemiAxis = featureData.getShapeProperty('ySemiAxis');\n    const angle = featureData.getShapeProperty('angle');\n\n    if (\n      !Array.isArray(center) ||\n      typeof xSemiAxis !== 'number' ||\n      typeof ySemiAxis !== 'number' ||\n      typeof angle !== 'number'\n    ) {\n      log.error(\n        'updateEllipse: missing center, xSemiAxis, ySemiAxis or angle in the featureData',\n        featureData,\n      );\n      return null;\n    }\n\n    const distance = this.gm.mapAdapter.getDistance(center, lngLatEnd);\n\n    const vertexIdx = markerData.position.path[3] as number;\n    const vertexRatio = Math.floor((vertexIdx / ellipseSteps) * 4);\n\n    const axe = vertexRatio === 0 || vertexRatio === 2 ? 'x' : 'y';\n    if (axe === 'x') {\n      xSemiAxis = distance;\n    } else {\n      ySemiAxis = distance;\n    }\n\n    const ellipsePolygon = getGeoJsonEllipse({\n      center,\n      xSemiAxis,\n      ySemiAxis,\n      angle,\n    });\n\n    return ellipsePolygon;\n  }\n\n  updateRectangle({ featureData, lngLatStart, lngLatEnd }: GmEditMarkerMoveEvent) {\n    const totalCoordsCount = 4;\n    const geoJson = featureData.getGeoJson() as GeoJsonShapeFeature;\n    const shapeCoords = geoJson.geometry.coordinates[0] as Array<LngLatTuple>;\n\n    // Find the index of the starting vertex\n    const { absCoordIndex: startIndex } = findCoordinateIndices(geoJson, lngLatStart);\n    if (startIndex === -1) {\n      log.error('EditChange.updateRectangle: start vertex not found', featureData);\n      return null;\n    }\n\n    const oppositeVertexIndex = toMod(startIndex - 2, totalCoordsCount);\n    const oppositeCoordinate = shapeCoords[oppositeVertexIndex] as LngLatTuple;\n    return twoCoordsToGeoJsonRectangle(lngLatEnd, oppositeCoordinate);\n  }\n}\n","// index.ts\nimport { booleanPointInPolygon } from \"@turf/boolean-point-in-polygon\";\nimport { lineIntersect } from \"@turf/line-intersect\";\nimport { flattenEach } from \"@turf/meta\";\nimport { polygonToLine } from \"@turf/polygon-to-line\";\nfunction booleanDisjoint(feature1, feature2, {\n  ignoreSelfIntersections = true\n} = { ignoreSelfIntersections: true }) {\n  let bool = true;\n  flattenEach(feature1, (flatten1) => {\n    flattenEach(feature2, (flatten2) => {\n      if (bool === false) {\n        return false;\n      }\n      bool = disjoint(\n        flatten1.geometry,\n        flatten2.geometry,\n        ignoreSelfIntersections\n      );\n    });\n  });\n  return bool;\n}\nfunction disjoint(geom1, geom2, ignoreSelfIntersections) {\n  switch (geom1.type) {\n    case \"Point\":\n      switch (geom2.type) {\n        case \"Point\":\n          return !compareCoords(geom1.coordinates, geom2.coordinates);\n        case \"LineString\":\n          return !isPointOnLine(geom2, geom1);\n        case \"Polygon\":\n          return !booleanPointInPolygon(geom1, geom2);\n      }\n      break;\n    case \"LineString\":\n      switch (geom2.type) {\n        case \"Point\":\n          return !isPointOnLine(geom1, geom2);\n        case \"LineString\":\n          return !isLineOnLine(geom1, geom2, ignoreSelfIntersections);\n        case \"Polygon\":\n          return !isLineInPoly(geom2, geom1, ignoreSelfIntersections);\n      }\n      break;\n    case \"Polygon\":\n      switch (geom2.type) {\n        case \"Point\":\n          return !booleanPointInPolygon(geom2, geom1);\n        case \"LineString\":\n          return !isLineInPoly(geom1, geom2, ignoreSelfIntersections);\n        case \"Polygon\":\n          return !isPolyInPoly(geom2, geom1, ignoreSelfIntersections);\n      }\n  }\n  return false;\n}\nfunction isPointOnLine(lineString, pt) {\n  for (let i = 0; i < lineString.coordinates.length - 1; i++) {\n    if (isPointOnLineSegment(\n      lineString.coordinates[i],\n      lineString.coordinates[i + 1],\n      pt.coordinates\n    )) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction isLineOnLine(lineString1, lineString2, ignoreSelfIntersections) {\n  const doLinesIntersect = lineIntersect(lineString1, lineString2, {\n    ignoreSelfIntersections\n  });\n  if (doLinesIntersect.features.length > 0) {\n    return true;\n  }\n  return false;\n}\nfunction isLineInPoly(polygon, lineString, ignoreSelfIntersections) {\n  for (const coord of lineString.coordinates) {\n    if (booleanPointInPolygon(coord, polygon)) {\n      return true;\n    }\n  }\n  const doLinesIntersect = lineIntersect(lineString, polygonToLine(polygon), {\n    ignoreSelfIntersections\n  });\n  if (doLinesIntersect.features.length > 0) {\n    return true;\n  }\n  return false;\n}\nfunction isPolyInPoly(feature1, feature2, ignoreSelfIntersections) {\n  for (const coord1 of feature1.coordinates[0]) {\n    if (booleanPointInPolygon(coord1, feature2)) {\n      return true;\n    }\n  }\n  for (const coord2 of feature2.coordinates[0]) {\n    if (booleanPointInPolygon(coord2, feature1)) {\n      return true;\n    }\n  }\n  const doLinesIntersect = lineIntersect(\n    polygonToLine(feature1),\n    polygonToLine(feature2),\n    { ignoreSelfIntersections }\n  );\n  if (doLinesIntersect.features.length > 0) {\n    return true;\n  }\n  return false;\n}\nfunction isPointOnLineSegment(lineSegmentStart, lineSegmentEnd, pt) {\n  const dxc = pt[0] - lineSegmentStart[0];\n  const dyc = pt[1] - lineSegmentStart[1];\n  const dxl = lineSegmentEnd[0] - lineSegmentStart[0];\n  const dyl = lineSegmentEnd[1] - lineSegmentStart[1];\n  const cross = dxc * dyl - dyc * dxl;\n  if (cross !== 0) {\n    return false;\n  }\n  if (Math.abs(dxl) >= Math.abs(dyl)) {\n    if (dxl > 0) {\n      return lineSegmentStart[0] <= pt[0] && pt[0] <= lineSegmentEnd[0];\n    } else {\n      return lineSegmentEnd[0] <= pt[0] && pt[0] <= lineSegmentStart[0];\n    }\n  } else if (dyl > 0) {\n    return lineSegmentStart[1] <= pt[1] && pt[1] <= lineSegmentEnd[1];\n  } else {\n    return lineSegmentEnd[1] <= pt[1] && pt[1] <= lineSegmentStart[1];\n  }\n}\nfunction compareCoords(pair1, pair2) {\n  return pair1[0] === pair2[0] && pair1[1] === pair2[1];\n}\nvar index_default = booleanDisjoint;\nexport {\n  booleanDisjoint,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { booleanDisjoint } from \"@turf/boolean-disjoint\";\nimport { flattenEach } from \"@turf/meta\";\nfunction booleanIntersects(feature1, feature2, {\n  ignoreSelfIntersections = true\n} = {}) {\n  let bool = false;\n  flattenEach(feature1, (flatten1) => {\n    flattenEach(feature2, (flatten2) => {\n      if (bool === true) {\n        return true;\n      }\n      bool = !booleanDisjoint(flatten1.geometry, flatten2.geometry, {\n        ignoreSelfIntersections\n      });\n    });\n  });\n  return bool;\n}\nvar index_default = booleanIntersects;\nexport {\n  booleanIntersects,\n  index_default as default\n};\n//# sourceMappingURL=index.js.map","/*\r\n *      bignumber.js v9.1.2\r\n *      A JavaScript library for arbitrary-precision arithmetic.\r\n *      https://github.com/MikeMcl/bignumber.js\r\n *      Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>\r\n *      MIT Licensed.\r\n *\r\n *      BigNumber.prototype methods     |  BigNumber methods\r\n *                                      |\r\n *      absoluteValue            abs    |  clone\r\n *      comparedTo                      |  config               set\r\n *      decimalPlaces            dp     |      DECIMAL_PLACES\r\n *      dividedBy                div    |      ROUNDING_MODE\r\n *      dividedToIntegerBy       idiv   |      EXPONENTIAL_AT\r\n *      exponentiatedBy          pow    |      RANGE\r\n *      integerValue                    |      CRYPTO\r\n *      isEqualTo                eq     |      MODULO_MODE\r\n *      isFinite                        |      POW_PRECISION\r\n *      isGreaterThan            gt     |      FORMAT\r\n *      isGreaterThanOrEqualTo   gte    |      ALPHABET\r\n *      isInteger                       |  isBigNumber\r\n *      isLessThan               lt     |  maximum              max\r\n *      isLessThanOrEqualTo      lte    |  minimum              min\r\n *      isNaN                           |  random\r\n *      isNegative                      |  sum\r\n *      isPositive                      |\r\n *      isZero                          |\r\n *      minus                           |\r\n *      modulo                   mod    |\r\n *      multipliedBy             times  |\r\n *      negated                         |\r\n *      plus                            |\r\n *      precision                sd     |\r\n *      shiftedBy                       |\r\n *      squareRoot               sqrt   |\r\n *      toExponential                   |\r\n *      toFixed                         |\r\n *      toFormat                        |\r\n *      toFraction                      |\r\n *      toJSON                          |\r\n *      toNumber                        |\r\n *      toPrecision                     |\r\n *      toString                        |\r\n *      valueOf                         |\r\n *\r\n */\r\n\r\n\r\nvar\r\n  isNumeric = /^-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?$/i,\r\n  mathceil = Math.ceil,\r\n  mathfloor = Math.floor,\r\n\r\n  bignumberError = '[BigNumber Error] ',\r\n  tooManyDigits = bignumberError + 'Number primitive has more than 15 significant digits: ',\r\n\r\n  BASE = 1e14,\r\n  LOG_BASE = 14,\r\n  MAX_SAFE_INTEGER = 0x1fffffffffffff,         // 2^53 - 1\r\n  // MAX_INT32 = 0x7fffffff,                   // 2^31 - 1\r\n  POWS_TEN = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13],\r\n  SQRT_BASE = 1e7,\r\n\r\n  // EDITABLE\r\n  // The limit on the value of DECIMAL_PLACES, TO_EXP_NEG, TO_EXP_POS, MIN_EXP, MAX_EXP, and\r\n  // the arguments to toExponential, toFixed, toFormat, and toPrecision.\r\n  MAX = 1E9;                                   // 0 to MAX_INT32\r\n\r\n\r\n/*\r\n * Create and return a BigNumber constructor.\r\n */\r\nfunction clone(configObject) {\r\n  var div, convertBase, parseNumeric,\r\n    P = BigNumber.prototype = { constructor: BigNumber, toString: null, valueOf: null },\r\n    ONE = new BigNumber(1),\r\n\r\n\r\n    //----------------------------- EDITABLE CONFIG DEFAULTS -------------------------------\r\n\r\n\r\n    // The default values below must be integers within the inclusive ranges stated.\r\n    // The values can also be changed at run-time using BigNumber.set.\r\n\r\n    // The maximum number of decimal places for operations involving division.\r\n    DECIMAL_PLACES = 20,                     // 0 to MAX\r\n\r\n    // The rounding mode used when rounding to the above decimal places, and when using\r\n    // toExponential, toFixed, toFormat and toPrecision, and round (default value).\r\n    // UP         0 Away from zero.\r\n    // DOWN       1 Towards zero.\r\n    // CEIL       2 Towards +Infinity.\r\n    // FLOOR      3 Towards -Infinity.\r\n    // HALF_UP    4 Towards nearest neighbour. If equidistant, up.\r\n    // HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.\r\n    // HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.\r\n    // HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.\r\n    // HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.\r\n    ROUNDING_MODE = 4,                       // 0 to 8\r\n\r\n    // EXPONENTIAL_AT : [TO_EXP_NEG , TO_EXP_POS]\r\n\r\n    // The exponent value at and beneath which toString returns exponential notation.\r\n    // Number type: -7\r\n    TO_EXP_NEG = -7,                         // 0 to -MAX\r\n\r\n    // The exponent value at and above which toString returns exponential notation.\r\n    // Number type: 21\r\n    TO_EXP_POS = 21,                         // 0 to MAX\r\n\r\n    // RANGE : [MIN_EXP, MAX_EXP]\r\n\r\n    // The minimum exponent value, beneath which underflow to zero occurs.\r\n    // Number type: -324  (5e-324)\r\n    MIN_EXP = -1e7,                          // -1 to -MAX\r\n\r\n    // The maximum exponent value, above which overflow to Infinity occurs.\r\n    // Number type:  308  (1.7976931348623157e+308)\r\n    // For MAX_EXP > 1e7, e.g. new BigNumber('1e100000000').plus(1) may be slow.\r\n    MAX_EXP = 1e7,                           // 1 to MAX\r\n\r\n    // Whether to use cryptographically-secure random number generation, if available.\r\n    CRYPTO = false,                          // true or false\r\n\r\n    // The modulo mode used when calculating the modulus: a mod n.\r\n    // The quotient (q = a / n) is calculated according to the corresponding rounding mode.\r\n    // The remainder (r) is calculated as: r = a - n * q.\r\n    //\r\n    // UP        0 The remainder is positive if the dividend is negative, else is negative.\r\n    // DOWN      1 The remainder has the same sign as the dividend.\r\n    //             This modulo mode is commonly known as 'truncated division' and is\r\n    //             equivalent to (a % n) in JavaScript.\r\n    // FLOOR     3 The remainder has the same sign as the divisor (Python %).\r\n    // HALF_EVEN 6 This modulo mode implements the IEEE 754 remainder function.\r\n    // EUCLID    9 Euclidian division. q = sign(n) * floor(a / abs(n)).\r\n    //             The remainder is always positive.\r\n    //\r\n    // The truncated division, floored division, Euclidian division and IEEE 754 remainder\r\n    // modes are commonly used for the modulus operation.\r\n    // Although the other rounding modes can also be used, they may not give useful results.\r\n    MODULO_MODE = 1,                         // 0 to 9\r\n\r\n    // The maximum number of significant digits of the result of the exponentiatedBy operation.\r\n    // If POW_PRECISION is 0, there will be unlimited significant digits.\r\n    POW_PRECISION = 0,                       // 0 to MAX\r\n\r\n    // The format specification used by the BigNumber.prototype.toFormat method.\r\n    FORMAT = {\r\n      prefix: '',\r\n      groupSize: 3,\r\n      secondaryGroupSize: 0,\r\n      groupSeparator: ',',\r\n      decimalSeparator: '.',\r\n      fractionGroupSize: 0,\r\n      fractionGroupSeparator: '\\xA0',        // non-breaking space\r\n      suffix: ''\r\n    },\r\n\r\n    // The alphabet used for base conversion. It must be at least 2 characters long, with no '+',\r\n    // '-', '.', whitespace, or repeated character.\r\n    // '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_'\r\n    ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyz',\r\n    alphabetHasNormalDecimalDigits = true;\r\n\r\n\r\n  //------------------------------------------------------------------------------------------\r\n\r\n\r\n  // CONSTRUCTOR\r\n\r\n\r\n  /*\r\n   * The BigNumber constructor and exported function.\r\n   * Create and return a new instance of a BigNumber object.\r\n   *\r\n   * v {number|string|BigNumber} A numeric value.\r\n   * [b] {number} The base of v. Integer, 2 to ALPHABET.length inclusive.\r\n   */\r\n  function BigNumber(v, b) {\r\n    var alphabet, c, caseChanged, e, i, isNum, len, str,\r\n      x = this;\r\n\r\n    // Enable constructor call without `new`.\r\n    if (!(x instanceof BigNumber)) return new BigNumber(v, b);\r\n\r\n    if (b == null) {\r\n\r\n      if (v && v._isBigNumber === true) {\r\n        x.s = v.s;\r\n\r\n        if (!v.c || v.e > MAX_EXP) {\r\n          x.c = x.e = null;\r\n        } else if (v.e < MIN_EXP) {\r\n          x.c = [x.e = 0];\r\n        } else {\r\n          x.e = v.e;\r\n          x.c = v.c.slice();\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      if ((isNum = typeof v == 'number') && v * 0 == 0) {\r\n\r\n        // Use `1 / n` to handle minus zero also.\r\n        x.s = 1 / v < 0 ? (v = -v, -1) : 1;\r\n\r\n        // Fast path for integers, where n < 2147483648 (2**31).\r\n        if (v === ~~v) {\r\n          for (e = 0, i = v; i >= 10; i /= 10, e++);\r\n\r\n          if (e > MAX_EXP) {\r\n            x.c = x.e = null;\r\n          } else {\r\n            x.e = e;\r\n            x.c = [v];\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        str = String(v);\r\n      } else {\r\n\r\n        if (!isNumeric.test(str = String(v))) return parseNumeric(x, str, isNum);\r\n\r\n        x.s = str.charCodeAt(0) == 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n\r\n      // Exponential form?\r\n      if ((i = str.search(/e/i)) > 0) {\r\n\r\n        // Determine exponent.\r\n        if (e < 0) e = i;\r\n        e += +str.slice(i + 1);\r\n        str = str.substring(0, i);\r\n      } else if (e < 0) {\r\n\r\n        // Integer.\r\n        e = str.length;\r\n      }\r\n\r\n    } else {\r\n\r\n      // '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n      intCheck(b, 2, ALPHABET.length, 'Base');\r\n\r\n      // Allow exponential notation to be used with base 10 argument, while\r\n      // also rounding to DECIMAL_PLACES as with other bases.\r\n      if (b == 10 && alphabetHasNormalDecimalDigits) {\r\n        x = new BigNumber(v);\r\n        return round(x, DECIMAL_PLACES + x.e + 1, ROUNDING_MODE);\r\n      }\r\n\r\n      str = String(v);\r\n\r\n      if (isNum = typeof v == 'number') {\r\n\r\n        // Avoid potential interpretation of Infinity and NaN as base 44+ values.\r\n        if (v * 0 != 0) return parseNumeric(x, str, isNum, b);\r\n\r\n        x.s = 1 / v < 0 ? (str = str.slice(1), -1) : 1;\r\n\r\n        // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n        if (BigNumber.DEBUG && str.replace(/^0\\.0*|\\./, '').length > 15) {\r\n          throw Error\r\n           (tooManyDigits + v);\r\n        }\r\n      } else {\r\n        x.s = str.charCodeAt(0) === 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      alphabet = ALPHABET.slice(0, b);\r\n      e = i = 0;\r\n\r\n      // Check that str is a valid base b number.\r\n      // Don't use RegExp, so alphabet can contain special characters.\r\n      for (len = str.length; i < len; i++) {\r\n        if (alphabet.indexOf(c = str.charAt(i)) < 0) {\r\n          if (c == '.') {\r\n\r\n            // If '.' is not the first character and it has not be found before.\r\n            if (i > e) {\r\n              e = len;\r\n              continue;\r\n            }\r\n          } else if (!caseChanged) {\r\n\r\n            // Allow e.g. hexadecimal 'FF' as well as 'ff'.\r\n            if (str == str.toUpperCase() && (str = str.toLowerCase()) ||\r\n                str == str.toLowerCase() && (str = str.toUpperCase())) {\r\n              caseChanged = true;\r\n              i = -1;\r\n              e = 0;\r\n              continue;\r\n            }\r\n          }\r\n\r\n          return parseNumeric(x, String(v), isNum, b);\r\n        }\r\n      }\r\n\r\n      // Prevent later check for length on converted number.\r\n      isNum = false;\r\n      str = convertBase(str, b, 10, x.s);\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n      else e = str.length;\r\n    }\r\n\r\n    // Determine leading zeros.\r\n    for (i = 0; str.charCodeAt(i) === 48; i++);\r\n\r\n    // Determine trailing zeros.\r\n    for (len = str.length; str.charCodeAt(--len) === 48;);\r\n\r\n    if (str = str.slice(i, ++len)) {\r\n      len -= i;\r\n\r\n      // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n      if (isNum && BigNumber.DEBUG &&\r\n        len > 15 && (v > MAX_SAFE_INTEGER || v !== mathfloor(v))) {\r\n          throw Error\r\n           (tooManyDigits + (x.s * v));\r\n      }\r\n\r\n       // Overflow?\r\n      if ((e = e - i - 1) > MAX_EXP) {\r\n\r\n        // Infinity.\r\n        x.c = x.e = null;\r\n\r\n      // Underflow?\r\n      } else if (e < MIN_EXP) {\r\n\r\n        // Zero.\r\n        x.c = [x.e = 0];\r\n      } else {\r\n        x.e = e;\r\n        x.c = [];\r\n\r\n        // Transform base\r\n\r\n        // e is the base 10 exponent.\r\n        // i is where to slice str to get the first element of the coefficient array.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (e < 0) i += LOG_BASE;  // i < 1\r\n\r\n        if (i < len) {\r\n          if (i) x.c.push(+str.slice(0, i));\r\n\r\n          for (len -= LOG_BASE; i < len;) {\r\n            x.c.push(+str.slice(i, i += LOG_BASE));\r\n          }\r\n\r\n          i = LOG_BASE - (str = str.slice(i)).length;\r\n        } else {\r\n          i -= len;\r\n        }\r\n\r\n        for (; i--; str += '0');\r\n        x.c.push(+str);\r\n      }\r\n    } else {\r\n\r\n      // Zero.\r\n      x.c = [x.e = 0];\r\n    }\r\n  }\r\n\r\n\r\n  // CONSTRUCTOR PROPERTIES\r\n\r\n\r\n  BigNumber.clone = clone;\r\n\r\n  BigNumber.ROUND_UP = 0;\r\n  BigNumber.ROUND_DOWN = 1;\r\n  BigNumber.ROUND_CEIL = 2;\r\n  BigNumber.ROUND_FLOOR = 3;\r\n  BigNumber.ROUND_HALF_UP = 4;\r\n  BigNumber.ROUND_HALF_DOWN = 5;\r\n  BigNumber.ROUND_HALF_EVEN = 6;\r\n  BigNumber.ROUND_HALF_CEIL = 7;\r\n  BigNumber.ROUND_HALF_FLOOR = 8;\r\n  BigNumber.EUCLID = 9;\r\n\r\n\r\n  /*\r\n   * Configure infrequently-changing library-wide settings.\r\n   *\r\n   * Accept an object with the following optional properties (if the value of a property is\r\n   * a number, it must be an integer within the inclusive range stated):\r\n   *\r\n   *   DECIMAL_PLACES   {number}           0 to MAX\r\n   *   ROUNDING_MODE    {number}           0 to 8\r\n   *   EXPONENTIAL_AT   {number|number[]}  -MAX to MAX  or  [-MAX to 0, 0 to MAX]\r\n   *   RANGE            {number|number[]}  -MAX to MAX (not zero)  or  [-MAX to -1, 1 to MAX]\r\n   *   CRYPTO           {boolean}          true or false\r\n   *   MODULO_MODE      {number}           0 to 9\r\n   *   POW_PRECISION       {number}           0 to MAX\r\n   *   ALPHABET         {string}           A string of two or more unique characters which does\r\n   *                                       not contain '.'.\r\n   *   FORMAT           {object}           An object with some of the following properties:\r\n   *     prefix                 {string}\r\n   *     groupSize              {number}\r\n   *     secondaryGroupSize     {number}\r\n   *     groupSeparator         {string}\r\n   *     decimalSeparator       {string}\r\n   *     fractionGroupSize      {number}\r\n   *     fractionGroupSeparator {string}\r\n   *     suffix                 {string}\r\n   *\r\n   * (The values assigned to the above FORMAT object properties are not checked for validity.)\r\n   *\r\n   * E.g.\r\n   * BigNumber.config({ DECIMAL_PLACES : 20, ROUNDING_MODE : 4 })\r\n   *\r\n   * Ignore properties/parameters set to null or undefined, except for ALPHABET.\r\n   *\r\n   * Return an object with the properties current values.\r\n   */\r\n  BigNumber.config = BigNumber.set = function (obj) {\r\n    var p, v;\r\n\r\n    if (obj != null) {\r\n\r\n      if (typeof obj == 'object') {\r\n\r\n        // DECIMAL_PLACES {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] DECIMAL_PLACES {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'DECIMAL_PLACES')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          DECIMAL_PLACES = v;\r\n        }\r\n\r\n        // ROUNDING_MODE {number} Integer, 0 to 8 inclusive.\r\n        // '[BigNumber Error] ROUNDING_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'ROUNDING_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 8, p);\r\n          ROUNDING_MODE = v;\r\n        }\r\n\r\n        // EXPONENTIAL_AT {number|number[]}\r\n        // Integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to 0 inclusive, 0 to MAX inclusive].\r\n        // '[BigNumber Error] EXPONENTIAL_AT {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'EXPONENTIAL_AT')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, 0, p);\r\n            intCheck(v[1], 0, MAX, p);\r\n            TO_EXP_NEG = v[0];\r\n            TO_EXP_POS = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            TO_EXP_NEG = -(TO_EXP_POS = v < 0 ? -v : v);\r\n          }\r\n        }\r\n\r\n        // RANGE {number|number[]} Non-zero integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to -1 inclusive, integer 1 to MAX inclusive].\r\n        // '[BigNumber Error] RANGE {not a primitive number|not an integer|out of range|cannot be zero}: {v}'\r\n        if (obj.hasOwnProperty(p = 'RANGE')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, -1, p);\r\n            intCheck(v[1], 1, MAX, p);\r\n            MIN_EXP = v[0];\r\n            MAX_EXP = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            if (v) {\r\n              MIN_EXP = -(MAX_EXP = v < 0 ? -v : v);\r\n            } else {\r\n              throw Error\r\n               (bignumberError + p + ' cannot be zero: ' + v);\r\n            }\r\n          }\r\n        }\r\n\r\n        // CRYPTO {boolean} true or false.\r\n        // '[BigNumber Error] CRYPTO not true or false: {v}'\r\n        // '[BigNumber Error] crypto unavailable'\r\n        if (obj.hasOwnProperty(p = 'CRYPTO')) {\r\n          v = obj[p];\r\n          if (v === !!v) {\r\n            if (v) {\r\n              if (typeof crypto != 'undefined' && crypto &&\r\n               (crypto.getRandomValues || crypto.randomBytes)) {\r\n                CRYPTO = v;\r\n              } else {\r\n                CRYPTO = !v;\r\n                throw Error\r\n                 (bignumberError + 'crypto unavailable');\r\n              }\r\n            } else {\r\n              CRYPTO = v;\r\n            }\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' not true or false: ' + v);\r\n          }\r\n        }\r\n\r\n        // MODULO_MODE {number} Integer, 0 to 9 inclusive.\r\n        // '[BigNumber Error] MODULO_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'MODULO_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 9, p);\r\n          MODULO_MODE = v;\r\n        }\r\n\r\n        // POW_PRECISION {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] POW_PRECISION {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'POW_PRECISION')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          POW_PRECISION = v;\r\n        }\r\n\r\n        // FORMAT {object}\r\n        // '[BigNumber Error] FORMAT not an object: {v}'\r\n        if (obj.hasOwnProperty(p = 'FORMAT')) {\r\n          v = obj[p];\r\n          if (typeof v == 'object') FORMAT = v;\r\n          else throw Error\r\n           (bignumberError + p + ' not an object: ' + v);\r\n        }\r\n\r\n        // ALPHABET {string}\r\n        // '[BigNumber Error] ALPHABET invalid: {v}'\r\n        if (obj.hasOwnProperty(p = 'ALPHABET')) {\r\n          v = obj[p];\r\n\r\n          // Disallow if less than two characters,\r\n          // or if it contains '+', '-', '.', whitespace, or a repeated character.\r\n          if (typeof v == 'string' && !/^.?$|[+\\-.\\s]|(.).*\\1/.test(v)) {\r\n            alphabetHasNormalDecimalDigits = v.slice(0, 10) == '0123456789';\r\n            ALPHABET = v;\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' invalid: ' + v);\r\n          }\r\n        }\r\n\r\n      } else {\r\n\r\n        // '[BigNumber Error] Object expected: {v}'\r\n        throw Error\r\n         (bignumberError + 'Object expected: ' + obj);\r\n      }\r\n    }\r\n\r\n    return {\r\n      DECIMAL_PLACES: DECIMAL_PLACES,\r\n      ROUNDING_MODE: ROUNDING_MODE,\r\n      EXPONENTIAL_AT: [TO_EXP_NEG, TO_EXP_POS],\r\n      RANGE: [MIN_EXP, MAX_EXP],\r\n      CRYPTO: CRYPTO,\r\n      MODULO_MODE: MODULO_MODE,\r\n      POW_PRECISION: POW_PRECISION,\r\n      FORMAT: FORMAT,\r\n      ALPHABET: ALPHABET\r\n    };\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if v is a BigNumber instance, otherwise return false.\r\n   *\r\n   * If BigNumber.DEBUG is true, throw if a BigNumber instance is not well-formed.\r\n   *\r\n   * v {any}\r\n   *\r\n   * '[BigNumber Error] Invalid BigNumber: {v}'\r\n   */\r\n  BigNumber.isBigNumber = function (v) {\r\n    if (!v || v._isBigNumber !== true) return false;\r\n    if (!BigNumber.DEBUG) return true;\r\n\r\n    var i, n,\r\n      c = v.c,\r\n      e = v.e,\r\n      s = v.s;\r\n\r\n    out: if ({}.toString.call(c) == '[object Array]') {\r\n\r\n      if ((s === 1 || s === -1) && e >= -MAX && e <= MAX && e === mathfloor(e)) {\r\n\r\n        // If the first element is zero, the BigNumber value must be zero.\r\n        if (c[0] === 0) {\r\n          if (e === 0 && c.length === 1) return true;\r\n          break out;\r\n        }\r\n\r\n        // Calculate number of digits that c[0] should have, based on the exponent.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (i < 1) i += LOG_BASE;\r\n\r\n        // Calculate number of digits of c[0].\r\n        //if (Math.ceil(Math.log(c[0] + 1) / Math.LN10) == i) {\r\n        if (String(c[0]).length == i) {\r\n\r\n          for (i = 0; i < c.length; i++) {\r\n            n = c[i];\r\n            if (n < 0 || n >= BASE || n !== mathfloor(n)) break out;\r\n          }\r\n\r\n          // Last element cannot be zero, unless it is the only element.\r\n          if (n !== 0) return true;\r\n        }\r\n      }\r\n\r\n    // Infinity/NaN\r\n    } else if (c === null && e === null && (s === null || s === 1 || s === -1)) {\r\n      return true;\r\n    }\r\n\r\n    throw Error\r\n      (bignumberError + 'Invalid BigNumber: ' + v);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the maximum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.maximum = BigNumber.max = function () {\r\n    return maxOrMin(arguments, -1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the minimum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.minimum = BigNumber.min = function () {\r\n    return maxOrMin(arguments, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber with a random value equal to or greater than 0 and less than 1,\r\n   * and with dp, or DECIMAL_PLACES if dp is omitted, decimal places (or less if trailing\r\n   * zeros are produced).\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp}'\r\n   * '[BigNumber Error] crypto unavailable'\r\n   */\r\n  BigNumber.random = (function () {\r\n    var pow2_53 = 0x20000000000000;\r\n\r\n    // Return a 53 bit integer n, where 0 <= n < 9007199254740992.\r\n    // Check if Math.random() produces more than 32 bits of randomness.\r\n    // If it does, assume at least 53 bits are produced, otherwise assume at least 30 bits.\r\n    // 0x40000000 is 2^30, 0x800000 is 2^23, 0x1fffff is 2^21 - 1.\r\n    var random53bitInt = (Math.random() * pow2_53) & 0x1fffff\r\n     ? function () { return mathfloor(Math.random() * pow2_53); }\r\n     : function () { return ((Math.random() * 0x40000000 | 0) * 0x800000) +\r\n       (Math.random() * 0x800000 | 0); };\r\n\r\n    return function (dp) {\r\n      var a, b, e, k, v,\r\n        i = 0,\r\n        c = [],\r\n        rand = new BigNumber(ONE);\r\n\r\n      if (dp == null) dp = DECIMAL_PLACES;\r\n      else intCheck(dp, 0, MAX);\r\n\r\n      k = mathceil(dp / LOG_BASE);\r\n\r\n      if (CRYPTO) {\r\n\r\n        // Browsers supporting crypto.getRandomValues.\r\n        if (crypto.getRandomValues) {\r\n\r\n          a = crypto.getRandomValues(new Uint32Array(k *= 2));\r\n\r\n          for (; i < k;) {\r\n\r\n            // 53 bits:\r\n            // ((Math.pow(2, 32) - 1) * Math.pow(2, 21)).toString(2)\r\n            // 11111 11111111 11111111 11111111 11100000 00000000 00000000\r\n            // ((Math.pow(2, 32) - 1) >>> 11).toString(2)\r\n            //                                     11111 11111111 11111111\r\n            // 0x20000 is 2^21.\r\n            v = a[i] * 0x20000 + (a[i + 1] >>> 11);\r\n\r\n            // Rejection sampling:\r\n            // 0 <= v < 9007199254740992\r\n            // Probability that v >= 9e15, is\r\n            // 7199254740992 / 9007199254740992 ~= 0.0008, i.e. 1 in 1251\r\n            if (v >= 9e15) {\r\n              b = crypto.getRandomValues(new Uint32Array(2));\r\n              a[i] = b[0];\r\n              a[i + 1] = b[1];\r\n            } else {\r\n\r\n              // 0 <= v <= 8999999999999999\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 2;\r\n            }\r\n          }\r\n          i = k / 2;\r\n\r\n        // Node.js supporting crypto.randomBytes.\r\n        } else if (crypto.randomBytes) {\r\n\r\n          // buffer\r\n          a = crypto.randomBytes(k *= 7);\r\n\r\n          for (; i < k;) {\r\n\r\n            // 0x1000000000000 is 2^48, 0x10000000000 is 2^40\r\n            // 0x100000000 is 2^32, 0x1000000 is 2^24\r\n            // 11111 11111111 11111111 11111111 11111111 11111111 11111111\r\n            // 0 <= v < 9007199254740992\r\n            v = ((a[i] & 31) * 0x1000000000000) + (a[i + 1] * 0x10000000000) +\r\n               (a[i + 2] * 0x100000000) + (a[i + 3] * 0x1000000) +\r\n               (a[i + 4] << 16) + (a[i + 5] << 8) + a[i + 6];\r\n\r\n            if (v >= 9e15) {\r\n              crypto.randomBytes(7).copy(a, i);\r\n            } else {\r\n\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 7;\r\n            }\r\n          }\r\n          i = k / 7;\r\n        } else {\r\n          CRYPTO = false;\r\n          throw Error\r\n           (bignumberError + 'crypto unavailable');\r\n        }\r\n      }\r\n\r\n      // Use Math.random.\r\n      if (!CRYPTO) {\r\n\r\n        for (; i < k;) {\r\n          v = random53bitInt();\r\n          if (v < 9e15) c[i++] = v % 1e14;\r\n        }\r\n      }\r\n\r\n      k = c[--i];\r\n      dp %= LOG_BASE;\r\n\r\n      // Convert trailing digits to zeros according to dp.\r\n      if (k && dp) {\r\n        v = POWS_TEN[LOG_BASE - dp];\r\n        c[i] = mathfloor(k / v) * v;\r\n      }\r\n\r\n      // Remove trailing elements which are zero.\r\n      for (; c[i] === 0; c.pop(), i--);\r\n\r\n      // Zero?\r\n      if (i < 0) {\r\n        c = [e = 0];\r\n      } else {\r\n\r\n        // Remove leading elements which are zero and adjust exponent accordingly.\r\n        for (e = -1 ; c[0] === 0; c.splice(0, 1), e -= LOG_BASE);\r\n\r\n        // Count the digits of the first element of c to determine leading zeros, and...\r\n        for (i = 1, v = c[0]; v >= 10; v /= 10, i++);\r\n\r\n        // adjust the exponent accordingly.\r\n        if (i < LOG_BASE) e -= LOG_BASE - i;\r\n      }\r\n\r\n      rand.e = e;\r\n      rand.c = c;\r\n      return rand;\r\n    };\r\n  })();\r\n\r\n\r\n   /*\r\n   * Return a BigNumber whose value is the sum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.sum = function () {\r\n    var i = 1,\r\n      args = arguments,\r\n      sum = new BigNumber(args[0]);\r\n    for (; i < args.length;) sum = sum.plus(args[i++]);\r\n    return sum;\r\n  };\r\n\r\n\r\n  // PRIVATE FUNCTIONS\r\n\r\n\r\n  // Called by BigNumber and BigNumber.prototype.toString.\r\n  convertBase = (function () {\r\n    var decimal = '0123456789';\r\n\r\n    /*\r\n     * Convert string of baseIn to an array of numbers of baseOut.\r\n     * Eg. toBaseOut('255', 10, 16) returns [15, 15].\r\n     * Eg. toBaseOut('ff', 16, 10) returns [2, 5, 5].\r\n     */\r\n    function toBaseOut(str, baseIn, baseOut, alphabet) {\r\n      var j,\r\n        arr = [0],\r\n        arrL,\r\n        i = 0,\r\n        len = str.length;\r\n\r\n      for (; i < len;) {\r\n        for (arrL = arr.length; arrL--; arr[arrL] *= baseIn);\r\n\r\n        arr[0] += alphabet.indexOf(str.charAt(i++));\r\n\r\n        for (j = 0; j < arr.length; j++) {\r\n\r\n          if (arr[j] > baseOut - 1) {\r\n            if (arr[j + 1] == null) arr[j + 1] = 0;\r\n            arr[j + 1] += arr[j] / baseOut | 0;\r\n            arr[j] %= baseOut;\r\n          }\r\n        }\r\n      }\r\n\r\n      return arr.reverse();\r\n    }\r\n\r\n    // Convert a numeric string of baseIn to a numeric string of baseOut.\r\n    // If the caller is toString, we are converting from base 10 to baseOut.\r\n    // If the caller is BigNumber, we are converting from baseIn to base 10.\r\n    return function (str, baseIn, baseOut, sign, callerIsToString) {\r\n      var alphabet, d, e, k, r, x, xc, y,\r\n        i = str.indexOf('.'),\r\n        dp = DECIMAL_PLACES,\r\n        rm = ROUNDING_MODE;\r\n\r\n      // Non-integer.\r\n      if (i >= 0) {\r\n        k = POW_PRECISION;\r\n\r\n        // Unlimited precision.\r\n        POW_PRECISION = 0;\r\n        str = str.replace('.', '');\r\n        y = new BigNumber(baseIn);\r\n        x = y.pow(str.length - i);\r\n        POW_PRECISION = k;\r\n\r\n        // Convert str as if an integer, then restore the fraction part by dividing the\r\n        // result by its base raised to a power.\r\n\r\n        y.c = toBaseOut(toFixedPoint(coeffToString(x.c), x.e, '0'),\r\n         10, baseOut, decimal);\r\n        y.e = y.c.length;\r\n      }\r\n\r\n      // Convert the number as integer.\r\n\r\n      xc = toBaseOut(str, baseIn, baseOut, callerIsToString\r\n       ? (alphabet = ALPHABET, decimal)\r\n       : (alphabet = decimal, ALPHABET));\r\n\r\n      // xc now represents str as an integer and converted to baseOut. e is the exponent.\r\n      e = k = xc.length;\r\n\r\n      // Remove trailing zeros.\r\n      for (; xc[--k] == 0; xc.pop());\r\n\r\n      // Zero?\r\n      if (!xc[0]) return alphabet.charAt(0);\r\n\r\n      // Does str represent an integer? If so, no need for the division.\r\n      if (i < 0) {\r\n        --e;\r\n      } else {\r\n        x.c = xc;\r\n        x.e = e;\r\n\r\n        // The sign is needed for correct rounding.\r\n        x.s = sign;\r\n        x = div(x, y, dp, rm, baseOut);\r\n        xc = x.c;\r\n        r = x.r;\r\n        e = x.e;\r\n      }\r\n\r\n      // xc now represents str converted to baseOut.\r\n\r\n      // THe index of the rounding digit.\r\n      d = e + dp + 1;\r\n\r\n      // The rounding digit: the digit to the right of the digit that may be rounded up.\r\n      i = xc[d];\r\n\r\n      // Look at the rounding digits and mode to determine whether to round up.\r\n\r\n      k = baseOut / 2;\r\n      r = r || d < 0 || xc[d + 1] != null;\r\n\r\n      r = rm < 4 ? (i != null || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n            : i > k || i == k &&(rm == 4 || r || rm == 6 && xc[d - 1] & 1 ||\r\n             rm == (x.s < 0 ? 8 : 7));\r\n\r\n      // If the index of the rounding digit is not greater than zero, or xc represents\r\n      // zero, then the result of the base conversion is zero or, if rounding up, a value\r\n      // such as 0.00001.\r\n      if (d < 1 || !xc[0]) {\r\n\r\n        // 1^-dp or 0\r\n        str = r ? toFixedPoint(alphabet.charAt(1), -dp, alphabet.charAt(0)) : alphabet.charAt(0);\r\n      } else {\r\n\r\n        // Truncate xc to the required number of decimal places.\r\n        xc.length = d;\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          // Rounding up may mean the previous digit has to be rounded up and so on.\r\n          for (--baseOut; ++xc[--d] > baseOut;) {\r\n            xc[d] = 0;\r\n\r\n            if (!d) {\r\n              ++e;\r\n              xc = [1].concat(xc);\r\n            }\r\n          }\r\n        }\r\n\r\n        // Determine trailing zeros.\r\n        for (k = xc.length; !xc[--k];);\r\n\r\n        // E.g. [4, 11, 15] becomes 4bf.\r\n        for (i = 0, str = ''; i <= k; str += alphabet.charAt(xc[i++]));\r\n\r\n        // Add leading zeros, decimal point and trailing zeros as required.\r\n        str = toFixedPoint(str, e, alphabet.charAt(0));\r\n      }\r\n\r\n      // The caller will add the sign.\r\n      return str;\r\n    };\r\n  })();\r\n\r\n\r\n  // Perform division in the specified base. Called by div and convertBase.\r\n  div = (function () {\r\n\r\n    // Assume non-zero x and k.\r\n    function multiply(x, k, base) {\r\n      var m, temp, xlo, xhi,\r\n        carry = 0,\r\n        i = x.length,\r\n        klo = k % SQRT_BASE,\r\n        khi = k / SQRT_BASE | 0;\r\n\r\n      for (x = x.slice(); i--;) {\r\n        xlo = x[i] % SQRT_BASE;\r\n        xhi = x[i] / SQRT_BASE | 0;\r\n        m = khi * xlo + xhi * klo;\r\n        temp = klo * xlo + ((m % SQRT_BASE) * SQRT_BASE) + carry;\r\n        carry = (temp / base | 0) + (m / SQRT_BASE | 0) + khi * xhi;\r\n        x[i] = temp % base;\r\n      }\r\n\r\n      if (carry) x = [carry].concat(x);\r\n\r\n      return x;\r\n    }\r\n\r\n    function compare(a, b, aL, bL) {\r\n      var i, cmp;\r\n\r\n      if (aL != bL) {\r\n        cmp = aL > bL ? 1 : -1;\r\n      } else {\r\n\r\n        for (i = cmp = 0; i < aL; i++) {\r\n\r\n          if (a[i] != b[i]) {\r\n            cmp = a[i] > b[i] ? 1 : -1;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return cmp;\r\n    }\r\n\r\n    function subtract(a, b, aL, base) {\r\n      var i = 0;\r\n\r\n      // Subtract b from a.\r\n      for (; aL--;) {\r\n        a[aL] -= i;\r\n        i = a[aL] < b[aL] ? 1 : 0;\r\n        a[aL] = i * base + a[aL] - b[aL];\r\n      }\r\n\r\n      // Remove leading zeros.\r\n      for (; !a[0] && a.length > 1; a.splice(0, 1));\r\n    }\r\n\r\n    // x: dividend, y: divisor.\r\n    return function (x, y, dp, rm, base) {\r\n      var cmp, e, i, more, n, prod, prodL, q, qc, rem, remL, rem0, xi, xL, yc0,\r\n        yL, yz,\r\n        s = x.s == y.s ? 1 : -1,\r\n        xc = x.c,\r\n        yc = y.c;\r\n\r\n      // Either NaN, Infinity or 0?\r\n      if (!xc || !xc[0] || !yc || !yc[0]) {\r\n\r\n        return new BigNumber(\r\n\r\n         // Return NaN if either NaN, or both Infinity or 0.\r\n         !x.s || !y.s || (xc ? yc && xc[0] == yc[0] : !yc) ? NaN :\r\n\r\n          // Return 0 if x is 0 or y is Infinity, or return Infinity as y is 0.\r\n          xc && xc[0] == 0 || !yc ? s * 0 : s / 0\r\n       );\r\n      }\r\n\r\n      q = new BigNumber(s);\r\n      qc = q.c = [];\r\n      e = x.e - y.e;\r\n      s = dp + e + 1;\r\n\r\n      if (!base) {\r\n        base = BASE;\r\n        e = bitFloor(x.e / LOG_BASE) - bitFloor(y.e / LOG_BASE);\r\n        s = s / LOG_BASE | 0;\r\n      }\r\n\r\n      // Result exponent may be one less then the current value of e.\r\n      // The coefficients of the BigNumbers from convertBase may have trailing zeros.\r\n      for (i = 0; yc[i] == (xc[i] || 0); i++);\r\n\r\n      if (yc[i] > (xc[i] || 0)) e--;\r\n\r\n      if (s < 0) {\r\n        qc.push(1);\r\n        more = true;\r\n      } else {\r\n        xL = xc.length;\r\n        yL = yc.length;\r\n        i = 0;\r\n        s += 2;\r\n\r\n        // Normalise xc and yc so highest order digit of yc is >= base / 2.\r\n\r\n        n = mathfloor(base / (yc[0] + 1));\r\n\r\n        // Not necessary, but to handle odd bases where yc[0] == (base / 2) - 1.\r\n        // if (n > 1 || n++ == 1 && yc[0] < base / 2) {\r\n        if (n > 1) {\r\n          yc = multiply(yc, n, base);\r\n          xc = multiply(xc, n, base);\r\n          yL = yc.length;\r\n          xL = xc.length;\r\n        }\r\n\r\n        xi = yL;\r\n        rem = xc.slice(0, yL);\r\n        remL = rem.length;\r\n\r\n        // Add zeros to make remainder as long as divisor.\r\n        for (; remL < yL; rem[remL++] = 0);\r\n        yz = yc.slice();\r\n        yz = [0].concat(yz);\r\n        yc0 = yc[0];\r\n        if (yc[1] >= base / 2) yc0++;\r\n        // Not necessary, but to prevent trial digit n > base, when using base 3.\r\n        // else if (base == 3 && yc0 == 1) yc0 = 1 + 1e-15;\r\n\r\n        do {\r\n          n = 0;\r\n\r\n          // Compare divisor and remainder.\r\n          cmp = compare(yc, rem, yL, remL);\r\n\r\n          // If divisor < remainder.\r\n          if (cmp < 0) {\r\n\r\n            // Calculate trial digit, n.\r\n\r\n            rem0 = rem[0];\r\n            if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);\r\n\r\n            // n is how many times the divisor goes into the current remainder.\r\n            n = mathfloor(rem0 / yc0);\r\n\r\n            //  Algorithm:\r\n            //  product = divisor multiplied by trial digit (n).\r\n            //  Compare product and remainder.\r\n            //  If product is greater than remainder:\r\n            //    Subtract divisor from product, decrement trial digit.\r\n            //  Subtract product from remainder.\r\n            //  If product was less than remainder at the last compare:\r\n            //    Compare new remainder and divisor.\r\n            //    If remainder is greater than divisor:\r\n            //      Subtract divisor from remainder, increment trial digit.\r\n\r\n            if (n > 1) {\r\n\r\n              // n may be > base only when base is 3.\r\n              if (n >= base) n = base - 1;\r\n\r\n              // product = divisor * trial digit.\r\n              prod = multiply(yc, n, base);\r\n              prodL = prod.length;\r\n              remL = rem.length;\r\n\r\n              // Compare product and remainder.\r\n              // If product > remainder then trial digit n too high.\r\n              // n is 1 too high about 5% of the time, and is not known to have\r\n              // ever been more than 1 too high.\r\n              while (compare(prod, rem, prodL, remL) == 1) {\r\n                n--;\r\n\r\n                // Subtract divisor from product.\r\n                subtract(prod, yL < prodL ? yz : yc, prodL, base);\r\n                prodL = prod.length;\r\n                cmp = 1;\r\n              }\r\n            } else {\r\n\r\n              // n is 0 or 1, cmp is -1.\r\n              // If n is 0, there is no need to compare yc and rem again below,\r\n              // so change cmp to 1 to avoid it.\r\n              // If n is 1, leave cmp as -1, so yc and rem are compared again.\r\n              if (n == 0) {\r\n\r\n                // divisor < remainder, so n must be at least 1.\r\n                cmp = n = 1;\r\n              }\r\n\r\n              // product = divisor\r\n              prod = yc.slice();\r\n              prodL = prod.length;\r\n            }\r\n\r\n            if (prodL < remL) prod = [0].concat(prod);\r\n\r\n            // Subtract product from remainder.\r\n            subtract(rem, prod, remL, base);\r\n            remL = rem.length;\r\n\r\n             // If product was < remainder.\r\n            if (cmp == -1) {\r\n\r\n              // Compare divisor and new remainder.\r\n              // If divisor < new remainder, subtract divisor from remainder.\r\n              // Trial digit n too low.\r\n              // n is 1 too low about 5% of the time, and very rarely 2 too low.\r\n              while (compare(yc, rem, yL, remL) < 1) {\r\n                n++;\r\n\r\n                // Subtract divisor from remainder.\r\n                subtract(rem, yL < remL ? yz : yc, remL, base);\r\n                remL = rem.length;\r\n              }\r\n            }\r\n          } else if (cmp === 0) {\r\n            n++;\r\n            rem = [0];\r\n          } // else cmp === 1 and n will be 0\r\n\r\n          // Add the next digit, n, to the result array.\r\n          qc[i++] = n;\r\n\r\n          // Update the remainder.\r\n          if (rem[0]) {\r\n            rem[remL++] = xc[xi] || 0;\r\n          } else {\r\n            rem = [xc[xi]];\r\n            remL = 1;\r\n          }\r\n        } while ((xi++ < xL || rem[0] != null) && s--);\r\n\r\n        more = rem[0] != null;\r\n\r\n        // Leading zero?\r\n        if (!qc[0]) qc.splice(0, 1);\r\n      }\r\n\r\n      if (base == BASE) {\r\n\r\n        // To calculate q.e, first get the number of digits of qc[0].\r\n        for (i = 1, s = qc[0]; s >= 10; s /= 10, i++);\r\n\r\n        round(q, dp + (q.e = i + e * LOG_BASE - 1) + 1, rm, more);\r\n\r\n      // Caller is convertBase.\r\n      } else {\r\n        q.e = e;\r\n        q.r = +more;\r\n      }\r\n\r\n      return q;\r\n    };\r\n  })();\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of BigNumber n in fixed-point or exponential\r\n   * notation rounded to the specified decimal places or significant digits.\r\n   *\r\n   * n: a BigNumber.\r\n   * i: the index of the last digit required (i.e. the digit that may be rounded up).\r\n   * rm: the rounding mode.\r\n   * id: 1 (toExponential) or 2 (toPrecision).\r\n   */\r\n  function format(n, i, rm, id) {\r\n    var c0, e, ne, len, str;\r\n\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n\r\n    if (!n.c) return n.toString();\r\n\r\n    c0 = n.c[0];\r\n    ne = n.e;\r\n\r\n    if (i == null) {\r\n      str = coeffToString(n.c);\r\n      str = id == 1 || id == 2 && (ne <= TO_EXP_NEG || ne >= TO_EXP_POS)\r\n       ? toExponential(str, ne)\r\n       : toFixedPoint(str, ne, '0');\r\n    } else {\r\n      n = round(new BigNumber(n), i, rm);\r\n\r\n      // n.e may have changed if the value was rounded up.\r\n      e = n.e;\r\n\r\n      str = coeffToString(n.c);\r\n      len = str.length;\r\n\r\n      // toPrecision returns exponential notation if the number of significant digits\r\n      // specified is less than the number of digits necessary to represent the integer\r\n      // part of the value in fixed-point notation.\r\n\r\n      // Exponential notation.\r\n      if (id == 1 || id == 2 && (i <= e || e <= TO_EXP_NEG)) {\r\n\r\n        // Append zeros?\r\n        for (; len < i; str += '0', len++);\r\n        str = toExponential(str, e);\r\n\r\n      // Fixed-point notation.\r\n      } else {\r\n        i -= ne;\r\n        str = toFixedPoint(str, e, '0');\r\n\r\n        // Append zeros?\r\n        if (e + 1 > len) {\r\n          if (--i > 0) for (str += '.'; i--; str += '0');\r\n        } else {\r\n          i += e - len;\r\n          if (i > 0) {\r\n            if (e + 1 == len) str += '.';\r\n            for (; i--; str += '0');\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return n.s < 0 && c0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // Handle BigNumber.max and BigNumber.min.\r\n  // If any number is NaN, return NaN.\r\n  function maxOrMin(args, n) {\r\n    var k, y,\r\n      i = 1,\r\n      x = new BigNumber(args[0]);\r\n\r\n    for (; i < args.length; i++) {\r\n      y = new BigNumber(args[i]);\r\n      if (!y.s || (k = compare(x, y)) === n || k === 0 && x.s === n) {\r\n        x = y;\r\n      }\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  /*\r\n   * Strip trailing zeros, calculate base 10 exponent and check against MIN_EXP and MAX_EXP.\r\n   * Called by minus, plus and times.\r\n   */\r\n  function normalise(n, c, e) {\r\n    var i = 1,\r\n      j = c.length;\r\n\r\n     // Remove trailing zeros.\r\n    for (; !c[--j]; c.pop());\r\n\r\n    // Calculate the base 10 exponent. First get the number of digits of c[0].\r\n    for (j = c[0]; j >= 10; j /= 10, i++);\r\n\r\n    // Overflow?\r\n    if ((e = i + e * LOG_BASE - 1) > MAX_EXP) {\r\n\r\n      // Infinity.\r\n      n.c = n.e = null;\r\n\r\n    // Underflow?\r\n    } else if (e < MIN_EXP) {\r\n\r\n      // Zero.\r\n      n.c = [n.e = 0];\r\n    } else {\r\n      n.e = e;\r\n      n.c = c;\r\n    }\r\n\r\n    return n;\r\n  }\r\n\r\n\r\n  // Handle values that fail the validity test in BigNumber.\r\n  parseNumeric = (function () {\r\n    var basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i,\r\n      dotAfter = /^([^.]+)\\.$/,\r\n      dotBefore = /^\\.([^.]+)$/,\r\n      isInfinityOrNaN = /^-?(Infinity|NaN)$/,\r\n      whitespaceOrPlus = /^\\s*\\+(?=[\\w.])|^\\s+|\\s+$/g;\r\n\r\n    return function (x, str, isNum, b) {\r\n      var base,\r\n        s = isNum ? str : str.replace(whitespaceOrPlus, '');\r\n\r\n      // No exception on Infinity or NaN.\r\n      if (isInfinityOrNaN.test(s)) {\r\n        x.s = isNaN(s) ? null : s < 0 ? -1 : 1;\r\n      } else {\r\n        if (!isNum) {\r\n\r\n          // basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i\r\n          s = s.replace(basePrefix, function (m, p1, p2) {\r\n            base = (p2 = p2.toLowerCase()) == 'x' ? 16 : p2 == 'b' ? 2 : 8;\r\n            return !b || b == base ? p1 : m;\r\n          });\r\n\r\n          if (b) {\r\n            base = b;\r\n\r\n            // E.g. '1.' to '1', '.1' to '0.1'\r\n            s = s.replace(dotAfter, '$1').replace(dotBefore, '0.$1');\r\n          }\r\n\r\n          if (str != s) return new BigNumber(s, base);\r\n        }\r\n\r\n        // '[BigNumber Error] Not a number: {n}'\r\n        // '[BigNumber Error] Not a base {b} number: {n}'\r\n        if (BigNumber.DEBUG) {\r\n          throw Error\r\n            (bignumberError + 'Not a' + (b ? ' base ' + b : '') + ' number: ' + str);\r\n        }\r\n\r\n        // NaN\r\n        x.s = null;\r\n      }\r\n\r\n      x.c = x.e = null;\r\n    }\r\n  })();\r\n\r\n\r\n  /*\r\n   * Round x to sd significant digits using rounding mode rm. Check for over/under-flow.\r\n   * If r is truthy, it is known that there are more digits after the rounding digit.\r\n   */\r\n  function round(x, sd, rm, r) {\r\n    var d, i, j, k, n, ni, rd,\r\n      xc = x.c,\r\n      pows10 = POWS_TEN;\r\n\r\n    // if x is not Infinity or NaN...\r\n    if (xc) {\r\n\r\n      // rd is the rounding digit, i.e. the digit after the digit that may be rounded up.\r\n      // n is a base 1e14 number, the value of the element of array x.c containing rd.\r\n      // ni is the index of n within x.c.\r\n      // d is the number of digits of n.\r\n      // i is the index of rd within n including leading zeros.\r\n      // j is the actual index of rd within n (if < 0, rd is a leading zero).\r\n      out: {\r\n\r\n        // Get the number of digits of the first element of xc.\r\n        for (d = 1, k = xc[0]; k >= 10; k /= 10, d++);\r\n        i = sd - d;\r\n\r\n        // If the rounding digit is in the first element of xc...\r\n        if (i < 0) {\r\n          i += LOG_BASE;\r\n          j = sd;\r\n          n = xc[ni = 0];\r\n\r\n          // Get the rounding digit at index j of n.\r\n          rd = mathfloor(n / pows10[d - j - 1] % 10);\r\n        } else {\r\n          ni = mathceil((i + 1) / LOG_BASE);\r\n\r\n          if (ni >= xc.length) {\r\n\r\n            if (r) {\r\n\r\n              // Needed by sqrt.\r\n              for (; xc.length <= ni; xc.push(0));\r\n              n = rd = 0;\r\n              d = 1;\r\n              i %= LOG_BASE;\r\n              j = i - LOG_BASE + 1;\r\n            } else {\r\n              break out;\r\n            }\r\n          } else {\r\n            n = k = xc[ni];\r\n\r\n            // Get the number of digits of n.\r\n            for (d = 1; k >= 10; k /= 10, d++);\r\n\r\n            // Get the index of rd within n.\r\n            i %= LOG_BASE;\r\n\r\n            // Get the index of rd within n, adjusted for leading zeros.\r\n            // The number of leading zeros of n is given by LOG_BASE - d.\r\n            j = i - LOG_BASE + d;\r\n\r\n            // Get the rounding digit at index j of n.\r\n            rd = j < 0 ? 0 : mathfloor(n / pows10[d - j - 1] % 10);\r\n          }\r\n        }\r\n\r\n        r = r || sd < 0 ||\r\n\r\n        // Are there any non-zero digits after the rounding digit?\r\n        // The expression  n % pows10[d - j - 1]  returns all digits of n to the right\r\n        // of the digit at j, e.g. if n is 908714 and j is 2, the expression gives 714.\r\n         xc[ni + 1] != null || (j < 0 ? n : n % pows10[d - j - 1]);\r\n\r\n        r = rm < 4\r\n         ? (rd || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n         : rd > 5 || rd == 5 && (rm == 4 || r || rm == 6 &&\r\n\r\n          // Check whether the digit to the left of the rounding digit is odd.\r\n          ((i > 0 ? j > 0 ? n / pows10[d - j] : 0 : xc[ni - 1]) % 10) & 1 ||\r\n           rm == (x.s < 0 ? 8 : 7));\r\n\r\n        if (sd < 1 || !xc[0]) {\r\n          xc.length = 0;\r\n\r\n          if (r) {\r\n\r\n            // Convert sd to decimal places.\r\n            sd -= x.e + 1;\r\n\r\n            // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n            xc[0] = pows10[(LOG_BASE - sd % LOG_BASE) % LOG_BASE];\r\n            x.e = -sd || 0;\r\n          } else {\r\n\r\n            // Zero.\r\n            xc[0] = x.e = 0;\r\n          }\r\n\r\n          return x;\r\n        }\r\n\r\n        // Remove excess digits.\r\n        if (i == 0) {\r\n          xc.length = ni;\r\n          k = 1;\r\n          ni--;\r\n        } else {\r\n          xc.length = ni + 1;\r\n          k = pows10[LOG_BASE - i];\r\n\r\n          // E.g. 56700 becomes 56000 if 7 is the rounding digit.\r\n          // j > 0 means i > number of leading zeros of n.\r\n          xc[ni] = j > 0 ? mathfloor(n / pows10[d - j] % pows10[j]) * k : 0;\r\n        }\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          for (; ;) {\r\n\r\n            // If the digit to be rounded up is in the first element of xc...\r\n            if (ni == 0) {\r\n\r\n              // i will be the length of xc[0] before k is added.\r\n              for (i = 1, j = xc[0]; j >= 10; j /= 10, i++);\r\n              j = xc[0] += k;\r\n              for (k = 1; j >= 10; j /= 10, k++);\r\n\r\n              // if i != k the length has increased.\r\n              if (i != k) {\r\n                x.e++;\r\n                if (xc[0] == BASE) xc[0] = 1;\r\n              }\r\n\r\n              break;\r\n            } else {\r\n              xc[ni] += k;\r\n              if (xc[ni] != BASE) break;\r\n              xc[ni--] = 0;\r\n              k = 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Remove trailing zeros.\r\n        for (i = xc.length; xc[--i] === 0; xc.pop());\r\n      }\r\n\r\n      // Overflow? Infinity.\r\n      if (x.e > MAX_EXP) {\r\n        x.c = x.e = null;\r\n\r\n      // Underflow? Zero.\r\n      } else if (x.e < MIN_EXP) {\r\n        x.c = [x.e = 0];\r\n      }\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  function valueOf(n) {\r\n    var str,\r\n      e = n.e;\r\n\r\n    if (e === null) return n.toString();\r\n\r\n    str = coeffToString(n.c);\r\n\r\n    str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n      ? toExponential(str, e)\r\n      : toFixedPoint(str, e, '0');\r\n\r\n    return n.s < 0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // PROTOTYPE/INSTANCE METHODS\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the absolute value of this BigNumber.\r\n   */\r\n  P.absoluteValue = P.abs = function () {\r\n    var x = new BigNumber(this);\r\n    if (x.s < 0) x.s = 1;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return\r\n   *   1 if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   *   -1 if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   *   0 if they have the same value,\r\n   *   or null if the value of either is NaN.\r\n   */\r\n  P.comparedTo = function (y, b) {\r\n    return compare(this, new BigNumber(y, b));\r\n  };\r\n\r\n\r\n  /*\r\n   * If dp is undefined or null or true or false, return the number of decimal places of the\r\n   * value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n   *\r\n   * Otherwise, if dp is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of dp decimal places using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [dp] {number} Decimal places: integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.decimalPlaces = P.dp = function (dp, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), dp + x.e + 1, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    n = ((v = c.length - 1) - bitFloor(this.e / LOG_BASE)) * LOG_BASE;\r\n\r\n    // Subtract the number of trailing zeros of the last number.\r\n    if (v = c[v]) for (; v % 10 == 0; v /= 10, n--);\r\n    if (n < 0) n = 0;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n / 0 = I\r\n   *  n / N = N\r\n   *  n / I = 0\r\n   *  0 / n = 0\r\n   *  0 / 0 = N\r\n   *  0 / N = N\r\n   *  0 / I = 0\r\n   *  N / n = N\r\n   *  N / 0 = N\r\n   *  N / N = N\r\n   *  N / I = N\r\n   *  I / n = I\r\n   *  I / 0 = I\r\n   *  I / N = N\r\n   *  I / I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber divided by the value of\r\n   * BigNumber(y, b), rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.dividedBy = P.div = function (y, b) {\r\n    return div(this, new BigNumber(y, b), DECIMAL_PLACES, ROUNDING_MODE);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the integer part of dividing the value of this\r\n   * BigNumber by the value of BigNumber(y, b).\r\n   */\r\n  P.dividedToIntegerBy = P.idiv = function (y, b) {\r\n    return div(this, new BigNumber(y, b), 0, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a BigNumber whose value is the value of this BigNumber exponentiated by n.\r\n   *\r\n   * If m is present, return the result modulo m.\r\n   * If n is negative round according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   * If POW_PRECISION is non-zero and m is not present, round to POW_PRECISION using ROUNDING_MODE.\r\n   *\r\n   * The modular power operation works efficiently when x, n, and m are integers, otherwise it\r\n   * is equivalent to calculating x.exponentiatedBy(n).modulo(m) with a POW_PRECISION of 0.\r\n   *\r\n   * n {number|string|BigNumber} The exponent. An integer.\r\n   * [m] {number|string|BigNumber} The modulus.\r\n   *\r\n   * '[BigNumber Error] Exponent not an integer: {n}'\r\n   */\r\n  P.exponentiatedBy = P.pow = function (n, m) {\r\n    var half, isModExp, i, k, more, nIsBig, nIsNeg, nIsOdd, y,\r\n      x = this;\r\n\r\n    n = new BigNumber(n);\r\n\r\n    // Allow NaN and Infinity, but not other non-integers.\r\n    if (n.c && !n.isInteger()) {\r\n      throw Error\r\n        (bignumberError + 'Exponent not an integer: ' + valueOf(n));\r\n    }\r\n\r\n    if (m != null) m = new BigNumber(m);\r\n\r\n    // Exponent of MAX_SAFE_INTEGER is 15.\r\n    nIsBig = n.e > 14;\r\n\r\n    // If x is NaN, Infinity, 0 or 1, or n is Infinity, NaN or 0.\r\n    if (!x.c || !x.c[0] || x.c[0] == 1 && !x.e && x.c.length == 1 || !n.c || !n.c[0]) {\r\n\r\n      // The sign of the result of pow when x is negative depends on the evenness of n.\r\n      // If +n overflows to Infinity, the evenness of n would be not be known.\r\n      y = new BigNumber(Math.pow(+valueOf(x), nIsBig ? n.s * (2 - isOdd(n)) : +valueOf(n)));\r\n      return m ? y.mod(m) : y;\r\n    }\r\n\r\n    nIsNeg = n.s < 0;\r\n\r\n    if (m) {\r\n\r\n      // x % m returns NaN if abs(m) is zero, or m is NaN.\r\n      if (m.c ? !m.c[0] : !m.s) return new BigNumber(NaN);\r\n\r\n      isModExp = !nIsNeg && x.isInteger() && m.isInteger();\r\n\r\n      if (isModExp) x = x.mod(m);\r\n\r\n    // Overflow to Infinity: >=2**1e10 or >=1.0000024**1e15.\r\n    // Underflow to 0: <=0.79**1e10 or <=0.9999975**1e15.\r\n    } else if (n.e > 9 && (x.e > 0 || x.e < -1 || (x.e == 0\r\n      // [1, 240000000]\r\n      ? x.c[0] > 1 || nIsBig && x.c[1] >= 24e7\r\n      // [80000000000000]  [99999750000000]\r\n      : x.c[0] < 8e13 || nIsBig && x.c[0] <= 9999975e7))) {\r\n\r\n      // If x is negative and n is odd, k = -0, else k = 0.\r\n      k = x.s < 0 && isOdd(n) ? -0 : 0;\r\n\r\n      // If x >= 1, k = Infinity.\r\n      if (x.e > -1) k = 1 / k;\r\n\r\n      // If n is negative return 0, else return Infinity.\r\n      return new BigNumber(nIsNeg ? 1 / k : k);\r\n\r\n    } else if (POW_PRECISION) {\r\n\r\n      // Truncating each coefficient array to a length of k after each multiplication\r\n      // equates to truncating significant digits to POW_PRECISION + [28, 41],\r\n      // i.e. there will be a minimum of 28 guard digits retained.\r\n      k = mathceil(POW_PRECISION / LOG_BASE + 2);\r\n    }\r\n\r\n    if (nIsBig) {\r\n      half = new BigNumber(0.5);\r\n      if (nIsNeg) n.s = 1;\r\n      nIsOdd = isOdd(n);\r\n    } else {\r\n      i = Math.abs(+valueOf(n));\r\n      nIsOdd = i % 2;\r\n    }\r\n\r\n    y = new BigNumber(ONE);\r\n\r\n    // Performs 54 loop iterations for n of 9007199254740991.\r\n    for (; ;) {\r\n\r\n      if (nIsOdd) {\r\n        y = y.times(x);\r\n        if (!y.c) break;\r\n\r\n        if (k) {\r\n          if (y.c.length > k) y.c.length = k;\r\n        } else if (isModExp) {\r\n          y = y.mod(m);    //y = y.minus(div(y, m, 0, MODULO_MODE).times(m));\r\n        }\r\n      }\r\n\r\n      if (i) {\r\n        i = mathfloor(i / 2);\r\n        if (i === 0) break;\r\n        nIsOdd = i % 2;\r\n      } else {\r\n        n = n.times(half);\r\n        round(n, n.e + 1, 1);\r\n\r\n        if (n.e > 14) {\r\n          nIsOdd = isOdd(n);\r\n        } else {\r\n          i = +valueOf(n);\r\n          if (i === 0) break;\r\n          nIsOdd = i % 2;\r\n        }\r\n      }\r\n\r\n      x = x.times(x);\r\n\r\n      if (k) {\r\n        if (x.c && x.c.length > k) x.c.length = k;\r\n      } else if (isModExp) {\r\n        x = x.mod(m);    //x = x.minus(div(x, m, 0, MODULO_MODE).times(m));\r\n      }\r\n    }\r\n\r\n    if (isModExp) return y;\r\n    if (nIsNeg) y = ONE.div(y);\r\n\r\n    return m ? y.mod(m) : k ? round(y, POW_PRECISION, ROUNDING_MODE, more) : y;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber rounded to an integer\r\n   * using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {rm}'\r\n   */\r\n  P.integerValue = function (rm) {\r\n    var n = new BigNumber(this);\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n    return round(n, n.e + 1, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is equal to the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isEqualTo = P.eq = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is a finite number, otherwise return false.\r\n   */\r\n  P.isFinite = function () {\r\n    return !!this.c;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isGreaterThan = P.gt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isGreaterThanOrEqualTo = P.gte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === 1 || b === 0;\r\n\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is an integer, otherwise return false.\r\n   */\r\n  P.isInteger = function () {\r\n    return !!this.c && bitFloor(this.e / LOG_BASE) > this.c.length - 2;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isLessThan = P.lt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isLessThanOrEqualTo = P.lte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === -1 || b === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is NaN, otherwise return false.\r\n   */\r\n  P.isNaN = function () {\r\n    return !this.s;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is negative, otherwise return false.\r\n   */\r\n  P.isNegative = function () {\r\n    return this.s < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is positive, otherwise return false.\r\n   */\r\n  P.isPositive = function () {\r\n    return this.s > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is 0 or -0, otherwise return false.\r\n   */\r\n  P.isZero = function () {\r\n    return !!this.c && this.c[0] == 0;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n - 0 = n\r\n   *  n - N = N\r\n   *  n - I = -I\r\n   *  0 - n = -n\r\n   *  0 - 0 = 0\r\n   *  0 - N = N\r\n   *  0 - I = -I\r\n   *  N - n = N\r\n   *  N - 0 = N\r\n   *  N - N = N\r\n   *  N - I = N\r\n   *  I - n = I\r\n   *  I - 0 = I\r\n   *  I - N = N\r\n   *  I - I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber minus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.minus = function (y, b) {\r\n    var i, j, t, xLTy,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n    if (a != b) {\r\n      y.s = -b;\r\n      return x.plus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Either Infinity?\r\n      if (!xc || !yc) return xc ? (y.s = -b, y) : new BigNumber(yc ? x : NaN);\r\n\r\n      // Either zero?\r\n      if (!xc[0] || !yc[0]) {\r\n\r\n        // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n        return yc[0] ? (y.s = -b, y) : new BigNumber(xc[0] ? x :\r\n\r\n         // IEEE 754 (2008) 6.3: n - n = -0 when rounding to -Infinity\r\n         ROUNDING_MODE == 3 ? -0 : 0);\r\n      }\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Determine which is the bigger number.\r\n    if (a = xe - ye) {\r\n\r\n      if (xLTy = a < 0) {\r\n        a = -a;\r\n        t = xc;\r\n      } else {\r\n        ye = xe;\r\n        t = yc;\r\n      }\r\n\r\n      t.reverse();\r\n\r\n      // Prepend zeros to equalise exponents.\r\n      for (b = a; b--; t.push(0));\r\n      t.reverse();\r\n    } else {\r\n\r\n      // Exponents equal. Check digit by digit.\r\n      j = (xLTy = (a = xc.length) < (b = yc.length)) ? a : b;\r\n\r\n      for (a = b = 0; b < j; b++) {\r\n\r\n        if (xc[b] != yc[b]) {\r\n          xLTy = xc[b] < yc[b];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // x < y? Point xc to the array of the bigger number.\r\n    if (xLTy) {\r\n      t = xc;\r\n      xc = yc;\r\n      yc = t;\r\n      y.s = -y.s;\r\n    }\r\n\r\n    b = (j = yc.length) - (i = xc.length);\r\n\r\n    // Append zeros to xc if shorter.\r\n    // No need to add zeros to yc if shorter as subtract only needs to start at yc.length.\r\n    if (b > 0) for (; b--; xc[i++] = 0);\r\n    b = BASE - 1;\r\n\r\n    // Subtract yc from xc.\r\n    for (; j > a;) {\r\n\r\n      if (xc[--j] < yc[j]) {\r\n        for (i = j; i && !xc[--i]; xc[i] = b);\r\n        --xc[i];\r\n        xc[j] += BASE;\r\n      }\r\n\r\n      xc[j] -= yc[j];\r\n    }\r\n\r\n    // Remove leading zeros and adjust exponent accordingly.\r\n    for (; xc[0] == 0; xc.splice(0, 1), --ye);\r\n\r\n    // Zero?\r\n    if (!xc[0]) {\r\n\r\n      // Following IEEE 754 (2008) 6.3,\r\n      // n - n = +0  but  n - n = -0  when rounding towards -Infinity.\r\n      y.s = ROUNDING_MODE == 3 ? -1 : 1;\r\n      y.c = [y.e = 0];\r\n      return y;\r\n    }\r\n\r\n    // No need to check for Infinity as +x - +y != Infinity && -x - -y != Infinity\r\n    // for finite x and y.\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   *   n % 0 =  N\r\n   *   n % N =  N\r\n   *   n % I =  n\r\n   *   0 % n =  0\r\n   *  -0 % n = -0\r\n   *   0 % 0 =  N\r\n   *   0 % N =  N\r\n   *   0 % I =  0\r\n   *   N % n =  N\r\n   *   N % 0 =  N\r\n   *   N % N =  N\r\n   *   N % I =  N\r\n   *   I % n =  N\r\n   *   I % 0 =  N\r\n   *   I % N =  N\r\n   *   I % I =  N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber modulo the value of\r\n   * BigNumber(y, b). The result depends on the value of MODULO_MODE.\r\n   */\r\n  P.modulo = P.mod = function (y, b) {\r\n    var q, s,\r\n      x = this;\r\n\r\n    y = new BigNumber(y, b);\r\n\r\n    // Return NaN if x is Infinity or NaN, or y is NaN or zero.\r\n    if (!x.c || !y.s || y.c && !y.c[0]) {\r\n      return new BigNumber(NaN);\r\n\r\n    // Return x if y is Infinity or x is zero.\r\n    } else if (!y.c || x.c && !x.c[0]) {\r\n      return new BigNumber(x);\r\n    }\r\n\r\n    if (MODULO_MODE == 9) {\r\n\r\n      // Euclidian division: q = sign(y) * floor(x / abs(y))\r\n      // r = x - qy    where  0 <= r < abs(y)\r\n      s = y.s;\r\n      y.s = 1;\r\n      q = div(x, y, 0, 3);\r\n      y.s = s;\r\n      q.s *= s;\r\n    } else {\r\n      q = div(x, y, 0, MODULO_MODE);\r\n    }\r\n\r\n    y = x.minus(q.times(y));\r\n\r\n    // To match JavaScript %, ensure sign of zero is sign of dividend.\r\n    if (!y.c[0] && MODULO_MODE == 1) y.s = x.s;\r\n\r\n    return y;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n * 0 = 0\r\n   *  n * N = N\r\n   *  n * I = I\r\n   *  0 * n = 0\r\n   *  0 * 0 = 0\r\n   *  0 * N = N\r\n   *  0 * I = N\r\n   *  N * n = N\r\n   *  N * 0 = N\r\n   *  N * N = N\r\n   *  N * I = N\r\n   *  I * n = I\r\n   *  I * 0 = N\r\n   *  I * N = N\r\n   *  I * I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber multiplied by the value\r\n   * of BigNumber(y, b).\r\n   */\r\n  P.multipliedBy = P.times = function (y, b) {\r\n    var c, e, i, j, k, m, xcL, xlo, xhi, ycL, ylo, yhi, zc,\r\n      base, sqrtBase,\r\n      x = this,\r\n      xc = x.c,\r\n      yc = (y = new BigNumber(y, b)).c;\r\n\r\n    // Either NaN, Infinity or 0?\r\n    if (!xc || !yc || !xc[0] || !yc[0]) {\r\n\r\n      // Return NaN if either is NaN, or one is 0 and the other is Infinity.\r\n      if (!x.s || !y.s || xc && !xc[0] && !yc || yc && !yc[0] && !xc) {\r\n        y.c = y.e = y.s = null;\r\n      } else {\r\n        y.s *= x.s;\r\n\r\n        // Return Infinity if either is Infinity.\r\n        if (!xc || !yc) {\r\n          y.c = y.e = null;\r\n\r\n        // Return 0 if either is 0.\r\n        } else {\r\n          y.c = [0];\r\n          y.e = 0;\r\n        }\r\n      }\r\n\r\n      return y;\r\n    }\r\n\r\n    e = bitFloor(x.e / LOG_BASE) + bitFloor(y.e / LOG_BASE);\r\n    y.s *= x.s;\r\n    xcL = xc.length;\r\n    ycL = yc.length;\r\n\r\n    // Ensure xc points to longer array and xcL to its length.\r\n    if (xcL < ycL) {\r\n      zc = xc;\r\n      xc = yc;\r\n      yc = zc;\r\n      i = xcL;\r\n      xcL = ycL;\r\n      ycL = i;\r\n    }\r\n\r\n    // Initialise the result array with zeros.\r\n    for (i = xcL + ycL, zc = []; i--; zc.push(0));\r\n\r\n    base = BASE;\r\n    sqrtBase = SQRT_BASE;\r\n\r\n    for (i = ycL; --i >= 0;) {\r\n      c = 0;\r\n      ylo = yc[i] % sqrtBase;\r\n      yhi = yc[i] / sqrtBase | 0;\r\n\r\n      for (k = xcL, j = i + k; j > i;) {\r\n        xlo = xc[--k] % sqrtBase;\r\n        xhi = xc[k] / sqrtBase | 0;\r\n        m = yhi * xlo + xhi * ylo;\r\n        xlo = ylo * xlo + ((m % sqrtBase) * sqrtBase) + zc[j] + c;\r\n        c = (xlo / base | 0) + (m / sqrtBase | 0) + yhi * xhi;\r\n        zc[j--] = xlo % base;\r\n      }\r\n\r\n      zc[j] = c;\r\n    }\r\n\r\n    if (c) {\r\n      ++e;\r\n    } else {\r\n      zc.splice(0, 1);\r\n    }\r\n\r\n    return normalise(y, zc, e);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber negated,\r\n   * i.e. multiplied by -1.\r\n   */\r\n  P.negated = function () {\r\n    var x = new BigNumber(this);\r\n    x.s = -x.s || null;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n + 0 = n\r\n   *  n + N = N\r\n   *  n + I = I\r\n   *  0 + n = n\r\n   *  0 + 0 = 0\r\n   *  0 + N = N\r\n   *  0 + I = I\r\n   *  N + n = N\r\n   *  N + 0 = N\r\n   *  N + N = N\r\n   *  N + I = N\r\n   *  I + n = I\r\n   *  I + 0 = I\r\n   *  I + N = N\r\n   *  I + I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber plus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.plus = function (y, b) {\r\n    var t,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n     if (a != b) {\r\n      y.s = -b;\r\n      return x.minus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Return Infinity if either Infinity.\r\n      if (!xc || !yc) return new BigNumber(a / 0);\r\n\r\n      // Either zero?\r\n      // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n      if (!xc[0] || !yc[0]) return yc[0] ? y : new BigNumber(xc[0] ? x : a * 0);\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Prepend zeros to equalise exponents. Faster to use reverse then do unshifts.\r\n    if (a = xe - ye) {\r\n      if (a > 0) {\r\n        ye = xe;\r\n        t = yc;\r\n      } else {\r\n        a = -a;\r\n        t = xc;\r\n      }\r\n\r\n      t.reverse();\r\n      for (; a--; t.push(0));\r\n      t.reverse();\r\n    }\r\n\r\n    a = xc.length;\r\n    b = yc.length;\r\n\r\n    // Point xc to the longer array, and b to the shorter length.\r\n    if (a - b < 0) {\r\n      t = yc;\r\n      yc = xc;\r\n      xc = t;\r\n      b = a;\r\n    }\r\n\r\n    // Only start adding at yc.length - 1 as the further digits of xc can be ignored.\r\n    for (a = 0; b;) {\r\n      a = (xc[--b] = xc[b] + yc[b] + a) / BASE | 0;\r\n      xc[b] = BASE === xc[b] ? 0 : xc[b] % BASE;\r\n    }\r\n\r\n    if (a) {\r\n      xc = [a].concat(xc);\r\n      ++ye;\r\n    }\r\n\r\n    // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n    // ye = MAX_EXP + 1 possible\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   * If sd is undefined or null or true or false, return the number of significant digits of\r\n   * the value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n   * If sd is true include integer-part trailing zeros in the count.\r\n   *\r\n   * Otherwise, if sd is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of sd significant digits using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * sd {number|boolean} number: significant digits: integer, 1 to MAX inclusive.\r\n   *                     boolean: whether to count integer-part trailing zeros: true or false.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.precision = P.sd = function (sd, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (sd != null && sd !== !!sd) {\r\n      intCheck(sd, 1, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), sd, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    v = c.length - 1;\r\n    n = v * LOG_BASE + 1;\r\n\r\n    if (v = c[v]) {\r\n\r\n      // Subtract the number of trailing zeros of the last element.\r\n      for (; v % 10 == 0; v /= 10, n--);\r\n\r\n      // Add the number of digits of the first element.\r\n      for (v = c[0]; v >= 10; v /= 10, n++);\r\n    }\r\n\r\n    if (sd && x.e + 1 > n) n = x.e + 1;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber shifted by k places\r\n   * (powers of 10). Shift to the right if n > 0, and to the left if n < 0.\r\n   *\r\n   * k {number} Integer, -MAX_SAFE_INTEGER to MAX_SAFE_INTEGER inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {k}'\r\n   */\r\n  P.shiftedBy = function (k) {\r\n    intCheck(k, -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER);\r\n    return this.times('1e' + k);\r\n  };\r\n\r\n\r\n  /*\r\n   *  sqrt(-n) =  N\r\n   *  sqrt(N) =  N\r\n   *  sqrt(-I) =  N\r\n   *  sqrt(I) =  I\r\n   *  sqrt(0) =  0\r\n   *  sqrt(-0) = -0\r\n   *\r\n   * Return a new BigNumber whose value is the square root of the value of this BigNumber,\r\n   * rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.squareRoot = P.sqrt = function () {\r\n    var m, n, r, rep, t,\r\n      x = this,\r\n      c = x.c,\r\n      s = x.s,\r\n      e = x.e,\r\n      dp = DECIMAL_PLACES + 4,\r\n      half = new BigNumber('0.5');\r\n\r\n    // Negative/NaN/Infinity/zero?\r\n    if (s !== 1 || !c || !c[0]) {\r\n      return new BigNumber(!s || s < 0 && (!c || c[0]) ? NaN : c ? x : 1 / 0);\r\n    }\r\n\r\n    // Initial estimate.\r\n    s = Math.sqrt(+valueOf(x));\r\n\r\n    // Math.sqrt underflow/overflow?\r\n    // Pass x to Math.sqrt as integer, then adjust the exponent of the result.\r\n    if (s == 0 || s == 1 / 0) {\r\n      n = coeffToString(c);\r\n      if ((n.length + e) % 2 == 0) n += '0';\r\n      s = Math.sqrt(+n);\r\n      e = bitFloor((e + 1) / 2) - (e < 0 || e % 2);\r\n\r\n      if (s == 1 / 0) {\r\n        n = '5e' + e;\r\n      } else {\r\n        n = s.toExponential();\r\n        n = n.slice(0, n.indexOf('e') + 1) + e;\r\n      }\r\n\r\n      r = new BigNumber(n);\r\n    } else {\r\n      r = new BigNumber(s + '');\r\n    }\r\n\r\n    // Check for zero.\r\n    // r could be zero if MIN_EXP is changed after the this value was created.\r\n    // This would cause a division by zero (x/t) and hence Infinity below, which would cause\r\n    // coeffToString to throw.\r\n    if (r.c[0]) {\r\n      e = r.e;\r\n      s = e + dp;\r\n      if (s < 3) s = 0;\r\n\r\n      // Newton-Raphson iteration.\r\n      for (; ;) {\r\n        t = r;\r\n        r = half.times(t.plus(div(x, t, dp, 1)));\r\n\r\n        if (coeffToString(t.c).slice(0, s) === (n = coeffToString(r.c)).slice(0, s)) {\r\n\r\n          // The exponent of r may here be one less than the final result exponent,\r\n          // e.g 0.0009999 (e-4) --> 0.001 (e-3), so adjust s so the rounding digits\r\n          // are indexed correctly.\r\n          if (r.e < e) --s;\r\n          n = n.slice(s - 3, s + 1);\r\n\r\n          // The 4th rounding digit may be in error by -1 so if the 4 rounding digits\r\n          // are 9999 or 4999 (i.e. approaching a rounding boundary) continue the\r\n          // iteration.\r\n          if (n == '9999' || !rep && n == '4999') {\r\n\r\n            // On the first iteration only, check to see if rounding up gives the\r\n            // exact result as the nines may infinitely repeat.\r\n            if (!rep) {\r\n              round(t, t.e + DECIMAL_PLACES + 2, 0);\r\n\r\n              if (t.times(t).eq(x)) {\r\n                r = t;\r\n                break;\r\n              }\r\n            }\r\n\r\n            dp += 4;\r\n            s += 4;\r\n            rep = 1;\r\n          } else {\r\n\r\n            // If rounding digits are null, 0{0,4} or 50{0,3}, check for exact\r\n            // result. If not, then there are further digits and m will be truthy.\r\n            if (!+n || !+n.slice(1) && n.charAt(0) == '5') {\r\n\r\n              // Truncate to the first rounding digit.\r\n              round(r, r.e + DECIMAL_PLACES + 2, 1);\r\n              m = !r.times(r).eq(x);\r\n            }\r\n\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return round(r, r.e + DECIMAL_PLACES + 1, ROUNDING_MODE, m);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in exponential notation and\r\n   * rounded using ROUNDING_MODE to dp fixed decimal places.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toExponential = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp++;\r\n    }\r\n    return format(this, dp, rm, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounding\r\n   * to dp fixed decimal places using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * Note: as with JavaScript's number type, (-0).toFixed(0) is '0',\r\n   * but e.g. (-0.00001).toFixed(0) is '-0'.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toFixed = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp = dp + this.e + 1;\r\n    }\r\n    return format(this, dp, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounded\r\n   * using rm or ROUNDING_MODE to dp decimal places, and formatted according to the properties\r\n   * of the format or FORMAT object (see BigNumber.set).\r\n   *\r\n   * The formatting object may contain some or all of the properties shown below.\r\n   *\r\n   * FORMAT = {\r\n   *   prefix: '',\r\n   *   groupSize: 3,\r\n   *   secondaryGroupSize: 0,\r\n   *   groupSeparator: ',',\r\n   *   decimalSeparator: '.',\r\n   *   fractionGroupSize: 0,\r\n   *   fractionGroupSeparator: '\\xA0',      // non-breaking space\r\n   *   suffix: ''\r\n   * };\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   * [format] {object} Formatting options. See FORMAT pbject above.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   * '[BigNumber Error] Argument not an object: {format}'\r\n   */\r\n  P.toFormat = function (dp, rm, format) {\r\n    var str,\r\n      x = this;\r\n\r\n    if (format == null) {\r\n      if (dp != null && rm && typeof rm == 'object') {\r\n        format = rm;\r\n        rm = null;\r\n      } else if (dp && typeof dp == 'object') {\r\n        format = dp;\r\n        dp = rm = null;\r\n      } else {\r\n        format = FORMAT;\r\n      }\r\n    } else if (typeof format != 'object') {\r\n      throw Error\r\n        (bignumberError + 'Argument not an object: ' + format);\r\n    }\r\n\r\n    str = x.toFixed(dp, rm);\r\n\r\n    if (x.c) {\r\n      var i,\r\n        arr = str.split('.'),\r\n        g1 = +format.groupSize,\r\n        g2 = +format.secondaryGroupSize,\r\n        groupSeparator = format.groupSeparator || '',\r\n        intPart = arr[0],\r\n        fractionPart = arr[1],\r\n        isNeg = x.s < 0,\r\n        intDigits = isNeg ? intPart.slice(1) : intPart,\r\n        len = intDigits.length;\r\n\r\n      if (g2) {\r\n        i = g1;\r\n        g1 = g2;\r\n        g2 = i;\r\n        len -= i;\r\n      }\r\n\r\n      if (g1 > 0 && len > 0) {\r\n        i = len % g1 || g1;\r\n        intPart = intDigits.substr(0, i);\r\n        for (; i < len; i += g1) intPart += groupSeparator + intDigits.substr(i, g1);\r\n        if (g2 > 0) intPart += groupSeparator + intDigits.slice(i);\r\n        if (isNeg) intPart = '-' + intPart;\r\n      }\r\n\r\n      str = fractionPart\r\n       ? intPart + (format.decimalSeparator || '') + ((g2 = +format.fractionGroupSize)\r\n        ? fractionPart.replace(new RegExp('\\\\d{' + g2 + '}\\\\B', 'g'),\r\n         '$&' + (format.fractionGroupSeparator || ''))\r\n        : fractionPart)\r\n       : intPart;\r\n    }\r\n\r\n    return (format.prefix || '') + str + (format.suffix || '');\r\n  };\r\n\r\n\r\n  /*\r\n   * Return an array of two BigNumbers representing the value of this BigNumber as a simple\r\n   * fraction with an integer numerator and an integer denominator.\r\n   * The denominator will be a positive non-zero value less than or equal to the specified\r\n   * maximum denominator. If a maximum denominator is not specified, the denominator will be\r\n   * the lowest value necessary to represent the number exactly.\r\n   *\r\n   * [md] {number|string|BigNumber} Integer >= 1, or Infinity. The maximum denominator.\r\n   *\r\n   * '[BigNumber Error] Argument {not an integer|out of range} : {md}'\r\n   */\r\n  P.toFraction = function (md) {\r\n    var d, d0, d1, d2, e, exp, n, n0, n1, q, r, s,\r\n      x = this,\r\n      xc = x.c;\r\n\r\n    if (md != null) {\r\n      n = new BigNumber(md);\r\n\r\n      // Throw if md is less than one or is not an integer, unless it is Infinity.\r\n      if (!n.isInteger() && (n.c || n.s !== 1) || n.lt(ONE)) {\r\n        throw Error\r\n          (bignumberError + 'Argument ' +\r\n            (n.isInteger() ? 'out of range: ' : 'not an integer: ') + valueOf(n));\r\n      }\r\n    }\r\n\r\n    if (!xc) return new BigNumber(x);\r\n\r\n    d = new BigNumber(ONE);\r\n    n1 = d0 = new BigNumber(ONE);\r\n    d1 = n0 = new BigNumber(ONE);\r\n    s = coeffToString(xc);\r\n\r\n    // Determine initial denominator.\r\n    // d is a power of 10 and the minimum max denominator that specifies the value exactly.\r\n    e = d.e = s.length - x.e - 1;\r\n    d.c[0] = POWS_TEN[(exp = e % LOG_BASE) < 0 ? LOG_BASE + exp : exp];\r\n    md = !md || n.comparedTo(d) > 0 ? (e > 0 ? d : n1) : n;\r\n\r\n    exp = MAX_EXP;\r\n    MAX_EXP = 1 / 0;\r\n    n = new BigNumber(s);\r\n\r\n    // n0 = d1 = 0\r\n    n0.c[0] = 0;\r\n\r\n    for (; ;)  {\r\n      q = div(n, d, 0, 1);\r\n      d2 = d0.plus(q.times(d1));\r\n      if (d2.comparedTo(md) == 1) break;\r\n      d0 = d1;\r\n      d1 = d2;\r\n      n1 = n0.plus(q.times(d2 = n1));\r\n      n0 = d2;\r\n      d = n.minus(q.times(d2 = d));\r\n      n = d2;\r\n    }\r\n\r\n    d2 = div(md.minus(d0), d1, 0, 1);\r\n    n0 = n0.plus(d2.times(n1));\r\n    d0 = d0.plus(d2.times(d1));\r\n    n0.s = n1.s = x.s;\r\n    e = e * 2;\r\n\r\n    // Determine which fraction is closer to x, n0/d0 or n1/d1\r\n    r = div(n1, d1, e, ROUNDING_MODE).minus(x).abs().comparedTo(\r\n        div(n0, d0, e, ROUNDING_MODE).minus(x).abs()) < 1 ? [n1, d1] : [n0, d0];\r\n\r\n    MAX_EXP = exp;\r\n\r\n    return r;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the value of this BigNumber converted to a number primitive.\r\n   */\r\n  P.toNumber = function () {\r\n    return +valueOf(this);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber rounded to sd significant digits\r\n   * using rounding mode rm or ROUNDING_MODE. If sd is less than the number of digits\r\n   * necessary to represent the integer part of the value in fixed-point notation, then use\r\n   * exponential notation.\r\n   *\r\n   * [sd] {number} Significant digits. Integer, 1 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.toPrecision = function (sd, rm) {\r\n    if (sd != null) intCheck(sd, 1, MAX);\r\n    return format(this, sd, rm, 2);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in base b, or base 10 if b is\r\n   * omitted. If a base is specified, including base 10, round according to DECIMAL_PLACES and\r\n   * ROUNDING_MODE. If a base is not specified, and this BigNumber has a positive exponent\r\n   * that is equal to or greater than TO_EXP_POS, or a negative exponent equal to or less than\r\n   * TO_EXP_NEG, return exponential notation.\r\n   *\r\n   * [b] {number} Integer, 2 to ALPHABET.length inclusive.\r\n   *\r\n   * '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n   */\r\n  P.toString = function (b) {\r\n    var str,\r\n      n = this,\r\n      s = n.s,\r\n      e = n.e;\r\n\r\n    // Infinity or NaN?\r\n    if (e === null) {\r\n      if (s) {\r\n        str = 'Infinity';\r\n        if (s < 0) str = '-' + str;\r\n      } else {\r\n        str = 'NaN';\r\n      }\r\n    } else {\r\n      if (b == null) {\r\n        str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n         ? toExponential(coeffToString(n.c), e)\r\n         : toFixedPoint(coeffToString(n.c), e, '0');\r\n      } else if (b === 10 && alphabetHasNormalDecimalDigits) {\r\n        n = round(new BigNumber(n), DECIMAL_PLACES + e + 1, ROUNDING_MODE);\r\n        str = toFixedPoint(coeffToString(n.c), n.e, '0');\r\n      } else {\r\n        intCheck(b, 2, ALPHABET.length, 'Base');\r\n        str = convertBase(toFixedPoint(coeffToString(n.c), e, '0'), 10, b, s, true);\r\n      }\r\n\r\n      if (s < 0 && n.c[0]) str = '-' + str;\r\n    }\r\n\r\n    return str;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return as toString, but do not accept a base argument, and include the minus sign for\r\n   * negative zero.\r\n   */\r\n  P.valueOf = P.toJSON = function () {\r\n    return valueOf(this);\r\n  };\r\n\r\n\r\n  P._isBigNumber = true;\r\n\r\n  P[Symbol.toStringTag] = 'BigNumber';\r\n\r\n  // Node.js v10.12.0+\r\n  P[Symbol.for('nodejs.util.inspect.custom')] = P.valueOf;\r\n\r\n  if (configObject != null) BigNumber.set(configObject);\r\n\r\n  return BigNumber;\r\n}\r\n\r\n\r\n// PRIVATE HELPER FUNCTIONS\r\n\r\n// These functions don't need access to variables,\r\n// e.g. DECIMAL_PLACES, in the scope of the `clone` function above.\r\n\r\n\r\nfunction bitFloor(n) {\r\n  var i = n | 0;\r\n  return n > 0 || n === i ? i : i - 1;\r\n}\r\n\r\n\r\n// Return a coefficient array as a string of base 10 digits.\r\nfunction coeffToString(a) {\r\n  var s, z,\r\n    i = 1,\r\n    j = a.length,\r\n    r = a[0] + '';\r\n\r\n  for (; i < j;) {\r\n    s = a[i++] + '';\r\n    z = LOG_BASE - s.length;\r\n    for (; z--; s = '0' + s);\r\n    r += s;\r\n  }\r\n\r\n  // Determine trailing zeros.\r\n  for (j = r.length; r.charCodeAt(--j) === 48;);\r\n\r\n  return r.slice(0, j + 1 || 1);\r\n}\r\n\r\n\r\n// Compare the value of BigNumbers x and y.\r\nfunction compare(x, y) {\r\n  var a, b,\r\n    xc = x.c,\r\n    yc = y.c,\r\n    i = x.s,\r\n    j = y.s,\r\n    k = x.e,\r\n    l = y.e;\r\n\r\n  // Either NaN?\r\n  if (!i || !j) return null;\r\n\r\n  a = xc && !xc[0];\r\n  b = yc && !yc[0];\r\n\r\n  // Either zero?\r\n  if (a || b) return a ? b ? 0 : -j : i;\r\n\r\n  // Signs differ?\r\n  if (i != j) return i;\r\n\r\n  a = i < 0;\r\n  b = k == l;\r\n\r\n  // Either Infinity?\r\n  if (!xc || !yc) return b ? 0 : !xc ^ a ? 1 : -1;\r\n\r\n  // Compare exponents.\r\n  if (!b) return k > l ^ a ? 1 : -1;\r\n\r\n  j = (k = xc.length) < (l = yc.length) ? k : l;\r\n\r\n  // Compare digit by digit.\r\n  for (i = 0; i < j; i++) if (xc[i] != yc[i]) return xc[i] > yc[i] ^ a ? 1 : -1;\r\n\r\n  // Compare lengths.\r\n  return k == l ? 0 : k > l ^ a ? 1 : -1;\r\n}\r\n\r\n\r\n/*\r\n * Check that n is a primitive number, an integer, and in range, otherwise throw.\r\n */\r\nfunction intCheck(n, min, max, name) {\r\n  if (n < min || n > max || n !== mathfloor(n)) {\r\n    throw Error\r\n     (bignumberError + (name || 'Argument') + (typeof n == 'number'\r\n       ? n < min || n > max ? ' out of range: ' : ' not an integer: '\r\n       : ' not a primitive number: ') + String(n));\r\n  }\r\n}\r\n\r\n\r\n// Assumes finite n.\r\nfunction isOdd(n) {\r\n  var k = n.c.length - 1;\r\n  return bitFloor(n.e / LOG_BASE) == k && n.c[k] % 2 != 0;\r\n}\r\n\r\n\r\nfunction toExponential(str, e) {\r\n  return (str.length > 1 ? str.charAt(0) + '.' + str.slice(1) : str) +\r\n   (e < 0 ? 'e' : 'e+') + e;\r\n}\r\n\r\n\r\nfunction toFixedPoint(str, e, z) {\r\n  var len, zs;\r\n\r\n  // Negative exponent?\r\n  if (e < 0) {\r\n\r\n    // Prepend zeros.\r\n    for (zs = z + '.'; ++e; zs += z);\r\n    str = zs + str;\r\n\r\n  // Positive exponent\r\n  } else {\r\n    len = str.length;\r\n\r\n    // Append zeros.\r\n    if (++e > len) {\r\n      for (zs = z, e -= len; --e; zs += z);\r\n      str += zs;\r\n    } else if (e < len) {\r\n      str = str.slice(0, e) + '.' + str.slice(e);\r\n    }\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\n\r\n// EXPORT\r\n\r\n\r\nexport var BigNumber = clone();\r\n\r\nexport default BigNumber;\r\n","// src/index.ts\nvar SplayTreeNode = class {\n  key;\n  left = null;\n  right = null;\n  constructor(key) {\n    this.key = key;\n  }\n};\nvar SplayTreeSetNode = class extends SplayTreeNode {\n  constructor(key) {\n    super(key);\n  }\n};\nvar SplayTreeMapNode = class _SplayTreeMapNode extends SplayTreeNode {\n  value;\n  constructor(key, value) {\n    super(key);\n    this.value = value;\n  }\n  replaceValue(value) {\n    const node = new _SplayTreeMapNode(this.key, value);\n    node.left = this.left;\n    node.right = this.right;\n    return node;\n  }\n};\nvar SplayTree = class {\n  size = 0;\n  modificationCount = 0;\n  splayCount = 0;\n  splay(key) {\n    const root = this.root;\n    if (root == null) {\n      this.compare(key, key);\n      return -1;\n    }\n    let right = null;\n    let newTreeRight = null;\n    let left = null;\n    let newTreeLeft = null;\n    let current = root;\n    const compare = this.compare;\n    let comp;\n    while (true) {\n      comp = compare(current.key, key);\n      if (comp > 0) {\n        let currentLeft = current.left;\n        if (currentLeft == null) break;\n        comp = compare(currentLeft.key, key);\n        if (comp > 0) {\n          current.left = currentLeft.right;\n          currentLeft.right = current;\n          current = currentLeft;\n          currentLeft = current.left;\n          if (currentLeft == null) break;\n        }\n        if (right == null) {\n          newTreeRight = current;\n        } else {\n          right.left = current;\n        }\n        right = current;\n        current = currentLeft;\n      } else if (comp < 0) {\n        let currentRight = current.right;\n        if (currentRight == null) break;\n        comp = compare(currentRight.key, key);\n        if (comp < 0) {\n          current.right = currentRight.left;\n          currentRight.left = current;\n          current = currentRight;\n          currentRight = current.right;\n          if (currentRight == null) break;\n        }\n        if (left == null) {\n          newTreeLeft = current;\n        } else {\n          left.right = current;\n        }\n        left = current;\n        current = currentRight;\n      } else {\n        break;\n      }\n    }\n    if (left != null) {\n      left.right = current.left;\n      current.left = newTreeLeft;\n    }\n    if (right != null) {\n      right.left = current.right;\n      current.right = newTreeRight;\n    }\n    if (this.root !== current) {\n      this.root = current;\n      this.splayCount++;\n    }\n    return comp;\n  }\n  splayMin(node) {\n    let current = node;\n    let nextLeft = current.left;\n    while (nextLeft != null) {\n      const left = nextLeft;\n      current.left = left.right;\n      left.right = current;\n      current = left;\n      nextLeft = current.left;\n    }\n    return current;\n  }\n  splayMax(node) {\n    let current = node;\n    let nextRight = current.right;\n    while (nextRight != null) {\n      const right = nextRight;\n      current.right = right.left;\n      right.left = current;\n      current = right;\n      nextRight = current.right;\n    }\n    return current;\n  }\n  _delete(key) {\n    if (this.root == null) return null;\n    const comp = this.splay(key);\n    if (comp != 0) return null;\n    let root = this.root;\n    const result = root;\n    const left = root.left;\n    this.size--;\n    if (left == null) {\n      this.root = root.right;\n    } else {\n      const right = root.right;\n      root = this.splayMax(left);\n      root.right = right;\n      this.root = root;\n    }\n    this.modificationCount++;\n    return result;\n  }\n  addNewRoot(node, comp) {\n    this.size++;\n    this.modificationCount++;\n    const root = this.root;\n    if (root == null) {\n      this.root = node;\n      return;\n    }\n    if (comp < 0) {\n      node.left = root;\n      node.right = root.right;\n      root.right = null;\n    } else {\n      node.right = root;\n      node.left = root.left;\n      root.left = null;\n    }\n    this.root = node;\n  }\n  _first() {\n    const root = this.root;\n    if (root == null) return null;\n    this.root = this.splayMin(root);\n    return this.root;\n  }\n  _last() {\n    const root = this.root;\n    if (root == null) return null;\n    this.root = this.splayMax(root);\n    return this.root;\n  }\n  clear() {\n    this.root = null;\n    this.size = 0;\n    this.modificationCount++;\n  }\n  has(key) {\n    return this.validKey(key) && this.splay(key) == 0;\n  }\n  defaultCompare() {\n    return (a, b) => a < b ? -1 : a > b ? 1 : 0;\n  }\n  wrap() {\n    return {\n      getRoot: () => {\n        return this.root;\n      },\n      setRoot: (root) => {\n        this.root = root;\n      },\n      getSize: () => {\n        return this.size;\n      },\n      getModificationCount: () => {\n        return this.modificationCount;\n      },\n      getSplayCount: () => {\n        return this.splayCount;\n      },\n      setSplayCount: (count) => {\n        this.splayCount = count;\n      },\n      splay: (key) => {\n        return this.splay(key);\n      },\n      has: (key) => {\n        return this.has(key);\n      }\n    };\n  }\n};\nvar SplayTreeMap = class extends SplayTree {\n  root = null;\n  compare;\n  validKey;\n  constructor(compare, isValidKey) {\n    super();\n    this.compare = compare ?? this.defaultCompare();\n    this.validKey = isValidKey ?? ((a) => a != null && a != void 0);\n  }\n  delete(key) {\n    if (!this.validKey(key)) return false;\n    return this._delete(key) != null;\n  }\n  forEach(f) {\n    const nodes = new SplayTreeMapEntryIterableIterator(this.wrap());\n    let result;\n    while (result = nodes.next(), !result.done) {\n      f(result.value[1], result.value[0], this);\n    }\n  }\n  get(key) {\n    if (!this.validKey(key)) return void 0;\n    if (this.root != null) {\n      const comp = this.splay(key);\n      if (comp == 0) {\n        return this.root.value;\n      }\n    }\n    return void 0;\n  }\n  hasValue(value) {\n    const initialSplayCount = this.splayCount;\n    const visit = (node) => {\n      while (node != null) {\n        if (node.value == value) return true;\n        if (initialSplayCount != this.splayCount) {\n          throw \"Concurrent modification during iteration.\";\n        }\n        if (node.right != null && visit(node.right)) {\n          return true;\n        }\n        node = node.left;\n      }\n      return false;\n    };\n    return visit(this.root);\n  }\n  set(key, value) {\n    const comp = this.splay(key);\n    if (comp == 0) {\n      this.root = this.root.replaceValue(value);\n      this.splayCount += 1;\n      return this;\n    }\n    this.addNewRoot(new SplayTreeMapNode(key, value), comp);\n    return this;\n  }\n  setAll(other) {\n    other.forEach((value, key) => {\n      this.set(key, value);\n    });\n  }\n  setIfAbsent(key, ifAbsent) {\n    let comp = this.splay(key);\n    if (comp == 0) {\n      return this.root.value;\n    }\n    const modificationCount = this.modificationCount;\n    const splayCount = this.splayCount;\n    const value = ifAbsent();\n    if (modificationCount != this.modificationCount) {\n      throw \"Concurrent modification during iteration.\";\n    }\n    if (splayCount != this.splayCount) {\n      comp = this.splay(key);\n    }\n    this.addNewRoot(new SplayTreeMapNode(key, value), comp);\n    return value;\n  }\n  isEmpty() {\n    return this.root == null;\n  }\n  isNotEmpty() {\n    return !this.isEmpty();\n  }\n  firstKey() {\n    if (this.root == null) return null;\n    return this._first().key;\n  }\n  lastKey() {\n    if (this.root == null) return null;\n    return this._last().key;\n  }\n  lastKeyBefore(key) {\n    if (key == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(key);\n    if (comp < 0) return this.root.key;\n    let node = this.root.left;\n    if (node == null) return null;\n    let nodeRight = node.right;\n    while (nodeRight != null) {\n      node = nodeRight;\n      nodeRight = node.right;\n    }\n    return node.key;\n  }\n  firstKeyAfter(key) {\n    if (key == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(key);\n    if (comp > 0) return this.root.key;\n    let node = this.root.right;\n    if (node == null) return null;\n    let nodeLeft = node.left;\n    while (nodeLeft != null) {\n      node = nodeLeft;\n      nodeLeft = node.left;\n    }\n    return node.key;\n  }\n  update(key, update, ifAbsent) {\n    let comp = this.splay(key);\n    if (comp == 0) {\n      const modificationCount = this.modificationCount;\n      const splayCount = this.splayCount;\n      const newValue = update(this.root.value);\n      if (modificationCount != this.modificationCount) {\n        throw \"Concurrent modification during iteration.\";\n      }\n      if (splayCount != this.splayCount) {\n        this.splay(key);\n      }\n      this.root = this.root.replaceValue(newValue);\n      this.splayCount += 1;\n      return newValue;\n    }\n    if (ifAbsent != null) {\n      const modificationCount = this.modificationCount;\n      const splayCount = this.splayCount;\n      const newValue = ifAbsent();\n      if (modificationCount != this.modificationCount) {\n        throw \"Concurrent modification during iteration.\";\n      }\n      if (splayCount != this.splayCount) {\n        comp = this.splay(key);\n      }\n      this.addNewRoot(new SplayTreeMapNode(key, newValue), comp);\n      return newValue;\n    }\n    throw \"Invalid argument (key): Key not in map.\";\n  }\n  updateAll(update) {\n    const root = this.root;\n    if (root == null) return;\n    const iterator = new SplayTreeMapEntryIterableIterator(this.wrap());\n    let node;\n    while (node = iterator.next(), !node.done) {\n      const newValue = update(...node.value);\n      iterator.replaceValue(newValue);\n    }\n  }\n  keys() {\n    return new SplayTreeKeyIterableIterator(this.wrap());\n  }\n  values() {\n    return new SplayTreeValueIterableIterator(this.wrap());\n  }\n  entries() {\n    return this[Symbol.iterator]();\n  }\n  [Symbol.iterator]() {\n    return new SplayTreeMapEntryIterableIterator(this.wrap());\n  }\n  [Symbol.toStringTag] = \"[object Map]\";\n};\nvar SplayTreeSet = class _SplayTreeSet extends SplayTree {\n  root = null;\n  compare;\n  validKey;\n  constructor(compare, isValidKey) {\n    super();\n    this.compare = compare ?? this.defaultCompare();\n    this.validKey = isValidKey ?? ((v) => v != null && v != void 0);\n  }\n  delete(element) {\n    if (!this.validKey(element)) return false;\n    return this._delete(element) != null;\n  }\n  deleteAll(elements) {\n    for (const element of elements) {\n      this.delete(element);\n    }\n  }\n  forEach(f) {\n    const nodes = this[Symbol.iterator]();\n    let result;\n    while (result = nodes.next(), !result.done) {\n      f(result.value, result.value, this);\n    }\n  }\n  add(element) {\n    const compare = this.splay(element);\n    if (compare != 0) this.addNewRoot(new SplayTreeSetNode(element), compare);\n    return this;\n  }\n  addAndReturn(element) {\n    const compare = this.splay(element);\n    if (compare != 0) this.addNewRoot(new SplayTreeSetNode(element), compare);\n    return this.root.key;\n  }\n  addAll(elements) {\n    for (const element of elements) {\n      this.add(element);\n    }\n  }\n  isEmpty() {\n    return this.root == null;\n  }\n  isNotEmpty() {\n    return this.root != null;\n  }\n  single() {\n    if (this.size == 0) throw \"Bad state: No element\";\n    if (this.size > 1) throw \"Bad state: Too many element\";\n    return this.root.key;\n  }\n  first() {\n    if (this.size == 0) throw \"Bad state: No element\";\n    return this._first().key;\n  }\n  last() {\n    if (this.size == 0) throw \"Bad state: No element\";\n    return this._last().key;\n  }\n  lastBefore(element) {\n    if (element == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(element);\n    if (comp < 0) return this.root.key;\n    let node = this.root.left;\n    if (node == null) return null;\n    let nodeRight = node.right;\n    while (nodeRight != null) {\n      node = nodeRight;\n      nodeRight = node.right;\n    }\n    return node.key;\n  }\n  firstAfter(element) {\n    if (element == null) throw \"Invalid arguments(s)\";\n    if (this.root == null) return null;\n    const comp = this.splay(element);\n    if (comp > 0) return this.root.key;\n    let node = this.root.right;\n    if (node == null) return null;\n    let nodeLeft = node.left;\n    while (nodeLeft != null) {\n      node = nodeLeft;\n      nodeLeft = node.left;\n    }\n    return node.key;\n  }\n  retainAll(elements) {\n    const retainSet = new _SplayTreeSet(this.compare, this.validKey);\n    const modificationCount = this.modificationCount;\n    for (const object of elements) {\n      if (modificationCount != this.modificationCount) {\n        throw \"Concurrent modification during iteration.\";\n      }\n      if (this.validKey(object) && this.splay(object) == 0) {\n        retainSet.add(this.root.key);\n      }\n    }\n    if (retainSet.size != this.size) {\n      this.root = retainSet.root;\n      this.size = retainSet.size;\n      this.modificationCount++;\n    }\n  }\n  lookup(object) {\n    if (!this.validKey(object)) return null;\n    const comp = this.splay(object);\n    if (comp != 0) return null;\n    return this.root.key;\n  }\n  intersection(other) {\n    const result = new _SplayTreeSet(this.compare, this.validKey);\n    for (const element of this) {\n      if (other.has(element)) result.add(element);\n    }\n    return result;\n  }\n  difference(other) {\n    const result = new _SplayTreeSet(this.compare, this.validKey);\n    for (const element of this) {\n      if (!other.has(element)) result.add(element);\n    }\n    return result;\n  }\n  union(other) {\n    const u = this.clone();\n    u.addAll(other);\n    return u;\n  }\n  clone() {\n    const set = new _SplayTreeSet(this.compare, this.validKey);\n    set.size = this.size;\n    set.root = this.copyNode(this.root);\n    return set;\n  }\n  copyNode(node) {\n    if (node == null) return null;\n    function copyChildren(node2, dest) {\n      let left;\n      let right;\n      do {\n        left = node2.left;\n        right = node2.right;\n        if (left != null) {\n          const newLeft = new SplayTreeSetNode(left.key);\n          dest.left = newLeft;\n          copyChildren(left, newLeft);\n        }\n        if (right != null) {\n          const newRight = new SplayTreeSetNode(right.key);\n          dest.right = newRight;\n          node2 = right;\n          dest = newRight;\n        }\n      } while (right != null);\n    }\n    const result = new SplayTreeSetNode(node.key);\n    copyChildren(node, result);\n    return result;\n  }\n  toSet() {\n    return this.clone();\n  }\n  entries() {\n    return new SplayTreeSetEntryIterableIterator(this.wrap());\n  }\n  keys() {\n    return this[Symbol.iterator]();\n  }\n  values() {\n    return this[Symbol.iterator]();\n  }\n  [Symbol.iterator]() {\n    return new SplayTreeKeyIterableIterator(this.wrap());\n  }\n  [Symbol.toStringTag] = \"[object Set]\";\n};\nvar SplayTreeIterableIterator = class {\n  tree;\n  path = new Array();\n  modificationCount = null;\n  splayCount;\n  constructor(tree) {\n    this.tree = tree;\n    this.splayCount = tree.getSplayCount();\n  }\n  [Symbol.iterator]() {\n    return this;\n  }\n  next() {\n    if (this.moveNext()) return { done: false, value: this.current() };\n    return { done: true, value: null };\n  }\n  current() {\n    if (!this.path.length) return null;\n    const node = this.path[this.path.length - 1];\n    return this.getValue(node);\n  }\n  rebuildPath(key) {\n    this.path.splice(0, this.path.length);\n    this.tree.splay(key);\n    this.path.push(this.tree.getRoot());\n    this.splayCount = this.tree.getSplayCount();\n  }\n  findLeftMostDescendent(node) {\n    while (node != null) {\n      this.path.push(node);\n      node = node.left;\n    }\n  }\n  moveNext() {\n    if (this.modificationCount != this.tree.getModificationCount()) {\n      if (this.modificationCount == null) {\n        this.modificationCount = this.tree.getModificationCount();\n        let node2 = this.tree.getRoot();\n        while (node2 != null) {\n          this.path.push(node2);\n          node2 = node2.left;\n        }\n        return this.path.length > 0;\n      }\n      throw \"Concurrent modification during iteration.\";\n    }\n    if (!this.path.length) return false;\n    if (this.splayCount != this.tree.getSplayCount()) {\n      this.rebuildPath(this.path[this.path.length - 1].key);\n    }\n    let node = this.path[this.path.length - 1];\n    let next = node.right;\n    if (next != null) {\n      while (next != null) {\n        this.path.push(next);\n        next = next.left;\n      }\n      return true;\n    }\n    this.path.pop();\n    while (this.path.length && this.path[this.path.length - 1].right === node) {\n      node = this.path.pop();\n    }\n    return this.path.length > 0;\n  }\n};\nvar SplayTreeKeyIterableIterator = class extends SplayTreeIterableIterator {\n  getValue(node) {\n    return node.key;\n  }\n};\nvar SplayTreeSetEntryIterableIterator = class extends SplayTreeIterableIterator {\n  getValue(node) {\n    return [node.key, node.key];\n  }\n};\nvar SplayTreeValueIterableIterator = class extends SplayTreeIterableIterator {\n  constructor(map) {\n    super(map);\n  }\n  getValue(node) {\n    return node.value;\n  }\n};\nvar SplayTreeMapEntryIterableIterator = class extends SplayTreeIterableIterator {\n  constructor(map) {\n    super(map);\n  }\n  getValue(node) {\n    return [node.key, node.value];\n  }\n  replaceValue(value) {\n    if (this.modificationCount != this.tree.getModificationCount()) {\n      throw \"Concurrent modification during iteration.\";\n    }\n    if (this.splayCount != this.tree.getSplayCount()) {\n      this.rebuildPath(this.path[this.path.length - 1].key);\n    }\n    const last = this.path.pop();\n    const newLast = last.replaceValue(value);\n    if (!this.path.length) {\n      this.tree.setRoot(newLast);\n    } else {\n      const parent = this.path[this.path.length - 1];\n      if (last === parent.left) {\n        parent.left = newLast;\n      } else {\n        parent.right = newLast;\n      }\n    }\n    this.path.push(newLast);\n    const count = this.tree.getSplayCount() + 1;\n    this.tree.setSplayCount(count);\n    this.splayCount = count;\n  }\n};\nexport {\n  SplayTreeMap,\n  SplayTreeSet\n};\n//# sourceMappingURL=index.js.map","// src/geom-in.ts\nimport BigNumber2 from \"bignumber.js\";\n\n// src/constant.ts\nvar constant_default = (x) => {\n  return () => {\n    return x;\n  };\n};\n\n// src/compare.ts\nvar compare_default = (eps) => {\n  const almostEqual = eps ? (a, b) => b.minus(a).abs().isLessThanOrEqualTo(eps) : constant_default(false);\n  return (a, b) => {\n    if (almostEqual(a, b)) return 0;\n    return a.comparedTo(b);\n  };\n};\n\n// src/orient.ts\nfunction orient_default(eps) {\n  const almostCollinear = eps ? (area2, ax, ay, cx, cy) => area2.exponentiatedBy(2).isLessThanOrEqualTo(\n    cx.minus(ax).exponentiatedBy(2).plus(cy.minus(ay).exponentiatedBy(2)).times(eps)\n  ) : constant_default(false);\n  return (a, b, c) => {\n    const ax = a.x, ay = a.y, cx = c.x, cy = c.y;\n    const area2 = ay.minus(cy).times(b.x.minus(cx)).minus(ax.minus(cx).times(b.y.minus(cy)));\n    if (almostCollinear(area2, ax, ay, cx, cy)) return 0;\n    return area2.comparedTo(0);\n  };\n}\n\n// src/snap.ts\nimport BigNumber from \"bignumber.js\";\nimport { SplayTreeSet } from \"splaytree-ts\";\n\n// src/identity.ts\nvar identity_default = (x) => {\n  return x;\n};\n\n// src/snap.ts\nvar snap_default = (eps) => {\n  if (eps) {\n    const xTree = new SplayTreeSet(compare_default(eps));\n    const yTree = new SplayTreeSet(compare_default(eps));\n    const snapCoord = (coord, tree) => {\n      return tree.addAndReturn(coord);\n    };\n    const snap = (v) => {\n      return {\n        x: snapCoord(v.x, xTree),\n        y: snapCoord(v.y, yTree)\n      };\n    };\n    snap({ x: new BigNumber(0), y: new BigNumber(0) });\n    return snap;\n  }\n  return identity_default;\n};\n\n// src/precision.ts\nvar set = (eps) => {\n  return {\n    set: (eps2) => {\n      precision = set(eps2);\n    },\n    reset: () => set(eps),\n    compare: compare_default(eps),\n    snap: snap_default(eps),\n    orient: orient_default(eps)\n  };\n};\nvar precision = set();\n\n// src/bbox.ts\nvar isInBbox = (bbox, point) => {\n  return bbox.ll.x.isLessThanOrEqualTo(point.x) && point.x.isLessThanOrEqualTo(bbox.ur.x) && bbox.ll.y.isLessThanOrEqualTo(point.y) && point.y.isLessThanOrEqualTo(bbox.ur.y);\n};\nvar getBboxOverlap = (b1, b2) => {\n  if (b2.ur.x.isLessThan(b1.ll.x) || b1.ur.x.isLessThan(b2.ll.x) || b2.ur.y.isLessThan(b1.ll.y) || b1.ur.y.isLessThan(b2.ll.y))\n    return null;\n  const lowerX = b1.ll.x.isLessThan(b2.ll.x) ? b2.ll.x : b1.ll.x;\n  const upperX = b1.ur.x.isLessThan(b2.ur.x) ? b1.ur.x : b2.ur.x;\n  const lowerY = b1.ll.y.isLessThan(b2.ll.y) ? b2.ll.y : b1.ll.y;\n  const upperY = b1.ur.y.isLessThan(b2.ur.y) ? b1.ur.y : b2.ur.y;\n  return { ll: { x: lowerX, y: lowerY }, ur: { x: upperX, y: upperY } };\n};\n\n// src/operation.ts\nimport { SplayTreeSet as SplayTreeSet3 } from \"splaytree-ts\";\n\n// src/vector.ts\nvar crossProduct = (a, b) => a.x.times(b.y).minus(a.y.times(b.x));\nvar dotProduct = (a, b) => a.x.times(b.x).plus(a.y.times(b.y));\nvar length = (v) => dotProduct(v, v).sqrt();\nvar sineOfAngle = (pShared, pBase, pAngle) => {\n  const vBase = { x: pBase.x.minus(pShared.x), y: pBase.y.minus(pShared.y) };\n  const vAngle = { x: pAngle.x.minus(pShared.x), y: pAngle.y.minus(pShared.y) };\n  return crossProduct(vAngle, vBase).div(length(vAngle)).div(length(vBase));\n};\nvar cosineOfAngle = (pShared, pBase, pAngle) => {\n  const vBase = { x: pBase.x.minus(pShared.x), y: pBase.y.minus(pShared.y) };\n  const vAngle = { x: pAngle.x.minus(pShared.x), y: pAngle.y.minus(pShared.y) };\n  return dotProduct(vAngle, vBase).div(length(vAngle)).div(length(vBase));\n};\nvar horizontalIntersection = (pt, v, y) => {\n  if (v.y.isZero()) return null;\n  return { x: pt.x.plus(v.x.div(v.y).times(y.minus(pt.y))), y };\n};\nvar verticalIntersection = (pt, v, x) => {\n  if (v.x.isZero()) return null;\n  return { x, y: pt.y.plus(v.y.div(v.x).times(x.minus(pt.x))) };\n};\nvar intersection = (pt1, v1, pt2, v2) => {\n  if (v1.x.isZero()) return verticalIntersection(pt2, v2, pt1.x);\n  if (v2.x.isZero()) return verticalIntersection(pt1, v1, pt2.x);\n  if (v1.y.isZero()) return horizontalIntersection(pt2, v2, pt1.y);\n  if (v2.y.isZero()) return horizontalIntersection(pt1, v1, pt2.y);\n  const kross = crossProduct(v1, v2);\n  if (kross.isZero()) return null;\n  const ve = { x: pt2.x.minus(pt1.x), y: pt2.y.minus(pt1.y) };\n  const d1 = crossProduct(ve, v1).div(kross);\n  const d2 = crossProduct(ve, v2).div(kross);\n  const x1 = pt1.x.plus(d2.times(v1.x)), x2 = pt2.x.plus(d1.times(v2.x));\n  const y1 = pt1.y.plus(d2.times(v1.y)), y2 = pt2.y.plus(d1.times(v2.y));\n  const x = x1.plus(x2).div(2);\n  const y = y1.plus(y2).div(2);\n  return { x, y };\n};\n\n// src/sweep-event.ts\nvar SweepEvent = class _SweepEvent {\n  point;\n  isLeft;\n  segment;\n  otherSE;\n  consumedBy;\n  // for ordering sweep events in the sweep event queue\n  static compare(a, b) {\n    const ptCmp = _SweepEvent.comparePoints(a.point, b.point);\n    if (ptCmp !== 0) return ptCmp;\n    if (a.point !== b.point) a.link(b);\n    if (a.isLeft !== b.isLeft) return a.isLeft ? 1 : -1;\n    return Segment.compare(a.segment, b.segment);\n  }\n  // for ordering points in sweep line order\n  static comparePoints(aPt, bPt) {\n    if (aPt.x.isLessThan(bPt.x)) return -1;\n    if (aPt.x.isGreaterThan(bPt.x)) return 1;\n    if (aPt.y.isLessThan(bPt.y)) return -1;\n    if (aPt.y.isGreaterThan(bPt.y)) return 1;\n    return 0;\n  }\n  // Warning: 'point' input will be modified and re-used (for performance)\n  constructor(point, isLeft) {\n    if (point.events === void 0) point.events = [this];\n    else point.events.push(this);\n    this.point = point;\n    this.isLeft = isLeft;\n  }\n  link(other) {\n    if (other.point === this.point) {\n      throw new Error(\"Tried to link already linked events\");\n    }\n    const otherEvents = other.point.events;\n    for (let i = 0, iMax = otherEvents.length; i < iMax; i++) {\n      const evt = otherEvents[i];\n      this.point.events.push(evt);\n      evt.point = this.point;\n    }\n    this.checkForConsuming();\n  }\n  /* Do a pass over our linked events and check to see if any pair\n   * of segments match, and should be consumed. */\n  checkForConsuming() {\n    const numEvents = this.point.events.length;\n    for (let i = 0; i < numEvents; i++) {\n      const evt1 = this.point.events[i];\n      if (evt1.segment.consumedBy !== void 0) continue;\n      for (let j = i + 1; j < numEvents; j++) {\n        const evt2 = this.point.events[j];\n        if (evt2.consumedBy !== void 0) continue;\n        if (evt1.otherSE.point.events !== evt2.otherSE.point.events) continue;\n        evt1.segment.consume(evt2.segment);\n      }\n    }\n  }\n  getAvailableLinkedEvents() {\n    const events = [];\n    for (let i = 0, iMax = this.point.events.length; i < iMax; i++) {\n      const evt = this.point.events[i];\n      if (evt !== this && !evt.segment.ringOut && evt.segment.isInResult()) {\n        events.push(evt);\n      }\n    }\n    return events;\n  }\n  /**\n   * Returns a comparator function for sorting linked events that will\n   * favor the event that will give us the smallest left-side angle.\n   * All ring construction starts as low as possible heading to the right,\n   * so by always turning left as sharp as possible we'll get polygons\n   * without uncessary loops & holes.\n   *\n   * The comparator function has a compute cache such that it avoids\n   * re-computing already-computed values.\n   */\n  getLeftmostComparator(baseEvent) {\n    const cache = /* @__PURE__ */ new Map();\n    const fillCache = (linkedEvent) => {\n      const nextEvent = linkedEvent.otherSE;\n      cache.set(linkedEvent, {\n        sine: sineOfAngle(this.point, baseEvent.point, nextEvent.point),\n        cosine: cosineOfAngle(this.point, baseEvent.point, nextEvent.point)\n      });\n    };\n    return (a, b) => {\n      if (!cache.has(a)) fillCache(a);\n      if (!cache.has(b)) fillCache(b);\n      const { sine: asine, cosine: acosine } = cache.get(a);\n      const { sine: bsine, cosine: bcosine } = cache.get(b);\n      if (asine.isGreaterThanOrEqualTo(0) && bsine.isGreaterThanOrEqualTo(0)) {\n        if (acosine.isLessThan(bcosine)) return 1;\n        if (acosine.isGreaterThan(bcosine)) return -1;\n        return 0;\n      }\n      if (asine.isLessThan(0) && bsine.isLessThan(0)) {\n        if (acosine.isLessThan(bcosine)) return -1;\n        if (acosine.isGreaterThan(bcosine)) return 1;\n        return 0;\n      }\n      if (bsine.isLessThan(asine)) return -1;\n      if (bsine.isGreaterThan(asine)) return 1;\n      return 0;\n    };\n  }\n};\n\n// src/geom-out.ts\nvar RingOut = class _RingOut {\n  events;\n  poly;\n  _isExteriorRing;\n  _enclosingRing;\n  /* Given the segments from the sweep line pass, compute & return a series\n   * of closed rings from all the segments marked to be part of the result */\n  static factory(allSegments) {\n    const ringsOut = [];\n    for (let i = 0, iMax = allSegments.length; i < iMax; i++) {\n      const segment = allSegments[i];\n      if (!segment.isInResult() || segment.ringOut) continue;\n      let prevEvent = null;\n      let event = segment.leftSE;\n      let nextEvent = segment.rightSE;\n      const events = [event];\n      const startingPoint = event.point;\n      const intersectionLEs = [];\n      while (true) {\n        prevEvent = event;\n        event = nextEvent;\n        events.push(event);\n        if (event.point === startingPoint) break;\n        while (true) {\n          const availableLEs = event.getAvailableLinkedEvents();\n          if (availableLEs.length === 0) {\n            const firstPt = events[0].point;\n            const lastPt = events[events.length - 1].point;\n            throw new Error(\n              `Unable to complete output ring starting at [${firstPt.x}, ${firstPt.y}]. Last matching segment found ends at [${lastPt.x}, ${lastPt.y}].`\n            );\n          }\n          if (availableLEs.length === 1) {\n            nextEvent = availableLEs[0].otherSE;\n            break;\n          }\n          let indexLE = null;\n          for (let j = 0, jMax = intersectionLEs.length; j < jMax; j++) {\n            if (intersectionLEs[j].point === event.point) {\n              indexLE = j;\n              break;\n            }\n          }\n          if (indexLE !== null) {\n            const intersectionLE = intersectionLEs.splice(indexLE)[0];\n            const ringEvents = events.splice(intersectionLE.index);\n            ringEvents.unshift(ringEvents[0].otherSE);\n            ringsOut.push(new _RingOut(ringEvents.reverse()));\n            continue;\n          }\n          intersectionLEs.push({\n            index: events.length,\n            point: event.point\n          });\n          const comparator = event.getLeftmostComparator(prevEvent);\n          nextEvent = availableLEs.sort(comparator)[0].otherSE;\n          break;\n        }\n      }\n      ringsOut.push(new _RingOut(events));\n    }\n    return ringsOut;\n  }\n  constructor(events) {\n    this.events = events;\n    for (let i = 0, iMax = events.length; i < iMax; i++) {\n      events[i].segment.ringOut = this;\n    }\n    this.poly = null;\n  }\n  getGeom() {\n    let prevPt = this.events[0].point;\n    const points = [prevPt];\n    for (let i = 1, iMax = this.events.length - 1; i < iMax; i++) {\n      const pt2 = this.events[i].point;\n      const nextPt2 = this.events[i + 1].point;\n      if (precision.orient(pt2, prevPt, nextPt2) === 0) continue;\n      points.push(pt2);\n      prevPt = pt2;\n    }\n    if (points.length === 1) return null;\n    const pt = points[0];\n    const nextPt = points[1];\n    if (precision.orient(pt, prevPt, nextPt) === 0) points.shift();\n    points.push(points[0]);\n    const step = this.isExteriorRing() ? 1 : -1;\n    const iStart = this.isExteriorRing() ? 0 : points.length - 1;\n    const iEnd = this.isExteriorRing() ? points.length : -1;\n    const orderedPoints = [];\n    for (let i = iStart; i != iEnd; i += step)\n      orderedPoints.push([points[i].x.toNumber(), points[i].y.toNumber()]);\n    return orderedPoints;\n  }\n  isExteriorRing() {\n    if (this._isExteriorRing === void 0) {\n      const enclosing = this.enclosingRing();\n      this._isExteriorRing = enclosing ? !enclosing.isExteriorRing() : true;\n    }\n    return this._isExteriorRing;\n  }\n  enclosingRing() {\n    if (this._enclosingRing === void 0) {\n      this._enclosingRing = this._calcEnclosingRing();\n    }\n    return this._enclosingRing;\n  }\n  /* Returns the ring that encloses this one, if any */\n  _calcEnclosingRing() {\n    let leftMostEvt = this.events[0];\n    for (let i = 1, iMax = this.events.length; i < iMax; i++) {\n      const evt = this.events[i];\n      if (SweepEvent.compare(leftMostEvt, evt) > 0) leftMostEvt = evt;\n    }\n    let prevSeg = leftMostEvt.segment.prevInResult();\n    let prevPrevSeg = prevSeg ? prevSeg.prevInResult() : null;\n    while (true) {\n      if (!prevSeg) return null;\n      if (!prevPrevSeg) return prevSeg.ringOut;\n      if (prevPrevSeg.ringOut !== prevSeg.ringOut) {\n        if (prevPrevSeg.ringOut?.enclosingRing() !== prevSeg.ringOut) {\n          return prevSeg.ringOut;\n        } else return prevSeg.ringOut?.enclosingRing();\n      }\n      prevSeg = prevPrevSeg.prevInResult();\n      prevPrevSeg = prevSeg ? prevSeg.prevInResult() : null;\n    }\n  }\n};\nvar PolyOut = class {\n  exteriorRing;\n  interiorRings;\n  constructor(exteriorRing) {\n    this.exteriorRing = exteriorRing;\n    exteriorRing.poly = this;\n    this.interiorRings = [];\n  }\n  addInterior(ring) {\n    this.interiorRings.push(ring);\n    ring.poly = this;\n  }\n  getGeom() {\n    const geom0 = this.exteriorRing.getGeom();\n    if (geom0 === null) return null;\n    const geom = [geom0];\n    for (let i = 0, iMax = this.interiorRings.length; i < iMax; i++) {\n      const ringGeom = this.interiorRings[i].getGeom();\n      if (ringGeom === null) continue;\n      geom.push(ringGeom);\n    }\n    return geom;\n  }\n};\nvar MultiPolyOut = class {\n  rings;\n  polys;\n  constructor(rings) {\n    this.rings = rings;\n    this.polys = this._composePolys(rings);\n  }\n  getGeom() {\n    const geom = [];\n    for (let i = 0, iMax = this.polys.length; i < iMax; i++) {\n      const polyGeom = this.polys[i].getGeom();\n      if (polyGeom === null) continue;\n      geom.push(polyGeom);\n    }\n    return geom;\n  }\n  _composePolys(rings) {\n    const polys = [];\n    for (let i = 0, iMax = rings.length; i < iMax; i++) {\n      const ring = rings[i];\n      if (ring.poly) continue;\n      if (ring.isExteriorRing()) polys.push(new PolyOut(ring));\n      else {\n        const enclosingRing = ring.enclosingRing();\n        if (!enclosingRing?.poly) polys.push(new PolyOut(enclosingRing));\n        enclosingRing?.poly?.addInterior(ring);\n      }\n    }\n    return polys;\n  }\n};\n\n// src/sweep-line.ts\nimport { SplayTreeSet as SplayTreeSet2 } from \"splaytree-ts\";\nvar SweepLine = class {\n  queue;\n  tree;\n  segments;\n  constructor(queue, comparator = Segment.compare) {\n    this.queue = queue;\n    this.tree = new SplayTreeSet2(comparator);\n    this.segments = [];\n  }\n  process(event) {\n    const segment = event.segment;\n    const newEvents = [];\n    if (event.consumedBy) {\n      if (event.isLeft) this.queue.delete(event.otherSE);\n      else this.tree.delete(segment);\n      return newEvents;\n    }\n    if (event.isLeft) this.tree.add(segment);\n    let prevSeg = segment;\n    let nextSeg = segment;\n    do {\n      prevSeg = this.tree.lastBefore(prevSeg);\n    } while (prevSeg != null && prevSeg.consumedBy != void 0);\n    do {\n      nextSeg = this.tree.firstAfter(nextSeg);\n    } while (nextSeg != null && nextSeg.consumedBy != void 0);\n    if (event.isLeft) {\n      let prevMySplitter = null;\n      if (prevSeg) {\n        const prevInter = prevSeg.getIntersection(segment);\n        if (prevInter !== null) {\n          if (!segment.isAnEndpoint(prevInter)) prevMySplitter = prevInter;\n          if (!prevSeg.isAnEndpoint(prevInter)) {\n            const newEventsFromSplit = this._splitSafely(prevSeg, prevInter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n        }\n      }\n      let nextMySplitter = null;\n      if (nextSeg) {\n        const nextInter = nextSeg.getIntersection(segment);\n        if (nextInter !== null) {\n          if (!segment.isAnEndpoint(nextInter)) nextMySplitter = nextInter;\n          if (!nextSeg.isAnEndpoint(nextInter)) {\n            const newEventsFromSplit = this._splitSafely(nextSeg, nextInter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n        }\n      }\n      if (prevMySplitter !== null || nextMySplitter !== null) {\n        let mySplitter = null;\n        if (prevMySplitter === null) mySplitter = nextMySplitter;\n        else if (nextMySplitter === null) mySplitter = prevMySplitter;\n        else {\n          const cmpSplitters = SweepEvent.comparePoints(\n            prevMySplitter,\n            nextMySplitter\n          );\n          mySplitter = cmpSplitters <= 0 ? prevMySplitter : nextMySplitter;\n        }\n        this.queue.delete(segment.rightSE);\n        newEvents.push(segment.rightSE);\n        const newEventsFromSplit = segment.split(mySplitter);\n        for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n          newEvents.push(newEventsFromSplit[i]);\n        }\n      }\n      if (newEvents.length > 0) {\n        this.tree.delete(segment);\n        newEvents.push(event);\n      } else {\n        this.segments.push(segment);\n        segment.prev = prevSeg;\n      }\n    } else {\n      if (prevSeg && nextSeg) {\n        const inter = prevSeg.getIntersection(nextSeg);\n        if (inter !== null) {\n          if (!prevSeg.isAnEndpoint(inter)) {\n            const newEventsFromSplit = this._splitSafely(prevSeg, inter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n          if (!nextSeg.isAnEndpoint(inter)) {\n            const newEventsFromSplit = this._splitSafely(nextSeg, inter);\n            for (let i = 0, iMax = newEventsFromSplit.length; i < iMax; i++) {\n              newEvents.push(newEventsFromSplit[i]);\n            }\n          }\n        }\n      }\n      this.tree.delete(segment);\n    }\n    return newEvents;\n  }\n  /* Safely split a segment that is currently in the datastructures\n   * IE - a segment other than the one that is currently being processed. */\n  _splitSafely(seg, pt) {\n    this.tree.delete(seg);\n    const rightSE = seg.rightSE;\n    this.queue.delete(rightSE);\n    const newEvents = seg.split(pt);\n    newEvents.push(rightSE);\n    if (seg.consumedBy === void 0) this.tree.add(seg);\n    return newEvents;\n  }\n};\n\n// src/operation.ts\nvar Operation = class {\n  type;\n  numMultiPolys;\n  run(type, geom, moreGeoms) {\n    operation.type = type;\n    const multipolys = [new MultiPolyIn(geom, true)];\n    for (let i = 0, iMax = moreGeoms.length; i < iMax; i++) {\n      multipolys.push(new MultiPolyIn(moreGeoms[i], false));\n    }\n    operation.numMultiPolys = multipolys.length;\n    if (operation.type === \"difference\") {\n      const subject = multipolys[0];\n      let i = 1;\n      while (i < multipolys.length) {\n        if (getBboxOverlap(multipolys[i].bbox, subject.bbox) !== null) i++;\n        else multipolys.splice(i, 1);\n      }\n    }\n    if (operation.type === \"intersection\") {\n      for (let i = 0, iMax = multipolys.length; i < iMax; i++) {\n        const mpA = multipolys[i];\n        for (let j = i + 1, jMax = multipolys.length; j < jMax; j++) {\n          if (getBboxOverlap(mpA.bbox, multipolys[j].bbox) === null) return [];\n        }\n      }\n    }\n    const queue = new SplayTreeSet3(SweepEvent.compare);\n    for (let i = 0, iMax = multipolys.length; i < iMax; i++) {\n      const sweepEvents = multipolys[i].getSweepEvents();\n      for (let j = 0, jMax = sweepEvents.length; j < jMax; j++) {\n        queue.add(sweepEvents[j]);\n      }\n    }\n    const sweepLine = new SweepLine(queue);\n    let evt = null;\n    if (queue.size != 0) {\n      evt = queue.first();\n      queue.delete(evt);\n    }\n    while (evt) {\n      const newEvents = sweepLine.process(evt);\n      for (let i = 0, iMax = newEvents.length; i < iMax; i++) {\n        const evt2 = newEvents[i];\n        if (evt2.consumedBy === void 0) queue.add(evt2);\n      }\n      if (queue.size != 0) {\n        evt = queue.first();\n        queue.delete(evt);\n      } else {\n        evt = null;\n      }\n    }\n    precision.reset();\n    const ringsOut = RingOut.factory(sweepLine.segments);\n    const result = new MultiPolyOut(ringsOut);\n    return result.getGeom();\n  }\n};\nvar operation = new Operation();\nvar operation_default = operation;\n\n// src/segment.ts\nvar segmentId = 0;\nvar Segment = class _Segment {\n  id;\n  leftSE;\n  rightSE;\n  rings;\n  windings;\n  ringOut;\n  consumedBy;\n  prev;\n  _prevInResult;\n  _beforeState;\n  _afterState;\n  _isInResult;\n  /* This compare() function is for ordering segments in the sweep\n   * line tree, and does so according to the following criteria:\n   *\n   * Consider the vertical line that lies an infinestimal step to the\n   * right of the right-more of the two left endpoints of the input\n   * segments. Imagine slowly moving a point up from negative infinity\n   * in the increasing y direction. Which of the two segments will that\n   * point intersect first? That segment comes 'before' the other one.\n   *\n   * If neither segment would be intersected by such a line, (if one\n   * or more of the segments are vertical) then the line to be considered\n   * is directly on the right-more of the two left inputs.\n   */\n  static compare(a, b) {\n    const alx = a.leftSE.point.x;\n    const blx = b.leftSE.point.x;\n    const arx = a.rightSE.point.x;\n    const brx = b.rightSE.point.x;\n    if (brx.isLessThan(alx)) return 1;\n    if (arx.isLessThan(blx)) return -1;\n    const aly = a.leftSE.point.y;\n    const bly = b.leftSE.point.y;\n    const ary = a.rightSE.point.y;\n    const bry = b.rightSE.point.y;\n    if (alx.isLessThan(blx)) {\n      if (bly.isLessThan(aly) && bly.isLessThan(ary)) return 1;\n      if (bly.isGreaterThan(aly) && bly.isGreaterThan(ary)) return -1;\n      const aCmpBLeft = a.comparePoint(b.leftSE.point);\n      if (aCmpBLeft < 0) return 1;\n      if (aCmpBLeft > 0) return -1;\n      const bCmpARight = b.comparePoint(a.rightSE.point);\n      if (bCmpARight !== 0) return bCmpARight;\n      return -1;\n    }\n    if (alx.isGreaterThan(blx)) {\n      if (aly.isLessThan(bly) && aly.isLessThan(bry)) return -1;\n      if (aly.isGreaterThan(bly) && aly.isGreaterThan(bry)) return 1;\n      const bCmpALeft = b.comparePoint(a.leftSE.point);\n      if (bCmpALeft !== 0) return bCmpALeft;\n      const aCmpBRight = a.comparePoint(b.rightSE.point);\n      if (aCmpBRight < 0) return 1;\n      if (aCmpBRight > 0) return -1;\n      return 1;\n    }\n    if (aly.isLessThan(bly)) return -1;\n    if (aly.isGreaterThan(bly)) return 1;\n    if (arx.isLessThan(brx)) {\n      const bCmpARight = b.comparePoint(a.rightSE.point);\n      if (bCmpARight !== 0) return bCmpARight;\n    }\n    if (arx.isGreaterThan(brx)) {\n      const aCmpBRight = a.comparePoint(b.rightSE.point);\n      if (aCmpBRight < 0) return 1;\n      if (aCmpBRight > 0) return -1;\n    }\n    if (!arx.eq(brx)) {\n      const ay = ary.minus(aly);\n      const ax = arx.minus(alx);\n      const by = bry.minus(bly);\n      const bx = brx.minus(blx);\n      if (ay.isGreaterThan(ax) && by.isLessThan(bx)) return 1;\n      if (ay.isLessThan(ax) && by.isGreaterThan(bx)) return -1;\n    }\n    if (arx.isGreaterThan(brx)) return 1;\n    if (arx.isLessThan(brx)) return -1;\n    if (ary.isLessThan(bry)) return -1;\n    if (ary.isGreaterThan(bry)) return 1;\n    if (a.id < b.id) return -1;\n    if (a.id > b.id) return 1;\n    return 0;\n  }\n  /* Warning: a reference to ringWindings input will be stored,\n   *  and possibly will be later modified */\n  constructor(leftSE, rightSE, rings, windings) {\n    this.id = ++segmentId;\n    this.leftSE = leftSE;\n    leftSE.segment = this;\n    leftSE.otherSE = rightSE;\n    this.rightSE = rightSE;\n    rightSE.segment = this;\n    rightSE.otherSE = leftSE;\n    this.rings = rings;\n    this.windings = windings;\n  }\n  static fromRing(pt1, pt2, ring) {\n    let leftPt, rightPt, winding;\n    const cmpPts = SweepEvent.comparePoints(pt1, pt2);\n    if (cmpPts < 0) {\n      leftPt = pt1;\n      rightPt = pt2;\n      winding = 1;\n    } else if (cmpPts > 0) {\n      leftPt = pt2;\n      rightPt = pt1;\n      winding = -1;\n    } else\n      throw new Error(\n        `Tried to create degenerate segment at [${pt1.x}, ${pt1.y}]`\n      );\n    const leftSE = new SweepEvent(leftPt, true);\n    const rightSE = new SweepEvent(rightPt, false);\n    return new _Segment(leftSE, rightSE, [ring], [winding]);\n  }\n  /* When a segment is split, the rightSE is replaced with a new sweep event */\n  replaceRightSE(newRightSE) {\n    this.rightSE = newRightSE;\n    this.rightSE.segment = this;\n    this.rightSE.otherSE = this.leftSE;\n    this.leftSE.otherSE = this.rightSE;\n  }\n  bbox() {\n    const y1 = this.leftSE.point.y;\n    const y2 = this.rightSE.point.y;\n    return {\n      ll: { x: this.leftSE.point.x, y: y1.isLessThan(y2) ? y1 : y2 },\n      ur: { x: this.rightSE.point.x, y: y1.isGreaterThan(y2) ? y1 : y2 }\n    };\n  }\n  /* A vector from the left point to the right */\n  vector() {\n    return {\n      x: this.rightSE.point.x.minus(this.leftSE.point.x),\n      y: this.rightSE.point.y.minus(this.leftSE.point.y)\n    };\n  }\n  isAnEndpoint(pt) {\n    return pt.x.eq(this.leftSE.point.x) && pt.y.eq(this.leftSE.point.y) || pt.x.eq(this.rightSE.point.x) && pt.y.eq(this.rightSE.point.y);\n  }\n  /* Compare this segment with a point.\n   *\n   * A point P is considered to be colinear to a segment if there\n   * exists a distance D such that if we travel along the segment\n   * from one * endpoint towards the other a distance D, we find\n   * ourselves at point P.\n   *\n   * Return value indicates:\n   *\n   *   1: point lies above the segment (to the left of vertical)\n   *   0: point is colinear to segment\n   *  -1: point lies below the segment (to the right of vertical)\n   */\n  comparePoint(point) {\n    return precision.orient(this.leftSE.point, point, this.rightSE.point);\n  }\n  /**\n   * Given another segment, returns the first non-trivial intersection\n   * between the two segments (in terms of sweep line ordering), if it exists.\n   *\n   * A 'non-trivial' intersection is one that will cause one or both of the\n   * segments to be split(). As such, 'trivial' vs. 'non-trivial' intersection:\n   *\n   *   * endpoint of segA with endpoint of segB --> trivial\n   *   * endpoint of segA with point along segB --> non-trivial\n   *   * endpoint of segB with point along segA --> non-trivial\n   *   * point along segA with point along segB --> non-trivial\n   *\n   * If no non-trivial intersection exists, return null\n   * Else, return null.\n   */\n  getIntersection(other) {\n    const tBbox = this.bbox();\n    const oBbox = other.bbox();\n    const bboxOverlap = getBboxOverlap(tBbox, oBbox);\n    if (bboxOverlap === null) return null;\n    const tlp = this.leftSE.point;\n    const trp = this.rightSE.point;\n    const olp = other.leftSE.point;\n    const orp = other.rightSE.point;\n    const touchesOtherLSE = isInBbox(tBbox, olp) && this.comparePoint(olp) === 0;\n    const touchesThisLSE = isInBbox(oBbox, tlp) && other.comparePoint(tlp) === 0;\n    const touchesOtherRSE = isInBbox(tBbox, orp) && this.comparePoint(orp) === 0;\n    const touchesThisRSE = isInBbox(oBbox, trp) && other.comparePoint(trp) === 0;\n    if (touchesThisLSE && touchesOtherLSE) {\n      if (touchesThisRSE && !touchesOtherRSE) return trp;\n      if (!touchesThisRSE && touchesOtherRSE) return orp;\n      return null;\n    }\n    if (touchesThisLSE) {\n      if (touchesOtherRSE) {\n        if (tlp.x.eq(orp.x) && tlp.y.eq(orp.y)) return null;\n      }\n      return tlp;\n    }\n    if (touchesOtherLSE) {\n      if (touchesThisRSE) {\n        if (trp.x.eq(olp.x) && trp.y.eq(olp.y)) return null;\n      }\n      return olp;\n    }\n    if (touchesThisRSE && touchesOtherRSE) return null;\n    if (touchesThisRSE) return trp;\n    if (touchesOtherRSE) return orp;\n    const pt = intersection(tlp, this.vector(), olp, other.vector());\n    if (pt === null) return null;\n    if (!isInBbox(bboxOverlap, pt)) return null;\n    return precision.snap(pt);\n  }\n  /**\n   * Split the given segment into multiple segments on the given points.\n   *  * Each existing segment will retain its leftSE and a new rightSE will be\n   *    generated for it.\n   *  * A new segment will be generated which will adopt the original segment's\n   *    rightSE, and a new leftSE will be generated for it.\n   *  * If there are more than two points given to split on, new segments\n   *    in the middle will be generated with new leftSE and rightSE's.\n   *  * An array of the newly generated SweepEvents will be returned.\n   *\n   * Warning: input array of points is modified\n   */\n  split(point) {\n    const newEvents = [];\n    const alreadyLinked = point.events !== void 0;\n    const newLeftSE = new SweepEvent(point, true);\n    const newRightSE = new SweepEvent(point, false);\n    const oldRightSE = this.rightSE;\n    this.replaceRightSE(newRightSE);\n    newEvents.push(newRightSE);\n    newEvents.push(newLeftSE);\n    const newSeg = new _Segment(\n      newLeftSE,\n      oldRightSE,\n      this.rings.slice(),\n      this.windings.slice()\n    );\n    if (SweepEvent.comparePoints(newSeg.leftSE.point, newSeg.rightSE.point) > 0) {\n      newSeg.swapEvents();\n    }\n    if (SweepEvent.comparePoints(this.leftSE.point, this.rightSE.point) > 0) {\n      this.swapEvents();\n    }\n    if (alreadyLinked) {\n      newLeftSE.checkForConsuming();\n      newRightSE.checkForConsuming();\n    }\n    return newEvents;\n  }\n  /* Swap which event is left and right */\n  swapEvents() {\n    const tmpEvt = this.rightSE;\n    this.rightSE = this.leftSE;\n    this.leftSE = tmpEvt;\n    this.leftSE.isLeft = true;\n    this.rightSE.isLeft = false;\n    for (let i = 0, iMax = this.windings.length; i < iMax; i++) {\n      this.windings[i] *= -1;\n    }\n  }\n  /* Consume another segment. We take their rings under our wing\n   * and mark them as consumed. Use for perfectly overlapping segments */\n  consume(other) {\n    let consumer = this;\n    let consumee = other;\n    while (consumer.consumedBy) consumer = consumer.consumedBy;\n    while (consumee.consumedBy) consumee = consumee.consumedBy;\n    const cmp = _Segment.compare(consumer, consumee);\n    if (cmp === 0) return;\n    if (cmp > 0) {\n      const tmp = consumer;\n      consumer = consumee;\n      consumee = tmp;\n    }\n    if (consumer.prev === consumee) {\n      const tmp = consumer;\n      consumer = consumee;\n      consumee = tmp;\n    }\n    for (let i = 0, iMax = consumee.rings.length; i < iMax; i++) {\n      const ring = consumee.rings[i];\n      const winding = consumee.windings[i];\n      const index = consumer.rings.indexOf(ring);\n      if (index === -1) {\n        consumer.rings.push(ring);\n        consumer.windings.push(winding);\n      } else consumer.windings[index] += winding;\n    }\n    consumee.rings = null;\n    consumee.windings = null;\n    consumee.consumedBy = consumer;\n    consumee.leftSE.consumedBy = consumer.leftSE;\n    consumee.rightSE.consumedBy = consumer.rightSE;\n  }\n  /* The first segment previous segment chain that is in the result */\n  prevInResult() {\n    if (this._prevInResult !== void 0) return this._prevInResult;\n    if (!this.prev) this._prevInResult = null;\n    else if (this.prev.isInResult()) this._prevInResult = this.prev;\n    else this._prevInResult = this.prev.prevInResult();\n    return this._prevInResult;\n  }\n  beforeState() {\n    if (this._beforeState !== void 0) return this._beforeState;\n    if (!this.prev)\n      this._beforeState = {\n        rings: [],\n        windings: [],\n        multiPolys: []\n      };\n    else {\n      const seg = this.prev.consumedBy || this.prev;\n      this._beforeState = seg.afterState();\n    }\n    return this._beforeState;\n  }\n  afterState() {\n    if (this._afterState !== void 0) return this._afterState;\n    const beforeState = this.beforeState();\n    this._afterState = {\n      rings: beforeState.rings.slice(0),\n      windings: beforeState.windings.slice(0),\n      multiPolys: []\n    };\n    const ringsAfter = this._afterState.rings;\n    const windingsAfter = this._afterState.windings;\n    const mpsAfter = this._afterState.multiPolys;\n    for (let i = 0, iMax = this.rings.length; i < iMax; i++) {\n      const ring = this.rings[i];\n      const winding = this.windings[i];\n      const index = ringsAfter.indexOf(ring);\n      if (index === -1) {\n        ringsAfter.push(ring);\n        windingsAfter.push(winding);\n      } else windingsAfter[index] += winding;\n    }\n    const polysAfter = [];\n    const polysExclude = [];\n    for (let i = 0, iMax = ringsAfter.length; i < iMax; i++) {\n      if (windingsAfter[i] === 0) continue;\n      const ring = ringsAfter[i];\n      const poly = ring.poly;\n      if (polysExclude.indexOf(poly) !== -1) continue;\n      if (ring.isExterior) polysAfter.push(poly);\n      else {\n        if (polysExclude.indexOf(poly) === -1) polysExclude.push(poly);\n        const index = polysAfter.indexOf(ring.poly);\n        if (index !== -1) polysAfter.splice(index, 1);\n      }\n    }\n    for (let i = 0, iMax = polysAfter.length; i < iMax; i++) {\n      const mp = polysAfter[i].multiPoly;\n      if (mpsAfter.indexOf(mp) === -1) mpsAfter.push(mp);\n    }\n    return this._afterState;\n  }\n  /* Is this segment part of the final result? */\n  isInResult() {\n    if (this.consumedBy) return false;\n    if (this._isInResult !== void 0) return this._isInResult;\n    const mpsBefore = this.beforeState().multiPolys;\n    const mpsAfter = this.afterState().multiPolys;\n    switch (operation_default.type) {\n      case \"union\": {\n        const noBefores = mpsBefore.length === 0;\n        const noAfters = mpsAfter.length === 0;\n        this._isInResult = noBefores !== noAfters;\n        break;\n      }\n      case \"intersection\": {\n        let least;\n        let most;\n        if (mpsBefore.length < mpsAfter.length) {\n          least = mpsBefore.length;\n          most = mpsAfter.length;\n        } else {\n          least = mpsAfter.length;\n          most = mpsBefore.length;\n        }\n        this._isInResult = most === operation_default.numMultiPolys && least < most;\n        break;\n      }\n      case \"xor\": {\n        const diff = Math.abs(mpsBefore.length - mpsAfter.length);\n        this._isInResult = diff % 2 === 1;\n        break;\n      }\n      case \"difference\": {\n        const isJustSubject = (mps) => mps.length === 1 && mps[0].isSubject;\n        this._isInResult = isJustSubject(mpsBefore) !== isJustSubject(mpsAfter);\n        break;\n      }\n    }\n    return this._isInResult;\n  }\n};\n\n// src/geom-in.ts\nvar RingIn = class {\n  poly;\n  isExterior;\n  segments;\n  bbox;\n  constructor(geomRing, poly, isExterior) {\n    if (!Array.isArray(geomRing) || geomRing.length === 0) {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    this.poly = poly;\n    this.isExterior = isExterior;\n    this.segments = [];\n    if (typeof geomRing[0][0] !== \"number\" || typeof geomRing[0][1] !== \"number\") {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    const firstPoint = precision.snap({ x: new BigNumber2(geomRing[0][0]), y: new BigNumber2(geomRing[0][1]) });\n    this.bbox = {\n      ll: { x: firstPoint.x, y: firstPoint.y },\n      ur: { x: firstPoint.x, y: firstPoint.y }\n    };\n    let prevPoint = firstPoint;\n    for (let i = 1, iMax = geomRing.length; i < iMax; i++) {\n      if (typeof geomRing[i][0] !== \"number\" || typeof geomRing[i][1] !== \"number\") {\n        throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n      }\n      const point = precision.snap({ x: new BigNumber2(geomRing[i][0]), y: new BigNumber2(geomRing[i][1]) });\n      if (point.x.eq(prevPoint.x) && point.y.eq(prevPoint.y)) continue;\n      this.segments.push(Segment.fromRing(prevPoint, point, this));\n      if (point.x.isLessThan(this.bbox.ll.x)) this.bbox.ll.x = point.x;\n      if (point.y.isLessThan(this.bbox.ll.y)) this.bbox.ll.y = point.y;\n      if (point.x.isGreaterThan(this.bbox.ur.x)) this.bbox.ur.x = point.x;\n      if (point.y.isGreaterThan(this.bbox.ur.y)) this.bbox.ur.y = point.y;\n      prevPoint = point;\n    }\n    if (!firstPoint.x.eq(prevPoint.x) || !firstPoint.y.eq(prevPoint.y)) {\n      this.segments.push(Segment.fromRing(prevPoint, firstPoint, this));\n    }\n  }\n  getSweepEvents() {\n    const sweepEvents = [];\n    for (let i = 0, iMax = this.segments.length; i < iMax; i++) {\n      const segment = this.segments[i];\n      sweepEvents.push(segment.leftSE);\n      sweepEvents.push(segment.rightSE);\n    }\n    return sweepEvents;\n  }\n};\nvar PolyIn = class {\n  multiPoly;\n  exteriorRing;\n  interiorRings;\n  bbox;\n  constructor(geomPoly, multiPoly) {\n    if (!Array.isArray(geomPoly)) {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    this.exteriorRing = new RingIn(geomPoly[0], this, true);\n    this.bbox = {\n      ll: { x: this.exteriorRing.bbox.ll.x, y: this.exteriorRing.bbox.ll.y },\n      ur: { x: this.exteriorRing.bbox.ur.x, y: this.exteriorRing.bbox.ur.y }\n    };\n    this.interiorRings = [];\n    for (let i = 1, iMax = geomPoly.length; i < iMax; i++) {\n      const ring = new RingIn(geomPoly[i], this, false);\n      if (ring.bbox.ll.x.isLessThan(this.bbox.ll.x)) this.bbox.ll.x = ring.bbox.ll.x;\n      if (ring.bbox.ll.y.isLessThan(this.bbox.ll.y)) this.bbox.ll.y = ring.bbox.ll.y;\n      if (ring.bbox.ur.x.isGreaterThan(this.bbox.ur.x)) this.bbox.ur.x = ring.bbox.ur.x;\n      if (ring.bbox.ur.y.isGreaterThan(this.bbox.ur.y)) this.bbox.ur.y = ring.bbox.ur.y;\n      this.interiorRings.push(ring);\n    }\n    this.multiPoly = multiPoly;\n  }\n  getSweepEvents() {\n    const sweepEvents = this.exteriorRing.getSweepEvents();\n    for (let i = 0, iMax = this.interiorRings.length; i < iMax; i++) {\n      const ringSweepEvents = this.interiorRings[i].getSweepEvents();\n      for (let j = 0, jMax = ringSweepEvents.length; j < jMax; j++) {\n        sweepEvents.push(ringSweepEvents[j]);\n      }\n    }\n    return sweepEvents;\n  }\n};\nvar MultiPolyIn = class {\n  isSubject;\n  polys;\n  bbox;\n  constructor(geom, isSubject) {\n    if (!Array.isArray(geom)) {\n      throw new Error(\"Input geometry is not a valid Polygon or MultiPolygon\");\n    }\n    try {\n      if (typeof geom[0][0][0] === \"number\") geom = [geom];\n    } catch (ex) {\n    }\n    this.polys = [];\n    this.bbox = {\n      ll: { x: new BigNumber2(Number.POSITIVE_INFINITY), y: new BigNumber2(Number.POSITIVE_INFINITY) },\n      ur: { x: new BigNumber2(Number.NEGATIVE_INFINITY), y: new BigNumber2(Number.NEGATIVE_INFINITY) }\n    };\n    for (let i = 0, iMax = geom.length; i < iMax; i++) {\n      const poly = new PolyIn(geom[i], this);\n      if (poly.bbox.ll.x.isLessThan(this.bbox.ll.x)) this.bbox.ll.x = poly.bbox.ll.x;\n      if (poly.bbox.ll.y.isLessThan(this.bbox.ll.y)) this.bbox.ll.y = poly.bbox.ll.y;\n      if (poly.bbox.ur.x.isGreaterThan(this.bbox.ur.x)) this.bbox.ur.x = poly.bbox.ur.x;\n      if (poly.bbox.ur.y.isGreaterThan(this.bbox.ur.y)) this.bbox.ur.y = poly.bbox.ur.y;\n      this.polys.push(poly);\n    }\n    this.isSubject = isSubject;\n  }\n  getSweepEvents() {\n    const sweepEvents = [];\n    for (let i = 0, iMax = this.polys.length; i < iMax; i++) {\n      const polySweepEvents = this.polys[i].getSweepEvents();\n      for (let j = 0, jMax = polySweepEvents.length; j < jMax; j++) {\n        sweepEvents.push(polySweepEvents[j]);\n      }\n    }\n    return sweepEvents;\n  }\n};\n\n// src/index.ts\nvar union = (geom, ...moreGeoms) => operation_default.run(\"union\", geom, moreGeoms);\nvar intersection2 = (geom, ...moreGeoms) => operation_default.run(\"intersection\", geom, moreGeoms);\nvar xor = (geom, ...moreGeoms) => operation_default.run(\"xor\", geom, moreGeoms);\nvar difference = (geom, ...moreGeoms) => operation_default.run(\"difference\", geom, moreGeoms);\nvar setPrecision = precision.set;\nexport {\n  difference,\n  intersection2 as intersection,\n  setPrecision,\n  union,\n  xor\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport * as polyclip from \"polyclip-ts\";\nimport { polygon, multiPolygon } from \"@turf/helpers\";\nimport { geomEach } from \"@turf/meta\";\nfunction difference2(features) {\n  const geoms = [];\n  geomEach(features, (geom) => {\n    geoms.push(geom.coordinates);\n  });\n  if (geoms.length < 2) {\n    throw new Error(\"Must have at least two features\");\n  }\n  const properties = features.features[0].properties || {};\n  const differenced = polyclip.difference(geoms[0], ...geoms.slice(1));\n  if (differenced.length === 0) return null;\n  if (differenced.length === 1) return polygon(differenced[0], properties);\n  return multiPolygon(differenced, properties);\n}\nvar index_default = difference2;\nexport {\n  index_default as default,\n  difference2 as difference\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport rbush from \"rbush\";\nimport { featureCollection } from \"@turf/helpers\";\nimport { featureEach } from \"@turf/meta\";\nimport { bbox as turfBBox } from \"@turf/bbox\";\nfunction toBBox(geojson) {\n  var bbox;\n  if (geojson.bbox) bbox = geojson.bbox;\n  else if (Array.isArray(geojson) && geojson.length === 4) bbox = geojson;\n  else if (Array.isArray(geojson) && geojson.length === 6)\n    bbox = [geojson[0], geojson[1], geojson[3], geojson[4]];\n  else if (geojson.type === \"Feature\") bbox = turfBBox(geojson);\n  else if (geojson.type === \"FeatureCollection\") bbox = turfBBox(geojson);\n  else throw new Error(\"invalid geojson\");\n  return {\n    minX: bbox[0],\n    minY: bbox[1],\n    maxX: bbox[2],\n    maxY: bbox[3]\n  };\n}\nvar RBush = class {\n  constructor(maxEntries = 9) {\n    this.tree = new rbush(maxEntries);\n    this.tree.toBBox = toBBox;\n  }\n  /**\n   * [insert](https://github.com/mourner/rbush#data-format)\n   *\n   * @memberof rbush\n   * @param {Feature} feature insert single GeoJSON Feature\n   * @returns {RBush} GeoJSON RBush\n   * @example\n   * var poly = turf.polygon([[[-78, 41], [-67, 41], [-67, 48], [-78, 48], [-78, 41]]]);\n   * tree.insert(poly)\n   */\n  insert(feature) {\n    if (feature.type !== \"Feature\") throw new Error(\"invalid feature\");\n    feature.bbox = feature.bbox ? feature.bbox : turfBBox(feature);\n    this.tree.insert(feature);\n    return this;\n  }\n  /**\n   * [load](https://github.com/mourner/rbush#bulk-inserting-data)\n   *\n   * @memberof rbush\n   * @param {FeatureCollection|Array<Feature>} features load entire GeoJSON FeatureCollection\n   * @returns {RBush} GeoJSON RBush\n   * @example\n   * var polys = turf.polygons([\n   *     [[[-78, 41], [-67, 41], [-67, 48], [-78, 48], [-78, 41]]],\n   *     [[[-93, 32], [-83, 32], [-83, 39], [-93, 39], [-93, 32]]]\n   * ]);\n   * tree.load(polys);\n   */\n  load(features) {\n    var load = [];\n    if (Array.isArray(features)) {\n      features.forEach(function(feature) {\n        if (feature.type !== \"Feature\") throw new Error(\"invalid features\");\n        feature.bbox = feature.bbox ? feature.bbox : turfBBox(feature);\n        load.push(feature);\n      });\n    } else {\n      featureEach(features, function(feature) {\n        if (feature.type !== \"Feature\") throw new Error(\"invalid features\");\n        feature.bbox = feature.bbox ? feature.bbox : turfBBox(feature);\n        load.push(feature);\n      });\n    }\n    this.tree.load(load);\n    return this;\n  }\n  /**\n   * [remove](https://github.com/mourner/rbush#removing-data)\n   *\n   * @memberof rbush\n   * @param {Feature} feature remove single GeoJSON Feature\n   * @param {Function} equals Pass a custom equals function to compare by value for removal.\n   * @returns {RBush} GeoJSON RBush\n   * @example\n   * var poly = turf.polygon([[[-78, 41], [-67, 41], [-67, 48], [-78, 48], [-78, 41]]]);\n   *\n   * tree.remove(poly);\n   */\n  remove(feature, equals) {\n    if (feature.type !== \"Feature\") throw new Error(\"invalid feature\");\n    feature.bbox = feature.bbox ? feature.bbox : turfBBox(feature);\n    this.tree.remove(feature, equals);\n    return this;\n  }\n  /**\n   * [clear](https://github.com/mourner/rbush#removing-data)\n   *\n   * @memberof rbush\n   * @returns {RBush} GeoJSON Rbush\n   * @example\n   * tree.clear()\n   */\n  clear() {\n    this.tree.clear();\n    return this;\n  }\n  /**\n   * [search](https://github.com/mourner/rbush#search)\n   *\n   * @memberof rbush\n   * @param {BBox|FeatureCollection|Feature} geojson search with GeoJSON\n   * @returns {FeatureCollection} all features that intersects with the given GeoJSON.\n   * @example\n   * var poly = turf.polygon([[[-78, 41], [-67, 41], [-67, 48], [-78, 48], [-78, 41]]]);\n   *\n   * tree.search(poly);\n   */\n  search(geojson) {\n    var features = this.tree.search(toBBox(geojson));\n    return featureCollection(features);\n  }\n  /**\n   * [collides](https://github.com/mourner/rbush#collisions)\n   *\n   * @memberof rbush\n   * @param {BBox|FeatureCollection|Feature} geojson collides with GeoJSON\n   * @returns {boolean} true if there are any items intersecting the given GeoJSON, otherwise false.\n   * @example\n   * var poly = turf.polygon([[[-78, 41], [-67, 41], [-67, 48], [-78, 48], [-78, 41]]]);\n   *\n   * tree.collides(poly);\n   */\n  collides(geojson) {\n    return this.tree.collides(toBBox(geojson));\n  }\n  /**\n   * [all](https://github.com/mourner/rbush#search)\n   *\n   * @memberof rbush\n   * @returns {FeatureCollection} all the features in RBush\n   * @example\n   * tree.all()\n   */\n  all() {\n    const features = this.tree.all();\n    return featureCollection(features);\n  }\n  /**\n   * [toJSON](https://github.com/mourner/rbush#export-and-import)\n   *\n   * @memberof rbush\n   * @returns {any} export data as JSON object\n   * @example\n   * var exported = tree.toJSON()\n   */\n  toJSON() {\n    return this.tree.toJSON();\n  }\n  /**\n   * [fromJSON](https://github.com/mourner/rbush#export-and-import)\n   *\n   * @memberof rbush\n   * @param {any} json import previously exported data\n   * @returns {RBush} GeoJSON RBush\n   * @example\n   * var exported = {\n   *   \"children\": [\n   *     {\n   *       \"type\": \"Feature\",\n   *       \"geometry\": {\n   *         \"type\": \"Point\",\n   *         \"coordinates\": [110, 50]\n   *       },\n   *       \"properties\": {},\n   *       \"bbox\": [110, 50, 110, 50]\n   *     }\n   *   ],\n   *   \"height\": 1,\n   *   \"leaf\": true,\n   *   \"minX\": 110,\n   *   \"minY\": 50,\n   *   \"maxX\": 110,\n   *   \"maxY\": 50\n   * }\n   * tree.fromJSON(exported)\n   */\n  fromJSON(json) {\n    this.tree.fromJSON(json);\n    return this;\n  }\n};\nfunction geojsonRbush(maxEntries) {\n  return new RBush(maxEntries);\n}\nvar index_default = geojsonRbush;\nexport {\n  index_default as default,\n  geojsonRbush\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { coordEach } from \"@turf/meta\";\nimport { isObject } from \"@turf/helpers\";\nfunction truncate(geojson, options) {\n  options = options != null ? options : {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  var precision = options.precision;\n  var coordinates = options.coordinates;\n  var mutate = options.mutate;\n  precision = precision === void 0 || precision === null || isNaN(precision) ? 6 : precision;\n  coordinates = coordinates === void 0 || coordinates === null || isNaN(coordinates) ? 3 : coordinates;\n  if (!geojson) throw new Error(\"<geojson> is required\");\n  if (typeof precision !== \"number\")\n    throw new Error(\"<precision> must be a number\");\n  if (typeof coordinates !== \"number\")\n    throw new Error(\"<coordinates> must be a number\");\n  if (mutate === false || mutate === void 0)\n    geojson = JSON.parse(JSON.stringify(geojson));\n  var factor = Math.pow(10, precision);\n  coordEach(geojson, function(coords) {\n    truncateCoords(coords, factor, coordinates);\n  });\n  return geojson;\n}\nfunction truncateCoords(coords, factor, coordinates) {\n  if (coords.length > coordinates) coords.splice(coordinates, coords.length);\n  for (var i = 0; i < coords.length; i++) {\n    coords[i] = Math.round(coords[i] * factor) / factor;\n  }\n  return coords;\n}\nvar index_default = truncate;\nexport {\n  index_default as default,\n  truncate\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { featureCollection, lineString } from \"@turf/helpers\";\nimport { getCoords } from \"@turf/invariant\";\nimport { flattenEach } from \"@turf/meta\";\nfunction lineSegment(geojson) {\n  if (!geojson) {\n    throw new Error(\"geojson is required\");\n  }\n  const results = [];\n  flattenEach(geojson, (feature) => {\n    lineSegmentFeature(feature, results);\n  });\n  return featureCollection(results);\n}\nfunction lineSegmentFeature(geojson, results) {\n  let coords = [];\n  const geometry = geojson.geometry;\n  if (geometry !== null) {\n    switch (geometry.type) {\n      case \"Polygon\":\n        coords = getCoords(geometry);\n        break;\n      case \"LineString\":\n        coords = [getCoords(geometry)];\n    }\n    coords.forEach((coord) => {\n      const segments = createSegments(coord, geojson.properties);\n      segments.forEach((segment) => {\n        segment.id = results.length;\n        results.push(segment);\n      });\n    });\n  }\n}\nfunction createSegments(coords, properties) {\n  const segments = [];\n  coords.reduce((previousCoords, currentCoords) => {\n    const segment = lineString([previousCoords, currentCoords], properties);\n    segment.bbox = bbox(previousCoords, currentCoords);\n    segments.push(segment);\n    return currentCoords;\n  });\n  return segments;\n}\nfunction bbox(coords1, coords2) {\n  const x1 = coords1[0];\n  const y1 = coords1[1];\n  const x2 = coords2[0];\n  const y2 = coords2[1];\n  const west = x1 < x2 ? x1 : x2;\n  const south = y1 < y2 ? y1 : y2;\n  const east = x1 > x2 ? x1 : x2;\n  const north = y1 > y2 ? y1 : y2;\n  return [west, south, east, north];\n}\nvar index_default = lineSegment;\nexport {\n  index_default as default,\n  lineSegment\n};\n//# sourceMappingURL=index.js.map","var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\n\n// index.ts\nimport { distance } from \"@turf/distance\";\nimport { flattenEach } from \"@turf/meta\";\nimport {\n  point,\n  degreesToRadians,\n  radiansToDegrees\n} from \"@turf/helpers\";\nimport { getCoord, getCoords } from \"@turf/invariant\";\nfunction nearestPointOnLine(lines, inputPoint, options = {}) {\n  if (!lines || !inputPoint) {\n    throw new Error(\"lines and inputPoint are required arguments\");\n  }\n  const inputPos = getCoord(inputPoint);\n  let closestPt = point([Infinity, Infinity], {\n    lineStringIndex: -1,\n    segmentIndex: -1,\n    totalDistance: -1,\n    lineDistance: -1,\n    segmentDistance: -1,\n    pointDistance: Infinity,\n    // deprecated properties START\n    multiFeatureIndex: -1,\n    index: -1,\n    location: -1,\n    dist: Infinity\n    // deprecated properties END\n  });\n  let totalDistance = 0;\n  let lineDistance = 0;\n  let currentLineStringIndex = -1;\n  flattenEach(\n    lines,\n    function(line, _featureIndex, lineStringIndex) {\n      if (currentLineStringIndex !== lineStringIndex) {\n        currentLineStringIndex = lineStringIndex;\n        lineDistance = 0;\n      }\n      const coords = getCoords(line);\n      const maxSegmentIndex = coords.length - 2;\n      for (let i = 0; i < coords.length - 1; i++) {\n        const start = point(coords[i]);\n        const startPos = getCoord(start);\n        const stop = point(coords[i + 1]);\n        const stopPos = getCoord(stop);\n        const segmentLength = distance(start, stop, options);\n        let intersectPos;\n        let wasEnd;\n        if (stopPos[0] === inputPos[0] && stopPos[1] === inputPos[1]) {\n          [intersectPos, wasEnd] = [stopPos, true];\n        } else if (startPos[0] === inputPos[0] && startPos[1] === inputPos[1]) {\n          [intersectPos, wasEnd] = [startPos, false];\n        } else {\n          [intersectPos, wasEnd] = nearestPointOnSegment(\n            startPos,\n            stopPos,\n            inputPos\n          );\n        }\n        const pointDistance = distance(inputPoint, intersectPos, options);\n        if (pointDistance < closestPt.properties.pointDistance) {\n          const segmentDistance = distance(start, intersectPos, options);\n          closestPt = point(intersectPos, {\n            lineStringIndex,\n            // Legacy behaviour where index progresses to next segment if we\n            // went with the end point this iteration. Though make sure we\n            // only progress to the beginning of the next segment if one\n            // actually exists.\n            segmentIndex: wasEnd && i + 1 <= maxSegmentIndex ? i + 1 : i,\n            totalDistance: totalDistance + segmentDistance,\n            lineDistance: lineDistance + segmentDistance,\n            segmentDistance,\n            pointDistance,\n            // deprecated properties START\n            multiFeatureIndex: -1,\n            index: -1,\n            location: -1,\n            dist: Infinity\n            // deprecated properties END\n          });\n          closestPt.properties = __spreadProps(__spreadValues({}, closestPt.properties), {\n            multiFeatureIndex: closestPt.properties.lineStringIndex,\n            index: closestPt.properties.segmentIndex,\n            location: closestPt.properties.totalDistance,\n            dist: closestPt.properties.pointDistance\n            // deprecated properties END\n          });\n        }\n        totalDistance += segmentLength;\n        lineDistance += segmentLength;\n      }\n    }\n  );\n  return closestPt;\n}\nfunction dot(v1, v2) {\n  const [v1x, v1y, v1z] = v1;\n  const [v2x, v2y, v2z] = v2;\n  return v1x * v2x + v1y * v2y + v1z * v2z;\n}\nfunction cross(v1, v2) {\n  const [v1x, v1y, v1z] = v1;\n  const [v2x, v2y, v2z] = v2;\n  return [v1y * v2z - v1z * v2y, v1z * v2x - v1x * v2z, v1x * v2y - v1y * v2x];\n}\nfunction magnitude(v) {\n  return Math.sqrt(Math.pow(v[0], 2) + Math.pow(v[1], 2) + Math.pow(v[2], 2));\n}\nfunction normalize(v) {\n  const mag = magnitude(v);\n  return [v[0] / mag, v[1] / mag, v[2] / mag];\n}\nfunction lngLatToVector(a) {\n  const lat = degreesToRadians(a[1]);\n  const lng = degreesToRadians(a[0]);\n  return [\n    Math.cos(lat) * Math.cos(lng),\n    Math.cos(lat) * Math.sin(lng),\n    Math.sin(lat)\n  ];\n}\nfunction vectorToLngLat(v) {\n  const [x, y, z] = v;\n  const zClamp = Math.min(Math.max(z, -1), 1);\n  const lat = radiansToDegrees(Math.asin(zClamp));\n  const lng = radiansToDegrees(Math.atan2(y, x));\n  return [lng, lat];\n}\nfunction nearestPointOnSegment(posA, posB, posC) {\n  const A = lngLatToVector(posA);\n  const B = lngLatToVector(posB);\n  const C = lngLatToVector(posC);\n  const segmentAxis = cross(A, B);\n  if (segmentAxis[0] === 0 && segmentAxis[1] === 0 && segmentAxis[2] === 0) {\n    if (dot(A, B) > 0) {\n      return [[...posB], true];\n    } else {\n      return [[...posC], false];\n    }\n  }\n  const targetAxis = cross(segmentAxis, C);\n  if (targetAxis[0] === 0 && targetAxis[1] === 0 && targetAxis[2] === 0) {\n    return [[...posB], true];\n  }\n  const intersectionAxis = cross(targetAxis, segmentAxis);\n  const I1 = normalize(intersectionAxis);\n  const I2 = [-I1[0], -I1[1], -I1[2]];\n  const I = dot(C, I1) > dot(C, I2) ? I1 : I2;\n  const segmentAxisNorm = normalize(segmentAxis);\n  const cmpAI = dot(cross(A, I), segmentAxisNorm);\n  const cmpIB = dot(cross(I, B), segmentAxisNorm);\n  if (cmpAI >= 0 && cmpIB >= 0) {\n    return [vectorToLngLat(I), false];\n  }\n  if (dot(A, C) > dot(B, C)) {\n    return [[...posA], false];\n  } else {\n    return [[...posB], true];\n  }\n}\nvar index_default = nearestPointOnLine;\nexport {\n  index_default as default,\n  nearestPointOnLine\n};\n//# sourceMappingURL=index.js.map","// index.ts\nimport { geojsonRbush as rbush } from \"@turf/geojson-rbush\";\nimport { truncate } from \"@turf/truncate\";\nimport { lineSegment } from \"@turf/line-segment\";\nimport { lineIntersect } from \"@turf/line-intersect\";\nimport { nearestPointOnLine } from \"@turf/nearest-point-on-line\";\nimport { getCoords, getCoord, getType } from \"@turf/invariant\";\nimport { featureEach, featureReduce, flattenEach } from \"@turf/meta\";\nimport { lineString, featureCollection, feature } from \"@turf/helpers\";\nfunction lineSplit(line, splitter) {\n  if (!line) throw new Error(\"line is required\");\n  if (!splitter) throw new Error(\"splitter is required\");\n  const lineType = getType(line);\n  const splitterType = getType(splitter);\n  if (lineType !== \"LineString\") throw new Error(\"line must be LineString\");\n  if (splitterType === \"FeatureCollection\")\n    throw new Error(\"splitter cannot be a FeatureCollection\");\n  if (splitterType === \"GeometryCollection\")\n    throw new Error(\"splitter cannot be a GeometryCollection\");\n  var truncatedSplitter = truncate(splitter, { precision: 7 });\n  if (line.type !== \"Feature\") {\n    line = feature(line);\n  }\n  switch (splitterType) {\n    case \"Point\":\n      return splitLineWithPoint(\n        line,\n        truncatedSplitter\n      );\n    case \"MultiPoint\":\n      return splitLineWithPoints(\n        line,\n        truncatedSplitter\n      );\n    case \"LineString\":\n    case \"MultiLineString\":\n    case \"Polygon\":\n    case \"MultiPolygon\":\n      return splitLineWithPoints(\n        line,\n        lineIntersect(\n          line,\n          truncatedSplitter,\n          {\n            ignoreSelfIntersections: true\n          }\n        )\n      );\n  }\n}\nfunction splitLineWithPoints(line, splitter) {\n  var results = [];\n  var tree = rbush();\n  flattenEach(\n    splitter,\n    // this cast should be unnecessary (and is wrong, it could contain MultiPoints), but is a workaround for bad flattenEach typings\n    function(point) {\n      results.forEach(function(feature2, index) {\n        feature2.id = index;\n      });\n      if (!results.length) {\n        results = splitLineWithPoint(line, point).features;\n        tree.load(featureCollection(results));\n      } else {\n        var search = tree.search(point);\n        if (search.features.length) {\n          var closestLine = findClosestFeature(point, search);\n          results = results.filter(function(feature2) {\n            return feature2.id !== closestLine.id;\n          });\n          tree.remove(closestLine);\n          featureEach(splitLineWithPoint(closestLine, point), function(line2) {\n            results.push(line2);\n            tree.insert(line2);\n          });\n        }\n      }\n    }\n  );\n  return featureCollection(results);\n}\nfunction splitLineWithPoint(line, splitter) {\n  var results = [];\n  var startPoint = getCoords(line)[0];\n  var endPoint = getCoords(line)[line.geometry.coordinates.length - 1];\n  if (pointsEquals(startPoint, getCoord(splitter)) || pointsEquals(endPoint, getCoord(splitter)))\n    return featureCollection([line]);\n  var tree = rbush();\n  var segments = lineSegment(line);\n  tree.load(segments);\n  var search = tree.search(splitter);\n  if (!search.features.length) return featureCollection([line]);\n  var closestSegment = findClosestFeature(splitter, search);\n  var initialValue = [startPoint];\n  var lastCoords = featureReduce(\n    segments,\n    function(previous, current, index) {\n      var currentCoords = getCoords(current)[1];\n      var splitterCoords = getCoord(splitter);\n      if (index === closestSegment.id) {\n        previous.push(splitterCoords);\n        results.push(lineString(previous));\n        if (pointsEquals(splitterCoords, currentCoords))\n          return [splitterCoords];\n        return [splitterCoords, currentCoords];\n      } else {\n        previous.push(currentCoords);\n        return previous;\n      }\n    },\n    initialValue\n  );\n  if (lastCoords.length > 1) {\n    results.push(lineString(lastCoords));\n  }\n  return featureCollection(results);\n}\nfunction findClosestFeature(point, lines) {\n  if (!lines.features.length) throw new Error(\"lines must contain features\");\n  if (lines.features.length === 1) return lines.features[0];\n  var closestFeature;\n  var closestDistance = Infinity;\n  featureEach(lines, function(segment) {\n    var pt = nearestPointOnLine(segment, point);\n    var dist = pt.properties.dist;\n    if (dist < closestDistance) {\n      closestFeature = segment;\n      closestDistance = dist;\n    }\n  });\n  return closestFeature;\n}\nfunction pointsEquals(pt1, pt2) {\n  return pt1[0] === pt2[0] && pt1[1] === pt2[1];\n}\nvar index_default = lineSplit;\nexport {\n  index_default as default,\n  lineSplit\n};\n//# sourceMappingURL=index.js.map","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { FeatureData } from '@/core/features/feature-data.ts';\nimport {\n  type EditModeName,\n  type FeatureId,\n  type FeatureShape,\n  type LineEventHandlerArguments,\n  SOURCES,\n} from '@/main.ts';\nimport { BaseEdit } from '@/modes/edit/base.ts';\nimport { LineDrawer } from '@/utils/draw/line-drawer.ts';\nimport { getBufferedOuterPolygon, isGeoJsonFeatureInPolygon } from '@/utils/features.ts';\nimport { getGeoJsonBounds } from '@/utils/geojson.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\nimport booleanIntersects from '@turf/boolean-intersects';\nimport turfDifference from '@turf/difference';\nimport { featureCollection, lineString } from '@turf/helpers';\nimport lineSplit from '@turf/line-split';\nimport lineToPolygon from '@turf/line-to-polygon';\nimport type {\n  Feature,\n  LineString,\n  MultiLineString,\n  MultiPolygon,\n  Polygon,\n  Position,\n} from 'geojson';\nimport log from 'loglevel';\n\ntype PolygonFeature = Feature<Polygon | MultiPolygon>;\n\nexport class EditCut extends BaseEdit {\n  mode: EditModeName = 'cut';\n  lineDrawer = new LineDrawer(this.gm, { snappingMarkers: 'first', targetShape: 'polygon' });\n  cutShapesAllowed: Array<FeatureShape> = ['circle', 'ellipse', 'line', 'rectangle', 'polygon'];\n  eventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:draw`]: this.forwardLineDrawerEvent.bind(this),\n    mousemove: this.onMouseMove.bind(this),\n  };\n\n  onStartAction() {\n    this.lineDrawer.startAction();\n    this.lineDrawer.on('firstMarkerClick', this.cutPolygonFinished.bind(this));\n  }\n\n  onEndAction() {\n    this.lineDrawer.endAction();\n  }\n\n  onMouseMove(event: BaseMapEvent) {\n    if (!isMapPointerEvent(event)) {\n      return { next: true };\n    }\n\n    if (!this.lineDrawer.featureData) {\n      this.fireMarkerPointerUpdateEvent();\n    }\n    return { next: true };\n  }\n\n  cutPolygonFinished(event: LineEventHandlerArguments) {\n    this.lineDrawer.endShape();\n    const geoJsonPolygon = lineToPolygon(event.geoJson);\n    const bBoxfeatures = this.getBBoxFeaturesByPolygon(geoJsonPolygon);\n    this.cutFeaturesByPolygon(bBoxfeatures, geoJsonPolygon);\n  }\n\n  getBBoxFeaturesByPolygon(geoJson: PolygonFeature): Array<FeatureData> {\n    const coordBounds = getGeoJsonBounds(geoJson);\n    const polygonScreenBounds = this.gm.mapAdapter.coordBoundsToScreenBounds(coordBounds);\n    return this.gm.mapAdapter.queryFeaturesByScreenCoordinates({\n      queryCoordinates: polygonScreenBounds,\n      sourceNames: [SOURCES.main],\n    });\n  }\n\n  cutFeaturesByPolygon(bBoxfeatures: Array<FeatureData>, cutGeoJson: PolygonFeature) {\n    bBoxfeatures.forEach((featureData) => {\n      if (featureData.getShapeProperty('disableEdit') === true) {\n        return;\n      }\n      if (isGeoJsonFeatureInPolygon(featureData.getGeoJson(), cutGeoJson)) {\n        this.gm.features.delete(featureData);\n        this.fireFeatureRemovedEvent(featureData);\n        return;\n      }\n\n      if (!booleanIntersects(featureData.getGeoJson(), cutGeoJson)) {\n        return;\n      }\n\n      if (!this.cutShapesAllowed.includes(featureData.shape)) {\n        return;\n      }\n\n      if (featureData.shape === 'line') {\n        this.cutLineFeatureByPolygon(featureData, cutGeoJson);\n        return;\n      }\n\n      this.cutPolygonFeatureByPolygon(featureData.id, cutGeoJson);\n    });\n  }\n\n  cutLineFeatureByPolygon(featureData: FeatureData, cutGeoJson: PolygonFeature) {\n    const shapeGeoJson = featureData.getGeoJson() as Feature<LineString | MultiLineString>;\n    const bufferedCutGeoJson = getBufferedOuterPolygon(this.gm.mapAdapter, cutGeoJson);\n\n    let isCut = false;\n    let coordinates: Position[][] = [];\n\n    if (!bufferedCutGeoJson) {\n      return;\n    }\n\n    if (shapeGeoJson.geometry.type === 'MultiLineString') {\n      shapeGeoJson.geometry.coordinates.forEach((lineCoordinates) => {\n        if (isGeoJsonFeatureInPolygon(lineString(lineCoordinates), cutGeoJson)) {\n          return;\n        }\n\n        const resultGeoJson = lineSplit(lineString(lineCoordinates), cutGeoJson);\n\n        if (resultGeoJson.features.length === 0) {\n          coordinates.push(lineCoordinates);\n          return;\n        }\n\n        resultGeoJson.features\n          .filter((feature) => !isGeoJsonFeatureInPolygon(feature, bufferedCutGeoJson))\n          .forEach((feature) => {\n            isCut = true;\n            coordinates.push(feature.geometry.coordinates);\n          });\n      });\n    } else if (shapeGeoJson.geometry.type === 'LineString') {\n      const resultGeoJson = lineSplit(shapeGeoJson as Feature<LineString>, cutGeoJson);\n      coordinates = resultGeoJson.features\n        .filter(\n          (feature) =>\n            !isGeoJsonFeatureInPolygon(feature, bufferedCutGeoJson) &&\n            feature.geometry.type === 'LineString',\n        )\n        .map((feature) => feature.geometry.coordinates);\n\n      if (resultGeoJson.features.length > 0) {\n        isCut = true;\n      }\n    }\n\n    if (isCut && coordinates.length) {\n      if (coordinates.length === 1) {\n        featureData.updateGeoJsonGeometry({ type: 'LineString', coordinates: coordinates[0] });\n      } else {\n        featureData.updateGeoJsonGeometry({ type: 'MultiLineString', coordinates: coordinates });\n      }\n      this.fireFeatureUpdatedEvent({\n        sourceFeatures: [featureData],\n        targetFeatures: [featureData],\n      });\n    }\n  }\n\n  cutPolygonFeatureByPolygon(featureId: FeatureId, cutGeoJson: PolygonFeature) {\n    const featureData = this.gm.features.get(SOURCES.main, featureId);\n\n    if (!featureData) {\n      log.warn('cutPolygonFeatureByPolygon: featureData not found', featureId);\n      return;\n    }\n\n    featureData.convertToPolygon(); // if possible\n    const shapeGeoJson = featureData.getGeoJson() as PolygonFeature;\n    const geoJsonDifference = this.getGeoJsonDifference(shapeGeoJson, cutGeoJson);\n    if (geoJsonDifference) {\n      featureData.updateGeoJsonGeometry(geoJsonDifference.geometry);\n      this.fireFeatureUpdatedEvent({\n        sourceFeatures: [featureData],\n        targetFeatures: [featureData],\n      });\n    }\n  }\n\n  getGeoJsonDifference(\n    shapeGeoJson: PolygonFeature,\n    geoJson: PolygonFeature,\n  ): Feature<Polygon | MultiPolygon> | null {\n    const collection = featureCollection([shapeGeoJson, geoJson]);\n    const geoJsonDiff = turfDifference(collection);\n\n    if (!geoJsonDiff) {\n      return null;\n    }\n\n    if (geoJsonDiff.type === 'Feature') {\n      return geoJsonDiff;\n    } else if (geoJsonDiff.type === 'FeatureCollection') {\n      log.error('getGeoJsonDifference: FeatureCollection detected (not supported)', geoJsonDiff);\n    }\n    return null;\n  }\n}\n","import {\n  type EditModeName,\n  type FeatureShape,\n  type MapHandlerReturnData,\n  SHAPE_NAMES,\n} from '@/main.ts';\nimport { BaseEdit } from '@/modes/edit/base.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\n\nimport { SOURCES } from '@/core/features/constants.ts';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\n\nexport class EditDelete extends BaseEdit {\n  mode: EditModeName = 'delete';\n  allowedShapes: Array<FeatureShape> = [...SHAPE_NAMES];\n  eventHandlers = {\n    click: this.onMouseClick.bind(this),\n  };\n\n  onStartAction() {\n    this.gm.markerPointer.enable({ invisibleMarker: true });\n    this.gm.markerPointer.pauseSnapping();\n  }\n\n  onEndAction() {\n    this.gm.markerPointer.resumeSnapping();\n    this.gm.markerPointer.disable();\n  }\n\n  onMouseClick(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event, { warning: true })) {\n      return { next: false };\n    }\n\n    const feature = this.getFeatureByMouseEvent({ event, sourceNames: [SOURCES.main] });\n    if (feature && this.allowedShapes.includes(feature.shape)) {\n      this.gm.features.delete(feature);\n      this.fireFeatureRemovedEvent(feature);\n    }\n    return { next: false };\n  }\n}\n","import {\n  type EditModeName,\n  type GmSystemEvent,\n  type MapHandlerReturnData,\n  SOURCES,\n} from '@/main.ts';\nimport { BaseDrag } from '@/modes/edit/base-drag.ts';\nimport { isGmEditEvent } from '@/utils/guards/modes.ts';\nimport log from 'loglevel';\n\nexport class EditDrag extends BaseDrag {\n  mode: EditModeName = 'drag';\n\n  onStartAction(): void {\n    // ...\n  }\n\n  onEndAction(): void {\n    // ...\n  }\n\n  handleGmEdit(event: GmSystemEvent): MapHandlerReturnData {\n    if (!isGmEditEvent(event)) {\n      log.error('EditDrag.handleGmEdit: not an edit event', event);\n      return { next: true };\n    }\n\n    if (event.action === 'marker_move' && event.lngLatStart && event.lngLatEnd) {\n      if (!this.previousLngLat) {\n        this.previousLngLat = event.lngLatStart;\n      }\n      this.moveFeature(event.featureData, event.lngLatEnd);\n      return { next: false };\n    } else if (event.action === 'marker_captured') {\n      event.featureData.changeSource({ sourceName: SOURCES.temporary, atomic: true });\n      this.flags.actionInProgress = true;\n      this.fireFeatureEditStartEvent({ feature: event.featureData });\n      this.setCursorToPointer();\n    } else if (event.action === 'marker_released') {\n      this.previousLngLat = null;\n      event.featureData.changeSource({ sourceName: SOURCES.main, atomic: true });\n      this.fireFeatureEditEndEvent({ feature: event.featureData });\n      this.flags.actionInProgress = false;\n    }\n    return { next: true };\n  }\n}\n","import {\n  type EditModeName,\n  type FeatureShape,\n  type GeoJsonShapeFeature,\n  type GmEditEvent,\n  type GmEditMarkerMoveEvent,\n  type GmSystemEvent,\n  type LngLatTuple,\n  type MapHandlerReturnData,\n  type ShapeName,\n  SOURCES,\n} from '@/main.ts';\nimport { BaseDrag } from '@/modes/edit/base-drag.ts';\nimport { geoJsonPointToLngLat, getGeoJsonEllipse } from '@/utils/geojson.ts';\nimport { isGmEditEvent } from '@/utils/guards/modes.ts';\nimport bearing from '@turf/bearing';\nimport centroid from '@turf/centroid';\nimport transformRotate from '@turf/transform-rotate';\nimport { cloneDeep } from 'lodash-es';\nimport log from 'loglevel';\n\ntype RotateShapeHandler = (event: GmEditMarkerMoveEvent) => GeoJsonShapeFeature | null;\n\nexport class EditRotate extends BaseDrag {\n  mode: EditModeName = 'rotate';\n  allowedShapes: Array<ShapeName> = ['line', 'rectangle', 'polygon', 'ellipse'];\n  convertFeaturesTypes: Array<FeatureShape> = ['rectangle'];\n\n  shapeRotateHandlers: { [key in FeatureShape]?: RotateShapeHandler } = {\n    marker: this.rotateFeature.bind(this),\n    circle: this.rotateFeature.bind(this),\n    circle_marker: this.rotateFeature.bind(this),\n    text_marker: this.rotateFeature.bind(this),\n    line: this.rotateFeature.bind(this),\n    rectangle: this.rotateFeature.bind(this),\n    polygon: this.rotateFeature.bind(this),\n    ellipse: this.rotateEllipse.bind(this),\n  };\n\n  onStartAction(): void {\n    // ...\n  }\n\n  onEndAction(): void {\n    // ...\n  }\n\n  handleGmEdit(event: GmSystemEvent): MapHandlerReturnData {\n    if (!isGmEditEvent(event)) {\n      log.error('EditChange.handleGmEdit: not an edit event', event);\n      return { next: false };\n    }\n\n    if (this.isFeatureAllowed(event)) {\n      return { next: true };\n    }\n\n    if (event.action === 'marker_move' && event.lngLatStart && event.lngLatEnd) {\n      if (event.markerData?.type === 'vertex') {\n        this.moveVertex(event);\n      } else {\n        this.moveSource(event.featureData, event.lngLatStart, event.lngLatEnd);\n      }\n      return { next: false };\n    } else if (event.action === 'marker_captured') {\n      event.featureData.changeSource({ sourceName: SOURCES.temporary, atomic: true });\n      this.setCursorToPointer();\n      this.flags.actionInProgress = true;\n      this.fireFeatureEditStartEvent({ feature: event.featureData });\n    } else if (event.action === 'marker_released') {\n      event.featureData.changeSource({ sourceName: SOURCES.main, atomic: true });\n      this.fireFeatureEditEndEvent({ feature: event.featureData });\n      this.flags.actionInProgress = false;\n    }\n    return { next: true };\n  }\n\n  isFeatureAllowed(event: GmEditEvent): boolean {\n    return (\n      'featureData' in event && !this.allowedShapes.includes(event.featureData.shape as ShapeName)\n    );\n  }\n\n  moveVertex(event: GmEditMarkerMoveEvent) {\n    const featureData = event.featureData;\n    const updatedGeoJson = this.shapeRotateHandlers[featureData.shape]?.(event) || null;\n\n    if (updatedGeoJson) {\n      this.fireBeforeFeatureUpdate({\n        features: [featureData],\n        geoJsonFeatures: [updatedGeoJson],\n      });\n\n      const isUpdated = this.updateFeatureGeoJson({ featureData, featureGeoJson: updatedGeoJson });\n\n      if (isUpdated && this.convertFeaturesTypes.includes(featureData.shape)) {\n        featureData.convertToPolygon(); // if possible\n      }\n    } else {\n      log.error('EditRotate.moveVertex: invalid geojson', updatedGeoJson, event);\n    }\n  }\n\n  rotateEllipse(event: GmEditMarkerMoveEvent) {\n    const { featureData } = event;\n\n    if (featureData.shape !== 'ellipse') {\n      log.error('EditRotate.rotateEllipse: invalid shape type', featureData);\n      return null;\n    }\n\n    const center = featureData.getShapeProperty('center');\n    const xSemiAxis = featureData.getShapeProperty('xSemiAxis');\n    const ySemiAxis = featureData.getShapeProperty('ySemiAxis');\n    const angle = featureData.getShapeProperty('angle');\n\n    if (\n      !Array.isArray(center) ||\n      typeof xSemiAxis !== 'number' ||\n      typeof ySemiAxis !== 'number' ||\n      typeof angle !== 'number'\n    ) {\n      log.error(\n        'rotateEllipse: missing center, xSemiAxis, ySemiAxis or angle in the featureData',\n        featureData,\n      );\n      return null;\n    }\n\n    const deltaAngle = this.calculateRotationAngle(\n      center,\n      event.lngLatStart,\n      event.lngLatEnd,\n      false,\n    );\n\n    return getGeoJsonEllipse({\n      center,\n      xSemiAxis,\n      ySemiAxis,\n      angle: angle + deltaAngle,\n    });\n  }\n\n  rotateFeature(event: GmEditMarkerMoveEvent) {\n    const featureData = event.featureData;\n\n    const geoJson = cloneDeep(featureData.getGeoJson() as GeoJsonShapeFeature);\n    const shapeCentroid = geoJsonPointToLngLat(centroid(geoJson));\n\n    const angle = this.calculateRotationAngle(shapeCentroid, event.lngLatStart, event.lngLatEnd);\n\n    geoJson.geometry = transformRotate(geoJson, angle, { pivot: shapeCentroid }).geometry;\n\n    return geoJson;\n  }\n\n  calculateRotationAngle(\n    pivot: LngLatTuple,\n    start: LngLatTuple,\n    end: LngLatTuple,\n    normalize = true,\n  ) {\n    const bearingStart = bearing(pivot, start);\n    const bearingEnd = bearing(pivot, end);\n\n    const rotationAngle = bearingEnd - bearingStart;\n    return normalize ? (rotationAngle + 360) % 360 : rotationAngle;\n  }\n}\n","import type { EditModeName, Geoman } from '@/main.ts';\nimport { BaseEdit } from '@/modes/edit/base.ts';\nimport { EditChange } from '@/modes/edit/change.ts';\nimport { EditCut } from '@/modes/edit/cut.ts';\nimport { EditDelete } from '@/modes/edit/delete.ts';\nimport { EditDrag } from '@/modes/edit/drag.ts';\nimport { EditRotate } from '@/modes/edit/rotate.ts';\nimport log from 'loglevel';\n\ntype EditClassConstructor = new (gm: Geoman) => BaseEdit;\ntype EditClassMap = {\n  [K in EditModeName]: EditClassConstructor | null;\n};\n\nexport const editClassMap: EditClassMap = {\n  drag: EditDrag,\n  change: EditChange,\n  rotate: EditRotate,\n  scale: null,\n  copy: null,\n  cut: EditCut,\n  split: null,\n  union: null,\n  difference: null,\n  line_simplification: null,\n  lasso: null,\n  delete: EditDelete,\n} as const;\n\nexport const createEditInstance = (gm: Geoman, mode: EditModeName) => {\n  if (editClassMap[mode]) {\n    return new editClassMap[mode](gm);\n  }\n\n  log.error(`Edit \"${mode}\" is not available`);\n  return null;\n};\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { EventBus } from '@/core/events/bus.ts';\nimport { BaseEventListener } from '@/core/events/listeners/base.ts';\nimport type {\n  ActionInstanceKey,\n  EventHandlers,\n  Geoman,\n  GmEditEvent,\n  GmSystemEvent,\n} from '@/main.ts';\nimport { BaseEdit } from '@/modes/edit/base.ts';\nimport { createEditInstance } from '@/modes/edit/index.ts';\nimport { isGmEditEvent } from '@/utils/guards/modes.ts';\nimport log from 'loglevel';\n\nexport class EditEventListener extends BaseEventListener {\n  eventHandlers: EventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:edit`]: this.handleEditEvent.bind(this),\n  };\n\n  constructor(gm: Geoman, bus: EventBus) {\n    super(gm);\n    bus.attachEvents(this.eventHandlers);\n  }\n\n  handleEditEvent(payload: GmSystemEvent) {\n    if (!isGmEditEvent(payload)) {\n      return { next: true };\n    }\n\n    const actionInstanceKey: ActionInstanceKey = `${payload.actionType}__${payload.mode}`;\n    if (payload.action === 'mode_start') {\n      this.trackExclusiveModes(payload);\n      this.start(actionInstanceKey, payload);\n      this.trackRelatedModes(payload);\n    } else if (payload.action === 'mode_end') {\n      this.trackRelatedModes(payload);\n      this.end(actionInstanceKey);\n    }\n\n    return { next: true };\n  }\n\n  start(actionInstanceKey: ActionInstanceKey, payload: GmEditEvent) {\n    if (payload.action !== 'mode_start') {\n      return;\n    }\n\n    const actionInstance = createEditInstance(this.gm, payload.mode);\n    if (!actionInstance) {\n      return;\n    }\n\n    if (actionInstanceKey in this.gm.actionInstances) {\n      log.error(`Action instance \"${actionInstanceKey}\" already exists`);\n    }\n\n    this.gm.actionInstances[actionInstanceKey] = actionInstance;\n    actionInstance.startAction();\n  }\n\n  end(actionInstanceKey: ActionInstanceKey) {\n    const actionInstance = this.gm.actionInstances[actionInstanceKey];\n\n    if (actionInstance instanceof BaseEdit) {\n      actionInstance.endAction();\n      delete this.gm.actionInstances[actionInstanceKey];\n    } else {\n      console.error(\n        `Wrong action instance for edit event \"${actionInstanceKey}\": `,\n        actionInstance,\n      );\n    }\n  }\n}\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { FeatureData } from '@/core/features/feature-data.ts';\nimport {\n  type DomMarkerData,\n  type EdgeMarkerData,\n  type EditModeName,\n  type FeatureShape,\n  type GmEditFeatureUpdatedEvent,\n  type GmEditMarkerEvent,\n  type GmEditMarkerMoveEvent,\n  type GmSystemEvent,\n  type HelperModeName,\n  type LngLatTuple,\n  type MapHandlerReturnData,\n  type MarkerData,\n  type PositionData,\n  type ScreenPoint,\n  type SegmentPosition,\n  SOURCES,\n} from '@/main.ts';\nimport { BaseHelper } from '@/modes/helpers/base.ts';\nimport type { SharedMarker } from '@/types/interfaces.ts';\nimport { convertToDebounced, convertToThrottled } from '@/utils/behavior.ts';\nimport { findInCollection } from '@/utils/collections.ts';\nimport { getFeatureFirstPoint } from '@/utils/features.ts';\nimport { eachSegmentWithPath, findCoordinateWithPath, isEqualPosition } from '@/utils/geojson.ts';\nimport { isPinHelper } from '@/utils/guards/interfaces.ts';\nimport { isMapPointerEvent, isPointerEventWithModifiers } from '@/utils/guards/map.ts';\nimport { isGmDrawEvent, isGmEditEvent } from '@/utils/guards/modes.ts';\nimport type { BaseMapEvent, BaseMapPointerEvent } from '@mapLib/types/events.ts';\nimport { cloneDeep, intersection } from 'lodash-es';\nimport log from 'loglevel';\n\ntype SegmentData = {\n  segment: SegmentPosition;\n  middle: PositionData;\n  edgeMarkerKey: string;\n};\n\ntype CreateMarkerParams = {\n  type: MarkerData['type'];\n  positionData: PositionData;\n  parentFeature: FeatureData;\n  segment?: EdgeMarkerData['segment'];\n};\n\nexport class ShapeMarkersHelper extends BaseHelper {\n  mode: HelperModeName = 'shape_markers';\n  pinEnabled: boolean = this.gm.options.controls.helper.pin?.active || false;\n  previousPosition: LngLatTuple | null = null;\n  activeMarker: MarkerData | null = null;\n  activeFeatureData: FeatureData | null = null;\n  sharedMarkers: Array<SharedMarker> = [];\n  allowedShapes: Array<FeatureShape> = ['circle', 'line', 'rectangle', 'polygon', 'ellipse'];\n  edgeMarkersAllowed: boolean = false;\n  edgeMarkerAllowedShapes: Array<FeatureShape> = ['line', 'rectangle', 'polygon'];\n  shapeMarkerAllowedModes: Array<EditModeName> = ['drag', 'change', 'cut', 'split'];\n  eventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:draw`]: this.handleGmDraw.bind(this),\n    [`${GM_SYSTEM_PREFIX}:edit`]: this.handleGmEdit.bind(this),\n\n    mousedown: this.onMouseDown.bind(this),\n    touchstart: this.onMouseDown.bind(this),\n\n    mouseup: this.onMouseUp.bind(this),\n    touchend: this.onMouseUp.bind(this),\n\n    mousemove: this.onMouseMove.bind(this),\n    touchmove: this.onMouseMove.bind(this),\n\n    contextmenu: this.onMouseRightButtonClick.bind(this),\n  };\n  throttledMethods = convertToThrottled(\n    {\n      sendMarkerMoveEvent: this.sendMarkerMoveEvent,\n      sendMarkerRightClickEvent: this.sendMarkerRightClickEvent,\n    },\n    this,\n    this.gm.options.settings.throttlingDelay,\n  );\n\n  debouncedMethods = convertToDebounced(\n    {\n      refreshMarkers: this.refreshMarkers,\n    },\n    this,\n    this.gm.options.settings.throttlingDelay * 10,\n  );\n\n  get pinHelperInstance() {\n    if (!this.pinEnabled) {\n      return null;\n    }\n\n    return Object.values(this.gm.actionInstances).find(isPinHelper) || null;\n  }\n\n  onStartAction() {\n    if (this.isShapeMarkerAllowed()) {\n      this.gm.markerPointer.enable({ invisibleMarker: true });\n    }\n\n    this.edgeMarkersAllowed = this.gm.getActiveEditModes().includes('change');\n    this.addMarkers();\n  }\n\n  onEndAction() {\n    this.gm.markerPointer.disable();\n    this.removeMarkers();\n  }\n\n  setPin(enabled: boolean) {\n    this.pinEnabled = enabled;\n  }\n\n  onMouseDown(event: BaseMapEvent): MapHandlerReturnData {\n    const allowedEventNames = ['mousedown', 'touchstart'];\n    if (\n      !isMapPointerEvent(event, { warning: true }) ||\n      !allowedEventNames.includes(event.type) ||\n      isPointerEventWithModifiers(event)\n    ) {\n      return { next: true };\n    }\n    if (event.type === 'mousedown' && event.originalEvent.button !== 0) {\n      // todo: check for right button click in other places like this\n      return { next: true };\n    }\n\n    const featureMarkerData = this.getFeatureMarkerByMouseEvent(event);\n    this.activeMarker = featureMarkerData || null;\n    this.activeFeatureData = featureMarkerData?.instance.parent || null;\n\n    if (!(this.activeMarker && this.activeFeatureData)) {\n      return { next: true };\n    }\n\n    this.previousPosition = getFeatureFirstPoint(this.activeMarker.instance);\n    this.gm.mapAdapter.setDragPan(false);\n\n    if (this.activeMarker.type === 'edge') {\n      this.sendMarkerEvent('edge_marker_click', this.activeFeatureData, this.activeMarker);\n    }\n\n    if (this.pinEnabled && this.pinHelperInstance) {\n      this.sharedMarkers = this.pinHelperInstance.getSharedMarkers(\n        this.activeMarker.position.coordinate,\n      );\n      this.sharedMarkers.forEach((sharedMarker) =>\n        this.snappingHelper?.addExcludedFeature(sharedMarker.featureData),\n      );\n    } else {\n      this.snappingHelper?.addExcludedFeature(this.activeFeatureData);\n    }\n\n    this.sendMarkerEvent('marker_captured', this.activeFeatureData, this.activeMarker);\n    return { next: false };\n  }\n\n  onMouseUp(): MapHandlerReturnData {\n    if (!this.activeMarker) {\n      return { next: true };\n    }\n\n    const eventData = {\n      featureData: this.activeFeatureData,\n      markerData: this.activeMarker,\n    };\n\n    this.activeMarker = null;\n    this.activeFeatureData = null;\n    this.sharedMarkers = [];\n    this.snappingHelper?.clearExcludedFeatures();\n    this.previousPosition = null;\n    this.gm.mapAdapter.setDragPan(true);\n\n    if (eventData.featureData && eventData.markerData) {\n      this.sendMarkerEvent('marker_released', eventData.featureData, eventData.markerData);\n      return { next: false };\n    } else {\n      log.debug('ShapeMarkersHelper.onMouseUp: no active marker or featureData', eventData);\n    }\n\n    return { next: true };\n  }\n\n  onMouseMove(event: BaseMapEvent): MapHandlerReturnData {\n    if (!this.activeMarker || !isMapPointerEvent(event, { warning: true })) {\n      return { next: true };\n    }\n\n    this.throttledMethods.sendMarkerMoveEvent(event);\n    return { next: false };\n  }\n\n  onMouseRightButtonClick(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event, { warning: true })) {\n      return { next: true };\n    }\n\n    const featureMarkerData = this.getFeatureMarkerByMouseEvent(event);\n\n    if (featureMarkerData && featureMarkerData.instance.parent) {\n      this.throttledMethods.sendMarkerRightClickEvent(\n        featureMarkerData.instance.parent,\n        featureMarkerData,\n      );\n      return { next: false };\n    }\n\n    return { next: true };\n  }\n\n  isShapeMarkerAllowed() {\n    return intersection(this.shapeMarkerAllowedModes, this.gm.getActiveEditModes()).length > 0;\n  }\n\n  convertToVertexMarker(markerData: MarkerData): MarkerData {\n    if (markerData.type === 'edge' && markerData.instance.parent) {\n      const oldPosition = markerData.position;\n      const featureData = markerData.instance.parent;\n      this.removeMarker(markerData);\n\n      const newMarkerData = this.createMarker({\n        type: 'vertex',\n        positionData: oldPosition,\n        parentFeature: featureData,\n      });\n\n      const shapeGeoJson = featureData.getGeoJson();\n      const position = findCoordinateWithPath(shapeGeoJson, oldPosition.coordinate);\n\n      if (position) {\n        const markerKey = position.path.join('.');\n        const existingMarker = featureData.markers.get(markerKey);\n        if (existingMarker) {\n          this.removeMarker(existingMarker);\n        }\n\n        featureData.markers.set(markerKey, newMarkerData);\n        return newMarkerData;\n      }\n    }\n\n    log.error('ShapeMarkersHelper.convertToVertexMarker: invalid marker type', markerData);\n    return markerData;\n  }\n\n  getFeatureMarkerByMouseEvent(\n    event: BaseMapPointerEvent,\n  ): Exclude<MarkerData, DomMarkerData> | null {\n    const markerFeatureData = this.gm.features.getFeatureByMouseEvent({\n      event,\n      sourceNames: [SOURCES.main],\n    });\n\n    if (markerFeatureData?.parent?.markers) {\n      const markerData = findInCollection(\n        markerFeatureData.parent.markers,\n        (item) => item.instance === markerFeatureData,\n      );\n      if (markerData?.type !== 'dom') {\n        return markerData;\n      }\n    }\n    return null;\n  }\n\n  addMarkers() {\n    this.gm.features.forEach((featureData) => {\n      if (\n        !featureData ||\n        !this.allowedShapes.includes(featureData.shape) ||\n        featureData.getShapeProperty('disableEdit') === true\n      ) {\n        return;\n      }\n\n      this.addCenterMarker(featureData);\n      const shapeSegments = this.getAllShapeSegments(featureData);\n\n      const endMarkerIndexes = this.getEndMarkerIndexes(featureData);\n\n      shapeSegments.forEach((segmentData, index) => {\n        // generic vertex marker\n        const isVertexMarkerAllowed = this.isMarkerIndexAllowed(\n          featureData.shape,\n          index,\n          shapeSegments.length,\n        );\n\n        if (isVertexMarkerAllowed) {\n          const marker = this.createOrUpdateVertexMarker(segmentData.segment.start, featureData);\n          featureData.markers.set(marker.markerKey, marker.markerData);\n\n          if (endMarkerIndexes.has(index)) {\n            const lineEndMarker = this.createOrUpdateVertexMarker(\n              segmentData.segment.end,\n              featureData,\n            );\n            featureData.markers.set(lineEndMarker.markerKey, lineEndMarker.markerData);\n          }\n        }\n\n        // edge middle marker\n        if (this.isEdgeMarkerAllowed(featureData)) {\n          const marker = this.createOrUpdateEdgeMarker(segmentData, featureData);\n          featureData.markers.set(marker.markerKey, marker.markerData);\n        }\n      });\n    });\n  }\n\n  addCenterMarker(featureData: FeatureData) {\n    const shapeCenter = featureData.getShapeProperty('center');\n    if (shapeCenter) {\n      const markerData = this.createMarker({\n        type: 'center',\n        positionData: {\n          path: [],\n          coordinate: shapeCenter,\n        },\n        parentFeature: featureData,\n      });\n      featureData.markers.set('center', markerData);\n    }\n  }\n\n  getAllShapeSegments(featureData: FeatureData) {\n    const shapeGeoJson = featureData.getGeoJson();\n    const segmentsData: Array<SegmentData> = [];\n\n    eachSegmentWithPath(shapeGeoJson, (segment, index) => {\n      segmentsData.push({\n        segment,\n        middle: this.getSegmentMiddlePosition(segment),\n        edgeMarkerKey: this.getEdgeMarkerKey(index),\n      });\n    });\n    return segmentsData;\n  }\n\n  isEdgeMarkerAllowed(featureData: FeatureData) {\n    return this.edgeMarkersAllowed && this.edgeMarkerAllowedShapes.includes(featureData.shape);\n  }\n\n  isMarkerIndexAllowed(shape: FeatureData['shape'], markerIndex: number, verticesCount: number) {\n    // allows 4 markers for a circle's rim\n    const divider = Math.floor(verticesCount / 4);\n\n    if (shape === 'circle') {\n      return (markerIndex + divider / 2) % divider === 0;\n    } else if (shape === 'ellipse') {\n      return markerIndex % divider === 0;\n    } else {\n      return true;\n    }\n  }\n\n  getEdgeMarkerKey(index: number) {\n    return `edge.${index}`;\n  }\n\n  getEndMarkerIndexes(featureData: FeatureData): Set<number> {\n    const geometry = featureData.getGeoJson().geometry;\n\n    if (\n      featureData.shape !== 'line' ||\n      !['LineString', 'MultiLineString'].includes(geometry.type)\n    ) {\n      return new Set();\n    }\n\n    if (geometry.type === 'MultiLineString') {\n      const infos = geometry.coordinates.reduce<{\n        sum: number;\n        indexes: Set<number>;\n      }>(\n        (acc, line) => {\n          acc.indexes.add(acc.sum + line.length - 2);\n          acc.sum += line.length - 1;\n          return acc;\n        },\n        { sum: 0, indexes: new Set<number>() },\n      );\n      return infos.indexes;\n    }\n    return new Set([geometry.coordinates.length - 2]);\n  }\n\n  getSegmentMiddlePosition(segment: SegmentPosition): PositionData {\n    const startPoint = this.gm.mapAdapter.project(segment.start.coordinate);\n    const endPoint = this.gm.mapAdapter.project(segment.end.coordinate);\n\n    const middlePoint: ScreenPoint = [\n      (startPoint[0] + endPoint[0]) / 2,\n      (startPoint[1] + endPoint[1]) / 2,\n    ];\n    const middlePath = segment.start.path.slice(0, segment.start.path.length - 1).concat([-1]);\n    return {\n      coordinate: this.gm.mapAdapter.unproject(middlePoint),\n      path: middlePath,\n    };\n  }\n\n  removeMarkers() {\n    this.gm.features.forEach((_, featureId) => {\n      const featureData = this.gm.features.get(SOURCES.main, featureId);\n\n      if (featureData) {\n        featureData.markers.forEach((marker) => {\n          if (marker.type !== 'dom') {\n            this.gm.features.delete(marker.instance);\n          } else {\n            log.error('Non a FeatureData marker', marker);\n          }\n        });\n        featureData.markers = new Map();\n      }\n    });\n  }\n\n  removeMarker(markerData: MarkerData) {\n    if (markerData.type === 'dom') {\n      log.error('Wrong marker type', markerData);\n      return;\n    }\n\n    const featureData = markerData.instance.parent;\n    if (!featureData) {\n      log.error('Missing parent feature data', markerData);\n      return;\n    }\n\n    try {\n      featureData.markers.forEach((markerItem, key) => {\n        if (markerItem === markerData) {\n          this.gm.features.delete(markerItem.instance);\n          featureData.markers.delete(key);\n          throw new Error('break');\n        }\n      });\n    } catch {\n      // ...\n    }\n  }\n\n  handleGmDraw(event: GmSystemEvent): MapHandlerReturnData {\n    if (!isGmDrawEvent(event)) {\n      log.error('ShapeMarkersHelper.handleGmDraw: not a draw event', event);\n      return { next: true };\n    }\n\n    if (['feature_created', 'mode_start'].includes(event.action)) {\n      this.debouncedMethods.refreshMarkers();\n    }\n\n    return { next: true };\n  }\n\n  refreshMarkers() {\n    const isEnabled = this.gm.options.isModeEnabled('helper', 'shape_markers');\n\n    if (isEnabled) {\n      this.removeMarkers();\n      this.addMarkers();\n    }\n  }\n\n  handleGmEdit(event: GmSystemEvent): MapHandlerReturnData {\n    if (!isGmEditEvent(event)) {\n      log.error('ShapeMarkersHelper.handleGmEdit: not an edit event', event);\n      return { next: true };\n    }\n\n    if (event.action === 'feature_updated') {\n      this.handleShapeUpdate(event);\n    }\n\n    return { next: true };\n  }\n\n  handleShapeUpdate(event: GmEditFeatureUpdatedEvent) {\n    const featureData = event.targetFeatures[0];\n\n    if (!featureData) {\n      log.error('ShapeMarkersHelper.handleShapeUpdate: no featureData', event);\n      return;\n    }\n\n    if (this.activeMarker?.type === 'edge') {\n      this.activeMarker = this.convertToVertexMarker(this.activeMarker);\n    }\n\n    const shapeSegments = this.getAllShapeSegments(featureData);\n    const currentMarkerKeys = new Set(featureData.markers.keys());\n\n    const endMarkerIndexes = this.getEndMarkerIndexes(featureData);\n\n    shapeSegments.forEach((segmentData, index) => {\n      const isVertexMarkerAllowed = this.isMarkerIndexAllowed(\n        featureData.shape,\n        index,\n        shapeSegments.length,\n      );\n\n      if (isVertexMarkerAllowed) {\n        const marker = this.createOrUpdateVertexMarker(segmentData.segment.start, featureData);\n        currentMarkerKeys.delete(marker.markerKey);\n        if (endMarkerIndexes.has(index)) {\n          const lineEndMarker = this.createOrUpdateVertexMarker(\n            segmentData.segment.end,\n            featureData,\n          );\n          currentMarkerKeys.delete(lineEndMarker.markerKey);\n        }\n      }\n\n      if (this.isEdgeMarkerAllowed(featureData)) {\n        const marker = this.createOrUpdateEdgeMarker(segmentData, featureData);\n        currentMarkerKeys.delete(marker.markerKey);\n      }\n    });\n\n    this.updateCenterMarkerPosition(featureData);\n    currentMarkerKeys.delete('center');\n\n    currentMarkerKeys.forEach((markerKey) => {\n      const markerData = featureData.markers.get(markerKey);\n      if (markerData && markerData.type !== 'dom') {\n        this.gm.features.delete(markerData.instance);\n      } else {\n        log.error('Non a FeatureData marker');\n      }\n\n      featureData.markers.delete(markerKey);\n    });\n  }\n\n  createOrUpdateVertexMarker(position: PositionData, featureData: FeatureData) {\n    const markerKey = position.path.join('.');\n    let markerData = featureData.markers.get(markerKey) || null;\n\n    if (markerData && markerData?.type !== 'vertex') {\n      throw new Error(`Invalid marker type \"${markerData?.type}\" for edge marker`);\n    }\n\n    if (markerData) {\n      if (!isEqualPosition(markerData.position.coordinate, position.coordinate)) {\n        this.gm.features.updateMarkerFeaturePosition(markerData.instance, position.coordinate);\n      }\n      markerData.position = position;\n    } else {\n      markerData = this.createMarker({\n        type: 'vertex',\n        positionData: position,\n        parentFeature: featureData,\n      });\n      featureData.markers.set(markerKey, markerData);\n    }\n    return { markerKey, markerData };\n  }\n\n  createOrUpdateEdgeMarker(segmentData: SegmentData, featureData: FeatureData) {\n    let markerData = featureData.markers.get(segmentData.edgeMarkerKey) || null;\n\n    if (markerData && markerData?.type !== 'edge') {\n      throw new Error(`Invalid marker type \"${markerData?.type}\" for edge marker`);\n    }\n\n    if (markerData) {\n      if (!isEqualPosition(markerData.position.coordinate, segmentData.middle.coordinate)) {\n        markerData.instance.updateGeoJsonGeometry({\n          type: 'Point',\n          coordinates: segmentData.middle.coordinate,\n        });\n      }\n      markerData.position = segmentData.middle;\n      markerData.segment = segmentData.segment;\n    } else {\n      markerData = this.createMarker({\n        type: 'edge',\n        positionData: segmentData.middle,\n        segment: segmentData.segment,\n        parentFeature: featureData,\n      });\n      featureData.markers.set(segmentData.edgeMarkerKey, markerData);\n    }\n\n    return { markerKey: segmentData.edgeMarkerKey, markerData };\n  }\n\n  updateCenterMarkerPosition(featureData: FeatureData) {\n    const markerData = featureData.markers.get('center') || null;\n    const shapeCenter = featureData.getShapeProperty('center');\n\n    if (markerData && markerData.type !== 'dom' && shapeCenter) {\n      markerData.instance.updateGeoJsonGeometry({\n        type: 'Point',\n        coordinates: shapeCenter,\n      });\n      markerData.position.coordinate = shapeCenter;\n    }\n  }\n\n  sendMarkerEvent(\n    action: GmEditMarkerEvent['action'],\n    featureData: FeatureData,\n    markerData: MarkerData,\n  ) {\n    const payload: GmEditMarkerEvent = {\n      name: `${GM_SYSTEM_PREFIX}:edit:marker`,\n      level: 'system',\n      actionType: 'edit',\n      mode: 'change',\n      action,\n      featureData,\n      markerData,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:edit`, payload);\n  }\n\n  sendMarkerRightClickEvent(featureData: FeatureData, markerData: MarkerData) {\n    const payload: GmEditMarkerEvent = {\n      name: `${GM_SYSTEM_PREFIX}:edit:marker`,\n      level: 'system',\n      actionType: 'edit',\n      mode: 'change',\n      action: 'marker_right_click',\n      featureData,\n      markerData,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:edit`, payload);\n  }\n\n  sendMarkerMoveEvent(event: BaseMapPointerEvent) {\n    const markerLngLat = this.gm.markerPointer.marker?.getLngLat() || event.lngLat.toArray();\n\n    if (this.activeMarker && this.activeFeatureData) {\n      const targetMarkers = this.pinEnabled\n        ? this.sharedMarkers\n        : [\n            {\n              markerData: this.activeMarker,\n              featureData: this.activeFeatureData,\n            },\n          ];\n\n      targetMarkers.forEach((item) => {\n        if (this.previousPosition) {\n          const payload: GmEditMarkerMoveEvent = {\n            name: `${GM_SYSTEM_PREFIX}:edit:marker_move`,\n            level: 'system',\n            actionType: 'edit',\n            mode: 'drag',\n            action: 'marker_move',\n            featureData: item.featureData,\n            markerData: item.markerData,\n            lngLatStart: this.previousPosition,\n            lngLatEnd: markerLngLat,\n          };\n          this.gm.events.fire(`${GM_SYSTEM_PREFIX}:edit`, payload);\n        }\n      });\n    }\n\n    this.previousPosition = markerLngLat;\n  }\n\n  protected createMarker({\n    type,\n    segment,\n    positionData,\n    parentFeature,\n  }: CreateMarkerParams): MarkerData {\n    const coordinate = positionData.coordinate;\n\n    const featureData = this.gm.features.createMarkerFeature({\n      sourceName: parentFeature.sourceName,\n      parentFeature,\n      type,\n      coordinate,\n    });\n    if (!featureData) {\n      throw new Error(`Missine feature data for the \"${type}\" marker`);\n    }\n\n    if (type === 'edge' && segment) {\n      return {\n        type,\n        instance: featureData,\n        position: cloneDeep(positionData),\n        segment,\n      };\n    } else if (type === 'vertex' || type === 'center') {\n      return {\n        type,\n        instance: featureData,\n        position: cloneDeep(positionData),\n      };\n    } else {\n      throw new Error(`Invalid marker type \"${type}\" with segment: ${segment}`);\n    }\n  }\n}\n","import { FeatureData } from '@/core/features/feature-data.ts';\nimport type { FeatureShape, HelperModeName, LngLatTuple, ScreenPoint } from '@/main.ts';\nimport { BaseHelper } from '@/modes/helpers/base.ts';\nimport { eachCoordinateWithPath, getEuclideanDistance } from '@/utils/geojson.ts';\nimport type { Feature, LineString, MultiLineString } from 'geojson';\nimport { sortBy } from 'lodash-es';\n\nimport { SOURCES } from '@/core/features/constants.ts';\n\ntype ShapeSnappingHandler = (\n  featureData: FeatureData,\n  lngLat: LngLatTuple,\n  point: ScreenPoint,\n) => { lngLat: LngLatTuple; distance: number };\n\nexport class SnappingHelper extends BaseHelper {\n  mode: HelperModeName = 'snapping';\n  tolerance: number = 18;\n  lineSnappingShapes: ReadonlyArray<FeatureShape> = [\n    'circle',\n    'line',\n    'rectangle',\n    'polygon',\n    'snap_guide',\n  ];\n  eventHandlers = {};\n  shapeSnappingHandlers: { [key in FeatureShape]?: ShapeSnappingHandler } = {\n    marker: this.getPointsSnapping.bind(this),\n    circle: this.getLineSnapping.bind(this),\n    circle_marker: this.getPointsSnapping.bind(this),\n    text_marker: this.getPointsSnapping.bind(this),\n    line: this.getLineSnapping.bind(this),\n    rectangle: this.getLineSnapping.bind(this),\n    polygon: this.getLineSnapping.bind(this),\n    snap_guide: this.getLineSnapping.bind(this),\n  };\n  private excludedFeature = new Set<FeatureData>();\n  private customSnappingLngLats = new Map<string, Array<LngLatTuple>>();\n  private customSnappingFeatures = new Set<FeatureData>();\n\n  onStartAction() {\n    this.gm.markerPointer.setSnapping(true);\n  }\n\n  onEndAction() {\n    this.gm.markerPointer.setSnapping(false);\n  }\n\n  addExcludedFeature(featureData: FeatureData) {\n    this.excludedFeature.add(featureData);\n  }\n\n  clearExcludedFeatures() {\n    this.excludedFeature.clear();\n  }\n\n  addCustomSnappingFeature(featureData: FeatureData) {\n    this.customSnappingFeatures.add(featureData);\n  }\n\n  removeCustomSnappingFeature(featureData: FeatureData) {\n    this.customSnappingFeatures.delete(featureData);\n  }\n\n  clearCustomSnappingFeature() {\n    this.customSnappingFeatures.clear();\n  }\n\n  setCustomSnappingCoordinates(sectionKey: string, lngLats: Array<LngLatTuple>) {\n    this.customSnappingLngLats.set(sectionKey, lngLats);\n  }\n\n  clearCustomSnappingCoordinates(sectionKey: string) {\n    this.customSnappingLngLats.delete(sectionKey);\n  }\n\n  getSnappedLngLat(lngLat: LngLatTuple, point: ScreenPoint): LngLatTuple {\n    let snappingLngLat = this.getCustomLngLatsSnapping(point);\n    if (snappingLngLat) {\n      return snappingLngLat;\n    }\n\n    const features = this.getFeaturesInPointBounds(point).filter(\n      (featureData) => !this.excludedFeature.has(featureData),\n    );\n\n    snappingLngLat = this.getFeaturePointsSnapping(features, lngLat, point);\n    if (snappingLngLat) {\n      return snappingLngLat;\n    }\n\n    snappingLngLat = this.getFeatureLinesSnapping(features, lngLat, point);\n    if (snappingLngLat) {\n      return snappingLngLat;\n    }\n\n    return lngLat;\n  }\n\n  getCustomLngLatsSnapping(point: ScreenPoint): LngLatTuple | null {\n    const closestPointData: { distance: number; lngLat: LngLatTuple | null } = {\n      distance: Infinity,\n      lngLat: null,\n    };\n\n    this.customSnappingLngLats.forEach((coordinates) => {\n      coordinates.forEach((customLngLat) => {\n        const coordPoint = this.gm.mapAdapter.project(customLngLat);\n        const distance = getEuclideanDistance(point, coordPoint);\n\n        if (distance < this.tolerance && distance < closestPointData.distance) {\n          closestPointData.distance = distance;\n          closestPointData.lngLat = customLngLat;\n        }\n      });\n    });\n\n    return closestPointData.lngLat;\n  }\n\n  getFeaturePointsSnapping(features: Array<FeatureData>, lngLat: LngLatTuple, point: ScreenPoint) {\n    let featuresPointsSnapping = features\n      .map((featureData) => ({\n        shape: featureData.shape,\n        ...this.getPointsSnapping(featureData, lngLat, point),\n      }))\n      .filter((item) => item.distance < this.tolerance);\n\n    if (featuresPointsSnapping.length) {\n      featuresPointsSnapping = sortBy(featuresPointsSnapping, ['distance']);\n      return featuresPointsSnapping[0].lngLat;\n    }\n    return null;\n  }\n\n  getFeatureLinesSnapping(features: Array<FeatureData>, lngLat: LngLatTuple, point: ScreenPoint) {\n    type LineSpappingData = ReturnType<ShapeSnappingHandler> & { shape: FeatureShape };\n\n    let featuresLineSnapping = features\n      .filter((featureData) => this.lineSnappingShapes.includes(featureData.shape))\n      .map((featureData) => {\n        const snappingHandler = this.shapeSnappingHandlers[featureData.shape];\n        if (snappingHandler) {\n          return {\n            shape: featureData.shape,\n            ...snappingHandler(featureData, lngLat, point),\n          };\n        }\n        return null;\n      })\n      .filter((item): item is LineSpappingData => item !== null && item.distance < this.tolerance);\n\n    if (featuresLineSnapping.length) {\n      featuresLineSnapping = sortBy(featuresLineSnapping, ['distance']);\n      return featuresLineSnapping[0].lngLat;\n    }\n\n    return null;\n  }\n\n  getFeaturesInPointBounds(point: ScreenPoint): Array<FeatureData> {\n    const bounds: [ScreenPoint, ScreenPoint] = [\n      [point[0] - this.tolerance, point[1] - this.tolerance],\n      [point[0] + this.tolerance, point[1] + this.tolerance],\n    ];\n\n    return (\n      this.gm.features\n        .getFeaturesByScreenBounds({ bounds, sourceNames: [SOURCES.main, SOURCES.temporary] })\n        .filter((featureData) => {\n          return featureData.temporary ? this.customSnappingFeatures.has(featureData) : true;\n        }) || []\n    );\n  }\n\n  getPointsSnapping(\n    featureData: FeatureData,\n    lngLat: LngLatTuple,\n    point: ScreenPoint,\n  ): ReturnType<ShapeSnappingHandler> {\n    const shapeGeoJson = featureData.getGeoJson();\n    const closestPointData: { distance: number; coord: LngLatTuple | null } = {\n      distance: Infinity,\n      coord: null, // lngLat coords\n    };\n\n    eachCoordinateWithPath(\n      shapeGeoJson,\n      (position) => {\n        const coordPoint = this.gm.mapAdapter.project(position.coordinate);\n        const distance = getEuclideanDistance(point, coordPoint);\n\n        if (distance < this.tolerance && distance < closestPointData.distance) {\n          closestPointData.distance = distance;\n          closestPointData.coord = position.coordinate;\n        }\n      },\n      true,\n    );\n\n    return {\n      lngLat: closestPointData.coord ? closestPointData.coord : lngLat,\n      distance: closestPointData.distance,\n    };\n  }\n\n  getLineSnapping(\n    featureData: FeatureData,\n    lngLat: LngLatTuple,\n    point: ScreenPoint,\n  ): ReturnType<ShapeSnappingHandler> {\n    const shapeGeoJson = featureData.getGeoJson() as Feature<LineString>;\n    return this.getNearestLinePointData(shapeGeoJson, lngLat, point);\n  }\n\n  getNearestLinePointData(\n    lineGeoJson: Feature<LineString | MultiLineString>,\n    lngLat: LngLatTuple,\n    point: ScreenPoint,\n  ) {\n    const result: ReturnType<ShapeSnappingHandler> = {\n      lngLat,\n      distance: Infinity,\n    };\n\n    const nearestPointLngLat = this.gm.mapAdapter.getEuclideanNearestLngLat(lineGeoJson, lngLat);\n\n    const nearestPointCoord = this.gm.mapAdapter.project(nearestPointLngLat);\n\n    result.distance = getEuclideanDistance(nearestPointCoord, point);\n    if (result.distance < this.tolerance) {\n      result.lngLat = nearestPointLngLat;\n    }\n\n    return result;\n  }\n}\n","import { type HelperModeName, type LngLatTuple, SOURCES } from '@/main.ts';\nimport { BaseHelper } from '@/modes/helpers/base.ts';\nimport bbox from '@turf/bbox';\nimport log from 'loglevel';\n\nimport { IS_PRO } from '@/core/constants.ts';\n\nexport class ZoomToFeaturesHelper extends BaseHelper {\n  mode: HelperModeName = 'zoom_to_features';\n  eventHandlers = {};\n\n  onStartAction() {\n    this.fitMapToFeatures();\n\n    setTimeout(() => {\n      this.gm.options.disableMode('helper', 'zoom_to_features');\n    });\n  }\n\n  onEndAction() {\n    // ...\n  }\n\n  fitMapToFeatures() {\n    const featureCollection = this.gm.features.asGeoJsonFeatureCollection({\n      sourceNames: [SOURCES.main, ...(IS_PRO ? [SOURCES.standby] : [])],\n    });\n    const bboxArray = bbox(featureCollection) as [number, number, number, number];\n    const bounds: [LngLatTuple, LngLatTuple] = [\n      [bboxArray[0], bboxArray[1]],\n      [bboxArray[2], bboxArray[3]],\n    ];\n\n    try {\n      this.gm.mapAdapter.fitBounds(bounds, { padding: 20 });\n    } catch {\n      log.warn('Wrong bounds for zooming to features', bounds, featureCollection);\n    }\n  }\n}\n","import type { Geoman, HelperModeName } from '@/main.ts';\nimport { BaseHelper } from '@/modes/helpers/base.ts';\nimport { ShapeMarkersHelper } from '@/modes/helpers/shape-markers.ts';\nimport { SnappingHelper } from '@/modes/helpers/snapping.ts';\nimport { ZoomToFeaturesHelper } from '@/modes/helpers/zoom-to-features.ts';\nimport log from 'loglevel';\n\ntype HelperClassConstructor = new (gm: Geoman) => BaseHelper;\ntype HelperClassMap = {\n  [K in HelperModeName]: HelperClassConstructor | null;\n};\n\nexport const helperClassMap: HelperClassMap = {\n  shape_markers: ShapeMarkersHelper,\n  pin: null,\n  snapping: SnappingHelper,\n  snap_guides: null,\n  measurements: null,\n  auto_trace: null,\n  geofencing: null,\n  zoom_to_features: ZoomToFeaturesHelper,\n  click_to_edit: null,\n} as const;\n\nexport const createHelperInstance = (gm: Geoman, mode: HelperModeName) => {\n  if (helperClassMap[mode]) {\n    return new helperClassMap[mode](gm);\n  }\n\n  log.error(`Helper \"${mode}\" is not available`);\n  return null;\n};\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { EventBus } from '@/core/events/bus.ts';\nimport { BaseEventListener } from '@/core/events/listeners/base.ts';\nimport type {\n  ActionInstanceKey,\n  EventHandlers,\n  Geoman,\n  GmSystemEvent,\n  GmHelperModeEvent,\n} from '@/main.ts';\nimport { BaseHelper } from '@/modes/helpers/base.ts';\nimport { createHelperInstance } from '@/modes/helpers/index.ts';\nimport { isGmHelperEvent } from '@/utils/guards/events/helper.ts';\nimport log from 'loglevel';\n\nexport class HelperEventListener extends BaseEventListener {\n  eventHandlers: EventHandlers = {\n    [`${GM_SYSTEM_PREFIX}:helper`]: this.handleHelperEvent.bind(this),\n  };\n\n  constructor(gm: Geoman, bus: EventBus) {\n    super(gm);\n    bus.attachEvents(this.eventHandlers);\n  }\n\n  handleHelperEvent(payload: GmSystemEvent) {\n    if (!isGmHelperEvent(payload)) {\n      return { next: true };\n    }\n\n    const actionInstanceKey: ActionInstanceKey = `${payload.actionType}__${payload.mode}`;\n\n    if (payload.action === 'mode_start') {\n      this.trackExclusiveModes(payload);\n      this.start(actionInstanceKey, payload);\n      this.trackRelatedModes(payload);\n    } else if (payload.action === 'mode_end') {\n      this.trackRelatedModes(payload);\n      this.end(actionInstanceKey);\n    }\n\n    return { next: true };\n  }\n\n  start(actionInstanceKey: ActionInstanceKey, payload: GmHelperModeEvent) {\n    const actionInstance = createHelperInstance(this.gm, payload.mode);\n    if (!actionInstance) {\n      return;\n    }\n\n    if (actionInstanceKey in this.gm.actionInstances) {\n      log.error(`Action instance \"${actionInstanceKey}\" already exists`);\n    }\n\n    this.gm.actionInstances[actionInstanceKey] = actionInstance;\n    actionInstance.startAction();\n  }\n\n  end(actionInstanceKey: ActionInstanceKey) {\n    const actionInstance = this.gm.actionInstances[actionInstanceKey];\n    if (actionInstance instanceof BaseHelper) {\n      actionInstance.endAction();\n      delete this.gm.actionInstances[actionInstanceKey];\n    } else {\n      console.error(`Wrong action instance for edit event \"${actionInstanceKey}\":`, actionInstance);\n    }\n  }\n}\n","import { EventBus } from '@/core/events/bus.ts';\nimport { BaseEventListener } from '@/core/events/listeners/base.ts';\nimport { ControlEventListener } from '@/core/events/listeners/controls.ts';\nimport { DrawEventListener } from '@/core/events/listeners/draw.ts';\nimport { EditEventListener } from '@/core/events/listeners/edit.ts';\nimport { HelperEventListener } from '@/core/events/listeners/helper.ts';\nimport type { ActionType, Geoman } from '@/main.ts';\nimport log from 'loglevel';\nimport type { GmSystemEvent, GmEventName } from 'src/types/events';\n\nexport default class GmEvents {\n  gm: Geoman;\n  bus: EventBus;\n  listeners: { [key in ActionType]?: BaseEventListener } = {};\n\n  constructor(gm: Geoman) {\n    this.gm = gm;\n    this.bus = new EventBus(this.gm);\n\n    this.listeners = {\n      draw: new DrawEventListener(this.gm, this.bus),\n      edit: new EditEventListener(this.gm, this.bus),\n      helper: new HelperEventListener(this.gm, this.bus),\n      control: new ControlEventListener(this.gm, this.bus),\n    };\n  }\n\n  fire(eventName: GmEventName, payload: GmSystemEvent) {\n    if (!this.listeners[payload.actionType]) {\n      log.error(`Can't find event listener for \"${payload.actionType}\" event type`);\n    }\n\n    // events are sent to the bus and then are handler by the listeners\n    // check events.bus.attachEvents() in required classes\n    this.bus.fireEvent(eventName, payload);\n  }\n}\n","import { SOURCES } from '@/core/features/constants.ts';\nimport { FEATURE_ID_PROPERTY, type Geoman } from '@/main.ts';\nimport type { FeatureSourceName, GeoJsonUniversalDiff } from '@/types';\nimport { typedKeys, typedValues } from '@/utils/typing.ts';\nimport type { Feature } from 'geojson';\nimport { throttle } from 'lodash-es';\n\ntype SourceUpdateMethods = {\n  [key in FeatureSourceName]: () => void;\n};\n\nconst MAX_DIFF_ITEMS = 5000;\n\nexport class SourceUpdateManager {\n  gm: Geoman;\n  updateStorage: { [key in FeatureSourceName]: Array<GeoJsonUniversalDiff> };\n  autoUpdatesEnabled: boolean = true;\n  delayedSourceUpdateMethods: SourceUpdateMethods;\n  // Track pending update promises per source to allow waiting for MapLibre to commit data\n  // Using an array to track multiple concurrent promises (prevents overwriting if rapid updates occur)\n  pendingUpdatePromises: { [key in FeatureSourceName]?: Promise<void>[] };\n\n  constructor(gm: Geoman) {\n    this.gm = gm;\n    this.updateStorage = Object.fromEntries(typedValues(SOURCES).map((name) => [name, []]));\n    this.pendingUpdatePromises = {};\n\n    this.delayedSourceUpdateMethods = Object.fromEntries(\n      typedValues(SOURCES).map((sourceName) => [\n        sourceName,\n        throttle(\n          () => this.updateSourceActual(sourceName),\n          this.gm.options.settings.throttlingDelay,\n        ),\n      ]),\n    ) as SourceUpdateMethods;\n  }\n\n  updatesPending(sourceName: FeatureSourceName): boolean {\n    return (\n      !!this.updateStorage[sourceName]?.length ||\n      !!(this.pendingUpdatePromises[sourceName]?.length ?? 0)\n    );\n  }\n\n  getFeatureId(feature: Feature) {\n    const id = feature.properties?.[FEATURE_ID_PROPERTY] ?? feature.id;\n    if (id === null || id === undefined) {\n      console.warn('Feature id is null or undefined', feature);\n    }\n    return id;\n  }\n\n  updateSource({\n    sourceName,\n    diff,\n  }: {\n    sourceName: FeatureSourceName;\n    diff?: GeoJsonUniversalDiff;\n  }) {\n    if (diff) {\n      this.updateStorage[sourceName].push(diff);\n    }\n\n    this.delayedSourceUpdateMethods[sourceName]();\n  }\n\n  updateSourceActual(sourceName: FeatureSourceName) {\n    const source = this.gm.features.sources[sourceName];\n\n    if (this.autoUpdatesEnabled && source) {\n      if (!source.loaded) {\n        setTimeout(() => {\n          this.updateSourceActual(sourceName);\n        }, this.gm.options.settings.throttlingDelay);\n        return;\n      }\n\n      const combinedDiff = this.getCombinedDiff(sourceName);\n      if (combinedDiff) {\n        // Track the update promise so callers can wait for MapLibre to commit the data\n        // MapLibre's updateData with waitForCompletion=true returns a Promise that\n        // resolves when the data is committed to the source\n        const updatePromise = source.updateData(combinedDiff);\n        this.addPendingPromise(sourceName, updatePromise);\n      }\n\n      if (this.updateStorage[sourceName].length > 0) {\n        setTimeout(\n          () => this.updateSourceActual(sourceName),\n          this.gm.options.settings.throttlingDelay,\n        );\n      }\n    }\n  }\n\n  /**\n   * Add a pending promise to the tracking array for a source.\n   * Automatically removes the promise from the array when it resolves.\n   */\n  private addPendingPromise(sourceName: FeatureSourceName, promise: Promise<void>): void {\n    if (!this.pendingUpdatePromises[sourceName]) {\n      this.pendingUpdatePromises[sourceName] = [];\n    }\n    this.pendingUpdatePromises[sourceName].push(promise);\n\n    // Remove from array when the promise resolves (success or failure)\n    promise.finally(() => {\n      const promises = this.pendingUpdatePromises[sourceName];\n      if (promises) {\n        const idx = promises.indexOf(promise);\n        if (idx !== -1) {\n          promises.splice(idx, 1);\n        }\n        // Clean up empty arrays\n        if (promises.length === 0) {\n          delete this.pendingUpdatePromises[sourceName];\n        }\n      }\n    });\n  }\n\n  /**\n   * Wait for any pending MapLibre source updates to complete.\n   * This ensures data is committed before events are fired.\n   *\n   * When there are queued updates in updateStorage that haven't been processed yet\n   * (due to throttling), this method flushes them immediately and waits for completion.\n   *\n   * Note: We call updateData() directly here rather than going through updateSourceActual()\n   * because updateSourceActual() checks `!source.loaded` and may delay processing.\n   * When waiting for pending updates (e.g., for event handlers), we need immediate processing.\n   *\n   * This is safe and won't cause duplicates because getCombinedDiff() atomically drains\n   * the storage - whoever calls it first gets the diffs, subsequent calls get null.\n   *\n   * IMPORTANT: MapLibre's _updateWorkerData() has a guard that returns early if already\n   * updating (`if (this._isUpdatingWorker) return`). This means updateData() can return\n   * a promise that resolves before the data is actually committed to serialize().\n   * To handle this, we loop until both storage and pending promises are empty, with\n   * a microtask yield between iterations to allow MapLibre's recursive updates to run.\n   */\n  async waitForPendingUpdates(sourceName: FeatureSourceName): Promise<void> {\n    const source = this.gm.features.sources[sourceName];\n    if (!source) return;\n\n    // Loop until all pending work is complete.\n    // This handles the case where MapLibre's _updateWorkerData returns early due to\n    // _isUpdatingWorker being true, and the actual data gets processed via the\n    // recursive call in the finally block.\n    while (\n      this.updateStorage[sourceName]?.length ||\n      this.pendingUpdatePromises[sourceName]?.length\n    ) {\n      // Flush any queued updates that haven't been processed yet\n      if (this.updateStorage[sourceName]?.length) {\n        const combinedDiff = this.getCombinedDiff(sourceName);\n        if (combinedDiff) {\n          const updatePromise = source.updateData(combinedDiff);\n          this.addPendingPromise(sourceName, updatePromise);\n        }\n      }\n\n      // Wait for all pending promises to complete\n      const pendingPromises = this.pendingUpdatePromises[sourceName];\n      if (pendingPromises?.length) {\n        await Promise.all(pendingPromises);\n      }\n\n      // Yield to allow MapLibre's recursive _updateWorkerData calls to process\n      // and potentially queue more work. Using setTimeout(0) ensures we go through\n      // the task queue, giving MapLibre's async operations a chance to complete.\n      await new Promise((resolve) => setTimeout(resolve, 0));\n    }\n\n    // Final frame wait for serialize() to reflect the committed data\n    await new Promise((resolve) => requestAnimationFrame(resolve));\n  }\n\n  withAtomicSourcesUpdate<T>(callback: () => T): T {\n    try {\n      this.autoUpdatesEnabled = false;\n      return callback();\n    } finally {\n      typedKeys(this.gm.features.sources).forEach((sourceName) => {\n        this.updateSource({ sourceName });\n      });\n      this.autoUpdatesEnabled = true;\n    }\n  }\n\n  getCombinedDiff(sourceName: FeatureSourceName): GeoJsonUniversalDiff | null {\n    let combinedDiff: GeoJsonUniversalDiff = {\n      remove: [],\n      add: [],\n      update: [],\n    };\n\n    for (let i = 0; i < MAX_DIFF_ITEMS; i += 1) {\n      if (this.updateStorage[sourceName][i] === undefined) {\n        break;\n      }\n      combinedDiff = this.mergeGeoJsonDiff(combinedDiff, this.updateStorage[sourceName][i]);\n    }\n    this.updateStorage[sourceName] = this.updateStorage[sourceName].slice(MAX_DIFF_ITEMS);\n\n    if (Object.values(combinedDiff).find((item) => item.length)) {\n      return combinedDiff;\n    }\n\n    return null;\n  }\n\n  mergeGeoJsonDiff(\n    pendingDiffOrNull: GeoJsonUniversalDiff | null,\n    nextDiffOrNull: GeoJsonUniversalDiff | null,\n  ): GeoJsonUniversalDiff {\n    const pending: GeoJsonUniversalDiff = pendingDiffOrNull ?? { add: [], update: [], remove: [] };\n    const next: GeoJsonUniversalDiff = nextDiffOrNull ?? { add: [], update: [], remove: [] };\n\n    const nextRemoveIds = new Set(next.remove);\n\n    const pendingAdd =\n      pending.add?.filter((item) => !nextRemoveIds.has(this.getFeatureId(item))) || [];\n    const pendingUpdate =\n      pending.update?.filter((item) => !nextRemoveIds.has(this.getFeatureId(item))) || [];\n\n    const nextUpdate: Array<Feature> = [];\n\n    next.update?.forEach((updatedFeature) => {\n      const pendingAddIdx = pendingAdd.findIndex(\n        (item) => this.getFeatureId(item) === this.getFeatureId(updatedFeature),\n      );\n      const pendingUpdateIdx = pendingUpdate.findIndex(\n        (item) => this.getFeatureId(item) === this.getFeatureId(updatedFeature),\n      );\n\n      if (pendingAddIdx === -1 && pendingUpdateIdx === -1) {\n        nextUpdate.push(updatedFeature);\n        return;\n      }\n      if (pendingAddIdx !== -1) {\n        pendingAdd[pendingAddIdx] = updatedFeature;\n      }\n      if (pendingUpdateIdx !== -1) {\n        pendingUpdate[pendingUpdateIdx] = updatedFeature;\n      }\n    });\n\n    return {\n      add: [...pendingAdd, ...(next.add || [])],\n      update: [...pendingUpdate, ...nextUpdate],\n      remove: [...(pending.remove || []), ...(next.remove || [])],\n    };\n  }\n}\n","import type { GeoJsonShapeFeatureCollection, GeoJsonUniversalDiff } from '@/main.ts';\nimport type { GeoJSON } from 'geojson';\nimport log from 'loglevel';\n\nexport abstract class BaseSource<TSourceInstance = unknown> {\n  abstract sourceInstance: TSourceInstance | null;\n\n  abstract get id(): string;\n\n  abstract get loaded(): boolean;\n\n  abstract createSource({\n    geoJson,\n    sourceId,\n  }: {\n    sourceId: string;\n    geoJson: GeoJSON;\n  }): TSourceInstance;\n\n  abstract getGeoJson(): GeoJsonShapeFeatureCollection;\n\n  abstract getGmGeoJson(): GeoJsonShapeFeatureCollection;\n\n  abstract setData(geoJson: GeoJSON): Promise<void>;\n\n  abstract updateData(updateStorage: GeoJsonUniversalDiff): Promise<void>;\n\n  abstract remove(): void;\n\n  isInstanceAvailable(): this is { sourceInstance: TSourceInstance } {\n    if (this.sourceInstance) {\n      return true;\n    }\n\n    log.error('Source instance is not available');\n    return false;\n  }\n}\n","import { GM_SYSTEM_PREFIX, IS_PRO } from '@/core/constants.ts';\nimport { FEATURE_PROPERTY_PREFIX, SOURCES } from '@/core/features/constants.ts';\nimport { FeatureData } from '@/core/features/feature-data.ts';\nimport { SourceUpdateManager } from '@/core/features/source-update-manager.ts';\nimport type { BaseLayer } from '@/core/map/base/layer.ts';\nimport { BaseSource } from '@/core/map/base/source.ts';\nimport {\n  FEATURE_ID_PROPERTY,\n  type FeatureId,\n  type FeatureShape,\n  type FeatureSourceName,\n  type FeatureStore,\n  type ForEachFeatureDataCallbackFn,\n  type GeoJsonImportFeature,\n  type GeoJsonImportFeatureCollection,\n  type GeoJsonShapeFeature,\n  type GeoJsonShapeFeatureCollection,\n  type Geoman,\n  type GmDrawFeatureCreatedEvent,\n  type ImportGeoJsonOptions,\n  type LngLatTuple,\n  type MarkerData,\n  type PartialLayerStyle,\n  type ScreenPoint,\n  SHAPE_NAMES,\n  type ShapeName,\n  type SourcesStorage,\n} from '@/main.ts';\nimport { fixGeoJsonFeature, getCustomFeatureId } from '@/utils/features.ts';\nimport { getGeoJsonBounds } from '@/utils/geojson.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\nimport { includesWithType, typedKeys, typedValues } from '@/utils/typing.ts';\nimport type { BaseMapPointerEvent } from '@mapLib/types/events.ts';\nimport type {\n  Feature,\n  FeatureCollection,\n  Geometry,\n  LineString,\n  MultiPolygon,\n  Polygon,\n} from 'geojson';\nimport { cloneDeep } from 'lodash-es';\nimport log from 'loglevel';\n\nexport class Features {\n  gm: Geoman;\n\n  featureCounter: number = 0;\n  featureStore: FeatureStore = new Map<FeatureId, FeatureData>();\n  featureStoreAllowedSources: Array<FeatureSourceName> = [SOURCES.main, SOURCES.temporary];\n\n  sources: SourcesStorage;\n  defaultSourceName: FeatureSourceName = SOURCES.main;\n  updateManager: SourceUpdateManager;\n  layers: Array<BaseLayer>;\n\n  constructor(gm: Geoman) {\n    this.gm = gm;\n    this.updateManager = new SourceUpdateManager(gm);\n\n    this.sources = Object.fromEntries(\n      typedValues(SOURCES).map((name) => [name, null]),\n    ) as SourcesStorage;\n\n    this.layers = [];\n  }\n\n  get forEach() {\n    return this.filteredForEach((featureData) => !featureData.temporary);\n  }\n\n  get tmpForEach() {\n    return this.filteredForEach((featureData) => featureData.temporary);\n  }\n\n  init() {\n    if (Object.values(this.sources).some((source) => source !== null)) {\n      log.warn('features.init(): features are already initialized');\n      return;\n    }\n\n    typedKeys(this.sources).forEach((sourceName) => {\n      this.sources[sourceName] = this.createSource(sourceName);\n    });\n\n    // Hydrate feature store from existing sources and sync the ID counter\n    // This handles remounting when sources were preserved (removeSources: false)\n    this.hydrateFromExistingSources();\n\n    if (this.gm.options.settings.useDefaultLayers) {\n      this.layers = this.createLayers();\n    }\n  }\n\n  /**\n   * Hydrates the feature store from existing sources and syncs the ID counter.\n   * This is called during init to restore state when remounting on preserved sources.\n   */\n  hydrateFromExistingSources() {\n    let maxCounter = 0;\n\n    typedKeys(this.sources).forEach((sourceName) => {\n      const source = this.sources[sourceName];\n      if (!source) return;\n\n      try {\n        const geoJson = source.getGeoJson();\n        if (geoJson && 'features' in geoJson) {\n          for (const feature of geoJson.features) {\n            const featureId = feature.properties?.[FEATURE_ID_PROPERTY] as FeatureId | undefined;\n            if (!featureId) continue;\n\n            // Track max counter for auto-generated IDs\n            if (typeof featureId === 'string' && featureId.startsWith('feature-')) {\n              const num = parseInt(featureId.replace('feature-', ''), 10);\n              if (!isNaN(num) && num > maxCounter) {\n                maxCounter = num;\n              }\n            }\n\n            // Skip if already in feature store (shouldn't happen on fresh init)\n            if (this.featureStore.has(featureId)) continue;\n\n            // Create FeatureData for the existing feature\n            // Use skipSourceUpdate since the feature already exists in the source\n            const shapeGeoJson = feature as GeoJsonShapeFeature;\n            const featureData = new FeatureData({\n              gm: this.gm,\n              id: featureId,\n              parent: null,\n              source,\n              geoJsonShapeFeature: cloneDeep(shapeGeoJson),\n              skipSourceUpdate: true,\n            });\n\n            this.featureStore.set(featureId, featureData);\n          }\n        }\n      } catch {\n        // Source might not be ready yet, ignore\n      }\n    });\n\n    if (maxCounter > this.featureCounter) {\n      this.featureCounter = maxCounter;\n    }\n  }\n\n  getNewFeatureId(shapeGeoJson: GeoJsonShapeFeature): FeatureId {\n    this.featureCounter += 1;\n\n    if (this.gm.options.settings.idGenerator) {\n      return this.gm.options.settings.idGenerator(shapeGeoJson);\n    }\n\n    let newFeatureId: FeatureId | null = `feature-${this.featureCounter}`;\n\n    while (this.featureStore.has(newFeatureId)) {\n      this.featureCounter += 1;\n      newFeatureId = `feature-${this.featureCounter}`;\n    }\n\n    return newFeatureId;\n  }\n\n  filteredForEach(filterFn: (featureData: FeatureData) => boolean) {\n    return (callbackfn: ForEachFeatureDataCallbackFn): void => {\n      this.featureStore.forEach((featureData, featureId, featureStore) => {\n        if (filterFn(featureData)) {\n          callbackfn(featureData, featureId, featureStore);\n        }\n      });\n    };\n  }\n\n  has(sourceName: keyof SourcesStorage, featureId: FeatureId): boolean {\n    const featureData = this.featureStore.get(featureId);\n    return !!featureData && featureData?.source === this.sources[sourceName];\n  }\n\n  get(sourceName: keyof SourcesStorage, featureId: FeatureId): FeatureData | null {\n    const featureData = this.featureStore.get(featureId) || null;\n\n    if (featureData?.source === this.sources[sourceName]) {\n      return featureData;\n    }\n    return null;\n  }\n\n  add(featureData: FeatureData) {\n    if (this.featureStore.has(featureData.id)) {\n      log.error(`features.add: feature with the id \"${featureData.id}\" already exists`);\n      return;\n    }\n\n    if (this.featureStoreAllowedSources.includes(featureData.source.id as FeatureSourceName)) {\n      this.featureStore.set(featureData.id, featureData);\n    }\n  }\n\n  setDefaultSourceName(sourceName: FeatureSourceName) {\n    this.defaultSourceName = sourceName;\n  }\n\n  createSource(sourceName: FeatureSourceName) {\n    const source = this.gm.mapAdapter.addSource(sourceName, {\n      type: 'FeatureCollection',\n      features: [],\n    });\n\n    if (source) {\n      return source;\n    }\n\n    throw new Error(`Features: failed to create the source: \"${sourceName}\"`);\n  }\n\n  delete(featureIdOrFeatureData: FeatureData | FeatureId) {\n    let featureData: FeatureData | null;\n\n    if (featureIdOrFeatureData instanceof FeatureData) {\n      featureData = featureIdOrFeatureData;\n    } else {\n      featureData = this.featureStore.get(featureIdOrFeatureData) || null;\n    }\n\n    if (featureData) {\n      this.featureStore.delete(featureData.id);\n      featureData.delete();\n      // log.debug(`Feature removed: ${featureData.id}, source: ${featureData.sourceName}`);\n    } else {\n      log.error(`features.delete: feature \"${featureIdOrFeatureData}\" not found`);\n    }\n  }\n\n  deleteAll() {\n    this.featureStore.forEach((featureData) => {\n      featureData.delete();\n    });\n    this.featureStore.clear();\n  }\n\n  getFeatureByMouseEvent({\n    event,\n    sourceNames,\n  }: {\n    event: BaseMapPointerEvent;\n    sourceNames: Array<FeatureSourceName>;\n  }): FeatureData | null {\n    if (!isMapPointerEvent(event, { warning: true })) {\n      return null;\n    }\n\n    const point: ScreenPoint = [event.point.x, event.point.y];\n    const features = this.gm.mapAdapter.queryFeaturesByScreenCoordinates({\n      queryCoordinates: point,\n      sourceNames,\n    });\n    return features.length ? features[0] : null;\n  }\n\n  getFeaturesByGeoJsonBounds({\n    geoJson,\n    sourceNames,\n  }: {\n    geoJson: Feature<Polygon | MultiPolygon | LineString>;\n    sourceNames: Array<FeatureSourceName>;\n  }): Array<FeatureData> {\n    const coordBounds = getGeoJsonBounds(geoJson);\n    const polygonScreenBounds = this.gm.mapAdapter.coordBoundsToScreenBounds(coordBounds);\n\n    return this.getFeaturesByScreenBounds({ bounds: polygonScreenBounds, sourceNames });\n  }\n\n  getFeaturesByScreenBounds({\n    bounds,\n    sourceNames,\n  }: {\n    bounds: [ScreenPoint, ScreenPoint];\n    sourceNames: Array<FeatureSourceName>;\n  }) {\n    return this.gm.mapAdapter.queryFeaturesByScreenCoordinates({\n      queryCoordinates: bounds,\n      sourceNames,\n    });\n  }\n\n  createFeature({\n    featureId,\n    shapeGeoJson,\n    parent,\n    sourceName,\n    imported,\n  }: {\n    featureId?: FeatureId;\n    shapeGeoJson: GeoJsonShapeFeature;\n    parent?: FeatureData;\n    sourceName: FeatureSourceName;\n    imported?: boolean;\n  }): FeatureData | null {\n    const source = this.sources[sourceName];\n    if (!source) {\n      log.error('Features.createFeature Missing source for feature creation');\n      return null;\n    }\n\n    const id =\n      featureId ??\n      shapeGeoJson.properties[FEATURE_ID_PROPERTY] ??\n      this.getNewFeatureId(shapeGeoJson);\n\n    if (this.featureStore.get(id)) {\n      log.error(\n        `Features.createFeature: feature with the id \"${id}\" already exists`,\n        this.featureStore.get(id),\n      );\n      return null;\n    }\n\n    const featureData = new FeatureData({\n      gm: this.gm,\n      id,\n      parent: parent || null,\n      source,\n      geoJsonShapeFeature: cloneDeep(shapeGeoJson),\n    });\n\n    this.add(featureData);\n    if (!featureData.temporary && !imported) {\n      this.fireFeatureCreatedEvent(featureData);\n    }\n    this.featureCounter += 1;\n    return featureData;\n  }\n\n  importGeoJson(\n    geoJson: GeoJsonImportFeatureCollection | GeoJsonImportFeature,\n    options?: ImportGeoJsonOptions,\n  ) {\n    const opts = options ?? {};\n\n    const features = 'features' in geoJson ? geoJson.features : [geoJson];\n    const result = {\n      stats: {\n        total: 0,\n        success: 0,\n        failed: 0,\n        overwritten: 0,\n      },\n      addedFeatures: [] as Array<FeatureData>,\n    };\n\n    features.forEach((feature) => {\n      let featureData: FeatureData | null = null;\n      result.stats.total += 1;\n\n      const featureGeoJson = fixGeoJsonFeature(feature);\n      if (featureGeoJson) {\n        if (opts.idPropertyName) {\n          const customId = getCustomFeatureId(featureGeoJson, opts.idPropertyName);\n          if (customId) {\n            featureGeoJson.id = customId;\n          }\n        }\n\n        // Handle overwrite: delete existing feature with same ID before importing\n        if (opts.overwrite) {\n          const featureId = (featureGeoJson.id ??\n            featureGeoJson.properties?.[FEATURE_ID_PROPERTY]) as FeatureId | undefined;\n          if (featureId && this.featureStore.has(featureId)) {\n            this.delete(featureId);\n            result.stats.overwritten += 1;\n          }\n        }\n\n        featureData = this.importGeoJsonFeature(featureGeoJson);\n      }\n\n      if (featureData) {\n        result.addedFeatures.push(featureData);\n        result.stats.success += 1;\n      } else {\n        result.stats.failed += 1;\n      }\n    });\n\n    return result;\n  }\n\n  importGeoJsonFeature(shapeGeoJson: GeoJsonImportFeature): FeatureData | null {\n    // add an externally created GeoJSON\n    const sourceName: FeatureSourceName = this.defaultSourceName;\n\n    const shape = this.getFeatureShapeByGeoJson(shapeGeoJson);\n    if (!shape) {\n      log.error('features.addGeoJsonFeature: unknown shape', shape);\n      return null;\n    }\n\n    return this.createFeature({\n      featureId: shapeGeoJson.id as FeatureId | undefined,\n      shapeGeoJson,\n      sourceName,\n      imported: true,\n    });\n  }\n\n  getAll(): FeatureCollection {\n    return this.exportGeoJson();\n  }\n\n  /**\n   * Exports GeoJSON from Geoman's internal state.\n   *\n   * This is the recommended method for most use cases as it always returns the latest\n   * feature data, even during event handlers before MapLibre has committed changes.\n   *\n   * @param options - Export options\n   * @param options.allowedShapes - Filter to only include specific shape types\n   * @param options.idPropertyName - Property name to use for feature IDs (default: 'gm_id')\n   * @returns GeoJSON FeatureCollection with all features\n   *\n   * @example\n   * // Export all features\n   * const geoJson = geoman.features.exportGeoJson();\n   *\n   * // Export only polygons and circles\n   * const shapes = geoman.features.exportGeoJson({ allowedShapes: ['polygon', 'circle'] });\n   */\n  exportGeoJson(\n    {\n      allowedShapes,\n      idPropertyName,\n    }: {\n      allowedShapes?: Array<FeatureShape>;\n      idPropertyName?: string;\n    } = { allowedShapes: undefined },\n  ): GeoJsonShapeFeatureCollection {\n    return this.asGeoJsonFeatureCollection({\n      sourceNames: [SOURCES.main, ...(IS_PRO ? [SOURCES.standby] : [])],\n      shapeTypes: allowedShapes ? allowedShapes : [...SHAPE_NAMES],\n      idPropertyName,\n      useMapLibreSource: false,\n    });\n  }\n\n  /**\n   * Exports GeoJSON directly from MapLibre's underlying source data.\n   *\n   * This method reads from MapLibre's serialized source state, which may lag slightly\n   * behind Geoman's internal state during rapid updates or in event handlers.\n   *\n   * Use this method when you specifically need to verify what MapLibre has committed\n   * to its source, for debugging, or for synchronization with external systems that\n   * read directly from MapLibre sources.\n   *\n   * For most use cases, prefer `exportGeoJson()` which uses Geoman's internal state\n   * and is always up-to-date.\n   *\n   * @param options - Export options\n   * @param options.allowedShapes - Filter to only include specific shape types\n   * @param options.idPropertyName - Property name to use for feature IDs (default: 'gm_id')\n   * @returns GeoJSON FeatureCollection from MapLibre's source\n   *\n   * @example\n   * // Export features as stored in MapLibre source\n   * const geoJson = geoman.features.exportGeoJsonFromSource();\n   *\n   * // Verify MapLibre has committed the data\n   * await geoman.features.waitForPendingUpdates();\n   * const committed = geoman.features.exportGeoJsonFromSource();\n   */\n  exportGeoJsonFromSource(\n    {\n      allowedShapes,\n      idPropertyName,\n    }: {\n      allowedShapes?: Array<FeatureShape>;\n      idPropertyName?: string;\n    } = { allowedShapes: undefined },\n  ): GeoJsonShapeFeatureCollection {\n    return this.asGeoJsonFeatureCollection({\n      sourceNames: [SOURCES.main, ...(IS_PRO ? [SOURCES.standby] : [])],\n      shapeTypes: allowedShapes ? allowedShapes : [...SHAPE_NAMES],\n      idPropertyName,\n      useMapLibreSource: true,\n    });\n  }\n\n  asGeoJsonFeatureCollection({\n    shapeTypes,\n    sourceNames,\n    idPropertyName,\n    useMapLibreSource = false,\n  }: {\n    shapeTypes?: Array<FeatureShape>;\n    sourceNames: Array<FeatureSourceName>;\n    idPropertyName?: string;\n    useMapLibreSource?: boolean;\n  }): GeoJsonShapeFeatureCollection {\n    const resultFeatureCollection: GeoJsonShapeFeatureCollection = {\n      type: 'FeatureCollection',\n      features: [],\n    };\n\n    idPropertyName ??= FEATURE_ID_PROPERTY;\n\n    sourceNames.forEach((sourceName) => {\n      const source = this.sources[sourceName];\n\n      if (source) {\n        // getGmGeoJson() returns features from internal FeatureData state (always up-to-date)\n        // getGeoJson() returns features from MapLibre's serialize() (may lag during rapid updates)\n        const sourceFeatureCollection = useMapLibreSource\n          ? source.getGeoJson()\n          : source.getGmGeoJson();\n\n        sourceFeatureCollection.features\n          .filter((feature) => !!feature)\n          .forEach((feature) => {\n            const featureData = this.get(sourceName, feature.id as FeatureId);\n            if (!featureData) {\n              // log.warn(\"Can't find featureData for the feature\", feature);\n              return;\n            }\n\n            const id = feature.properties[FEATURE_ID_PROPERTY];\n\n            if (idPropertyName !== FEATURE_ID_PROPERTY) {\n              feature.properties[idPropertyName] = id;\n              delete feature.properties[FEATURE_ID_PROPERTY];\n            }\n\n            if (shapeTypes === undefined || shapeTypes.includes(featureData.shape)) {\n              resultFeatureCollection.features.push({ ...feature, id });\n            }\n          });\n      }\n    });\n\n    return resultFeatureCollection;\n  }\n\n  convertSourceToGm(inputSource: BaseSource): Array<FeatureData> {\n    // adds an externally created source to the features store\n    // the method converts the source/layers to internal format\n    // original source/layers are removed\n\n    const features: Array<FeatureData> = [];\n    const shapeGeoJson = inputSource.getGeoJson();\n    const sourceGeoJsonFeatures =\n      'features' in shapeGeoJson ? shapeGeoJson.features : [shapeGeoJson];\n    const baseSource = this.gm.mapAdapter.getSource(inputSource.id);\n    baseSource.remove();\n\n    sourceGeoJsonFeatures.forEach((sourceFeature) => {\n      const featureData = this.addGeoJsonFeature({\n        shapeGeoJson: sourceFeature as GeoJsonImportFeature,\n        defaultSource: true,\n      });\n\n      if (featureData) {\n        features.push(featureData);\n      }\n    });\n    return features;\n  }\n\n  addGeoJsonFeature({\n    shapeGeoJson,\n    sourceName,\n    defaultSource,\n  }: {\n    shapeGeoJson: GeoJsonImportFeature;\n    sourceName?: FeatureSourceName;\n    defaultSource?: boolean;\n  }): FeatureData | null {\n    let targetSourceName: FeatureSourceName | null;\n    if (defaultSource) {\n      targetSourceName = this.defaultSourceName;\n      if (sourceName) {\n        log.warn('features.addGeoJsonFeature: default source is set, sourceName is ignored');\n      }\n    } else {\n      targetSourceName = sourceName || null;\n    }\n\n    if (!targetSourceName) {\n      log.error('features.addGeoJsonFeature: missing sourceName');\n      return null;\n    }\n\n    const shape = this.getFeatureShapeByGeoJson(shapeGeoJson);\n\n    if (!shape) {\n      log.error('features.addGeoJsonFeature: unknown shape', shape);\n      return null;\n    }\n\n    return this.createFeature({\n      featureId: shapeGeoJson.id as FeatureId | undefined,\n      shapeGeoJson: {\n        ...shapeGeoJson,\n        properties: { ...shapeGeoJson.properties, shape },\n      },\n      sourceName: targetSourceName,\n    });\n  }\n\n  createLayers(): Array<BaseLayer> {\n    const layers: Array<BaseLayer> = [];\n\n    typedKeys(this.sources).forEach((sourceName) => {\n      typedKeys(this.gm.options.layerStyles).forEach((shapeName) => {\n        const styles = this.gm.options.layerStyles[shapeName][sourceName];\n        styles.forEach((partialStyle) => {\n          const layer = this.createGenericLayer({\n            sourceName,\n            shapeNames: [shapeName],\n            partialStyle,\n          });\n\n          if (layer) {\n            layers.push(layer);\n          }\n        });\n      });\n    });\n\n    return layers;\n  }\n\n  createGenericLayer({\n    sourceName,\n    shapeNames,\n    partialStyle,\n  }: {\n    sourceName: FeatureSourceName;\n    shapeNames: Array<FeatureShape>;\n    partialStyle: PartialLayerStyle;\n  }): BaseLayer | null {\n    const layerId = this.getGenericLayerName({ sourceName, shapeNames, partialStyle });\n    if (!layerId) {\n      throw new Error(`Can't create a layer, for ${{ sourceName, shapeNames, partialStyle }}`);\n    }\n\n    const layerOptions = {\n      ...partialStyle,\n      id: layerId,\n      source: sourceName,\n      filter: ['in', ['get', `${FEATURE_PROPERTY_PREFIX}shape`], ['literal', shapeNames]],\n    };\n\n    return this.gm.mapAdapter.addLayer(layerOptions);\n  }\n\n  getGenericLayerName({\n    sourceName,\n    shapeNames,\n    partialStyle,\n  }: {\n    sourceName: FeatureSourceName;\n    shapeNames: Array<FeatureShape>;\n    partialStyle: PartialLayerStyle;\n  }): string | null {\n    const MAX_LAYERS = 100;\n    const shapeName = shapeNames.length === 1 ? shapeNames[0] : 'mixed';\n    const getLayerId = (index: number) =>\n      `${sourceName}-${shapeName}__${partialStyle.type}-layer-${index}`;\n    let layerId: string | null = null;\n\n    for (let i = 0; i < MAX_LAYERS; i += 1) {\n      const tmpLayerId = getLayerId(i);\n      if (!this.gm.mapAdapter.getLayer(tmpLayerId)) {\n        layerId = tmpLayerId;\n        return layerId;\n      }\n    }\n\n    return null;\n  }\n\n  getFeatureShapeByGeoJson(shapeGeoJson: Feature): ShapeName | null {\n    const SHAPE_MAP: { [key in Geometry['type']]?: ShapeName } = {\n      Point: 'marker',\n      LineString: 'line',\n      MultiLineString: 'line',\n      Polygon: 'polygon',\n      MultiPolygon: 'polygon',\n    };\n\n    const properties = shapeGeoJson.properties;\n    if (properties?.shape && SHAPE_NAMES.includes(properties?.shape)) {\n      return properties?.shape;\n    }\n\n    return SHAPE_MAP[shapeGeoJson.geometry.type] || null;\n  }\n\n  createMarkerFeature({\n    parentFeature,\n    coordinate,\n    type,\n    sourceName,\n  }: {\n    type: MarkerData['type'];\n    coordinate: LngLatTuple;\n    parentFeature: FeatureData;\n    sourceName: FeatureSourceName;\n  }) {\n    return this.createFeature({\n      sourceName,\n      parent: parentFeature,\n      shapeGeoJson: {\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: coordinate,\n        },\n        properties: {\n          [`${FEATURE_PROPERTY_PREFIX}shape`]: `${type}_marker`,\n        },\n      },\n    });\n  }\n\n  updateMarkerFeaturePosition(markerFeatureData: FeatureData, coordinates: LngLatTuple) {\n    markerFeatureData.updateGeoJsonGeometry({\n      type: 'Point',\n      coordinates,\n    });\n  }\n\n  fireFeatureCreatedEvent(featureData: FeatureData) {\n    if (includesWithType(featureData.shape, SHAPE_NAMES)) {\n      const payload: GmDrawFeatureCreatedEvent = {\n        name: `${GM_SYSTEM_PREFIX}:draw:feature_created`,\n        level: 'system',\n        actionType: 'draw',\n        mode: featureData.shape,\n        action: 'feature_created',\n        featureData,\n      };\n      this.gm.events.fire(`${GM_SYSTEM_PREFIX}:draw`, payload);\n    }\n  }\n}\n","import GmControl from '@/core/controls/index.ts';\nimport type { FeatureData } from '@/core/features/feature-data.ts';\nimport type { BaseLayer } from '@/core/map/base/layer.ts';\nimport type { BaseDomMarker } from '@/core/map/base/marker.ts';\nimport type { BasePopup } from '@/core/map/base/popup.ts';\nimport type { BaseSource } from '@/core/map/base/source.ts';\nimport type {\n  AnyEventName,\n  BaseDomMarkerOptions,\n  BaseEventListener,\n  BaseFitBoundsOptions,\n  BasePopupOptions,\n  CursorType,\n  FeatureSourceName,\n  GeoJsonFeatureData,\n  LineBasedGeometry,\n  LngLatTuple,\n  MapEventName,\n  MapInstanceWithGeoman,\n  MapInteraction,\n  MapTypes,\n  ScreenPoint,\n} from '@/main.ts';\nimport {\n  eachSegmentWithPath,\n  getEuclideanDistance,\n  getEuclideanSegmentNearestPoint,\n} from '@/utils/geojson.ts';\nimport turfDistance from '@turf/distance';\nimport type { Feature, FeatureCollection, GeoJSON } from 'geojson';\n\nexport abstract class BaseMapAdapter<\n  TMapInstance = MapInstanceWithGeoman,\n  TSource = unknown,\n  TLayer = unknown,\n> {\n  abstract mapType: keyof MapTypes;\n\n  abstract mapInstance: TMapInstance;\n\n  abstract getMapInstance(): TMapInstance;\n\n  abstract isLoaded(): boolean;\n\n  abstract getContainer(): HTMLElement;\n\n  abstract getCanvas(): HTMLCanvasElement;\n\n  abstract addControl(control: GmControl): void;\n\n  abstract removeControl(control: GmControl): void;\n\n  abstract loadImage({ id, image }: { id: string; image: string }): Promise<void>;\n\n  abstract removeImage(id: string): void;\n\n  abstract getBounds(): [LngLatTuple, LngLatTuple];\n\n  abstract fitBounds(bounds: [LngLatTuple, LngLatTuple], options?: BaseFitBoundsOptions): void;\n\n  abstract setCursor(cursor: CursorType): void;\n\n  abstract disableMapInteractions(interactionTypes: Array<MapInteraction>): void;\n\n  abstract enableMapInteractions(interactionTypes: Array<MapInteraction>): void;\n\n  abstract setDragPan(value: boolean): void;\n\n  abstract queryFeaturesByScreenCoordinates({\n    queryCoordinates,\n    sourceNames,\n  }: {\n    queryCoordinates: ScreenPoint | [ScreenPoint, ScreenPoint];\n    sourceNames: Array<FeatureSourceName>;\n  }): Array<FeatureData>;\n\n  abstract queryGeoJsonFeatures({\n    queryCoordinates,\n    sourceNames,\n  }: {\n    queryCoordinates?: ScreenPoint | [ScreenPoint, ScreenPoint];\n    sourceNames: Array<FeatureSourceName>;\n  }): Array<GeoJsonFeatureData>;\n\n  abstract addSource(sourceId: string, geoJson: GeoJSON): BaseSource<TSource>;\n\n  abstract getSource(sourceId: string): BaseSource<TSource>;\n\n  // abstract removeSource(sourceId: string): void;\n\n  abstract addLayer(options: unknown): BaseLayer<TLayer>;\n\n  abstract getLayer(layerId: string): BaseLayer<TLayer> | null;\n\n  abstract removeLayer(layerId: string): void;\n\n  abstract eachLayer(callback: (layer: BaseLayer<TLayer>) => void): void;\n\n  abstract createDomMarker(options: BaseDomMarkerOptions, lngLat: LngLatTuple): BaseDomMarker;\n\n  abstract createPopup(options: BasePopupOptions): BasePopup;\n\n  abstract project(position: LngLatTuple): ScreenPoint;\n\n  abstract unproject(point: ScreenPoint): LngLatTuple;\n\n  abstract coordBoundsToScreenBounds(\n    bounds: [LngLatTuple, LngLatTuple],\n  ): [ScreenPoint, ScreenPoint];\n\n  getEuclideanNearestLngLat(\n    shapeGeoJson: Feature<LineBasedGeometry> | FeatureCollection<LineBasedGeometry>,\n    lngLat: LngLatTuple,\n  ): LngLatTuple {\n    const targetPoint = this.project(lngLat);\n    let closestPoint: ScreenPoint = [0, 0];\n    let minDistance = Infinity;\n\n    eachSegmentWithPath(shapeGeoJson, (segment) => {\n      const linePoint1 = this.project(segment.start.coordinate);\n      const linePoint2 = this.project(segment.end.coordinate);\n      const nearestCoordinates = getEuclideanSegmentNearestPoint(\n        linePoint1,\n        linePoint2,\n        targetPoint,\n      );\n      const distance = getEuclideanDistance(targetPoint, nearestCoordinates);\n\n      if (distance < minDistance) {\n        minDistance = distance;\n        closestPoint = [nearestCoordinates[0], nearestCoordinates[1]];\n      }\n    });\n\n    return this.unproject(closestPoint);\n  }\n\n  abstract fire(type: AnyEventName, data?: unknown): void;\n\n  abstract on<T extends AnyEventName>(type: T, listener: BaseEventListener<T>): void;\n  abstract on(type: MapEventName, layerId: string, listener: BaseEventListener): void;\n\n  abstract once<T extends AnyEventName>(type: AnyEventName, listener: BaseEventListener<T>): void;\n  abstract once(type: MapEventName, layerId: string, listener: BaseEventListener): void;\n\n  abstract off<T extends AnyEventName>(type: AnyEventName, listener: BaseEventListener<T>): void;\n  abstract off(type: MapEventName, layerId: string, listener: BaseEventListener): void;\n\n  getDistance(lngLat1: LngLatTuple, lngLat2: LngLatTuple): number {\n    return turfDistance(lngLat1, lngLat2, { units: 'meters' });\n  }\n}\n","import log from 'loglevel';\n\nexport abstract class BaseLayer<TLayerInstance = unknown> {\n  abstract layerInstance: TLayerInstance | null;\n\n  abstract get id(): string;\n\n  abstract get source(): string;\n\n  abstract createLayer(options: unknown): TLayerInstance;\n\n  abstract remove(): void;\n\n  isInstanceAvailable(): this is { layerInstance: TLayerInstance } {\n    if (this.layerInstance) {\n      return true;\n    }\n\n    log.error('layerInstance is not available');\n    return false;\n  }\n}\n","import { BaseLayer } from '@/core/map/base/layer.ts';\nimport type { Geoman } from '@/main.ts';\nimport type { MaplibreAnyLayer } from '@mapLib/types/layers.ts';\nimport ml from 'maplibre-gl';\nimport log from 'loglevel';\n\nexport class MaplibreLayer extends BaseLayer<MaplibreAnyLayer> {\n  gm: Geoman;\n  layerInstance: MaplibreAnyLayer | null = null;\n  mapInstance: ml.Map;\n\n  constructor({\n    gm,\n    layerId,\n    options,\n  }: {\n    gm: Geoman;\n    layerId: string;\n    options?: ml.AddLayerObject;\n  }) {\n    super();\n    this.gm = gm;\n    this.mapInstance = this.gm.mapAdapter.mapInstance as ml.Map;\n\n    if (options) {\n      this.layerInstance = this.createLayer(options);\n    } else {\n      this.layerInstance = (this.mapInstance.getLayer(layerId) as MaplibreAnyLayer) || null;\n    }\n  }\n\n  get id(): string {\n    if (!this.isInstanceAvailable()) {\n      throw new Error('Layer instance is not available');\n    }\n\n    return this.layerInstance.id;\n  }\n\n  get source(): string {\n    if (!this.isInstanceAvailable()) {\n      throw new Error('Layer instance is not available');\n    }\n\n    return this.layerInstance.source;\n  }\n\n  createLayer(options: ml.AddLayerObject): MaplibreAnyLayer {\n    let layer = this.mapInstance.getLayer(options.id) as MaplibreAnyLayer | undefined;\n    if (layer) {\n      log.warn(`Layer \"${options.id}\" already exists, skipping`);\n    } else {\n      this.mapInstance.addLayer(options);\n      layer = this.mapInstance.getLayer(options.id) as MaplibreAnyLayer;\n    }\n    return layer ?? null;\n  }\n\n  remove(): void {\n    if (this.isInstanceAvailable()) {\n      this.mapInstance.removeLayer(this.id);\n    }\n    this.layerInstance = null;\n  }\n}\n","import { BaseDomMarker } from '@/core/map/base/marker.ts';\nimport type { BaseDomMarkerOptions, LngLatTuple } from '@/main.ts';\nimport ml from 'maplibre-gl';\n\nexport class MaplibreDomMarker extends BaseDomMarker<ml.Marker> {\n  markerInstance: ml.Marker | null;\n\n  constructor({\n    mapInstance,\n    options,\n    lngLat,\n  }: {\n    mapInstance: ml.Map;\n    options: BaseDomMarkerOptions;\n    lngLat: LngLatTuple;\n  }) {\n    super();\n    this.markerInstance = new ml.Marker(options).setLngLat(lngLat).addTo(mapInstance);\n  }\n\n  getElement(): HTMLElement | null {\n    if (!this.isMarkerInstanceAvailable()) {\n      return null;\n    }\n\n    return this.markerInstance?.getElement() || null;\n  }\n\n  setLngLat(lngLat: LngLatTuple) {\n    if (!this.isMarkerInstanceAvailable()) {\n      return;\n    }\n    this.markerInstance?.setLngLat(lngLat);\n  }\n\n  getLngLat(): LngLatTuple {\n    if (!this.isMarkerInstanceAvailable()) {\n      return [0, 0];\n    }\n\n    return this.markerInstance?.getLngLat().toArray() || [0, 0];\n  }\n\n  remove() {\n    this.markerInstance?.remove();\n  }\n}\n","import type { LngLatTuple } from '@/main.ts';\nimport log from 'loglevel';\n\nexport abstract class BasePopup<TPopupInstance = unknown> {\n  abstract popupInstance: TPopupInstance | null;\n\n  abstract setLngLat(lngLat: LngLatTuple): void;\n\n  abstract setHtml(htmlContent: string): void;\n\n  abstract remove(): void;\n\n  isInstanceAvailable(): this is { popupInstance: TPopupInstance } {\n    if (this.popupInstance) {\n      return true;\n    }\n\n    log.error('Popup instance is not available');\n    return false;\n  }\n}\n","import { BasePopup } from '@/core/map/base/popup.ts';\nimport type { BasePopupOptions, LngLatTuple } from '@/main.ts';\nimport ml from 'maplibre-gl';\n\nexport class MaplibrePopup extends BasePopup<ml.Popup> {\n  popupInstance: ml.Popup | null;\n\n  constructor({\n    mapInstance,\n    options,\n    lngLat,\n  }: {\n    mapInstance: ml.Map;\n    options: BasePopupOptions;\n    lngLat?: LngLatTuple;\n  }) {\n    super();\n    this.popupInstance = new ml.Popup(options).addTo(mapInstance);\n    if (lngLat) {\n      this.setLngLat(lngLat);\n    }\n  }\n\n  getLngLat(): LngLatTuple {\n    if (!this.isInstanceAvailable()) {\n      return [0, 0];\n    }\n\n    return this.popupInstance.getLngLat().toArray() || [0, 0];\n  }\n\n  setLngLat(lngLat: LngLatTuple) {\n    if (!this.isInstanceAvailable()) {\n      return;\n    }\n\n    this.popupInstance.setLngLat(lngLat);\n  }\n\n  setHtml(htmlContent: string): void {\n    if (this.isInstanceAvailable()) {\n      this.popupInstance.setHTML(htmlContent);\n    }\n  }\n\n  remove() {\n    if (this.isInstanceAvailable()) {\n      this.popupInstance.remove();\n    }\n  }\n}\n","import { BaseSource } from '@/core/map/base/source.ts';\nimport {\n  FEATURE_ID_PROPERTY,\n  type GeoJsonShapeFeatureCollection,\n  type GeoJsonUniversalDiff,\n  type Geoman,\n  SHAPE_NAMES,\n  type ShapeName,\n} from '@/main.ts';\nimport type { Feature, GeoJSON } from 'geojson';\nimport log from 'loglevel';\nimport ml from 'maplibre-gl';\n\nexport class MaplibreSource extends BaseSource<ml.GeoJSONSource> {\n  gm: Geoman;\n  mapInstance: ml.Map;\n  sourceInstance: ml.GeoJSONSource | null;\n\n  constructor({ gm, geoJson, sourceId }: { gm: Geoman; sourceId: string; geoJson?: GeoJSON }) {\n    super();\n    this.gm = gm;\n    this.mapInstance = this.gm.mapAdapter.mapInstance as ml.Map;\n\n    if (geoJson) {\n      this.sourceInstance = this.createSource({ geoJson, sourceId });\n    } else {\n      this.sourceInstance = (this.mapInstance.getSource(sourceId) as ml.GeoJSONSource) || null;\n    }\n  }\n\n  get id(): string {\n    if (!this.isInstanceAvailable()) {\n      throw new Error('Source instance is not available');\n    }\n\n    return this.sourceInstance.id;\n  }\n\n  get loaded(): boolean {\n    return this.mapInstance.isSourceLoaded(this.id);\n  }\n\n  createSource({ geoJson, sourceId }: { sourceId: string; geoJson: GeoJSON }): ml.GeoJSONSource {\n    let source = this.mapInstance.getSource(sourceId) as ml.GeoJSONSource | undefined;\n    if (source) {\n      log.warn(`Source \"${source.id}\" already exists, skipping`);\n    } else {\n      this.mapInstance.addSource(sourceId, {\n        type: 'geojson',\n        data: geoJson,\n        promoteId: FEATURE_ID_PROPERTY,\n      });\n      source = this.mapInstance.getSource(sourceId) as ml.GeoJSONSource;\n    }\n    return source ?? null;\n  }\n\n  getGeoJson() {\n    if (!this.isInstanceAvailable()) {\n      throw new Error('Source instance is not available');\n    }\n    return this.sourceInstance.serialize().data as GeoJsonShapeFeatureCollection;\n  }\n\n  getGmGeoJson() {\n    if (!this.isInstanceAvailable()) {\n      throw new Error('Source instance is not available');\n    }\n\n    // this method retrieves features geojson according to internal representation\n    // for each FeatureData.\n    // In other words it collects \"FeatureData._geoJson\" for each feature in a source\n    const resultFeatureCollection: GeoJsonShapeFeatureCollection = {\n      type: 'FeatureCollection',\n      features: [],\n    };\n\n    const sourceForEach = this.gm.features.filteredForEach(\n      (featureData) => featureData.source.id === this.sourceInstance?.id,\n    );\n\n    sourceForEach((featureData) => {\n      if (SHAPE_NAMES.includes(featureData.shape as ShapeName)) {\n        resultFeatureCollection.features.push(featureData.getGeoJson());\n      }\n    });\n    return resultFeatureCollection;\n  }\n\n  async setData(geoJson: GeoJSON) {\n    if (!this.isInstanceAvailable()) {\n      throw new Error('Source instance is not available');\n    }\n    await this.sourceInstance.setData(geoJson, true);\n  }\n\n  async updateData(updateStorage: GeoJsonUniversalDiff) {\n    if (!this.isInstanceAvailable()) {\n      return;\n    }\n\n    const mlDiff = this.convertUniversalDiffToMlDiff(updateStorage);\n    await this.sourceInstance.updateData(mlDiff, true);\n  }\n\n  convertUniversalDiffToMlDiff(diff: GeoJsonUniversalDiff): ml.GeoJSONSourceDiff {\n    // todo: check possible performance issue here,\n    // todo: feature properties updates applies geometry updates\n    return {\n      add: diff.add?.map(this.sanitizeFeatureForAdd.bind(this)),\n      update: diff.update?.map(this.convertFeatureToMlUpdateDiff.bind(this)),\n      remove: diff.remove,\n    };\n  }\n\n  /**\n   * Sanitize a feature for addition to the source by removing undefined property values.\n   * MapLibre's protobuf encoding does not support undefined values (per MapBox vector tile spec).\n   */\n  sanitizeFeatureForAdd(feature: Feature): Feature {\n    if (!feature.properties) {\n      return feature;\n    }\n\n    const sanitizedProperties: Record<string, unknown> = {};\n    for (const [key, value] of Object.entries(feature.properties)) {\n      if (value !== undefined) {\n        sanitizedProperties[key] = value;\n      }\n    }\n\n    return {\n      ...feature,\n      properties: sanitizedProperties,\n    };\n  }\n\n  convertFeatureToMlUpdateDiff(feature: Feature): ml.GeoJSONFeatureDiff {\n    const addOrUpdateProperties: ml.GeoJSONFeatureDiff['addOrUpdateProperties'] = [];\n    const removeProperties: ml.GeoJSONFeatureDiff['removeProperties'] = [];\n\n    Object.entries(feature.properties || {}).forEach(([key, value]) => {\n      if (value === undefined) {\n        removeProperties.push(key);\n      } else {\n        addOrUpdateProperties.push({ key, value });\n      }\n    });\n\n    return {\n      id: feature.properties?.[FEATURE_ID_PROPERTY],\n      newGeometry: feature.geometry,\n      addOrUpdateProperties,\n      removeProperties,\n    };\n  }\n\n  remove() {\n    if (!this.isInstanceAvailable()) {\n      return;\n    }\n\n    this.gm.mapAdapter.eachLayer((layer) => {\n      if (layer.source === this.sourceInstance.id) {\n        this.gm.mapAdapter.removeLayer(layer.id);\n      }\n    });\n\n    this.mapInstance.removeSource(this.sourceInstance.id);\n  }\n}\n","import type { MapLayerEventType, MapLibreEvent, MapMouseEvent, MapTouchEvent } from 'maplibre-gl';\n\n// NOTE: Don't use maplibre types directly outside of \"core/map/maplibre\" directory\n\nexport const maplibrePointerEvents: ReadonlyArray<keyof MapLayerEventType> = [\n  'click',\n  'dblclick',\n  'mousedown',\n  'mouseup',\n  'mousemove',\n  'mouseenter',\n  'mouseleave',\n  'mouseover',\n  'mouseout',\n  'contextmenu',\n  'touchstart',\n  'touchend',\n  'touchcancel',\n] as const;\n\nexport type MaplibrePointerEventName = (typeof maplibrePointerEvents)[number];\n\nexport type BaseMapEvent = MapLibreEvent;\n\nexport type BaseMapMouseEvent = MapMouseEvent;\n\nexport type BaseMapTouchEvent = MapTouchEvent;\n\nexport type BaseMapPointerEvent = MapMouseEvent | MapTouchEvent;\n","import { type MaplibrePointerEventName, maplibrePointerEvents } from '@mapLib/types/events.ts';\n\nexport const isMaplibreSupportedPointerEventName = (\n  name: string,\n): name is MaplibrePointerEventName => {\n  return maplibrePointerEvents.includes(name as MaplibrePointerEventName);\n};\n","import GmControl from '@/core/controls/index.ts';\nimport { FeatureData } from '@/core/features/feature-data.ts';\nimport { BaseMapAdapter } from '@/core/map/base/index.ts';\nimport type { BaseLayer } from '@/core/map/base/layer.ts';\nimport { BaseDomMarker } from '@/core/map/base/marker.ts';\nimport type { BasePopup } from '@/core/map/base/popup.ts';\nimport { MaplibreLayer } from '@/core/map/maplibre/layer.ts';\nimport { MaplibreDomMarker } from '@/core/map/maplibre/marker.ts';\nimport { MaplibrePopup } from '@/core/map/maplibre/popup.ts';\nimport { MaplibreSource } from '@/core/map/maplibre/source.ts';\nimport {\n  type BaseDomMarkerOptions,\n  type BaseEventListener,\n  type BaseFitBoundsOptions,\n  type BasePopupOptions,\n  type CursorType,\n  FEATURE_ID_PROPERTY,\n  type FeatureId,\n  type FeatureSourceName,\n  type GeoJsonFeatureData,\n  type GeoJsonImportFeature,\n  type Geoman,\n  type LngLatTuple,\n  type MapInstanceWithGeoman,\n  type MapInteraction,\n  type MapTypes,\n  type ScreenPoint,\n} from '@/main.ts';\nimport type { MaplibreAnyLayer } from '@mapLib/types/layers.ts';\nimport type { GeoJSON } from 'geojson';\nimport { isEqual, uniqWith } from 'lodash-es';\nimport ml from 'maplibre-gl';\nimport { isMaplibreSupportedPointerEventName } from '@/core/map/maplibre/guards.ts';\n\nexport class MaplibreAdapter extends BaseMapAdapter<\n  MapInstanceWithGeoman<ml.Map>,\n  ml.GeoJSONSource,\n  MaplibreAnyLayer\n> {\n  gm: Geoman;\n  mapType: keyof MapTypes = 'maplibre';\n  mapInstance: MapInstanceWithGeoman<ml.Map>;\n\n  constructor(map: unknown, gm: Geoman) {\n    super();\n    this.gm = gm;\n    this.mapInstance = map as MapInstanceWithGeoman<ml.Map>;\n  }\n\n  getMapInstance(): MapInstanceWithGeoman<ml.Map> {\n    return this.mapInstance;\n  }\n\n  isLoaded(): boolean {\n    return this.mapInstance._loaded;\n  }\n\n  getContainer(): HTMLElement {\n    return this.mapInstance.getContainer();\n  }\n\n  getCanvas(): HTMLCanvasElement {\n    return this.mapInstance.getCanvas();\n  }\n\n  addControl(control: GmControl) {\n    this.mapInstance.addControl(control);\n  }\n\n  removeControl(control: GmControl) {\n    this.mapInstance.removeControl(control);\n  }\n\n  async loadImage({ id, image }: { id: string; image: string }) {\n    if (!this.mapInstance.hasImage(id)) {\n      const loadedImage = await this.mapInstance.loadImage(image);\n      this.mapInstance.addImage(id, loadedImage.data);\n    }\n  }\n\n  removeImage(id: string) {\n    try {\n      if (this.mapInstance.hasImage(id)) {\n        this.mapInstance.removeImage(id);\n      }\n    } catch {\n      // Map may have been destroyed, style is no longer available\n    }\n  }\n\n  getBounds(): [LngLatTuple, LngLatTuple] {\n    const mapBounds = this.mapInstance.getBounds();\n    return mapBounds.toArray() as [LngLatTuple, LngLatTuple];\n  }\n\n  fitBounds(bounds: [LngLatTuple, LngLatTuple], options?: BaseFitBoundsOptions) {\n    this.mapInstance.fitBounds(bounds, options);\n  }\n\n  setCursor(cursor: CursorType) {\n    this.mapInstance.getCanvas().style.cursor = cursor;\n  }\n\n  disableMapInteractions(interactionTypes: Array<MapInteraction>): void {\n    interactionTypes.forEach((interactionType) => {\n      this.mapInstance[interactionType].disable();\n    });\n  }\n\n  enableMapInteractions(interactionTypes: Array<MapInteraction>): void {\n    interactionTypes.forEach((interactionType) => {\n      this.mapInstance[interactionType].enable();\n    });\n  }\n\n  setDragPan(value: boolean) {\n    if (value) {\n      this.mapInstance.dragPan.enable();\n    } else {\n      this.mapInstance.dragPan.disable();\n    }\n  }\n\n  queryFeaturesByScreenCoordinates({\n    queryCoordinates = undefined,\n    sourceNames,\n  }: {\n    queryCoordinates?: ScreenPoint | [ScreenPoint, ScreenPoint];\n    sourceNames: Array<FeatureSourceName>;\n  }): Array<FeatureData> {\n    const features = uniqWith(\n      this.mapInstance.queryRenderedFeatures(queryCoordinates).map((feature) => ({\n        featureId: feature.properties[FEATURE_ID_PROPERTY] as FeatureId | undefined,\n        featureSourceName: feature.source as FeatureSourceName,\n      })),\n      isEqual,\n    );\n\n    return features\n      .map(({ featureId, featureSourceName }) => {\n        if (featureId === undefined || !sourceNames.includes(featureSourceName)) {\n          return null;\n        }\n\n        return this.gm.features.get(featureSourceName, featureId) || null;\n      })\n      .filter((featureData): featureData is FeatureData => !!featureData);\n  }\n\n  queryGeoJsonFeatures({\n    queryCoordinates = undefined,\n    sourceNames,\n  }: {\n    queryCoordinates?: ScreenPoint | [ScreenPoint, ScreenPoint];\n    sourceNames: Array<FeatureSourceName>;\n  }) {\n    const comparator = (\n      item1: GeoJsonFeatureData | null,\n      item2: GeoJsonFeatureData | null,\n    ): boolean => {\n      return item1?.id === item2?.id;\n    };\n\n    const features: Array<GeoJsonFeatureData | null> = uniqWith(\n      this.mapInstance.queryRenderedFeatures(queryCoordinates).map((feature) => {\n        const geoJson = this.convertToGeoJsonImportFeature(feature);\n        if (!geoJson) {\n          return null;\n        }\n        return {\n          id: feature.properties[FEATURE_ID_PROPERTY] as FeatureId | undefined,\n          sourceName: feature.source as FeatureSourceName,\n          geoJson,\n        };\n      }),\n      comparator,\n    );\n\n    return features.filter((item: GeoJsonFeatureData | null): item is GeoJsonFeatureData => {\n      return (\n        !!item && item.id !== undefined && item.geoJson && sourceNames.includes(item.sourceName)\n      );\n    });\n  }\n\n  convertToGeoJsonImportFeature(feature: ml.MapGeoJSONFeature): GeoJsonImportFeature | null {\n    const featureId = feature.properties[FEATURE_ID_PROPERTY] as FeatureId | undefined;\n    if (featureId === undefined || feature.geometry.type === 'GeometryCollection') {\n      return null;\n    }\n\n    return {\n      id: featureId,\n      type: 'Feature',\n      properties: feature.properties,\n      geometry: feature.geometry,\n    };\n  }\n\n  addSource(sourceId: string, geoJson: GeoJSON): MaplibreSource {\n    return new MaplibreSource({ gm: this.gm, sourceId, geoJson });\n  }\n\n  getSource(sourceId: string): MaplibreSource {\n    return new MaplibreSource({ gm: this.gm, sourceId });\n  }\n\n  addLayer(options: ml.AddLayerObject): MaplibreLayer {\n    const layerId = options.id;\n    return new MaplibreLayer({ gm: this.gm, layerId, options });\n  }\n\n  getLayer(layerId: string): BaseLayer<MaplibreAnyLayer> | null {\n    if (this.mapInstance.getLayer(layerId)) {\n      return new MaplibreLayer({ gm: this.gm, layerId });\n    }\n    return null;\n  }\n\n  removeLayer(layerId: string) {\n    const layer = this.getLayer(layerId);\n    if (layer) {\n      layer.remove();\n    }\n  }\n\n  eachLayer(callback: (layer: BaseLayer<MaplibreAnyLayer>) => void) {\n    this.mapInstance.getStyle().layers.forEach((layer) => {\n      callback(new MaplibreLayer({ gm: this.gm, layerId: layer.id }));\n    });\n  }\n\n  createDomMarker(options: BaseDomMarkerOptions, lngLat: LngLatTuple): BaseDomMarker {\n    return new MaplibreDomMarker({\n      mapInstance: this.mapInstance,\n      options,\n      lngLat,\n    });\n  }\n\n  createPopup(options: BasePopupOptions, lngLat?: LngLatTuple): BasePopup {\n    return new MaplibrePopup({\n      mapInstance: this.mapInstance,\n      options,\n      lngLat,\n    });\n  }\n\n  project(position: LngLatTuple) {\n    const point = this.mapInstance.project(position);\n    return [point.x, point.y] as ScreenPoint;\n  }\n\n  unproject(point: ScreenPoint) {\n    const lngLat = this.mapInstance.unproject(point);\n    return [lngLat.lng, lngLat.lat] as LngLatTuple;\n  }\n\n  coordBoundsToScreenBounds(bounds: [LngLatTuple, LngLatTuple]): [ScreenPoint, ScreenPoint] {\n    const mlBounds = new ml.LngLatBounds(bounds);\n    const sw = this.project(mlBounds.getSouthWest().toArray());\n    const ne = this.project(mlBounds.getNorthEast().toArray());\n    return [sw, ne];\n  }\n\n  fire(type: string, data?: unknown) {\n    this.mapInstance.fire(type, data);\n  }\n\n  on(type: string, listener: BaseEventListener): void;\n  on(type: string, layerId: string, listener: BaseEventListener): void;\n  on(type: string, arg2: string | BaseEventListener, listener?: BaseEventListener): void {\n    if (typeof arg2 === 'string' && listener && isMaplibreSupportedPointerEventName(type)) {\n      this.mapInstance.on(type, arg2, listener);\n    } else if (typeof arg2 === 'function') {\n      this.mapInstance.on(type, arg2);\n    } else {\n      throw new Error(\"Invalid arguments passed to 'on' method\");\n    }\n  }\n\n  once(type: string, listener: BaseEventListener): void;\n  once(type: string, layerId: string, listener: BaseEventListener): void;\n  once(type: string, arg2: string | BaseEventListener, listener?: BaseEventListener): void {\n    // note: it's possible to have promise returned from maplibre-gl\n    // (it's not implemented for this adapter)\n    if (typeof arg2 === 'string' && listener && isMaplibreSupportedPointerEventName(type)) {\n      this.mapInstance.once(type, arg2, listener);\n    } else if (typeof arg2 === 'function') {\n      this.mapInstance.once(type, arg2);\n    } else {\n      throw new Error(\"Invalid arguments passed to 'once' method.\");\n    }\n  }\n\n  off(type: string, listener: BaseEventListener): void;\n  off(type: string, layerId: string, listener: BaseEventListener): void;\n  off(type: string, arg2: string | BaseEventListener, listener?: BaseEventListener): void {\n    if (typeof arg2 === 'string' && listener && isMaplibreSupportedPointerEventName(type)) {\n      this.mapInstance.off(type, arg2, listener);\n    } else if (typeof arg2 === 'function') {\n      this.mapInstance.off(type, arg2);\n    } else {\n      throw new Error(\"Invalid arguments passed to 'off' method\");\n    }\n  }\n}\n","import type { Geoman, MapInstanceWithGeoman } from '@/main.ts';\nimport { MaplibreAdapter } from '@/core/map/maplibre/index.ts';\n\nexport const getMapAdapter = (gm: Geoman, map: MapInstanceWithGeoman) => {\n  return new MaplibreAdapter(map, gm);\n};\n","import { isPartialLayer } from '@/utils/guards/map.ts';\nimport { cloneDeep, countBy, keyBy, merge, values } from 'lodash-es';\nimport log from 'loglevel';\n\nexport const mergeByTypeCustomizer = (objValue: unknown, srcValue: unknown) => {\n  if (!Array.isArray(objValue) || !Array.isArray(srcValue)) {\n    return undefined;\n  }\n\n  if (srcValue.some((item) => !isPartialLayer(item))) {\n    log.warn('Wrong partial layer detected for layer styles');\n    return undefined;\n  }\n\n  const baseMap = keyBy(objValue, 'type');\n\n  const countMap = countBy(srcValue, 'type');\n  if (Object.values(countMap).some((count) => count > 1)) {\n    throw new Error(\n      'Multiple layers for the same shape are detected. ' +\n        'Use \"useDefaultLayers: false\" and define layers manually.',\n    );\n  }\n\n  srcValue.forEach((item) => {\n    if (baseMap[item.type]) {\n      merge(baseMap[item.type], item);\n    } else {\n      baseMap[item.type] = cloneDeep(item);\n    }\n  });\n  return values(baseMap);\n};\n","import { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport { getDefaultOptions, trackDefaultUiEnabledState } from '@/core/options/defaults/index.ts';\nimport { mergeByTypeCustomizer } from '@/core/options/utils.ts';\nimport {\n  type ActionType,\n  type ControlOptions,\n  DRAW_MODES,\n  type GenericControlsOptions,\n  type Geoman,\n  type GmBaseModeEvent,\n  type GmControlSwitchEvent,\n  type GmOptionsData,\n  isGmModeEvent,\n  type ModeAction,\n  type ModeName,\n  type ModeType,\n} from '@/main.ts';\nimport { EDIT_MODES, HELPER_MODES } from '@/modes/constants.ts';\nimport { isGmDrawEvent, isGmEditEvent, isGmHelperEvent } from '@/utils/guards/modes.ts';\nimport { includesWithType } from '@/utils/typing.ts';\nimport mergeWith from 'lodash-es/mergeWith';\nimport log from 'loglevel';\nimport type { PartialDeep } from 'type-fest';\n\nexport class GmOptions {\n  gm: Geoman;\n\n  settings: GmOptionsData['settings'];\n  controls: GmOptionsData['controls'];\n  layerStyles: GmOptionsData['layerStyles'];\n\n  constructor(gm: Geoman, inputOptions: PartialDeep<GmOptionsData>) {\n    this.gm = gm;\n    const options = this.getMergedOptions(inputOptions);\n    this.settings = options.settings;\n    this.controls = options.controls;\n    this.layerStyles = options.layerStyles;\n  }\n\n  getMergedOptions(options: PartialDeep<GmOptionsData> = {}): GmOptionsData {\n    const defaultOptions = getDefaultOptions();\n\n    if (typeof options.settings?.controlsUiEnabledByDefault === 'boolean') {\n      defaultOptions.settings.controlsUiEnabledByDefault =\n        options.settings.controlsUiEnabledByDefault;\n    }\n\n    trackDefaultUiEnabledState(defaultOptions);\n\n    return mergeWith(defaultOptions, options, mergeByTypeCustomizer);\n  }\n\n  enableMode(modeType: ModeType, modeName: ModeName) {\n    const isModeEnabled = this.isModeEnabled(modeType, modeName);\n    const isModeAvailable = this.isModeAvailable(modeType, modeName);\n\n    if (!isModeAvailable) {\n      log.warn(`Unable to enable mode, \"${modeType}:${modeName}\" is not available`);\n    }\n\n    if (isModeEnabled || !isModeAvailable) {\n      return;\n    }\n\n    const sectionOptions = this.controls[modeType] as GenericControlsOptions;\n    const controlOptions = sectionOptions[modeName];\n    if (controlOptions) {\n      controlOptions.active = true;\n      this.fireModeEvent(modeType, modeName, 'mode_start');\n      this.fireControlEvent(modeType, modeName, 'on');\n      this.fireModeEvent(modeType, modeName, 'mode_started');\n    } else {\n      log.error(\"Can't find control section for\", modeType, modeName);\n    }\n  }\n\n  disableMode(modeType: ModeType, modeName: ModeName) {\n    const isModeEnabled = this.isModeEnabled(modeType, modeName);\n    const isModeAvailable = this.isModeAvailable(modeType, modeName);\n\n    if (!isModeEnabled || !isModeAvailable) {\n      return;\n    }\n\n    const sectionOptions = this.controls[modeType] as GenericControlsOptions;\n    const controlOptions = sectionOptions[modeName];\n    if (controlOptions) {\n      controlOptions.active = false;\n      this.fireModeEvent(modeType, modeName, 'mode_end');\n      this.fireControlEvent(modeType, modeName, 'off');\n      this.fireModeEvent(modeType, modeName, 'mode_ended');\n    } else {\n      log.error(\"Can't find control section for\", modeType, modeName);\n    }\n  }\n\n  syncModeState(modeType: ModeType, modeName: ModeName) {\n    // align options with current state\n    // it' possible to have \"active\" mode in options\n    // when it's not available (in free version for example)\n    const sectionOptions = this.controls[modeType] as GenericControlsOptions;\n    const controlOptions = sectionOptions[modeName];\n    const isModeAvailable = this.isModeAvailable(modeType, modeName);\n\n    if (controlOptions) {\n      if (isModeAvailable) {\n        if (controlOptions.active) {\n          this.enableMode(modeType, modeName);\n        } else {\n          this.disableMode(modeType, modeName);\n        }\n      } else {\n        console.log(`Not available mode: ${modeType}:${modeName}`);\n        controlOptions.active = false;\n        controlOptions.uiEnabled = false;\n      }\n    }\n  }\n\n  toggleMode(modeType: ModeType, modeName: ModeName) {\n    if (this.isModeEnabled(modeType, modeName)) {\n      this.disableMode(modeType, modeName);\n    } else {\n      this.enableMode(modeType, modeName);\n    }\n  }\n\n  isModeEnabled(actionType: ActionType, modeName: ModeName) {\n    return !!Object.entries(this.gm.actionInstances).find(([actionName, instance]) => {\n      return actionName === `${actionType}__${modeName}` && instance;\n    });\n  }\n\n  isModeAvailable(actionType: ActionType, modeName: ModeName): boolean {\n    if (actionType === 'draw' && includesWithType(modeName, DRAW_MODES)) {\n      return !!this.gm.drawClassMap[modeName];\n    } else if (actionType === 'edit' && includesWithType(modeName, EDIT_MODES)) {\n      return !!this.gm.editClassMap[modeName];\n    } else if (actionType === 'helper' && includesWithType(modeName, HELPER_MODES)) {\n      return !!this.gm.helperClassMap[modeName];\n    }\n\n    return false;\n  }\n\n  getControlOptions({\n    modeType,\n    modeName,\n  }: {\n    modeType: ModeType;\n    modeName: ModeName;\n  }): ControlOptions | null {\n    if (modeType && modeName) {\n      const sectionOptions = this.controls[modeType] as GenericControlsOptions;\n      return sectionOptions[modeName] || null;\n    }\n\n    return null;\n  }\n\n  fireModeEvent(sectionName: ActionType, modeName: ModeName, action: ModeAction) {\n    const payload: GmBaseModeEvent & { mode: ModeName } = {\n      name: `${GM_SYSTEM_PREFIX}:${modeName}:mode`,\n      level: 'system',\n      actionType: sectionName,\n      mode: modeName,\n      action,\n    };\n\n    if (isGmModeEvent(payload)) {\n      if (isGmDrawEvent(payload)) {\n        this.gm.events.fire(`${GM_SYSTEM_PREFIX}:${sectionName}`, payload);\n      } else if (isGmEditEvent(payload)) {\n        this.gm.events.fire(`${GM_SYSTEM_PREFIX}:${sectionName}`, payload);\n      } else if (isGmHelperEvent(payload)) {\n        this.gm.events.fire(`${GM_SYSTEM_PREFIX}:${sectionName}`, payload);\n      } else {\n        log.warn('Unknown mode event: ', payload);\n      }\n    }\n  }\n\n  fireControlEvent(\n    sectionName: ModeType,\n    modeName: ModeName,\n    action: GmControlSwitchEvent['action'],\n  ) {\n    const payload: GmControlSwitchEvent = {\n      name: `${GM_SYSTEM_PREFIX}:control:switch`,\n      level: 'system',\n      actionType: 'control',\n      section: sectionName,\n      mode: modeName,\n      action,\n    };\n    this.gm.events.fire(`${GM_SYSTEM_PREFIX}:control`, payload);\n  }\n}\n","import { BaseDomMarker } from '@/core/map/base/marker.ts';\nimport type { EventHandlers, Geoman, LngLatTuple, MapEventHadler, ScreenPoint } from '@/main.ts';\nimport { SnappingHelper } from '@/modes/helpers/snapping.ts';\nimport { convertToThrottled, isTouchScreen } from '@/utils/behavior.ts';\nimport { isMapPointerEvent } from '@/utils/guards/map.ts';\nimport type { BaseMapEvent } from '@mapLib/types/events.ts';\nimport log from 'loglevel';\n\ntype EnableMarkerParameters = {\n  lngLat?: LngLatTuple;\n  customMarker?: BaseDomMarker;\n  invisibleMarker?: boolean;\n};\n\nexport class MarkerPointer {\n  gm: Geoman;\n  marker: BaseDomMarker | null = null;\n  tmpMarker: BaseDomMarker | null = null;\n  declare throttledMethods: { onMouseMove: MapEventHadler };\n  declare eventHandlers: EventHandlers;\n  private snapping: boolean = false;\n  private oldSnapping: boolean | undefined = undefined;\n\n  constructor(gm: Geoman) {\n    this.gm = gm;\n    this.initEventHandlers();\n  }\n\n  get snappingHelper(): SnappingHelper | null {\n    return (this.gm.actionInstances.helper__snapping || null) as SnappingHelper | null;\n  }\n\n  initEventHandlers() {\n    this.throttledMethods = convertToThrottled(\n      {\n        onMouseMove: this.onMouseMove,\n      },\n      this,\n      this.gm.options.settings.throttlingDelay,\n    );\n\n    this.eventHandlers = {\n      mousemove: this.throttledMethods.onMouseMove.bind(this),\n    };\n  }\n\n  setSnapping(snapping: boolean) {\n    if (snapping && !this.snappingHelper) {\n      log.error('MarkerPointer: snapping is not available');\n      return;\n    }\n\n    this.snapping = snapping;\n  }\n\n  pauseSnapping() {\n    if (this.oldSnapping !== undefined) {\n      log.error('MarkerPointer: snapping is already paused');\n    }\n    this.oldSnapping = this.snapping;\n    this.setSnapping(false);\n  }\n\n  resumeSnapping() {\n    if (this.oldSnapping === undefined) {\n      log.error('MarkerPointer: resumeSnapping is called before pauseSnapping');\n      this.setSnapping(true);\n    } else {\n      this.setSnapping(this.oldSnapping);\n      this.oldSnapping = undefined;\n    }\n  }\n\n  enable(\n    { lngLat, customMarker, invisibleMarker }: EnableMarkerParameters = {\n      lngLat: [0, 0],\n      customMarker: undefined,\n      invisibleMarker: false,\n    },\n  ) {\n    if (isTouchScreen()) {\n      // marker pointer is not available on touch screens\n      return;\n    }\n\n    if (customMarker && invisibleMarker) {\n      throw new Error(\"MarkerPointer: customMarker and invisibleMarker can't be used together\");\n    }\n    if (this.marker) {\n      throw new Error('MarkerPointer: marker is already enabled');\n    }\n\n    this.gm.events.bus.attachEvents(this.eventHandlers);\n    if (invisibleMarker) {\n      this.marker = this.createInvisibleMarker(lngLat || [0, 0]);\n    } else {\n      this.marker = customMarker || this.createMarker(lngLat || [0, 0]);\n    }\n\n    if (this.gm.getActiveDrawModes().length) {\n      this.gm.mapAdapter.setCursor('crosshair');\n    } else {\n      // this.gm.setMapCursor('pointer');\n    }\n  }\n\n  disable() {\n    if (this.marker) {\n      this.gm.events.bus.detachEvents(this.eventHandlers);\n      this.marker.remove();\n      this.marker = null;\n    }\n    this.gm.mapAdapter.setCursor('');\n  }\n\n  createMarker(lngLat: LngLatTuple = [0, 0]): BaseDomMarker {\n    return this.gm.mapAdapter.createDomMarker(\n      {\n        anchor: 'center',\n        element: this.gm.createSvgMarkerElement('control', { pointerEvents: 'none' }),\n      },\n      lngLat,\n    ) as BaseDomMarker; // todo: create a marker abstraction\n  }\n\n  createInvisibleMarker(lngLat: LngLatTuple = [0, 0]): BaseDomMarker {\n    const htmlElement = document.createElement('div');\n    htmlElement.style.width = '0px';\n    htmlElement.style.height = '0px';\n\n    return this.gm.mapAdapter.createDomMarker(\n      {\n        anchor: 'center',\n        element: htmlElement,\n      },\n      lngLat,\n    ) as BaseDomMarker; // todo: create a marker abstraction\n  }\n\n  onMouseMove(event: BaseMapEvent) {\n    if (isMapPointerEvent(event, { warning: true }) && this.marker) {\n      if (this.snapping && this.snappingHelper) {\n        const point: ScreenPoint = [event.point.x, event.point.y];\n        const snappedLngLat = this.snappingHelper.getSnappedLngLat(event.lngLat.toArray(), point);\n        this.marker.setLngLat(snappedLngLat);\n      } else {\n        this.marker.setLngLat(event.lngLat.toArray());\n      }\n    }\n    return { next: true };\n  }\n\n  syncTmpMarker(lngLat: LngLatTuple) {\n    if (!this.tmpMarker) {\n      this.tmpMarker = this.createMarker(lngLat);\n    }\n    this.tmpMarker.setLngLat(lngLat);\n  }\n}\n","export const customShapeTriangle = {\n  type: 'Feature',\n  properties: {\n    shape: 'polygon',\n  },\n  geometry: {\n    type: 'MultiPolygon',\n    coordinates: [\n      [\n        [\n          [4.0, 51.2],\n          [5.4, 52.4],\n          [6.8, 51.2],\n          [4.0, 51.2],\n        ],\n      ],\n    ],\n  },\n};\n\nexport const customShapeRectangle = {\n  type: 'Feature',\n  properties: {\n    shape: 'rectangle',\n  },\n  geometry: {\n    type: 'Polygon',\n    coordinates: [\n      [\n        [-0.47, 51.67],\n        [1.43, 51.67],\n        [1.43, 53.32],\n        [-0.47, 53.32],\n        [-0.47, 51.67],\n      ],\n    ],\n  },\n};\n","import type { GmFeatureBeforeCreateEvent, GmFeatureBeforeUpdateEvent } from '@/main.ts';\nimport { isGmEvent } from '@/utils/guards/events/index.ts';\nimport { GM_SYSTEM_PREFIX } from '@/core/constants.ts';\n\nexport const isGmFeatureBeforeCreateEvent = (\n  payload: unknown,\n): payload is GmFeatureBeforeCreateEvent => {\n  return isGmEvent(payload) && payload.name === `${GM_SYSTEM_PREFIX}:feature:before_create`;\n};\n\nexport const isGmFeatureBeforeUpdateEvent = (\n  payload: unknown,\n): payload is GmFeatureBeforeUpdateEvent => {\n  return isGmEvent(payload) && payload.name === `${GM_SYSTEM_PREFIX}:feature:before_update`;\n};\n","import type { GmBaseEvent } from '@/types/events/index.ts';\n\nexport const modeActions = ['mode_start', 'mode_started', 'mode_end', 'mode_ended'] as const;\n\nexport type ModeAction = (typeof modeActions)[number];\n\nexport interface GmBaseModeEvent extends GmBaseEvent {\n  action: ModeAction;\n}\n","import { type GmBaseModeEvent } from '@/types/index.ts';\nimport { modeActions } from '@/types/events/mode.ts';\nimport { includesWithType } from '@/utils/typing.ts';\nimport { isGmEvent } from '@/utils/guards/index.ts';\n\nexport const isGmModeEvent = (payload: unknown): payload is GmBaseModeEvent => {\n  return isGmEvent(payload) && includesWithType(payload.action, modeActions);\n};\n","import type { NonEmptyArray } from '@/types/index.ts';\n\nexport const isNonEmptyArray = <T>(arr: T[] | readonly T[]): arr is NonEmptyArray<T> => {\n  return arr.length > 0;\n};\n\n// exports\nexport { isGmEvent } from '@/utils/guards/events/index.ts';\nexport { isModeName } from '@/utils/guards/modes.ts';\nexport { isHelperModeName } from '@/utils/guards/modes.ts';\nexport { isEditModeName } from '@/utils/guards/modes.ts';\nexport { isDrawModeName } from '@/utils/guards/modes.ts';\nexport { isActionType } from '@/utils/guards/modes.ts';\nexport { isMapPointerEvent } from '@/utils/guards/map.ts';\nexport { isMapWithOnceMethod } from '@/utils/guards/map.ts';\nexport { isBaseMapEventName } from '@/utils/guards/map.ts';\nexport { isPointerEventName } from '@/utils/guards/map.ts';\nexport { isGmModeEvent } from '@/utils/guards/events/mode.ts';\n","// index.ts\nimport * as polyclip from \"polyclip-ts\";\nimport { multiPolygon, polygon } from \"@turf/helpers\";\nimport { geomEach } from \"@turf/meta\";\nfunction union2(features, options = {}) {\n  const geoms = [];\n  geomEach(features, (geom) => {\n    geoms.push(geom.coordinates);\n  });\n  if (geoms.length < 2) {\n    throw new Error(\"Must have at least 2 geometries\");\n  }\n  const unioned = polyclip.union(geoms[0], ...geoms.slice(1));\n  if (unioned.length === 0) return null;\n  if (unioned.length === 1) return polygon(unioned[0], options.properties);\n  else return multiPolygon(unioned, options.properties);\n}\nvar index_default = union2;\nexport {\n  index_default as default,\n  union2 as union\n};\n//# sourceMappingURL=index.js.map","import { FeatureData } from '@/core/features/feature-data.ts';\nimport {\n  type EditModeName,\n  type FeatureShape,\n  type FeatureSourceName,\n  isMapPointerEvent,\n  type MapHandlerReturnData,\n} from '@/main.ts';\nimport { BaseEdit } from '@/modes/edit/base.ts';\nimport { isNonEmptyArray } from '@/utils/guards/index.ts';\nimport type { BaseMapEvent, BaseMapPointerEvent } from '@mapLib/types/events.ts';\nimport booleanIntersects from '@turf/boolean-intersects';\nimport difference from '@turf/difference';\nimport union from '@turf/union';\nimport type { Feature, FeatureCollection, MultiPolygon, Polygon } from 'geojson';\nimport log from 'loglevel';\n\nimport { SOURCES } from '@/core/features/constants.ts';\n\nexport abstract class BaseGroupEdit extends BaseEdit {\n  abstract mode: EditModeName;\n  abstract allowedShapeTypes: Array<FeatureShape>;\n  features: Array<FeatureData> = [];\n  featureData: FeatureData | null = null;\n  eventHandlers = {\n    click: this.onMouseClick.bind(this),\n  };\n\n  onStartAction() {\n    // ...\n  }\n\n  onEndAction() {\n    this.features.forEach((featureData) => {\n      featureData.changeSource({ sourceName: SOURCES.main, atomic: true });\n    });\n    this.features = [];\n  }\n\n  onMouseClick(event: BaseMapEvent): MapHandlerReturnData {\n    if (!isMapPointerEvent(event)) {\n      return { next: true };\n    }\n\n    // check if a clicked feature temporary, if yes, convert it to regular\n    const featureUnselected = this.unselectFeature(event);\n    if (featureUnselected) {\n      return { next: true };\n    }\n\n    // if a feature is regular, convert it to temporary and add to the features array\n    const featureData = this.getAllowedFeatureByMouseEvent({ event, sourceNames: [SOURCES.main] });\n    if (featureData && this.isFeatureAllowedToGroup(featureData)) {\n      featureData.changeSource({ sourceName: SOURCES.temporary, atomic: true });\n      this.features.push(featureData);\n    }\n\n    // if there are two features in the array, group them\n    if (this.features.length > 1) {\n      this.groupFeatures();\n      return { next: true };\n    }\n\n    return { next: true };\n  }\n\n  unselectFeature(event: BaseMapPointerEvent) {\n    const tmpFeatureData = this.getAllowedFeatureByMouseEvent({\n      event,\n      sourceNames: [SOURCES.temporary],\n    });\n    if (tmpFeatureData) {\n      const featureIndex = this.features.findIndex((featureData) => featureData === tmpFeatureData);\n      if (featureIndex > -1) {\n        this.features.splice(featureIndex, 1);\n      }\n      tmpFeatureData.changeSource({ sourceName: SOURCES.main, atomic: true });\n      return true;\n    }\n    return false;\n  }\n\n  getAllowedFeatureByMouseEvent({\n    event,\n    sourceNames,\n  }: {\n    event: BaseMapPointerEvent;\n    sourceNames: Array<FeatureSourceName>;\n  }) {\n    const featureData = this.getFeatureByMouseEvent({ event, sourceNames });\n    if (featureData && this.allowedShapeTypes.includes(featureData.shape)) {\n      return featureData;\n    }\n    return null;\n  }\n\n  isFeatureAllowedToGroup(featureData: FeatureData) {\n    if (!this.allowedShapeTypes.includes(featureData.shape)) {\n      return false;\n    }\n    if (this.features.length === 0) {\n      return true;\n    }\n\n    const newFeatureGeoJson = featureData.getGeoJson();\n    return this.features.every((feature) =>\n      booleanIntersects(feature.getGeoJson(), newFeatureGeoJson),\n    );\n  }\n\n  groupFeatures() {\n    if (!this.features.length) {\n      log.error('BaseGroupEdit.groupFeatures: no features to group');\n      return;\n    }\n\n    const featureCollection: FeatureCollection<Polygon | MultiPolygon> = {\n      type: 'FeatureCollection',\n      features: this.features\n        .map((featureData) => {\n          const geoJson = featureData.getGeoJson();\n          if (['Polygon', 'MultiPolygon'].includes(geoJson.geometry.type)) {\n            return geoJson as Feature<Polygon | MultiPolygon>;\n          }\n          return null;\n        })\n        .filter((feature) => !!feature),\n    };\n\n    let resultGeoJson: Feature<Polygon | MultiPolygon> | null = null;\n    if (this.mode === 'union') {\n      resultGeoJson = union(featureCollection);\n    } else if (this.mode === 'difference') {\n      resultGeoJson = difference(featureCollection);\n    }\n\n    if (resultGeoJson) {\n      const featureData = this.gm.features.createFeature({\n        shapeGeoJson: {\n          ...resultGeoJson,\n          properties: {\n            ...resultGeoJson.properties,\n            shape: 'polygon',\n          },\n        },\n        sourceName: SOURCES.main,\n      });\n\n      this.features.forEach((feature) => {\n        this.gm.features.delete(feature);\n      });\n\n      if (featureData && isNonEmptyArray(this.features)) {\n        this.fireFeatureUpdatedEvent({\n          sourceFeatures: this.features,\n          targetFeatures: [featureData],\n        });\n      }\n\n      this.features = [];\n    }\n  }\n}\n","/* A MapLibre Plugin For Drawing and Editing Geometry Layers\n * Copyright (C) Geoman.io - All Rights Reserved\n */\nimport defaultMarker from '@/assets/images/markers/default-marker.png';\nimport { GM_PREFIX, GM_SYSTEM_PREFIX } from '@/core/constants.ts';\nimport GmControl from '@/core/controls/index.ts';\nimport { type EventForwarder } from '@/core/events/forwarder.ts';\nimport GmEvents from '@/core/events/index.ts';\nimport { Features } from '@/core/features/index.ts';\nimport { BaseMapAdapter } from '@/core/map/base/index.ts';\nimport { getMapAdapter } from '@/core/map/index.ts';\nimport { GmOptions } from '@/core/options/index.ts';\nimport { BaseDraw } from '@/modes/draw/base.ts';\n\nimport { drawClassMap } from '@/modes/draw/index.ts';\nimport { BaseEdit } from '@/modes/edit/base.ts';\nimport { editClassMap } from '@/modes/edit/index.ts';\nimport { BaseHelper } from '@/modes/helpers/base.ts';\nimport { helperClassMap } from '@/modes/helpers/index.ts';\nimport '@/styles/map/maplibre.css';\nimport '@/styles/style.css';\nimport type { ModeName } from '@/types/controls.ts';\nimport type { GmControlLoadEvent } from '@/types/index.ts';\nimport { type AnyMapInstance, type LngLatTuple } from '@/types/map/index.ts';\nimport {\n  type ActionInstance,\n  type ActionInstanceKey,\n  type DrawModeName,\n  type EditModeName,\n  type HelperModeName,\n} from '@/types/modes/index.ts';\nimport type { GmOptionsData, ModeType } from '@/types/options.ts';\nimport { MarkerPointer } from '@/utils/draw/marker-pointer.ts';\nimport { isMapWithOnceMethod } from '@/utils/guards/map.ts';\nimport { isGmDrawEvent, isModeName, isModeType } from '@/utils/guards/modes.ts';\nimport { typedKeys } from '@/utils/typing.ts';\nimport log from 'loglevel';\nimport type { PartialDeep } from 'type-fest';\nimport { withPromiseTimeoutRace } from '@/utils/behavior.ts';\n\n// declare module 'maplibre-gl' {\n//   interface Map {\n//     gm?: Geoman;\n//   }\n// }\n\nexport class Geoman {\n  mapAdapterInstance: BaseMapAdapter<AnyMapInstance> | null = null;\n  globalLngLatBounds: [LngLatTuple, LngLatTuple] = this.getGlobalLngLatBounds();\n  features: Features;\n  loaded: boolean = false;\n  destroyed: boolean = false;\n\n  options: GmOptions;\n  events: GmEvents;\n  control: GmControl;\n\n  actionInstances: { [key in ActionInstanceKey]?: ActionInstance } = {};\n  markerPointer: MarkerPointer;\n\n  constructor(map: AnyMapInstance, options: PartialDeep<GmOptionsData> = {}) {\n    this.options = this.initCoreOptions(options);\n    this.events = this.initCoreEvents();\n    this.features = this.initCoreFeatures();\n    this.control = this.initCoreControls();\n    this.markerPointer = this.initMarkerPointer();\n\n    const mapWithGeoman = Object.assign(map, { gm: this });\n    this.mapAdapterInstance = getMapAdapter(this, mapWithGeoman);\n\n    this.waitForBaseMap()\n      .then(this.init.bind(this))\n      .catch((error) => {\n        log.error('Geoman initialization failed:', error);\n        // Use destroy() for proper cleanup of any registered events/resources.\n        // Note: destroy() is async but we don't need to await it here since\n        // we're in a fire-and-forget catch block and destroy() handles the\n        // not-yet-loaded case synchronously for the critical cleanup paths.\n        this.destroy();\n      });\n  }\n\n  get drawClassMap() {\n    return drawClassMap;\n  }\n\n  get editClassMap() {\n    return editClassMap;\n  }\n\n  get helperClassMap() {\n    return helperClassMap;\n  }\n\n  get mapAdapter(): BaseMapAdapter<AnyMapInstance> {\n    if (this.mapAdapterInstance) {\n      return this.mapAdapterInstance;\n    }\n    log.trace('Map adapter is not initialized');\n    throw new Error('Map adapter is not initialized');\n  }\n\n  initCoreOptions(options: PartialDeep<GmOptionsData> = {}) {\n    return new GmOptions(this, options);\n  }\n\n  initCoreEvents() {\n    return new GmEvents(this);\n  }\n\n  initCoreFeatures() {\n    return new Features(this);\n  }\n\n  initCoreControls() {\n    return new GmControl(this);\n  }\n\n  initMarkerPointer() {\n    return new MarkerPointer(this);\n  }\n\n  addControls(controlsElement: HTMLElement | undefined = undefined) {\n    return new Promise<void>((resolve) => {\n      const handleCreateControls = async () => {\n        if (controlsElement) {\n          this.control.createControls(controlsElement);\n        } else {\n          this.mapAdapter.addControl(this.control);\n        }\n        await this.onMapLoad();\n        resolve();\n      };\n\n      handleCreateControls().then();\n    });\n  }\n\n  async waitForBaseMap() {\n    const map = this.mapAdapter.mapInstance;\n    if (!isMapWithOnceMethod(map)) {\n      log.error('Map instance does not have a \"once\" method', map);\n      return;\n    }\n\n    // Fast path: if already loaded, return immediately\n    if (this.mapAdapter.isLoaded()) {\n      return map;\n    }\n\n    // Fix for race condition (see https://github.com/maplibre/maplibre-gl-js/issues/4024):\n    // The map might finish loading between our isLoaded() check above and registering\n    // the 'load' event listener. Since MapLibre's 'load' event only fires once, we would\n    // miss it and timeout after 60 seconds. Solution: re-check isLoaded() after\n    // registering the listener to close the race window.\n    await withPromiseTimeoutRace(\n      new Promise((resolve) => {\n        const onLoad = () => resolve(map);\n        map.once('load', onLoad);\n\n        // Check if map loaded between the isLoaded() check above and the once() call.\n        // If so, remove the listener and resolve immediately. Since the map is already\n        // loaded, the 'load' event won't fire again, so we must clean up the listener.\n        if (this.mapAdapter.isLoaded()) {\n          map.off('load', onLoad);\n          resolve(map);\n        }\n      }),\n      'waitForBaseMap failed',\n    );\n    return map;\n  }\n\n  async waitForGeomanLoaded(): Promise<Geoman | undefined> {\n    if (this.loaded) {\n      return this;\n    }\n\n    // If destroyed (e.g., initialization failed), return undefined immediately\n    // to prevent callers from waiting on a timeout\n    if (this.destroyed) {\n      return;\n    }\n\n    const map = await this.waitForBaseMap();\n    if (!map) {\n      log.error('Map instance is not available', map);\n      return;\n    }\n\n    // Same race condition fix as waitForBaseMap - check loaded state after\n    // registering the listener to close the timing window\n    const eventName = `${GM_PREFIX}:loaded`;\n    await withPromiseTimeoutRace(\n      new Promise((resolve) => {\n        const onLoaded = () => resolve(this);\n        map.once(eventName, onLoaded);\n\n        // Check if loaded between the this.loaded check above and the once() call.\n        // If so, remove the listener and resolve immediately.\n        if (this.loaded) {\n          map.off(eventName, onLoaded);\n          resolve(this);\n        }\n      }),\n      'waitForGeomanLoaded failed',\n    );\n    return this;\n  }\n\n  async init() {\n    // Check if destroyed before continuing initialization\n    if (this.destroyed) {\n      return;\n    }\n    this.features.init();\n\n    // Check again after features init, before async controls\n    if (this.destroyed) {\n      return;\n    }\n    await this.addControls();\n  }\n\n  /**\n   * Destroys the Geoman instance and cleans up resources.\n   *\n   * This method can be called at any point in the lifecycle:\n   * - Before initialization completes: cancels pending init and cleans up synchronously\n   * - After initialization completes: performs full cleanup including controls\n   *\n   * For React StrictMode compatibility, this method performs synchronous cleanup\n   * of the `gm` reference on the map instance, allowing immediate re-initialization.\n   */\n  async destroy({ removeSources }: { removeSources: boolean } = { removeSources: false }) {\n    // Mark as destroyed early to prevent init() from continuing\n    this.destroyed = true;\n\n    // Synchronously remove gm reference to allow re-initialization\n    // This is critical for React StrictMode compatibility\n    if (this.mapAdapterInstance && 'gm' in this.mapAdapterInstance.mapInstance) {\n      delete this.mapAdapterInstance.mapInstance.gm;\n    }\n\n    // Only perform full cleanup if initialization completed\n    if (this.loaded) {\n      // removeControls() will detach events via control.onRemove()\n      this.removeControls();\n      // Remove images that were added during initialization\n      this.mapAdapter.removeImage('default-marker');\n    } else {\n      // If not loaded, detach any events that may have been registered\n      this.events.bus.detachAllEvents();\n    }\n\n    if (removeSources) {\n      for (const source of Object.values(this.features.sources)) {\n        if (source) {\n          source.remove();\n        }\n      }\n    }\n  }\n\n  removeControls() {\n    this.disableAllModes();\n    this.mapAdapter.removeControl(this.control);\n  }\n\n  async onMapLoad() {\n    if (this.loaded || this.destroyed) {\n      return;\n    }\n\n    await this.mapAdapter.loadImage({\n      id: 'default-marker',\n      image: defaultMarker,\n    });\n\n    // Check if destroyed after async operation\n    if (this.destroyed) {\n      return;\n    }\n\n    const payload: GmControlLoadEvent = {\n      name: `${GM_SYSTEM_PREFIX}:control:load`,\n      level: 'system',\n      actionType: 'control',\n      action: 'loaded',\n    };\n    this.events.fire(`${GM_SYSTEM_PREFIX}:control`, payload);\n    this.loaded = true;\n  }\n\n  disableAllModes() {\n    typedKeys(this.actionInstances).forEach((key) => {\n      const [actionType, mode] = key.split('__');\n\n      if (isModeType(actionType) && isModeName(mode)) {\n        this.options.disableMode(actionType, mode);\n      }\n    });\n  }\n\n  getActiveDrawModes(): Array<DrawModeName> {\n    return typedKeys(this.actionInstances)\n      .map((key) => {\n        const instance = this.actionInstances[key];\n        return instance instanceof BaseDraw ? instance.mode : null;\n      })\n      .filter((mode): mode is DrawModeName => mode !== null);\n  }\n\n  getActiveEditModes(): Array<EditModeName> {\n    return typedKeys(this.actionInstances)\n      .map((key) => {\n        const instance = this.actionInstances[key];\n        return instance instanceof BaseEdit ? instance.mode : null;\n      })\n      .filter((mode): mode is EditModeName => mode !== null);\n  }\n\n  getActiveHelperModes(): Array<HelperModeName> {\n    return typedKeys(this.actionInstances)\n      .map((key) => {\n        const instance = this.actionInstances[key];\n        return instance instanceof BaseHelper ? instance.mode : null;\n      })\n      .filter((mode): mode is HelperModeName => mode !== null);\n  }\n\n  getGlobalLngLatBounds(): [LngLatTuple, LngLatTuple] {\n    // these coordinates are used to restrict the map to the maximum possible bounds\n    // mercator projection is used for the map, so the maximum latitude is MAX_VALID_LATITUDE\n    // import { MAX_VALID_LATITUDE } from 'maplibre-gl/src/geo/transform.ts';\n\n    const MAX_VALID_LATITUDE = 85.051129;\n    return [\n      [-179.99999, -MAX_VALID_LATITUDE],\n      [179.99999, MAX_VALID_LATITUDE],\n    ];\n  }\n\n  setGlobalEventsListener(callback: EventForwarder['globalEventsListener'] = null) {\n    this.events.bus.forwarder.globalEventsListener = callback;\n  }\n\n  createSvgMarkerElement(\n    type: keyof GmOptions['settings']['markerIcons'],\n    style: Partial<CSSStyleDeclaration> | undefined = undefined,\n  ): HTMLElement {\n    const markerIcons = this.options.settings.markerIcons;\n\n    if (!markerIcons[type]) {\n      log.error(`createMarkerElement: marker type \"${type}\" not found`);\n    }\n\n    const element = document.createElement('div');\n    element.classList.add('marker-wrapper');\n    element.style.lineHeight = '0';\n\n    element.innerHTML = markerIcons[type] || 'NO_ICON';\n    const svgElement = element.firstChild as HTMLElement;\n\n    if (typeof svgElement !== 'object') {\n      log.error(`createMarkerElement: no icon \"${type}\" found`);\n      throw new Error(`No icon \"${type}\" found`);\n    }\n\n    if (style) {\n      Object.assign(svgElement.style, style);\n    }\n\n    return element;\n  }\n\n  enableMode(actionType: ModeType, modeName: ModeName) {\n    this.options.enableMode(actionType, modeName);\n  }\n\n  disableMode(actionType: ModeType, modeName: ModeName) {\n    this.options.disableMode(actionType, modeName);\n  }\n\n  toggleMode(actionType: ModeType, modeName: ModeName) {\n    this.options.toggleMode(actionType, modeName);\n  }\n\n  isModeEnabled(actionType: ModeType, modeName: ModeName) {\n    return this.options.isModeEnabled(actionType, modeName);\n  }\n\n  // helper methods for compatibility with the old API\n  // draw (draw:*)\n  enableDraw(shape: DrawModeName) {\n    this.options.enableMode('draw', shape);\n  }\n\n  disableDraw() {\n    this.getActiveDrawModes().forEach((shape) => this.options.disableMode('draw', shape));\n  }\n\n  toggleDraw(shape: DrawModeName) {\n    this.options.toggleMode('draw', shape);\n  }\n\n  drawEnabled(shape: DrawModeName) {\n    return this.options.isModeEnabled('draw', shape);\n  }\n\n  // drag(edit:drag)\n  enableGlobalDragMode() {\n    this.options.enableMode('edit', 'drag');\n  }\n\n  disableGlobalDragMode() {\n    this.options.disableMode('edit', 'drag');\n  }\n\n  toggleGlobalDragMode() {\n    this.options.toggleMode('edit', 'drag');\n  }\n\n  globalDragModeEnabled() {\n    return this.options.isModeEnabled('edit', 'drag');\n  }\n\n  // edit (edit:change)\n  enableGlobalEditMode() {\n    this.options.enableMode('edit', 'change');\n  }\n\n  disableGlobalEditMode() {\n    this.options.disableMode('edit', 'change');\n  }\n\n  toggleGlobalEditMode() {\n    this.options.toggleMode('edit', 'change');\n  }\n\n  globalEditModeEnabled() {\n    return this.options.isModeEnabled('edit', 'change');\n  }\n\n  // rotate (edit:rotate)\n  enableGlobalRotateMode() {\n    this.options.enableMode('edit', 'rotate');\n  }\n\n  disableGlobalRotateMode() {\n    this.options.disableMode('edit', 'rotate');\n  }\n\n  toggleGlobalRotateMode() {\n    this.options.toggleMode('edit', 'rotate');\n  }\n\n  globalRotateModeEnabled() {\n    return this.options.isModeEnabled('edit', 'rotate');\n  }\n\n  // cut (edit:cut)\n  enableGlobalCutMode() {\n    this.options.enableMode('edit', 'cut');\n  }\n\n  disableGlobalCutMode() {\n    this.options.disableMode('edit', 'cut');\n  }\n\n  toggleGlobalCutMode() {\n    this.options.toggleMode('edit', 'cut');\n  }\n\n  globalCutModeEnabled() {\n    return this.options.isModeEnabled('edit', 'cut');\n  }\n\n  // remove (edit:delete)\n  enableGlobalRemovalMode() {\n    this.options.enableMode('edit', 'delete');\n  }\n\n  disableGlobalRemovalMode() {\n    this.options.disableMode('edit', 'delete');\n  }\n\n  toggleGlobalRemovalMode() {\n    this.options.toggleMode('edit', 'delete');\n  }\n\n  globalRemovalModeEnabled() {\n    return this.options.isModeEnabled('edit', 'delete');\n  }\n}\n\nexport const createGeomanInstance = async (\n  map: AnyMapInstance,\n  options: PartialDeep<GmOptionsData>,\n) => {\n  const geoman = new Geoman(map, options);\n  const result = await geoman.waitForGeomanLoaded();\n\n  // If initialization failed (destroyed or returned undefined), throw an error\n  if (!result || geoman.destroyed) {\n    throw new Error('Geoman initialization failed');\n  }\n\n  return geoman;\n};\n\n// export all possible types to make them available in rollup-dts\nexport * from '@/types/index.ts';\n\n// constants\nexport { controlIcons } from '@/core/options/icons.ts';\nexport { default as defaultLayerStyles } from '@/core/options/layers/style.ts';\nexport { customShapeRectangle, customShapeTriangle } from '@/core/options/shapes.ts';\n\n// core classes\nexport { GmOptions } from '@/core/options/index.ts';\nexport { drawClassMap, editClassMap, helperClassMap };\n\n// utils\nexport { mergeByTypeCustomizer } from '@/core/options/utils.ts';\nexport { convertToThrottled } from '@/utils/behavior.ts';\nexport { isGeoJsonFeatureInPolygon, moveFeatureData, moveGeoJson } from '@/utils/features.ts';\nexport {\n  boundsContains,\n  boundsToBBox,\n  calculatePerimeter,\n  convertToLineStringFeatureCollection,\n  eachCoordinateWithPath,\n  eachSegmentWithPath,\n  findCoordinateWithPath,\n  geoJsonPointToLngLat,\n  getEuclideanDistance,\n  getEuclideanSegmentNearestPoint,\n  getGeoJsonCoordinatesCount,\n  getGeoJsonFirstPoint,\n  getLngLatDiff,\n  isEqualPosition,\n  isMultiPolygonFeature,\n  isPolygonFeature,\n  lngLatToGeoJsonPoint,\n  twoCoordsToLineString,\n} from '@/utils/geojson.ts';\nexport { formatArea, formatDistance, toMod } from '@/utils/number.ts';\nexport { includesWithType, typedKeys } from '@/utils/typing.ts';\n\n// guards\nexport {\n  isGmDrawFreehandDrawerEvent,\n  isGmDrawLineDrawerEvent,\n  isGmDrawShapeEvent,\n} from '@/utils/guards/events/draw.ts';\nexport { isGmEditEvent } from '@/utils/guards/events/edit.ts';\nexport {\n  isGmFeatureBeforeCreateEvent,\n  isGmFeatureBeforeUpdateEvent,\n} from '@/utils/guards/events/features.ts';\nexport { isGmHelperEvent } from '@/utils/guards/events/helper.ts';\nexport { isGmControlEvent, isGmEvent } from '@/utils/guards/events/index.ts';\nexport * from '@/utils/guards/index.ts';\nexport { isGmDrawEvent };\n\n// features\nexport { FeatureData } from '@/core/features/feature-data.ts';\n\n// base adapter classes\nexport { BaseMapAdapter } from '@/core/map/base/index.ts';\nexport { BaseLayer } from '@/core/map/base/layer.ts';\nexport { BaseDomMarker } from '@/core/map/base/marker.ts';\nexport { BasePopup } from '@/core/map/base/popup.ts';\nexport { BaseSource } from '@/core/map/base/source.ts';\n\n// base actions\nexport { BaseAction } from '@/modes/base-action.ts';\nexport { BaseDraw } from '@/modes/draw/base.ts';\nexport { BaseDrag } from '@/modes/edit/base-drag.ts';\nexport { BaseGroupEdit } from '@/modes/edit/base-group.ts';\nexport { BaseEdit } from '@/modes/edit/base.ts';\nexport { BaseHelper } from '@/modes/helpers/base.ts';\n\n// specific actions\nexport { ShapeMarkersHelper } from '@/modes/helpers/shape-markers.ts';\nexport { LineDrawer } from '@/utils/draw/line-drawer.ts';\nexport { MarkerPointer } from '@/utils/draw/marker-pointer.ts';\n\nexport { GM_PREFIX, IS_PRO } from '@/core/constants.ts';\nexport { DRAW_MODES } from '@/modes/constants.ts';\nexport { EXTRA_DRAW_MODES } from '@/modes/constants.ts';\nexport { SHAPE_NAMES } from '@/modes/constants.ts';\nexport {\n  FEATURE_PROPERTY_PREFIX,\n  FEATURE_ID_PROPERTY,\n  SOURCES,\n} from '@/core/features/constants.ts';\nexport { HELPER_MODES } from '@/modes/constants.ts';\nexport { EDIT_MODES } from '@/modes/constants.ts';\nexport { isGmModeEvent } from '@/utils/guards/events/mode.ts';\n"],"names":["defaultMarker$1","geomanVersion","GM_PREFIX","GM_SYSTEM_PREFIX","IS_PRO","systemControls","change","circleMarker","circle$1","ellipse$1","drag","line","marker","polygon$1","rectangle","remove","rotate","snapGuides","textMarker","autoTrace","copy","customShape","cut","difference$1","freehand","geoFencing","lasso","lineSimplification","measurements","mouse","pin","scale","snapping","split","union$1","zoomToFeatures","controlIcons","circle","ellipse","polygon","union","difference","getCircleMarkerStyles","styleVariables","getControlMarkerStyles","getLineStyles","getMarkerStyles","getPolygonStyles","getSecondaryControlMarkerStyles","getSnapGuideStyles","FEATURE_PROPERTY_PREFIX","FEATURE_ID_PROPERTY","LOAD_TIMEOUT","SOURCES","getTextMarkerStyles","sourceStyles","styles","defaultMarker","defaultShapeMarker","defaultOptions","defaultLayerStyles","freeGlobal","freeSelf","root","Symbol","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","getRawTag","value","isOwn","tag","unmasked","result","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","isSymbol","arrayMap","array","iteratee","index","length","isArray","symbolProto","symbolToString","baseToString","reWhitespace","trimmedEndIndex","string","reTrimStart","baseTrim","isObject","type","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber","other","isBinary","identity","asyncTag","funcTag","genTag","proxyTag","isFunction","coreJsData","maskSrcKey","uid","isMasked","func","funcProto","funcToString","toSource","reRegExpChar","reIsHostCtor","reIsNative","baseIsNative","pattern","getValue","object","key","getNative","WeakMap","objectCreate","baseCreate","proto","apply","thisArg","args","noop","copyArray","source","HOT_COUNT","HOT_SPAN","nativeNow","shortOut","count","lastCalled","stamp","remaining","constant","defineProperty","baseSetToString","setToString","arrayEach","baseFindIndex","predicate","fromIndex","fromRight","baseIsNaN","strictIndexOf","baseIndexOf","arrayIncludes","MAX_SAFE_INTEGER","reIsUint","isIndex","baseAssignValue","eq","assignValue","objValue","copyObject","props","customizer","isNew","newValue","nativeMax","overRest","start","transform","otherArgs","baseRest","isLength","isArrayLike","isIterateeCall","createAssigner","assigner","sources","guard","isPrototype","Ctor","baseTimes","n","argsTag","baseIsArguments","propertyIsEnumerable","isArguments","stubFalse","freeExports","freeModule","moduleExports","Buffer","nativeIsBuffer","isBuffer","arrayTag","boolTag","dateTag","errorTag","mapTag","numberTag","objectTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","baseIsTypedArray","baseUnary","freeProcess","nodeUtil","types","nodeIsTypedArray","isTypedArray","arrayLikeKeys","inherited","isArr","isArg","isBuff","isType","skipIndexes","overArg","arg","nativeKeys","baseKeys","keys","nativeKeysIn","baseKeysIn","isProto","keysIn","reIsDeepProp","reIsPlainProp","isKey","nativeCreate","hashClear","hashDelete","HASH_UNDEFINED","hashGet","data","hashHas","hashSet","Hash","entries","entry","listCacheClear","assocIndexOf","arrayProto","splice","listCacheDelete","lastIndex","listCacheGet","listCacheHas","listCacheSet","ListCache","Map","mapCacheClear","isKeyable","getMapData","map","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","size","MapCache","FUNC_ERROR_TEXT","memoize","resolver","memoized","cache","MAX_MEMOIZE_SIZE","memoizeCapped","rePropName","reEscapeChar","stringToPath","match","number","quote","subString","toString","castPath","toKey","baseGet","path","get","defaultValue","arrayPush","values","offset","spreadableSymbol","isFlattenable","baseFlatten","depth","isStrict","getPrototype","objectCtorString","isPlainObject","stackClear","stackDelete","stackGet","stackHas","LARGE_ARRAY_SIZE","stackSet","pairs","Stack","allocUnsafe","cloneBuffer","buffer","isDeep","arrayFilter","resIndex","stubArray","nativeGetSymbols","getSymbols","symbol","baseGetAllKeys","keysFunc","symbolsFunc","getAllKeys","DataView","Promise","Set","promiseTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ctorString","initCloneArray","Uint8Array","cloneArrayBuffer","arrayBuffer","cloneDataView","dataView","reFlags","cloneRegExp","regexp","symbolValueOf","cloneSymbol","cloneTypedArray","typedArray","initCloneByTag","initCloneObject","baseIsMap","nodeIsMap","isMap","baseIsSet","nodeIsSet","isSet","CLONE_DEEP_FLAG","cloneableTags","baseClone","bitmask","stack","isFunc","stacked","subValue","CLONE_SYMBOLS_FLAG","cloneDeep","setCacheAdd","setCacheHas","SetCache","arraySome","cacheHas","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","equalArrays","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","mapToArray","setToArray","set","equalByTag","convert","equalObjects","objProps","objLength","othProps","objStacked","skipCtor","objCtor","othCtor","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","baseIsEqual","baseIsMatch","matchData","srcValue","isStrictComparable","getMatchData","matchesStrictComparable","baseMatches","baseHasIn","hasPath","hasFunc","hasIn","baseMatchesProperty","baseProperty","basePropertyDeep","property","baseIteratee","arrayAggregator","setter","accumulator","createBaseFor","iterable","baseFor","baseForOwn","createBaseEach","eachFunc","collection","baseEach","baseAggregator","createAggregator","initializer","countBy","now","nativeMin","debounce","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","assignMergeValue","isArrayLikeObject","safeGet","toPlainObject","baseMergeDeep","srcIndex","mergeFunc","isCommon","isTyped","baseMerge","mergeWith","arrayIncludesWith","comparator","baseMap","baseValues","baseIntersection","arrays","includes","caches","maxLength","outer","computed","castArrayLikeObject","intersection","mapped","isEqual","keyBy","merge","baseSet","nested","baseSortBy","comparer","compareAscending","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","compareMultiple","orders","objCriteria","othCriteria","ordersLength","order","baseOrderBy","iteratees","criteria","sortBy","throttle","INFINITY","createSet","baseUniq","seenIndex","uniqWith","definition","module","this","undefinedType","isIE","logMethods","_loggersByName","defaultLogger","bindMethod","obj","methodName","method","traceForIE","realMethod","replaceLoggingMethods","level","i","enableLoggingWhenConsoleArrives","defaultMethodFactory","_level","_loggerName","Logger","name","factory","self","inheritedLevel","defaultLevel","userLevel","storageKey","persistLevelIfPossible","levelNum","levelName","getPersistedLevel","storedLevel","cookie","cookieName","location","clearPersistedLevel","normalizeLevel","input","persist","childName","initialLevel","logger","_log","findInCollection","callback","targetItem","item","forEachDeep","log","trackDefaultUiEnabledState","EXCLUDED_ACTIONS","defaultUiEnabled","_","modeName","getDefaultOptions","DEV","is_array","index_of","array_from","define_property","get_descriptor","get_descriptors","object_prototype","array_prototype","get_prototype_of","is_extensible","is_function","thing","run_all","arr","deferred","resolve","reject","promise","res","rej","to_array","element","DERIVED","EFFECT","RENDER_EFFECT","MANAGED_EFFECT","BLOCK_EFFECT","BRANCH_EFFECT","ROOT_EFFECT","BOUNDARY_EFFECT","CONNECTED","CLEAN","DIRTY","MAYBE_DIRTY","INERT","DESTROYED","EFFECT_RAN","EFFECT_TRANSPARENT","EAGER_EFFECT","HEAD_EFFECT","EFFECT_PRESERVED","USER_EFFECT","EFFECT_OFFSCREEN","WAS_MARKED","REACTION_IS_UPDATING","ASYNC","ERROR_VALUE","STATE_SYMBOL","LOADING_ATTR_SYMBOL","STALE_REACTION","equals","safe_not_equal","a","b","safe_equals","lifecycle_outside_component","async_derived_orphan","effect_in_teardown","rune","effect_in_unowned_derived","effect_orphan","effect_update_depth_exceeded","state_descriptors_fixed","state_prototype_fixed","state_unsafe_mutation","svelte_boundary_reset_onerror","tracing_mode_flag","EACH_ITEM_REACTIVE","EACH_INDEX_REACTIVE","EACH_IS_CONTROLLED","EACH_IS_ANIMATED","EACH_ITEM_IMMUTABLE","TRANSITION_IN","TRANSITION_OUT","TRANSITION_GLOBAL","TEMPLATE_FRAGMENT","TEMPLATE_USE_IMPORT_NODE","UNINITIALIZED","NAMESPACE_HTML","component_context","set_component_context","context","getContext","get_or_init_context_map","push","runes","fn","pop","component","effects","create_user_effect","is_runes","e.lifecycle_outside_component","get_parent_context","parent","context_map","micro_tasks","run_micro_tasks","tasks","queue_micro_task","select_multiple_invalid_value","svelte_boundary_reset_noop","proxy","prototype","is_proxied_array","version","parent_version","update_version","with_parent","reaction","active_reaction","set_active_reaction","set_update_version","prop","descriptor","e.state_descriptors_fixed","s","target","increment","receiver","exists","p","v","has","active_effect","other_s","ls","own_keys","e.state_prototype_fixed","get_proxied_value","is","$window","is_firefox","first_child_getter","next_sibling_getter","init_operations","element_prototype","node_prototype","text_prototype","create_text","get_first_child","node","get_next_sibling","child","is_text","first_child","first","sibling","next_sibling","clear_text_content","should_defer_append","handle_error","error","effect","invoke_error_boundary","e","STATUS_MASK","set_signal_status","signal","status","update_derived_status","derived","clear_marked","deps","dep","defer_effect","dirty_effects","maybe_dirty_effects","batches","current_batch","previous_batch","batch_values","queued_root_effects","last_scheduled_effect","is_flushing","Batch","#commit_callbacks","#discard_callbacks","#pending","#blocking_pending","#deferred","#dirty_effects","#maybe_dirty_effects","root_effects","render_effects","#traverse_effect_tree","#resolve","#defer_effects","flush_queued_effects","pending_boundary","flags","is_branch","is_skippable_branch","skip","is_dirty","update_effect","flush_effects","#commit","previous_batch_values","is_earlier","batch","others","prev_queued_root_effects","marked","checked","mark_effects","blocking","schedule_effect","task","was_updating_effect","is_updating_effect","source_stacks","flush_count","set_is_updating_effect","updates","infinite_loop_guard","old_values","e.effect_update_depth_exceeded","eager_block_effects","unlink_effect","ordered_effects","ancestor","j","depends_on","depends","createSubscriber","subscribers","stop","effect_tracking","render_effect","untrack","boundary","children","Boundary","#anchor","#hydrate_open","#props","#children","#effect","#main_effect","#pending_effect","#failed_effect","#offscreen_fragment","#pending_anchor","#local_pending_count","#pending_count","#is_creating_fallback","#effect_pending","#effect_pending_subscriber","block","anchor","#get_anchor","branch","#show_pending_snippet","#hydrate_resolved_content","#hydrate_pending_content","pending","#run","pause_effect","previous_effect","previous_reaction","previous_ctx","set_active_effect","move_effect","#update_pending_count","d","internal_set","onerror","failed","destroy_effect","did_reset","calling_on_error","reset","w.svelte_boundary_reset_noop","e.svelte_boundary_reset_onerror","flatten","blockers","sync","async","restore","capture","run","expression","async_derived","unset_context","previous_component_context","activate_batch","parent_derived","label","e.async_derived_orphan","should_suspend","deferreds","async_effect","handler","teardown","fulfil","next","go","user_derived","push_reaction_value","derived_safe_equal","destroy_derived_effects","get_derived_parent_effect","execute_derived","prev_active_effect","update_reaction","update_derived","increment_write_version","is_destroying_effect","eager_effects","eager_effects_deferred","state","mutable_source","initial_value","immutable","trackable","should_proxy","untracking","current_sources","e.state_unsafe_mutation","new_value","old_value","mark_reactions","untracked_writes","set_untracked_writes","flush_eager_effects","prev_is_updating_effect","inspects","reactions","not_dirty","listening_to_form_reset","add_form_reset_listener","evt","without_reactive_context","listen_to_event_and_reset_event","event","on_reset","prev","set_is_destroying_effect","new_deps","skipped_deps","write_version","read_version","dependencies","dependency","schedule_possible_effect_self_invalidation","previous_deps","previous_skipped_deps","previous_untracked_writes","previous_sources","previous_untracking","previous_update_version","remove_reactions","remove_reaction","new_length","start_index","destroy_block_effect_children","destroy_effect_children","execute_effect_teardown","is_derived","destroyed","depends_on_old_values","should_connect","is_new","reconnect","validate_effect","e.effect_orphan","e.effect_in_unowned_derived","e.effect_in_teardown","push_effect","parent_effect","parent_last","create_effect","user_effect","defer","component_root","template_effect","previously_destroying_effect","remove_dom","controller","removed","remove_effect_dom","transitions","transition","end","destroy","pause_children","check","local","t","transparent","resume_effect","resume_children","fragment","PASSIVE_EVENTS","is_passive_event","all_registered_events","root_event_handles","delegate","events","last_propagated_event","handle_event_propagation","handler_element","owner_document","event_name","current_target","path_idx","handled_at","at_idx","handler_idx","throw_error","other_errors","parent_element","delegated","create_fragment_from_html","html","elem","assign_nodes","from_html","content","is_fragment","use_import_node","has_start","clone","text","comment","frag","append","dom","should_intro","set_text","str","mount","_mount","document_listeners","Component","intro","registered_events","event_handle","passive","unmount","anchor_node","ctx","mounted_components","BranchManager","#batches","#onscreen","#offscreen","#outroing","#transition","onscreen","offscreen","k","on_destroy","#discard","if_block","elseif","branches","update_branch","condition","has_branch","flag","pause_effects","to_destroy","controlled_anchor","group","groups","destroy_effects","fast_path","parent_node","offscreen_anchor","each","get_collection","get_key","render_fn","fallback_fn","items","is_controlled","fallback","each_array","first_run","commit","reconcile","move","create_item","is_animated","current","to_animate","matched","stashed","link","destroy_length","dest","next_node","get_value","svg","mathml","skip_warning","raf","run_tasks","loop","fulfill","dispatch_event","css_property_to_camelcase","style","parts","word","css_to_keyframe","css","keyframe","part","formatted_property","linear","get_fn","get_params","is_intro","is_outro","is_both","is_global","direction","current_options","inert","overflow","outro","get_options","animate","counterpart","t2","on_finish","aborted","o","delay","tick","easing","keyframes","get_t","animation","t1","delta","duration","needs_overflow_hidden","r","f","clsx","_clsx","whitespace","to_class","hash","directives","classname","len","set_class","is_html","prev_classes","next_classes","next_class_name","is_present","select_option","select","mounting","w.select_multiple_invalid_value","option","get_option_value","option_value","init_select","observer","bind_select_value","is_reset","query","selected_option","IS_CUSTOM_ELEMENT","IS_HTML","set_attribute","attribute","attributes","get_attributes","get_setters","setters_cache","cache_key","setters","descriptors","element_proto","bind_checked","IS_UNMOUNTED","store_get","store","store_name","stores","is_synchronous_callback","subscribe_to_store","get_store","setup_stores","cleanup","onMount","invalidate","unsub","subscriber_queue","writable","run_queue","subscriber","update","subscribe","initialState","controlsStore","PUBLIC_VERSION","caretDown","caretUp","div","root_1","$.first_child","fragment_1","$.sibling","handleOptionChange","$$props","choiceItem","root_3","$.set_text","text_1","$.get","$.set_attribute","selectedValue","$$value","label_1","root_5","$$render","consequent_1","consequent","alternate","button","$.child","$.append","$$anchor","actionInstance","$$item","$$array","ActionOption","SubAction","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","freeze","seal","create","construct","x","_len","_key","Func","_len2","_key2","arrayForEach","unapply","arrayLastIndexOf","arrayPop","arraySplice","stringToLowerCase","stringToString","stringMatch","stringReplace","stringIndexOf","stringTrim","objectHasOwnProperty","regExpTest","typeErrorCreate","unconstruct","_len3","_key3","_len4","_key4","addToSet","transformCaseFunc","l","lcElement","cleanArray","newObject","lookupGetter","desc","fallbackValue","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","NODE_TYPE","getGlobal","_createTrustedTypesPolicy","trustedTypes","purifyHostElement","suffix","ATTR_NAME","policyName","scriptUrl","_createHooksMap","createDOMPurify","window","DOMPurify","document","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","NamedNodeMap","HTMLFormElement","DOMParser","ElementPrototype","cloneNode","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","FORBID_TAGS","FORBID_ATTR","EXTRA_ELEMENT_HANDLING","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","SANITIZE_NAMED_PROPS_PREFIX","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","tagName","parentTagName","_forceRemove","_removeAttribute","_initDocument","dirty","doc","leadingWhitespace","matches","dirtyPayload","body","_createNodeIterator","_isClobbered","_isNode","_executeHooks","currentNode","hook","_sanitizeElements","_isBasicCustomElement","parentNode","childNodes","childCount","childClone","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","hookEvent","attr","namespaceURI","attrValue","initValue","_sanitizeShadowDOM","shadowNode","shadowIterator","importedNode","returnNode","nodeIterator","serializedHTML","entryPoint","hookFunction","purify","handleClick","node_1","sanitizedSvg","$.template_effect","$0","alternate_1","node_4","div_1","root_6","node_5","classes_1","$.set_class","menuPosition","consequent_2","$controlsStore","classes","consequent_3","cubic_out","slide","axis","opacity","primary_property","primary_property_value","secondary_properties","capitalized_secondary_properties","padding_start_value","padding_end_value","margin_start_value","margin_end_value","border_width_start_value","border_width_end_value","toggleExpanded","getToggleExpandedIcon","controlsStyles","controlsCollapsible","div_2","root_2","$.each","groupKey","groupControls","div_3","root_4","sortControlEntries","controlKey","controlOptions","$$array_1","ActionControl","control","hasVisibleControls","expanded","BaseControl","gm","typedKeys","typedValues","includesWithType","validValues","GMControl","containerElement","isGmModeEvent","controlsContext","GmReactiveControls","container","modeType","section","mode","EventForwarder","eventName","payload","enabled","eventData","eventName2","eventData2","multiFeatureMode","featuresPayload","inputPayload","eventNameWithPrefix","sourceName","isGmControlEvent","isGmEvent","fieldName","isBaseMapEvent","EventBus","eventHandler","controlHandler","handlers","gmEventName","mapEventName","eventSection","eventHandlers","handlerIndex","handlerItem","BaseEventListener","currentSectionName","currentModeName","actionType","targetMode","sectionName","ControlEventListener","bus","MODE_TYPES","ACTION_TYPES","SHAPE_NAMES","SPECIAL_SHAPE_NAMES","ALL_SHAPE_NAMES","EXTRA_DRAW_MODES","DRAW_MODES","HELPER_MODES","EDIT_MODES","isLngLat","propertyValidators","BaseDomMarker","earthRadius","factors","feature","geom","properties","feat","point","coordinates","isNumber","ring","lineString","featureCollection","features","fc","multiLineString","multiPolygon","radiansToLength","radians","units","factor","lengthToRadians","distance","radiansToDegrees","degreesToRadians","degrees","convertLength","originalUnit","finalUnit","num","coordEach","geojson","excludeWrapCoord","geometry","stopG","coords","geometryMaybeCollection","wrapShrink","coordIndex","isGeometryCollection","isFeatureCollection","isFeature","featureIndex","geomIndex","multiFeatureIndex","geometryIndex","geomType","featureEach","featureReduce","initialValue","previousValue","currentFeature","geomEach","g","featureProperties","featureBBox","featureId","geomReduce","currentGeometry","flattenEach","bbox","id","coordinate","coord","index_default","getCoord","getCoords","getGeom","getType","_name","destination","origin","bearing","coordinates1","longitude1","latitude1","bearingRad","latitude2","longitude2","lng","lat","center","radius","steps","centroid","xSum","ySum","rhumbBearing","bear360","calculateRhumbBearing","from","to","phi1","phi2","deltaLambda","deltaPsi","theta","rhumbDistance","distanceInMeters","calculateRhumbDistance","R","DeltaPhi","DeltaLambda","DeltaPsi","q","rhumbDestination","wasNegativeDistance","calculateRhumbDestination","lambda1","cloneFeature","cloneFeatureCollection","cloneGeometry","cloned","cloneProperties","deepSlice","transformRotate","angle","pivot","mutate","pivotCoord","pointCoords","finalAngle","newCoords","xSemiAxis","ySemiAxis","centerCoords","quadrantParameters","parameters","c","m","A","w","param","calculateFinalBearing","coordinates2","lon1","lon2","lat1","lat2","bear","dLat","dLon","polygonToLine","poly","singlePolygonToLine","multiPolygonToLine","coordsToLine","multiPoly","lines","isEqualPosition","position1","position2","isLineStringFeature","geoJson","isMultiLineStringFeature","isPolygonFeature","isMultiPolygonFeature","multiLineStringToFeatureCollection","lineCoordinates","getLngLatDiff","startLngLat","endLngLat","isPosition","position","eachCoordinateWithPath","skipClosingCoordinate","counter","nestedKeys","traverseGeoJson","geoJsonItem","currentPath","isPolygon","subItem","itemType","nextIsPolygon","findCoordinateWithPath","targetPosition","targetIndex","eachSegmentWithPath","nextGeoJsonItem","nextPath","findCoordinateIndices","lngLat","indices","turfCoordEach","currentCoord","twoCoordsToLineString","getBboxFromTwoCoords","lngLat1","lngLat2","lng1","lng2","minX","minY","maxX","maxY","twoCoordsToGeoJsonRectangle","bBox","southWest","northEast","geoJsonPointToLngLat","getGeoJsonBounds","bounds","boundsToBBox","bBoxContains","bBoxBounds","boundsContains","getGeoJsonCoordinatesCount","getAllGeoJsonCoordinates","allCoordinatesEqual","featureLngLats","getGeoJsonFirstPoint","shapeGeoJson","firstPoint","getEuclideanDistance","point1","point2","getEuclideanSegmentNearestPoint","linePoint1","linePoint2","targetPoint","x1","y1","x2","y2","px","py","vx","vy","wx","wy","c1","c2","removeVertexFromLine","lineGeoJson","vertexLngLat","absCoordIndex","removeVertexFromPolygon","coordIndices","coordinatesPath","targetCoordIndex","removeVertexFromMultiPolygon","coordinatesContainer","removeVertexFromGeoJsonFeature","calculatePerimeter","perimeter","segment","turfDistance","convertToLineStringFeatureCollection","sourceFeatureCollection","targetFeatureCollection","lineFeature","lngLatToGeoJsonPoint","shape","getGeoJsonCircle","circleGeoJson","turfCircle","getEllipseParameters","xSemiAxisLngLat","rimLngLat","cwAngle","turfBearing","ccwAngleRad","ccwRimAngleRad","dRim","pxReproj","pyReproj","xPart","ellipseSteps","getGeoJsonEllipse","ellipseGeoJson","turfEllipse","toPolygonAllowedShapes","FeatureData","shapeCentroid","inputGeoJson","geoJsonProperties","validator","extraProperties","markerData","featureGeoJson","diff","mandatoryProperties","protectedKeys","newProperties","diffProperties","filteredProperties","fieldNames","deleteProps","atomic","isGmHelperEvent","isGmGeofencingViolationEvent","BaseAction","choiceItemValue","isGmDrawEvent","isGmDrawShapeEvent","isGmDrawLineDrawerEvent","isGmDrawFreehandDrawerEvent","BaseDraw","geoJsonFeatures","forceMode","featureData","BaseCircle","svgElement","DrawCircleMarker","isTouchScreen","convertToThrottled","methods","throttledMethods","convertToDebounced","debouncedMethods","withPromiseTimeoutRace","errorMessage","defaultErrorMessage","pointerEvents","baseMapEventNames","isPointerEventName","isBaseMapEventName","isMapWithOnceMethod","isMapPointerEvent","isCursorEvent","isPointerEventWithModifiers","isPartialLayer","allowedTypes","DrawCircle","markerLngLat","eventLngLat","BaseHelper","isSnapGuidesHelper","instance","isAutoTraceHelper","isPinHelper","lineToPolygon","_a","_b","_c","autoComplete","orderCoords","lineStringToPolygon","autoCompleteCoords","multiCoords","largestArea","area","calculateArea","turfBBox","last","west","south","east","north","LineDrawer","eventType","markerInfo","clickedMarkerInfo","totalMarkersCount","markerIndex","snappingMarkers","markerPath","markerElement","eventTarget","eventElement","newLngLat","existingMarkerInfo","addedLngLats","targetLngLat","finishLngLat","previousLngLat","withControlMarker","DrawLine","shapeCoordinates","DrawMarker","customMarker","symbolLayer","layer","iconOpacity","iconSize","baseSize","sizeStr","iconElement","combine","feature2","quickselect","left","right","compare","quickselectStep","defaultCompare","z","sd","newLeft","newRight","swap","tmp","RBush$1","maxEntries","intersects","toBBox","nodesToSearch","childBBox","contains","tmpNode","createNode","equalsFn","indexes","goingUp","findItem","height","N","M","calcBBox","N2","N1","multiSelect","right2","right3","minArea","minEnlargement","targetNode","bboxArea","enlargement","enlargedArea","isNode","insertPath","extend","splitIndex","newNode","minOverlap","bbox1","distBBox","bbox2","overlap","intersectionArea","compareMinX","compareNodeMinX","compareMinY","compareNodeMinY","xMargin","yMargin","leftBBox","rightBBox","margin","bboxMargin","siblings","destNode","mid","total","polygonArea","ringArea","FACTOR","PI_OVER_180","coordsLength","lower","middle","upper","lowerX","middleY","upperX","epsilon","splitter","resulterrbound","sum","elen","flen","h","Q","Qnew","hh","bvirt","enow","fnow","eindex","findex","hindex","estimate","vec","ccwerrboundA","ccwerrboundB","ccwerrboundC","B","C1","C2","D","u","orient2dadapt","ax","ay","bx","by","cx","cy","detsum","acxtail","acytail","bcxtail","bcytail","ahi","alo","bhi","blo","_i","_j","_0","s1","s0","t0","u3","acx","bcx","acy","bcy","det","errbound","C1len","C2len","Dlen","orient2d","detleft","detright","pointInPolygon","ii","u1","v1","u2","v2","currentP","nextP","y","numContours","contour","contourLen","booleanPointInPolygon","pt","polys","inBBox","polyResult","pip","geojsonPolygonSelfIntersections","filterFn","output","allEdgesAsRbushTreeItems","ring0","edge0","rbushTreeItem","tree","rbush","ringA","edgeA","bboxOverlaps","bboxIsect","ring1","edge1","ifIsectAddToOutput","ring02","edge02","start0","end0","start1","end1","isect","intersect","frac0","frac1","unique","edge","x0","y0","x3","y3","denom","x4","y4","array1","array2","simplepolygon","numRings","vertices","equalArrays2","isUnique","numvertices","selfIsectsData","numSelfIsect","outputFeatureArray","windingOfRing","output2","determineParents","setNetWinding","pseudoVtxListByRingAndEdge","isectList","PseudoVtx","modulo","Isect","numIsect","allIsectsAsIsectRbushTreeItem","isectRbushTree","rbush2","coordToFind","IsectRbushTreeItemFound","queue","leftIsect","isectAfterLeftIsect","isectBeforeLeftIsect","windingAtIsect","isConvex","popped","startIsect","currentOutputRingParent","currentOutputRingWinding","currentOutputRing","currentOutputRingCoords","currentIsect","walkingRingAndEdge","nxtIsect","nxtIsectInQueue","pushing","featuresWithoutParent","i2","parentArea","j2","netWinding","setNetWindingOfChildren","ParentNetWinding","ringAndEdgeIn","ringAndEdgeOut","nxtIsectAlongEdgeIn","ringAndEdge1","ringAndEdge2","nxtIsectAlongRingAndEdge1","nxtIsectAlongRingAndEdge2","ringAndEdge1Walkable","ringAndEdge2Walkable","pts","righthanded","leftVtx","winding","isUnique2","unkinkPolygon","polygon2","featureCollection2","DrawPolygon","geoJsonPolygon","turfClone","DrawRectangle","rectangleData","controlMarker","DrawTextMarker","DrawEllipse","drawClassMap","createDrawInstance","isGmEditEvent","isModeType","isActionType","isDrawModeName","isEditModeName","isHelperModeName","isModeName","DrawEventListener","actionInstanceKey","BaseEdit","sourceNames","layerId","subName","sourceFeatures","targetFeatures","ext","I","E","T","S","L","C","O","P","F","G","Y","X","U","V","H","Z","W","K","J","$","tt","et","nt","it","rt","st","at","ot","ut","lt","ht","ct","ft","gt","vt","yt","dt","_t","mt","kt","xt","It","Et","Nt","Tt","St","Lt","Ct","Rt","wt","Ot","bt","Mt","At","Pt","Dt","Ft","Gt","qt","Yt","zt","Xt","Bt","Ut","Vt","Ht","Zt","jt","Wt","Kt","Jt","Qt","$t","te","ee","ne","ie","re","se","ae","oe","ue","le","he","ce","fe","ge","ve","ye","de","_e","pe","me","ke","xe","Ie","Ee","Ne","Te","Se","Le","Ce","Re","we","Oe","be","Me","Ae","Pe","De","Fe","Ge","qe","Ye","ze","Xe","Be","Ue","Ve","He","Ze","je","We","Ke","Je","Qe","$e","tn","en","nn","rn","sn","an","on","un","ln","hn","cn","gn","vn","yn","dn","_n","xn","pn","mn","kn","In","En","Nn","Tn","Sn","Ln","Cn","Rn","wn","On","bn","Mn","An","Pn","Dn","Fn","Gn","qn","Yn","zn","Xn","Bn","Un","Vn","Hn","Zn","jn","Wn","Kn","Jn","Qn","ri","$n","ti","ei","ni","si","ai","oi","ui","li","hi","ci","fi","gi","vi","yi","di","pi","adder","Adder","add","temp","bv","av","halfPi","quarterPi","tau","abs","atan","atan2","cos","sin","sqrt","acos","asin","streamGeometry","stream","streamGeometryType","streamObjectType","streamLine","streamPolygon","geometries","closed","geoStream","spherical","cartesian","lambda","phi","cosPhi","cartesianDot","cartesianCross","cartesianAddInPlace","cartesianScale","vector","cartesianNormalizeInPlace","compose","rotationIdentity","rotateRadians","deltaPhi","deltaGamma","rotationLambda","rotationPhiGamma","forwardRotationLambda","rotation","cosDeltaPhi","sinDeltaPhi","cosDeltaGamma","sinDeltaGamma","circleStream","cosRadius","sinRadius","step","circleRadius","clipBuffer","clipLine","dx","dy","pointEqual","Intersection","points","clipPolygon","segments","compareIntersection","startInside","interpolate","subject","clip","p0","p1","isSubject","ascending","bisector","ascendingComparator","lo","merged","clipMax","clipMin","clipExtent","visible","a1","corner","comparePoint","ca","cb","activeStream","bufferStream","x__","y__","v__","x_","y_","v_","clean","clipStream","lineStart","lineEnd","polygonStart","polygonEnd","polygonInside","a0","b0","b1","cleanInside","linePoint","polygonContains","normal","point0","lambda0","phi0","sinPhi0","cosPhi0","sinPhi1","cosPhi1","sign","absDelta","antimeridian","arc","phiArc","boundsStream","boundsPoint","pointVisible","sink","rotatedStart","ringBuffer","ringSink","polygonStarted","pointRing","ringStart","ringEnd","pointLine","ringSegments","validSegment","clipAntimeridian","clipAntimeridianLine","clipAntimeridianInterpolate","sign0","sign1","clipAntimeridianIntersect","sinLambda0Lambda1","clipCircle","cr","smallRadius","notHemisphere","c0","v0","v00","code","two","pa","pb","n1","n2","n2n2","n1n2","determinant","n1xn2","uu","polar","meridian","q1","transformer","TransformStream","fitExtent","projection","extent","fitSize","maxDepth","cosMinDistance","resample","project","delta2","resampleNone","resampleLineTo","d2","lambda2","dx2","dy2","dz","lambda00","x00","y00","a00","b00","c00","resampleStream","ringPoint","transformRadians","projectionMutator","projectAt","projectRotate","preclip","postclip","projectResample","projectTransform","cacheStream","invert","recenter","azimuthalRaw","azimuthalInvert","sc","cc","azimuthalEqualAreaRaw","cxcy","azimuthalEquidistantRaw","geoAzimuthalEquidistant","equirectangularRaw","BufferOp","GeoJSONReader","GeoJSONWriter","jsts","results","buffered","bufferFeature","multiBuffered","geometry2","buffered2","defineProjection","projected","projectCoords","reader","writer","coordsIsNaN","unprojectCoords","proj","TinyQueue","top","bottom","pos","halfLength","best","checkWhichEventIsLeft","e1","e2","checkWhichSegmentHasRightEndpointFirst","seg1","seg2","Event","ringId","eventId","eventToCheck","fillEventQueue","eventQueue","processFeature","featureOrGeometry","iii","Segment$1","testSegmentIntersect","numeA","numeB","uA","uB","runCheck","ignoreSelfIntersections","intersectionPoints","outQueue","Segment","otherSeg","sweeplineIntersections","lib","lineIntersect","line1","line2","removeDuplicates","intersections","booleanClockwise","cur","rewind","reverse","rewindFeature","rewoundFeature","rewindLineString","rewindPolygon","lineCoords","pointBasedGeometryType","lineBasedGeometryType","isPointBasedGeoJsonFeature","isLineBasedGeoJsonFeature","moveGeoJson","lngLatDiff","getBufferedOuterPolygon","mapAdapter","polygonGeoJson","widthMeters","getMovedGeoJson","moveFeatureData","shapeCenter","allFeaturePointsInPolygon","containerGeoJson","isGeoJsonFeatureInPolygon","allPointsInPolygon","getFeatureFirstPoint","fixGeoJsonFeature","resultFeature","getCustomFeatureId","idPropertyName","BaseDrag","shapeLngLat","shapeUpdateMethod","updatedGeoJson","isUpdated","oldLngLat","oldCenter","newCenterCoords","circleRimLngLat","circlePolygon","UNIT_SYSTEMS","UNITS","toMod","mod","formatNumber","formatDistance","range","formatArea","EditChange","featureUpdated","markerPosition","insertIndex","lngLatEnd","coordPath","vertexIdx","vertexRatio","lngLatStart","shapeCoords","startIndex","oppositeVertexIndex","oppositeCoordinate","booleanDisjoint","feature1","bool","flatten1","flatten2","disjoint","geom1","geom2","compareCoords","isPointOnLine","isLineOnLine","isLineInPoly","isPolyInPoly","isPointOnLineSegment","lineString1","lineString2","coord1","coord2","lineSegmentStart","lineSegmentEnd","dxc","dyc","dxl","dyl","pair1","pair2","booleanIntersects","isNumeric","mathceil","mathfloor","bignumberError","tooManyDigits","BASE","LOG_BASE","POWS_TEN","SQRT_BASE","MAX","configObject","convertBase","parseNumeric","BigNumber","ONE","DECIMAL_PLACES","ROUNDING_MODE","TO_EXP_NEG","TO_EXP_POS","MIN_EXP","MAX_EXP","CRYPTO","MODULO_MODE","POW_PRECISION","FORMAT","ALPHABET","alphabetHasNormalDecimalDigits","alphabet","caseChanged","isNum","intCheck","round","out","maxOrMin","pow2_53","random53bitInt","dp","rand","decimal","toBaseOut","baseIn","baseOut","arrL","callerIsToString","xc","rm","toFixedPoint","coeffToString","multiply","base","xlo","xhi","carry","klo","khi","aL","bL","cmp","subtract","more","prod","prodL","qc","rem","remL","rem0","xi","xL","yc0","yL","yz","yc","bitFloor","format","toExponential","normalise","basePrefix","dotAfter","dotBefore","isInfinityOrNaN","whitespaceOrPlus","p2","rd","pows10","valueOf","half","isModExp","nIsBig","nIsNeg","nIsOdd","isOdd","xLTy","xcL","ycL","ylo","yhi","zc","sqrtBase","rep","g1","g2","groupSeparator","intPart","fractionPart","isNeg","intDigits","md","d0","d1","exp","n0","min","max","zs","SplayTreeNode","SplayTreeSetNode","SplayTree","newTreeRight","newTreeLeft","comp","currentLeft","currentRight","nextLeft","nextRight","SplayTreeSet","_SplayTreeSet","isValidKey","elements","nodes","nodeRight","nodeLeft","retainSet","modificationCount","copyChildren","node2","SplayTreeSetEntryIterableIterator","SplayTreeKeyIterableIterator","SplayTreeIterableIterator","constant_default","compare_default","eps","almostEqual","orient_default","almostCollinear","area2","identity_default","snap_default","xTree","yTree","snapCoord","snap","eps2","precision","isInBbox","getBboxOverlap","b2","lowerY","upperY","crossProduct","dotProduct","sineOfAngle","pShared","pBase","pAngle","vBase","vAngle","cosineOfAngle","horizontalIntersection","verticalIntersection","pt1","pt2","kross","SweepEvent","_SweepEvent","ptCmp","aPt","bPt","isLeft","otherEvents","iMax","numEvents","evt1","evt2","baseEvent","fillCache","linkedEvent","nextEvent","asine","acosine","bsine","bcosine","RingOut","_RingOut","allSegments","ringsOut","prevEvent","startingPoint","intersectionLEs","availableLEs","firstPt","lastPt","indexLE","jMax","intersectionLE","ringEvents","prevPt","nextPt2","nextPt","iStart","iEnd","orderedPoints","enclosing","leftMostEvt","prevSeg","prevPrevSeg","PolyOut","exteriorRing","geom0","ringGeom","MultiPolyOut","rings","polyGeom","enclosingRing","SweepLine","SplayTreeSet2","newEvents","nextSeg","prevMySplitter","prevInter","newEventsFromSplit","nextMySplitter","nextInter","mySplitter","inter","seg","rightSE","Operation","moreGeoms","operation","multipolys","MultiPolyIn","mpA","SplayTreeSet3","sweepEvents","sweepLine","operation_default","segmentId","_Segment","alx","blx","arx","brx","aly","bly","ary","bry","aCmpBLeft","bCmpARight","bCmpALeft","aCmpBRight","leftSE","windings","leftPt","rightPt","cmpPts","newRightSE","tBbox","oBbox","bboxOverlap","tlp","trp","olp","orp","touchesOtherLSE","touchesThisLSE","touchesOtherRSE","touchesThisRSE","alreadyLinked","newLeftSE","oldRightSE","newSeg","tmpEvt","consumer","consumee","beforeState","ringsAfter","windingsAfter","mpsAfter","polysAfter","polysExclude","mp","mpsBefore","noBefores","noAfters","least","most","isJustSubject","mps","RingIn","geomRing","isExterior","BigNumber2","prevPoint","PolyIn","geomPoly","ringSweepEvents","polySweepEvents","difference2","geoms","differenced","polyclip.difference","RBush","load","json","geojsonRbush","truncate","truncateCoords","lineSegment","lineSegmentFeature","createSegments","previousCoords","currentCoords","coords1","coords2","__defProp","__defProps","__getOwnPropDescs","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","__spreadValues","__spreadProps","nearestPointOnLine","inputPoint","inputPos","closestPt","totalDistance","lineDistance","currentLineStringIndex","_featureIndex","lineStringIndex","maxSegmentIndex","startPos","stopPos","segmentLength","intersectPos","wasEnd","nearestPointOnSegment","pointDistance","segmentDistance","dot","v1x","v1y","v1z","v2x","v2y","v2z","cross","magnitude","normalize","mag","lngLatToVector","vectorToLngLat","zClamp","posA","posB","posC","segmentAxis","targetAxis","intersectionAxis","I1","I2","segmentAxisNorm","cmpAI","cmpIB","lineSplit","lineType","splitterType","truncatedSplitter","splitLineWithPoint","splitLineWithPoints","search","closestLine","findClosestFeature","startPoint","endPoint","pointsEquals","closestSegment","lastCoords","previous","splitterCoords","closestFeature","closestDistance","dist","EditCut","bBoxfeatures","coordBounds","polygonScreenBounds","cutGeoJson","bufferedCutGeoJson","isCut","resultGeoJson","geoJsonDifference","geoJsonDiff","turfDifference","EditDelete","EditDrag","EditRotate","deltaAngle","bearingStart","rotationAngle","editClassMap","createEditInstance","EditEventListener","ShapeMarkersHelper","allowedEventNames","featureMarkerData","sharedMarker","oldPosition","newMarkerData","markerKey","existingMarker","markerFeatureData","shapeSegments","endMarkerIndexes","segmentData","lineEndMarker","segmentsData","verticesCount","divider","acc","middlePoint","middlePath","markerItem","currentMarkerKeys","action","positionData","parentFeature","SnappingHelper","sectionKey","lngLats","snappingLngLat","closestPointData","customLngLat","coordPoint","featuresPointsSnapping","featuresLineSnapping","snappingHandler","nearestPointLngLat","nearestPointCoord","ZoomToFeaturesHelper","bboxArray","helperClassMap","createHelperInstance","HelperEventListener","GmEvents","MAX_DIFF_ITEMS","SourceUpdateManager","combinedDiff","updatePromise","promises","idx","pendingPromises","pendingDiffOrNull","nextDiffOrNull","nextRemoveIds","pendingAdd","pendingUpdate","nextUpdate","updatedFeature","pendingAddIdx","pendingUpdateIdx","BaseSource","Features","maxCounter","newFeatureId","callbackfn","featureStore","featureIdOrFeatureData","imported","opts","customId","allowedShapes","shapeTypes","useMapLibreSource","resultFeatureCollection","inputSource","sourceGeoJsonFeatures","sourceFeature","defaultSource","targetSourceName","layers","shapeName","partialStyle","shapeNames","layerOptions","getLayerId","tmpLayerId","SHAPE_MAP","BaseMapAdapter","closestPoint","minDistance","nearestCoordinates","BaseLayer","MaplibreLayer","MaplibreDomMarker","mapInstance","ml","BasePopup","MaplibrePopup","htmlContent","MaplibreSource","sourceId","updateStorage","mlDiff","sanitizedProperties","addOrUpdateProperties","removeProperties","maplibrePointerEvents","isMaplibreSupportedPointerEventName","MaplibreAdapter","image","loadedImage","cursor","interactionTypes","interactionType","queryCoordinates","featureSourceName","item1","item2","mlBounds","sw","arg2","listener","getMapAdapter","mergeByTypeCustomizer","countMap","GmOptions","inputOptions","isModeEnabled","isModeAvailable","actionName","MarkerPointer","invisibleMarker","htmlElement","snappedLngLat","customShapeTriangle","customShapeRectangle","isGmFeatureBeforeCreateEvent","isGmFeatureBeforeUpdateEvent","modeActions","isNonEmptyArray","union2","unioned","polyclip.union","BaseGroupEdit","tmpFeatureData","newFeatureGeoJson","Geoman","mapWithGeoman","GmControl","controlsElement","onLoad","onLoaded","removeSources","MAX_VALID_LATITUDE","markerIcons","createGeomanInstance","geoman"],"mappings":"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","x_google_ignoreList":[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,300,301,307,309,324,325,326,327,328,329,330,331,332,333,334,335,337,338,339,354,358,359,360,361,362,363,364,365,366,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,424,425,426,427,428,429,430,431,432,433,434,469]}